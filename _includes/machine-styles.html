{% for machine in page.machines %}
  {% capture machine_type %}{{ machine.type | remove:"-dbg" }}{% endcapture %}
  {% if machine_type == "c1p" %}
    {% assign machine_app = "c1pjs" %}
  {% elsif machine_type == "pdp10" or machine_type == "pdp11" %}
    {% assign machine_app = "pdpjs" %}
  {% else %}
    {% capture machine_app %}{{ machine_type }}{% endcapture %}
  {% endif %}
  {% unless site.pcjs.compiled == true and machine.uncompiled != true %}
    {% if machine_type == "c1p" %}
      {% capture machine_style %}{{ site.baseurl }}/modules/c1pjs/templates/components.css{% endcapture %}
    {% else %}
      {% capture machine_style %}{{ site.baseurl }}/modules/shared/templates/components.css{% endcapture %}
    {% endif %}
  {% else %}
    {% capture machine_style %}{{ site.baseurl }}/versions/{{ machine_app }}/{{ site.pcjs.version }}/components.css{% endcapture %}
  {% endunless %}
  {% unless machine_styles contains machine_style %}
	<link rel="stylesheet" type="text/css" href="{{ machine_style }}">
  {% endunless %}
  {% capture machine_styles %}{{ machine_styles }}{{ machine_style }}{% endcapture %}
{% endfor %}
