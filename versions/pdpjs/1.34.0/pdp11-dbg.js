(function(){/*
 http://pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rx11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/drive.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2017
*/
var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var ea=0;function da(a){return"jscomp_symbol_"+(a||"")+ea++}
function fa(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ga(this)}});fa=function(){}}function ga(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ha(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ia(a){fa();ca();fa();var b=a[Symbol.iterator];return b?b.call(a):ga(a)}
function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function ja(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
ja("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});ja("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
var ka={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],21368320:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},la={zi:0,Fe:1,Gi:2,Hi:3,Ii:4,Ji:5,Ki:6,Li:7,Md:8,Mi:9,Ge:10,Ni:11,Oi:12,He:13,Pi:14,Qi:15,Ri:16,Si:17,Ti:18,Ui:19,Vi:20,Wi:21,Xi:22,Yi:23,Zi:24,$i:25,aj:26," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,
"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Id:65,vi:66,Bi:67,bj:68,E:69,hj:70,kj:71,wj:72,yj:73,zj:74,Aj:75,Bj:76,Ej:77,Gj:78,Mj:79,Pj:80,Q:81,Rj:82,Uj:83,ck:84,ek:85,gk:86,hk:87,lk:88,mk:89,xf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,nk:97,pk:98,sk:99,d:100,e:101,tk:102,uk:103,vk:104,wk:105,Ak:106,k:107,Bk:108,Ck:109,n:110,Dk:111,p:112,q:113,r:114,Ek:115,t:116,Hk:117,Ik:118,Jk:119,x:120,
y:121,z:122,"{":123,"|":124,"}":125,"~":126,cc:127};function r(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Vd=b.comment;this.vf=b;this.exports={};this.H=this.bindings={};a=this.id.indexOf(".");0>a?this.Mb=this.id:(this.wb=this.id.substr(0,a),this.Mb=this.id.substr(a+1));this.A={ready:!1,gb:!1,wd:!1,aa:!1,error:!1};this.Nc=null;this.A.error=!1;this.ha=c||0;this.F=this.f=this.D=this.J=this.Ta=null;ma.push(this)}function oa(a,b,c){pa[a]&&b&&(pa[a][b]=c)}
function qa(){return Date.now()||+new Date}function v(a){window&&window.alert(a)}function ra(a){var b=!1;window&&(b=window.confirm(a));return b}function ta(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<ma.length;b++){var d=ma[b];a&&d.id.indexOf(a)||c.push(d)}return c}function ua(a){if(void 0!==a){var b;for(b=0;b<ma.length;b++)if(ma[b].id===a)return ma[b]}return null}
function va(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<ma.length;d++)if(c)c==ma[d]&&(c=null);else if(!(a!=ma[d].type||b&&ma[d].id.indexOf(b)))return ma[d]}return null}function wa(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){v(c.message+" ("+a+")")}return b}
function xa(a,b){var c=w;b=x(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var k=g.getAttribute("class");if(k)for(var l=k.split(" "),m=0;m<l.length;m++)switch(k=l[m],k){case c+"-binding":(k=wa(g))&&k.binding&&a.va(k.type,k.binding,g,k.value),m=l.length}}}}
function x(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function ya(a,b,c){for(var d=!0;c<b.length;){var e=b[c],f=e[0],g=null;0<=za.indexOf(f)&&(g=function(c){return function(){ya(a,b,c)}}(c+1));var k=Aa[f];if(k)if(!g)d=k(e[1],e[2],e[3]);else{if(!k(g,e[1],e[2],e[3]))break}else{var d=!1,l=va(e[1],a);if(l)if(k=Ba[f])d=k(l,e[2],e[3]);else if(k=l.exports)if(k=k[f])if(d=!0,!g)d=k.call(l,e[2],e[3]);else if(!k.call(l,g,e[2],e[3]))break}if(!d){v("Script error ("+f+")");break}c++}return d}h=r.prototype;
h.toString=function(){return this.name?this.name:this.id||this.type};
h.va=function(a,b,c){switch(b){case "clear":return this.H[b]||(this.H[b]=c,c.onclick=function(a){return function(){a.H.print&&(a.H.print.value="")}}(this)),!0;case "print":return this.H[b]||(this.Ta=this.H[b]=c,c.value="",this.v=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(c),this.T=function(a){this.v(a,this.Mb)}),!0;default:return!1}};h.log=function(){};h.v=function(){};
h.status=function(a){this.v(this.Mb+": "+a)};h.T=function(a,b,c){c=c||this.type;b||v((c?c+": ":"")+a)};function Da(a,b){a.A.error=!0;a.T(b)}function Ea(a){return a.A.error?(a.v(a.toString()+" error"),!0):!1}function Fa(a,b){b&&(a.A.ready?b():a.Nc=b);return a.A.ready}function y(a,b){a.A.error||(a.A.ready=!1!==b,a.A.ready&&(b=a.Nc,a.Nc=null,b&&b()))}function Ga(a,b){a.A.gb&&(b?a.A.wd=!0:void 0===b&&a.v(a.toString()+" busy"));return a.A.gb}
function Ha(a,b){if(a.A.wd)return a.A.gb=!1,a.A.wd=!1;if(a.A.error)return a.v(a.toString()+" error"),!1;a.A.gb=b;return a.A.gb}h.Da=function(){return this.A.aa=!0};h.Ca=function(a,b){b&&(this.A.aa=!1);return!0};function z(a,b){if(a.F){a===a.F?b|=0:b=b||a.ha;var c=a.F.ha&b;return!!b&&c===b||!!(c&a.F.je)}return!1}function C(a,b,c,d){a.F&&(!0===c||z(a,c|0))&&a.F.message(b,d)}
window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]));var pa=window?window.PCjs.Machines:{},ma=window?window.PCjs.Components:[],za=["hold","sleep","wait"],Aa={alert:function(a){v(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Ba={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
function Ja(a,b){var c;if(a){b||(b=10);var d=a.charAt(0),e=0<a.indexOf(",");e&&(a=a.replace(/,/g,""));"#"==d?(b=8,d=null):"$"==d&&(b=16,d=null);null==d?a=a.substr(1):("0"==d&&(d=a.charAt(1),"b"==d&&e&&(b=2,d=null),"o"==d?(b=8,d=null):"x"==d&&(b=16,d=null)),null==d?a=a.substr(2):(d=a.charAt(a.length-1).toLowerCase(),"y"==d?(b=2,d=null):"."==d?(b=10,d=null):"h"==d&&(b=16,d=null),null==d&&(a=a.substr(0,a.length-1))));var f,d=a;((e=b)&&10!=e?16==e?d.match(/^[0-9a-f]+$/i):8==e?d.match(/^[0-7]+$/):2==e&&
d.match(/^[01]+$/):d.match(/^[0-9]+$/))&&!isNaN(f=parseInt(a,b))&&(c=f|0)}return c}function Ka(a,b,c){var d="";b?32<b&&(b=32):b=32;for(var e=null==a||isNaN(a),f=c=c||b;0<b--;)f||(d=","+d,f=c),d=(e?"?":a&1?"1":"0")+d,a>>=1,f--;return d}function E(a,b,c){var d="";b?11<b&&(b=11):b=a&-16777216?11:a&-65536?8:6;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;)d=String.fromCharCode((a&7)+48)+d,a>>=3;return(c?"0o":"")+d}
function La(a){var b=2,c="";b?10<b&&(b=10):b=a&-65536?10:5;if(null==a||isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;)c=String.fromCharCode(a%10+48)+c,a/=10;return c}function F(a,b,c){var d="";b?8<b&&(b=8):b=a&-65536?8:4;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;){var e=a&15,e=e+(0<=e&&9>=e?48:55),d=String.fromCharCode(e)+d;a>>=4}return(c?"0x":"")+d}function Ma(a){return F(a,4,!0)}
function Na(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}function Oa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function Pa(a,b){return-1!==a.indexOf(b,a.length-b.length)}function Qa(a){return a.replace(/[&<>"']/g,function(a){return Ra[a]})}function Wa(a,b){return(a+"                                        ").slice(0,b)}
function Xa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var Ra={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},Ya={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"};
function Za(a,b,c){var d=0,e=a.length,f=0;for(c||(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,k;k=c(b,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}function $a(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function ab(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(k.onreadystatechange=function(){4===k.readyState&&(f=k.responseText,200==k.status||!k.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var l="",m;for(m in b)b.hasOwnProperty(m)&&(l&&(l+="&"),l+=m+"="+encodeURIComponent(b[m]));l=l.replace(/%20/g,"+");k.open("POST",a,c);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l)}else k.open("GET",a,c),"bytes"==b&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.send();c||(f=k.responseText,200!=k.status&&(e=k.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function bb(a,b){var c,d={ca:null,ga:null,za:null,ya:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.za=g.load;d.ya=g.exec;if(e=g.bytes)d.ca=e;else if(e=g.words)for(d.ca=Array(2*e.length),f=c=0;c<e.length;c++)d.ca[f++]=e[c]&255,d.ca[f++]=e[c]>>8&255;else if(e=g.data)for(d.ca=Array(4*e.length),f=c=0;c<e.length;c++)d.ca[f++]=
e[c]&255,d.ca[f++]=e[c]>>8&255,d.ca[f++]=e[c]>>16&255,d.ca[f++]=e[c]>>24&255;else d.ca=g;d.ga=g.symbols;d.ca.length?1==d.ca.length&&(v(d.ca[0]),d=null):(v("Empty resource: "+a),d=null)}catch(k){v("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){v("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.ca=e)}return d}
function cb(){return"http://"+(window?window.location.host:"www.pcjs.org")}function db(){if(null==eb){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}eb=a}return eb}function fb(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}
function gb(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function hb(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function ib(a){if(!mb){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}mb=c}return mb[a]}function nb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function ob(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function pb(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function qb(a){rb.init.push(a)}
function sb(a){if(tb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){v(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function ub(a){!tb&&a?(tb=!0,wb&&Cb("init"),Db&&Cb("show")):tb=a}function Cb(a){rb[a]&&sb(rb[a])}var mb=null,rb={init:[],show:[],exit:[]},wb=!1,Db=!1,tb=!0,eb=null;pb("onload",function(){wb=!0;sb(rb.init)});pb("onpageshow",function(){Db=!0;sb(rb.show)});pb(hb("Opera")||hb("iOS")?"onunload":"onbeforeunload",function(){sb(rb.exit)});
var Eb="undefined"!==typeof ArrayBuffer,w="pdp11",Fb="PDPjs",Gb=!1,Hb=Eb,Ib=!0,Jb=!0,Kb="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),Lb={qd:5,ud:144,Zc:8,Hc:{pf:15,Vj:16,kk:32,Zd:64,Fa:128,ce:256,Zj:512,fj:1024,Gc:2048,ej:4096,kd:57344,ma:{kd:13}},bf:{fe:1,Fi:2,qf:3,Kb:28,Fc:32,Ec:64,Td:128,dk:256,Ie:512,ec:1024,Qj:2048,be:4096,ik:8192,Oj:16384,Je:32768,ed:32736},$e:{dc:1,wa:14,Jb:48,Ib:64,$a:128,bk:256,gj:512,ij:1024,Qe:2048,sd:8192,ed:16384,jb:32768,Kb:4608,
fc:61438,Sa:3967,ma:{wa:1,Jb:4}},af:{rd:15,hd:16,bc:8160,tb:57344,ma:{hd:4,bc:5,tb:13}},wa:{Ee:0,hc:2,ub:4,vd:6,Kc:8,Ue:10,Ke:12,jk:14}},Mb={qd:5,ud:112,Zc:4,Te:"DY",gf:{Fa:1,wa:14,Za:48,Ib:64,$a:128,tb:768,Pd:15360,dj:16384,jb:32768,Ci:16254,Yj:128,fc:65535,Sa:1022,ma:{wa:1,Za:4,tb:8}},ef:{Sa:65534},hf:{rf:1,sf:4,tf:16,Wj:65408,$d:63,Jc:64,gc:65408,Me:3,pj:8,ma:{Jc:6,gc:7}},Ic:{Pe:{Cj:0,ak:1,Ai:2,Dj:3,Kc:4,Re:5,fk:6,$j:7},Qd:8,Oe:16,mj:32,oj:64,Ne:128,nj:256,sj:512,uj:1024,rj:2048,qj:4096,vj:8192,
lj:16384,tj:32768},ff:{bb:63},Pd:{Nj:1024,cj:2048,fe:2048,xj:3072,Ie:4096,ab:5120,ec:8192,Fj:9216},wa:{Hj:0,vd:2,uf:4,Kc:6,Ye:8,wf:10,Ve:12,Sj:14}},Nb={qd:5,ud:180,Zc:2,Te:"DX",kf:{dc:1,wa:14,td:16,DONE:32,Ib:64,fb:128,INIT:16384,jb:32768,Kb:16128,fc:32992,Sa:16479},Tj:{},nf:{bb:127},mf:{bb:31},lf:{Ld:1,Wd:2,kd:4,cc:64,Fa:128},wa:{bd:0,EMPTY:2,hc:4,ub:6,Kb:8,Xe:10,Lc:12,We:14},ERROR:{fd:8,gd:16,wi:24,Se:32,jj:40,Xj:48,pd:56,Lj:72,Kj:80,Jj:88,Ei:96,yi:104,Ij:112,od:120,Di:128,xi:136}},Ob={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};Nb.jf=["DX",77,1,26,128,1,0,0,128,0];Lb.Gc=["RK",203,2,12,512,0,0,0,512,Lb.Hc.Gc|Lb.Hc.ce|Lb.Hc.Zd];Mb.cf=["RL",512,2,40,256,0,0,0,256,Mb.Ic.Pe.Re|Mb.Ic.Qd|Mb.Ic.Oe];
var w="pdp11",Fb="PDPjs",Gb=!1,Hb=Eb,Jb=Ib=!0,Pb={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,pc11:4096,paper:4096,disk:8192,read:16384,write:32768,rk11:65536,rl11:131072,rx11:262144,dl11:1048576,serial:1048576,kw11:2097152,timer:2097152,speaker:16777216,computer:33554432,log:268435456,warn:536870912,buffer:1073741824,halt:-2147483648};
function Qb(a,b){r.call(this,"Panel",a,512);this.j=this.u=0;this.M=b;this.fa=this.g=this.Xa=this.Wa=0;this.B=this.C=-1;this.G=this.I=this.w=!1;this.L=Rb;this.i={};this.b={START:[1,1,!0,!1,this.Sf],STEP:[1,1,!1,!1,this.Tf],ENABLE:[1,1,!1,!1,this.Of],CONT:[1,1,!0,!1,this.Mf],DEP:[0,0,!0,!1,this.Nf],EXAM:[1,1,!0,!1,this.Pf],LOAD:[1,1,!0,!1,this.Rf],TEST:[0,0,!0,!1,this.Qf]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Uf,a];this.F=this.f=this.D=this.J=null;this.exports={hold:this.Hf,toggle:this.kh,
reset:this.gh};y(this)}p(Qb,r);h=Qb.prototype;h.reset=function(a){this.stop();a&&Sb(this,this.Wa=0)};
h.va=function(a,b,c,d){if(this.J&&this.J.va(a,b,c,d)||this.f&&this.f.va(a,b,c,d)||this.F&&this.F.va(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.H[b]=c,this.u++,!0;default:return"led"==a||"rled"==a?(this.H[b]=c,this.i[b]=d?1:0,this.u++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.H[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,
b){return function(){Tb(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){Ub(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){Tb(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){Ub(a,b)}}(this,b),!0):r.prototype.va.call(this,a,b,c,d)}};h.Aa=function(a,b,c,d){this.J=a;this.D=b;this.f=c;this.F=d;Vb(b,this,Wb);Xb(b,this.reset.bind(this));Yb(this);ec(this)};
h.Da=function(a,b){if(!b)if(this.M&&fc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.save=function(){var a=new G(this);a.set(0,[this.fa,this.Wa,this.Xa]);return a.data()};h.restore=function(a){if(a=a[0])gc(this,this.fa=a[0]),Sb(this,this.Wa=a[1]),hc(this,a[2]);return!0};h.gh=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}ec(this);return!0};function ic(a,b,c){if(a=a.H[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function Yb(a,b){for(var c in a.i)ic(a,c,null!=b?b:a.i[c])}function jc(a,b,c){if(a=a.H[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function ec(a){for(var b in a.b)jc(a,b,a.b[b][1])}function kc(a,b,c,d){if(a.H[b]){var e=a.F&&a.F.Ba||8;c=c||0;c=8==e?E(c,d):F(c,d);a.H[b].textContent!=c&&(a.H[b].textContent=c)}}h.Hf=function(a,b,c){if(Tb(this,b)){if(c){var d=this;setTimeout(function(){Ub(d,b);a&&a()},+c);return!1}Ub(this,b)}return!0};
h.kh=function(a){return Tb(this,a)?(Ub(this,a),!0):!1};function Tb(a,b){var c=a.b[b];return c?(jc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b!=lc&&(a.G=b==mc,a.I=b==nc),!0):!1}function Ub(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(jc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}h.Sf=function(a){a||this.f.A.V||(a=this.f,a.D.reset(),oc(a),this.b[pc]&&this.b[pc][1]&&qc(this.f))};h.Tf=function(){};h.Of=function(a){a||this.f.ba()};
h.Mf=function(a){if(!a&&!this.f.A.V)if(this.b[pc]&&this.b[pc][1])qc(this.f);else{if((a=this.F)&&!Ga(a,!0))Ha(a,!0),rc(a,0,null),Ha(a,!1);else try{var b=this.f.Cc(1);0<b&&(sc(this.f,b),tc(this.f,b,!0),uc(this.f,b))}catch(c){"number"!=typeof c&&Da(this.f,c.stack||c.message)}this.stop();this.J&&H(this.J)}};h.Nf=function(a){if(a&&!this.f.A.V)if(this.G&&vc(this),a=Sb(this,this.Xa),this.L==Rb)wc(this.D,this.fa,a);else{var b=this.f,c=this.fa;b.pa++;b.D.ac(xc(b,c,4),a);b.pa--}};
h.Pf=function(a){a||this.f.A.V||(this.I&&vc(this),a=this.L==Rb?yc(this.D,this.fa):zc(this.f,this.fa),Sb(this,a))};h.Rf=function(a){a||this.f.A.V||gc(this,this.Xa)};h.Qf=function(a){a?(this.w=!0,Yb(this,!0)):(this.w=!1,Yb(this),hc(this,0))};h.Uf=function(a,b){this.Xa=a?this.Xa|1<<b:this.Xa&~(1<<b)};function vc(a){var b=1140>=a.f.ka?8:16,c=65472<=a.fa&&a.fa<65472+b,b=c?1:2,c=c?15:a.D.I;a.b[lc]&&a.b[lc][1]||(b=-b);gc(a,a.fa&~c|a.fa+b&c)}
function gc(a,b){a.fa=b&a.D.I;if(a.B!==a.fa){a.B=a.fa;b=a.B;for(var c=0;22>c;c++)Ac(a,"A"+c,b&1<<c)}}function Sb(a,b){a.g=b&65535;if(a.C!==a.g){a.C=a.g;b=a.C;for(var c=0;16>c;c++)Ac(a,"D"+c,b&1<<c)}return a.g}function Ac(a,b,c){a.i[b]=c;a.w||ic(a,b,c)}function Bc(a){return void 0!==a.H[Cc]}function hc(a,b){if(Bc(a)){a.Xa=b;for(var c=0;22>c;c++)a.b["S"+c][1]=b&1<<c?1:0;ec(a)}}h.stop=function(){gc(this,this.f.g[7])};h.Fd=function(a){this.fa=a};h.setData=function(a,b){b?this.Wa=a:this.g=a};
h.Zf=function(a,b){return(b?this.Wa:this.Xa)&65535};h.qh=function(a){this.Wa=a};function fc(){for(var a=x(document,w,"panel"),b=0;b<a.length;b++){var c=a[b],d=wa(c),e=ua(d.id);e||(e=new Qb(d,!0));xa(e,c)}}var Rb=7,Cc="S0",mc="DEP",pc="ENABLE",nc="EXAM",lc="STEP",Dc={},Wb=(Dc[65400]=[null,null,Qb.prototype.Zf,Qb.prototype.qh,"CNSW"],Dc);qb(fc);
function Ec(a,b,c){r.call(this,"Bus",a,16);this.f=b;this.F=c;this.U=+a.busWidth||16;this.M=1<<this.U;this.I=this.M-1;this.j=Fc;this.g=Math.log2(this.j);this.R=this.j>>2;this.i=this.j-1;this.G=this.M/this.j|0;this.S=this.G-1;this.Pa=[];this.na=0;this.C=!1;this.N=[];this.yf=[Gc,Hc,Ic,Jc];this.b=this.u=[];this.B=this.L=this.w=this.O=this.P=0;a=new I(this);Kc(a,this.F);this.b=Array(this.G);this.u=Array(this.G);for(b=0;b<this.G;b++)this.b[b]=this.u[b]=a;this.B=this.M-Fc;Wc(this,this.B,Fc,Xc,this);this.P=
this.O=(this.B&this.I)>>>this.g;this.L=0;this.w=this.I;y(this)}p(Ec,r);function Yc(a,b){if(b!=a.L){for(var c=0;c<a.G;c++)a.u[c]=a.b[c];a.L=0;a.w=a.I;b&&(a.L=b,b=1<<b,a.w=b-1,b-=Fc,a.P=(b&a.w)>>>a.g,a.u[a.P]=a.b[a.O])}}h=Ec.prototype;h.reset=function(){for(var a=0;a<this.N.length;a++)this.N[a]();Yc(this,16)};h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.save=function(){var a=new G(this);a.set(0,Zc(this));return a.data()};
h.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.R){for(var e=0,f=Array(this.R),g=0;g<d.length-1;)for(var k=d[g++],l=d[g++];k--;)f[e++]=l;d=f}e=this.b[c];if(!e||!e.restore(d)){v("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function Wc(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.g;0<g&&k<a.b.length;){var l=a.b[k],m=k*a.j,n=a.j-(f-m);n>g&&(n=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.K)return l.Xb+=l.K-f,l.K=f,!0;if(f>=l.K+l.Xb){n=l.size-(f-m);n>g&&(n=g);l.Xb=f-l.K+n;f=m+a.j;g-=n;k++;continue}}return $c(ad,f,g)}f=new I(a,f,n,a.j,d,e);Kc(f,a.F,l);a.b[k++]=f;f=m+a.j;g-=n}return 0>=g?(a.status("Added "+(c>>10)+"Kb "+bd[d]+" at "+E(b)),!0):$c(cd,b,c)}h.Jd=function(a){return this.u[(a&this.w)>>>this.g].Eb(a&this.i,a)};
h.Bc=function(a){var b=a&this.i,c=(a&this.w)>>>this.g;return Jb||b!=this.i?this.u[c].oa(b,a):this.u[c++].Eb(b,a)|this.u[c&this.S].Eb(0,a+1)<<8};h.Kd=function(a,b){this.u[(a&this.w)>>>this.g].Gb(a&this.i,b,a)};h.ac=function(a,b){var c=a&this.i,d=(a&this.w)>>>this.g;Jb||c!=this.i?this.u[d].Hb(c,b,a):(this.u[d++].Gb(c,b&255,a),this.u[d&this.S].Gb(0,b>>8&255,a+1))};function dd(a,b){return a.b[(b&a.I)>>>a.g]}
function yc(a,b){var c;a.C=!1;a.na++;var d=b&a.i,e=dd(a,b);Jb||d!=a.i?c=e.B(d,b):c=e.J(d,b)|dd(a,b+1).J(0,b+1)<<8;a.na--;return c}function ed(a,b,c){a.C=!1;a.na++;dd(a,b).F(b&a.i,c&255,b);a.na--}function wc(a,b,c){a.C=!1;a.na++;var d=b&a.i,e=dd(a,b);Jb||d!=a.i?e.C(d,c&65535,b):(e.F(d,c&255,b),dd(a,b+1).F(0,c>>8&255,b+1));a.na--}
function Zc(a){for(var b=0,c=[],d=0;d<a.G;d++){var e=a.b[d];if(e.hb||e.Ff){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],n=g+1;n<e.length&&e[n]===m;)n++;l[k++]=n-g;l[k++]=m;g=n}l.length<e.length&&(e=l)}c[f]=e}}return c}function fd(a){for(var b=gd,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.K+e.Xb)}return c}
function hd(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var n=b&id;if(void 0!==a.Pa[n])return v("I/O address already registered: "+F(b,8,!0)),!1;var q=l||"unknown";q&&0<=m&&(q+=m++);a.Pa[n]=[d,e,f,g,q,k||16,!1]}return!0}
function Vb(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.ka)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&n&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(n)));for(var q=g[4],t=g[5]||1,u=0;u<t;u++,f+=2)if(q&&1<t&&(q=g[4]+u),!hd(a,f,f,k,l,m,n,g[7]||b.ha,q||b.Mb))return!1}}return!0}
function Xb(a,b){a.N.push(b)}h.Na=function(a,b,c){this.C=!0;this.na||(this.F&&z(this.F,4)&&C(this.F,"memory fault ("+c+") on "+K(this.F,a),!0,!0),b&&(this.f.P|=b),this.f.sa(4,0,a))};function jd(a){var b=a.C;a.C=!1;return b}function $c(a,b,c){v("Memory block error ("+a+": "+F(b)+","+F(c)+")");return!1}var Fc=8192,id=Fc-1,ad=1,cd=2;
function Gc(a,b){var c=-1,d=this.controller,e=d.Pa[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Pa[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&z(this.f,16|e[5])&&C(this.f,e[4]+".readByte("+K(this.f,b)+"): "+K(this.f,c),!0,!d.na),c;d.Na(b,16,3);c=255;this.f&&z(this.f,16)&&C(this.f,"warning: unconverted read access to byte @"+K(this.f,b)+": "+K(this.f,c),!0,!d.na);return c}
function Hc(a,b,c){var d=!1,e=this.controller,f=e.Pa[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Pa[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&z(this.f,16|f[5])&&C(this.f,f[4]+".writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.na):(e.Na(c,16,5),this.f&&z(this.f,16)&&C(this.f,"warning: unconverted write access to byte @"+K(this.f,c)+": "+K(this.f,
b),!0,!e.na))}function Ic(a,b){var c=-1,d=this.controller;a=d.Pa[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&z(this.f,16|a[5])&&C(this.f,a[4]+".readWord("+K(this.f,b)+"): "+K(this.f,c),!0,!d.na),c;d.Na(b,16,2);c=65535;this.f&&z(this.f,16)&&C(this.f,"warning: unconverted read access to word @"+K(this.f,b)+": "+K(this.f,c),!0,!d.na);return c}
function Jc(a,b,c){var d=!1,e=this.controller;a=e.Pa[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&z(this.f,16|a[5])&&C(this.f,a[4]+".writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.na):(e.Na(c,16,4),this.f&&z(this.f,16)&&C(this.f,"warning: unconverted write access to word @"+K(this.f,c)+": "+K(this.f,b),!0,!e.na))}function L(a){r.call(this,"Device",a,256);this.b={ib:128,Gd:-1}}p(L,r);h=L.prototype;
h.Aa=function(a,b,c,d){this.D=b;this.J=a;this.f=c;this.F=d;var e=this;this.b.Gd=kd(c,function(){e.b.ib|=128;e.b.ib&64&&ld(e.f,e.b.Qa);e.J&&H(e.J,1);md(e.f,e.b.Gd,1E3/60)});this.b.Qa=nd(c,64,6,2097152);Vb(b,this,od);Xb(b,this.reset.bind(this));d&&pd(d,64,function(a){var b=e.f;qd(e,"KIPDR",b.B[0],0,a[0]);qd(e,"KDPDR",b.B[0],8,a[0]);qd(e,"KIPAR",b.M[0],0,a[0]);qd(e,"KDPAR",b.M[0],8,a[0],!0);qd(e,"SIPDR",b.B[1],0,a[0]);qd(e,"SDPDR",b.B[1],8,a[0]);qd(e,"SIPAR",b.M[1],0,a[0]);qd(e,"SDPAR",b.M[1],8,a[0],
!0);qd(e,"UIPDR",b.B[3],0,a[0]);qd(e,"UDPDR",b.B[3],8,a[0]);qd(e,"UIPAR",b.M[3],0,a[0]);qd(e,"UDPAR",b.M[3],8,a[0],!0);b.U&32&&qd(e,"UNIMAP",b.Ha,-1,a[0])});y(this)};function qd(a,b,c,d,e,f){a=a.F;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=8;var g="",k=!1,l=0,m=8;0>d&&(e=c.length,d=0,k=!0,l=3,m=4);for(var n=0;n<e;n++)n%m||(g&&(g+="\n"),g+=b+(k?"["+La(n)+"]":"")+":"),g+=" "+K(a,c[d+n],l);a.v(g+(f?"\n":""))}}h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.b.ib=128;md(this.f,this.b.Gd,1E3/60,!0)};h.save=function(){var a=new G(this);a.set(0,[this.b.ib]);return a.data()};h.restore=function(a){a=ia(a[0]);this.b.ib=a.next().value;return!0};h.fg=function(){return this.b.ib};h.xh=function(a){this.b.ib=a&192;this.b.ib&64||rd(this.f,this.b.Qa)};h.hg=function(){return sd(this.f)};h.zh=function(a){td(this.f,a&-129|this.f.S&128)};h.ig=function(){return ud(this.f)};h.jg=function(){return vd(this.f)};
h.kg=function(){return this.f.U};h.Ah=function(a){wd(this.f,a)};h.Wg=function(a){a=a>>1&63;var b=this.f.Ha[a>>1];return a&1?b>>16:b&65535};h.li=function(a,b){b=b>>1&63;var c=b>>1;this.f.Ha[c]=b&1?this.f.Ha[c]&65535|(a&63)<<16:this.f.Ha[c]&-65536|a&65534};h.Pg=function(a){return this.f.B[1][a>>1&7]};h.ei=function(a,b){this.f.B[1][b>>1&7]=a&65295};h.Ng=function(a){return this.f.B[1][(a>>1&7)+8]};h.ci=function(a,b){this.f.B[1][(b>>1&7)+8]=a&65295};h.Og=function(a){return this.f.M[1][a>>1&7]};
h.di=function(a,b){b=b>>1&7;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.Mg=function(a){return this.f.M[1][(a>>1&7)+8]};h.bi=function(a,b){b=(b>>1&7)+8;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.eg=function(a){return this.f.B[0][a>>1&7]};h.wh=function(a,b){this.f.B[0][b>>1&7]=a&65295};h.cg=function(a){return this.f.B[0][(a>>1&7)+8]};h.uh=function(a,b){this.f.B[0][(b>>1&7)+8]=a&65295};h.dg=function(a){return this.f.M[0][a>>1&7]};h.vh=function(a,b){b=b>>1&7;this.f.M[0][b]=a;this.f.B[0][b]&=65295};
h.bg=function(a){return this.f.M[0][(a>>1&7)+8]};h.th=function(a,b){b=(b>>1&7)+8;this.f.M[0][b]=a;this.f.B[0][b]&=65295};h.Vg=function(a){return this.f.B[3][a>>1&7]};h.ki=function(a,b){this.f.B[3][b>>1&7]=a&65295};h.Tg=function(a){return this.f.B[3][(a>>1&7)+8]};h.ii=function(a,b){this.f.B[3][(b>>1&7)+8]=a&65295};h.Ug=function(a){return this.f.M[3][a>>1&7]};h.ji=function(a,b){b=b>>1&7;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Sg=function(a){return this.f.M[3][(a>>1&7)+8]};
h.hi=function(a,b){b=(b>>1&7)+8;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Vb=function(a){a&=7;return this.f.w&2048?this.f.qa[a]:this.f.g[a]};h.Zb=function(a,b){b&=7;this.f.w&2048?this.f.qa[b]=a:this.f.g[b]=a};h.rg=function(){return this.f.w&49152?this.f.W[0]:this.f.g[6]};h.Hh=function(a){this.f.w&49152?this.f.W[0]=a:this.f.g[6]=a};h.ug=function(){return this.f.g[7]};h.Kh=function(a){this.f.g[7]=a};h.Wb=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.qa[a]};
h.$b=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.qa[b]=a};h.sg=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.W[1]};h.Ih=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.W[1]=a};h.tg=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.W[3]};h.Jh=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.W[3]=a};h.ag=function(a){return this.f.xc[a-65504>>1]};h.sh=function(a,b){this.f.xc[b-65504>>1]=a};h.xe=function(a){return 65520==a?(fd(this.D)>>6)-1:0};
h.Ce=function(){};h.Rg=function(){return 1};h.gi=function(){};h.$f=function(){return this.f.P};h.rh=function(){this.f.P=0};h.gg=function(){return this.f.uc};h.yh=function(a,b){b&1||(a&=255);this.f.uc=a};h.lg=function(a,b){return b?0:this.f.eb};h.Bh=function(a){xd(this.f,a)};h.Qg=function(a,b){return b?0:this.f.xa&65280};h.fi=function(a){this.f.xa=a|255};h.qg=function(){return yd(this.f)};h.Gh=function(a){zd(this.f,a)};h.Be=function(a,b){z(this)&&C(this,"writeIgnored("+E(b)+"): "+E(a),!0,!0)};
var M={},od=(M[61568]=[null,null,L.prototype.Wg,L.prototype.li,"UNIMAP",64,1170],M[62592]=[null,null,L.prototype.Pg,L.prototype.ei,"SIPDR",8,1145,64],M[62608]=[null,null,L.prototype.Ng,L.prototype.ci,"SDPDR",8,1145,64],M[62624]=[null,null,L.prototype.Og,L.prototype.di,"SIPAR",8,1145,64],M[62640]=[null,null,L.prototype.Mg,L.prototype.bi,"SDPAR",8,1145,64],M[62656]=[null,null,L.prototype.eg,L.prototype.wh,"KIPDR",8,1140,64],M[62672]=[null,null,L.prototype.cg,L.prototype.uh,"KDPDR",8,1145,64],M[62688]=
[null,null,L.prototype.dg,L.prototype.vh,"KIPAR",8,1140,64],M[62704]=[null,null,L.prototype.bg,L.prototype.th,"KDPAR",8,1145,64],M[62798]=[null,null,L.prototype.kg,L.prototype.Ah,"MMR3",1,1145,64],M[65382]=[null,null,L.prototype.fg,L.prototype.xh,"LKS"],M[65402]=[null,null,L.prototype.hg,L.prototype.zh,"MMR0",1,1140,64],M[65404]=[null,null,L.prototype.ig,L.prototype.Be,"MMR1",1,1145,64],M[65406]=[null,null,L.prototype.jg,L.prototype.Be,"MMR2",1,1140,64],M[65408]=[null,null,L.prototype.Vg,L.prototype.ki,
"UIPDR",8,1140,64],M[65424]=[null,null,L.prototype.Tg,L.prototype.ii,"UDPDR",8,1145,64],M[65440]=[null,null,L.prototype.Ug,L.prototype.ji,"UIPAR",8,1140,64],M[65456]=[null,null,L.prototype.Sg,L.prototype.hi,"UDPAR",8,1145,64],M[65472]=[null,null,L.prototype.Vb,L.prototype.Zb,"R0SET0"],M[65473]=[null,null,L.prototype.Vb,L.prototype.Zb,"R1SET0"],M[65474]=[null,null,L.prototype.Vb,L.prototype.Zb,"R2SET0"],M[65475]=[null,null,L.prototype.Vb,L.prototype.Zb,"R3SET0"],M[65476]=[null,null,L.prototype.Vb,
L.prototype.Zb,"R4SET0"],M[65477]=[null,null,L.prototype.Vb,L.prototype.Zb,"R5SET0"],M[65478]=[null,null,L.prototype.rg,L.prototype.Hh,"R6KERNEL"],M[65479]=[null,null,L.prototype.ug,L.prototype.Kh,"R7KERNEL"],M[65480]=[null,null,L.prototype.Wb,L.prototype.$b,"R0SET1",1,1145],M[65481]=[null,null,L.prototype.Wb,L.prototype.$b,"R1SET1",1,1145],M[65482]=[null,null,L.prototype.Wb,L.prototype.$b,"R2SET1",1,1145],M[65483]=[null,null,L.prototype.Wb,L.prototype.$b,"R3SET1",1,1145],M[65484]=[null,null,L.prototype.Wb,
L.prototype.$b,"R4SET1",1,1145],M[65485]=[null,null,L.prototype.Wb,L.prototype.$b,"R5SET1",1,1145],M[65486]=[null,null,L.prototype.sg,L.prototype.Ih,"R6SUPER",1,1145],M[65487]=[null,null,L.prototype.tg,L.prototype.Jh,"R6USER",1,1145],M[65504]=[null,null,L.prototype.ag,L.prototype.sh,"CTRL",8,1170],M[65520]=[null,null,L.prototype.xe,L.prototype.Ce,"LSIZE",1,1170],M[65522]=[null,null,L.prototype.xe,L.prototype.Ce,"HSIZE",1,1170],M[65524]=[null,null,L.prototype.Rg,L.prototype.gi,"SYSID",1,1170],M[65526]=
[null,null,L.prototype.$f,L.prototype.rh,"ERR",1,1170],M[65528]=[null,null,L.prototype.gg,L.prototype.yh,"MBR",1,1170],M[65530]=[null,null,L.prototype.lg,L.prototype.Bh,"PIR"],M[65532]=[null,null,L.prototype.Qg,L.prototype.fi,"SLR"],M[65534]=[null,null,L.prototype.qg,L.prototype.Gh,"PSW"],M);
qb(function(){for(var a=x(document,w,"device"),b=0;b<a.length;b++){var c,d=a[b];c=wa(d);switch(c.type){case "default":c=new L(c);xa(c,d);break;case "pc11":c=new Ad(c);xa(c,d);break;case "rl11":c=new Bd(c);xa(c,d);break;case "rk11":c=new N(c);xa(c,d);break;case "rx11":c=new Cd(c),xa(c,d)}}});
function I(a,b,c,d,e,f){this.D=a;this.id=Ed+=2;this.b=null;this.K=b;this.Xb=c;this.size=d||0;this.type=e||Fd;this.j=e==Gd;this.f=this.controller=null;this.Eb=this.J=this.Bd;this.oa=this.B=this.Cd;this.Gb=this.F=this.Yb;this.Hb=this.C=this.Vc;this.H=this.i=0;Kc(this);this.hb=this.Ff=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],Hd(this,f.yf);else if(Eb)this.u=new ArrayBuffer(this.size),this.w=new DataView(this.u,0,this.size),this.g=new Uint8Array(this.u,0,this.size),this.G=new Uint16Array(this.u,
0,this.size>>1),this.b=new Int32Array(this.u,0,this.size>>2),Hd(this,Id?Jd:Kd);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;Hd(this,Ld)}else Hd(this)}h=I.prototype;h.save=function(){var a,b;if(this.controller)a=null;else if(Eb)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.w.getInt32(b<<2,!0);else a=this.b;return a};
h.restore=function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(Eb)for(b=0;b<a.length;b++)this.w.setInt32(b<<2,a[b],!0);else this.b=a;return this.hb=!0}return!1};function Hd(a,b){b||(b=Md);Nd(a,b,void 0);Od(a,b,void 0)}function Nd(a,b,c){c&&a.H||(a.Eb=b[0]||a.Bd,a.oa=b[2]||a.Cd);if(c||void 0===c)a.J=b[0]||a.Bd,a.B=b[2]||a.Cd}function Od(a,b,c){c&&a.i||(a.Gb=!a.j&&b[1]||a.Yb,a.Hb=!a.j&&b[3]||a.Vc);if(c||void 0===c)a.F=b[1]||a.Yb,a.C=b[3]||a.Vc}
h.Cb=function(a,b){b?this.i++||Od(this,Pd,!1):this.H++||Nd(this,Pd,!1)};function Qd(a,b){b?--a.i||(a.Gb=a.j?a.Yb:a.F,a.Hb=a.j?a.Vc:a.C):--a.H||(a.Eb=a.J,a.oa=a.B)}function Kc(a,b,c){a.f=b;a.H=a.i=0;c&&((a.H=c.H)&&Nd(a,Pd,!1),(a.i=c.i)&&Od(a,Pd,!1))}h.Bd=function(a,b){this.f&&z(this.f,32)&&C(this.f,"attempt to read invalid address "+K(this.f,b),!0);this.D.Na(b,32,2);return 255};
h.Yb=function(a,b,c){this.f&&z(this.f,32)&&C(this.f,"attempt to write "+K(this.f,b)+" to invalid addresses "+K(this.f,c),!0);this.D.Na(c,32,4)};h.Cd=function(a,b){return this.Eb(a++,b++)|this.Eb(a,b)<<8};h.Vc=function(a,b,c){this.Gb(a++,b&255,c++);this.Gb(a,b>>8,c)};h.Yf=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};h.bh=function(a,b){Ib&&a&1&&this.D.Na(b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
h.ph=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.hb=!0};h.pi=function(a,b,c){Ib&&a&1&&this.D.Na(c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.hb=!0};h.Wf=function(a,b){this.f&&null!=this.K&&Rd(this.f,this.K+a);return this.J(a,b)};h.Yg=function(a,b){this.f&&null!=this.K&&Rd(this.f,this.K+a,2);return this.B(a,b)};
h.nh=function(a,b,c){this.f&&null!=this.K&&Sd(this.f,this.K+a);this.j?this.Yb(0,b,c):this.F(a,b,c)};h.ni=function(a,b,c){this.f&&null!=this.K&&Sd(this.f,this.K+a,2);this.j?this.Yb(0,b,c):this.C(a,b,c)};h.Vf=function(a){return this.g[a]};h.Xf=function(a,b){a=this.g[a];this.f&&z(this.f,32)&&C(this.f,"Memory.readByte("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.Xg=function(a,b){Ib&&a&1&&this.D.Na(b,64,2);return this.w.getUint16(a,!0)};
h.ah=function(a,b){Ib&&a&1&&this.D.Na(b,64,2);a=!Jb&&a&1?this.g[a]|this.g[a+1]<<8:this.G[a>>1];this.f&&z(this.f,32)&&C(this.f,"Memory.readWord("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.mh=function(a,b){this.g[a]=b;this.hb=!0};h.oh=function(a,b,c){this.g[a]=b;this.hb=!0;this.f&&z(this.f,32)&&C(this.f,"Memory.writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0)};h.mi=function(a,b,c){Ib&&a&1&&this.D.Na(c,64,4);this.w.setUint16(a,b,!0);this.hb=!0};
h.oi=function(a,b,c){Ib&&a&1&&this.D.Na(c,64,4);!Jb&&a&1?(this.g[a]=b,this.g[a+1]=b>>8):this.G[a>>1]=b;this.hb=!0;this.f&&z(this.f,32)&&C(this.f,"Memory.writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0)};var Fd=0,gd=1,Gd=2,Xc=4,bd=["NONE","RAM","ROM","VID","H/W"],Ed=0,Md=[],Ld=[I.prototype.Yf,I.prototype.ph,I.prototype.bh,I.prototype.pi],Pd=[I.prototype.Wf,I.prototype.nh,I.prototype.Yg,I.prototype.ni];
if(Eb)var Kd=[I.prototype.Vf,I.prototype.mh,I.prototype.Xg,I.prototype.mi],Jd=[I.prototype.Xf,I.prototype.oh,I.prototype.ah,I.prototype.oi];var Td;if(Eb){var Ud=new ArrayBuffer(2);(new DataView(Ud)).setUint16(0,256,!0);Td=256===(new Uint16Array(Ud))[0]}else Td=!1;var Id=Td;
function Vd(a,b){r.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.$c=0;this.Xc=b;this.ob=c;this.ld=Math.round(this.Xc/1E4)/100;this.yb=this.ld*this.ob;this.md=this.qc=this.Bb=this.Yc=0;this.A.V=this.A.Sc=!1;this.A.ra=a.autoStart;"string"==typeof this.A.ra&&(this.A.ra="true"==this.A.ra);this.A.Nb=!1;this.oc=this.Qb=0;this.pc=+a.csStart;this.Ob=+a.csInterval;this.Rb=+a.csStop;this.ia=[];this.ae=this.hh.bind(this);this.pb=this.Ka=this.nb=this.b=this.la=this.Ja=this.nc=this.mb=this.Sb=
this.nd=this.xb=0;this.ta=null;y(this)}p(Vd,r);h=Vd.prototype;h.Aa=function(a,b,c,d){this.J=a;this.D=b;this.F=d;this.ta=a.i;for(a=0;a<de.length;a++)(b=this.H[de[a]])&&this.J.va(null,de[a],b);y(this)};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.Da=function(a,b){var c=ee(this.J,"autoStart");null!=c?this.A.ra="true"==c?!0:"false"==c?!1:!!c:null==this.A.ra&&(this.A.ra=!this.F&&void 0===this.H.run);if(!b){if(a){fe(this);if(!this.restore(a))return!1;ge(this)}else this.reset();this.F?(a=this.F,b=this.A.ra,a.Ga=!0,a.v("Type ? for help with PDPjs Debugger commands"),he(a),b||ie(a),a.ta&&(b=a.ta,a.ta=null,je(a,b))):this.status("No debugger detected");this.A.ra||this.v("CPU will not be auto-started "+(this.ta?"(click Run to start)":"(type 'go' to start)"))}return!0};
h.Ca=function(a){return a?this.save():!0};h.ra=function(){return this.A.V?!0:this.A.ra?(qc(this),!0):!1};h.pe=function(){return 0};function ge(a){void 0===a.pc&&(a.pc=0);void 0===a.Ob&&(a.Ob=-1);void 0===a.Rb&&(a.Rb=-1);a.A.Nb=0<=a.pc&&0<a.Ob;a.A.Nb&&(a.oc=0,a.Qb=a.pc-a.pb)}function uc(a,b){if(a.A.Nb){var c=!1;a.oc=a.oc+a.pe()|0;a.Qb-=b;0>=a.Qb&&(a.Qb+=a.Ob,c=!0);0<=a.Rb&&a.Rb<=ke(a)&&(a.Ob=a.Rb=-1,ge(a),a.ba(),c=!0);c&&a.v(ke(a)+" cycles: checksum="+F(a.oc))}}
h.va=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.H[b]=c,!0;case "run":return this.H[b]=c,c.onclick=function(){var a;if(a=d.J)if(a=d.J,a.A.aa)a=!0;else{var b=null,c,k=ta(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.A.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.A.aa);c++);c==k.length&&(b=a);v("The "+b.type+" component ("+b.id+") is not "+(b.A.ready?"powered yet":"ready yet"+(b.Nc?" (waiting for notification)":""))+".");a=!1}a&&(d.A.V?d.ba():qc(d))},!0;
case "speed":return this.H[b]=c,!0;case "setSpeed":return this.H[b]=c,c.onclick=function(){le(d,d.ob<<1,!0)},c.textContent=this.yb.toFixed(2)+"Mhz",!0}return!1};function tc(a,b,c){a.pb+=b;c&&(a.nb=a.b=a.la=0)}function me(a,b){var c=1;b&&1<a.ob&&a.xb&&(c=a.xb/a.ld);a.md=Math.round(1E3/ne);a.qc=Math.floor(a.Xc/ne*c);b||(a.Bb=a.qc);a.Yc=0}function ke(a){return a.pb+a.Ka+a.nb-a.b}function fe(a){a.xb=0;a.nd=0;a.pb=a.Ka=a.nb=a.b=a.la=0;ge(a);le(a,1)}
function le(a,b,c){var d=!1;if(void 0!==b){.8>a.xb/a.yb?b=1:d=!0;a.ob=b;b=a.ld*a.ob;if(a.yb!=b){a.yb=b;b=a.yb.toFixed(2)+"Mhz";var e=a.H.setSpeed;e&&(e.textContent=b);a.v("target speed: "+b)}c&&a.J&&oe(a.J)}tc(a,a.Ka);a.Ka=0;a.Ja=qa();a.mb=0;me(a);return d}function kd(a,b){var c=a.ia.length;a.ia.push([-1,b]);return c}function md(a,b,c,d){0<=b&&b<a.ia.length&&(d||0>a.ia[b][0])&&(c=a.Xc*a.ob/1E3*c|0,a.A.V&&(c+=pe(a)),a.ia[b][0]=c)}
function qe(a,b){for(var c=a.ia.length-1;0<=c;c--){var d=a.ia[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function re(a){for(var b=[],c=0;c<a.ia.length;c++)b.push(a.ia[c][0]);return b}function sc(a,b){for(var c=a.ia.length-1;0<=c;c--){var d=a.ia[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function pe(a,b){var c=a.nb-=a.b;a.b=a.la=0;b&&(a.nb=0);return c}
h.hh=function(){if(this.A.V){this.Yc>=this.Xc&&me(this,!0);this.Sb=0;this.nc=qa();if(this.mb){var a=this.nc-this.mb;a>this.md&&(this.Ja+=a,this.Ja>this.nc&&(this.Ja=this.nc))}try{do{var b=qe(this,this.A.Nb?1:this.qc);try{this.Cc(b)}catch(e){if("number"!=typeof e)throw e;}b=pe(this,!0);this.Sb+=b;this.Ka+=b;uc(this,b);sc(this,b);this.Bb-=b;if(0>=this.Bb){this.Bb+=this.qc;++this.nd>=se&&(this.J&&H(this.J,void 0),this.nd=0);break}}while(this.A.V)}catch(e){this.ba();this.J&&this.J.stop(qa(),ke(this));
Da(this,e.stack||e.message);return}if(this.A.V){a=setTimeout;b=this.ae;this.mb=qa();var c=this.md;this.Sb&&(c=Math.round(c*this.Sb/this.qc));var c=c-(this.mb-this.nc),d=this.mb-this.Ja;d&&(this.xb=Math.round(this.Ka/(10*d))/100,864E5<=d&&(this.pb=0,le(this)));if(0>c||this.xb<this.yb)-1E3>c&&(this.Ja-=c),c=0;this.Yc+=this.Sb;this.mb+=c;a(b,c)}}};
function qc(a,b){if(!Ea(a))if(a.A.V)a.v(a.toString()+" busy");else{le(a);a.A.V=!0;a.A.Sc=!0;var c=a.H.run;c&&(c.textContent="Halt");a.J&&(b&&oe(a.J,!0),a.J.start(a.Ja,ke(a)));a.F||a.status("Started");setTimeout(a.ae,0)}}h.Cc=function(){return 0};h.ba=function(a){var b=!1;if(this.A.V){pe(this);tc(this,this.Ka);this.Ka=0;this.A.V=!1;if(b=this.H.run)b.textContent="Run";this.J&&this.J.stop(qa(),ke(this));b=!0;this.F||this.status("Stopped")}this.A.complete=a;return b};var ne=30,se=15,de=["power","reset"];
function te(a){var b=+a.model||1170;Vd.call(this,a,6666667);this.ka=b;this.Ud=+a.addrReset||0;this.cb=this.w=this.N=this.C=this.G=this.L=this.I=0;this.g=this.qa=this.W=[];this.M=this.B=this.Ha=this.xc=[];this.kb=this.O=this.Sd=this.zb=this.Ab=this.sb=this.lb=this.P=this.uc=this.eb=this.xa=this.S=this.vc=this.wc=this.U=this.i=0;this.Xd=[4,2,0,1];this.zc=0;this.Yd=255;1120>=this.ka?(this.Rd=ue.bind(this),this.Lb=this.Cf,this.zc=8,this.Yd=-1,this.ee=255,this.de=0):(this.Rd=ve.bind(this),this.Lb=this.Df,
this.ee=~(1792|(1140>=this.ka?2048:0))&65535,this.de=1140<this.ka?2048:0);this.Dc=this.Ac=this.pa=0;this.R=null;this.mc=[];this.jc=this.ad=this.oe;this.kc=this.cd=this.te;this.Tc=this.dd=this.ze;this.lc=this.jd=this.Ae;this.Ia=this.vb=this.sc=this.tc=0;this.Ga=this.se;this.oa=this.Dd;this.Hb=this.Hd;this.u=this.j=this.Wc=this.X=this.Y=0;this.A.complete=!1}p(te,Vd);h=te.prototype;
h.Aa=function(a,b,c,d){Vd.prototype.Aa.call(this,a,b,c,d);this.ad=b.Jd.bind(b);this.cd=b.Bc.bind(b);this.dd=b.Kd.bind(b);this.jd=b.ac.bind(b)};h.Da=function(a,b){for(var c=192,d=0;d<this.mc.length;d++){var e=this.mc[d];0>e.Fb&&(e.Fb=c,c+=4)}return Vd.prototype.Da.call(this,a,b)};
h.reset=function(){this.status("Model "+this.ka);this.A.V&&this.ba();this.C=65536;this.G=32768;this.L=65535;this.I=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Ud,-1,-2,-3,-4,-5,-6,-7,-8];this.qa=[0,0,0,0,0,0];this.W=[0,0,0,0];this.M=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.B=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Ha=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.xc=[0,0,0,0,0,0,0,0];this.N=0;this.cb=-1;this.u=this.j=this.Wc=this.X=this.Y=this.i=this.uc=0;oc(this);fe(this);this.A.error=!1;Vd.prototype.reset.call(this)};function oc(a){a.S=0;a.vc=0;a.wc=0;a.U=0;a.P=0;a.eb=0;a.xa=255;a.zb=0;a.Ab=0;a.sb=0;a.lb=262143;a.kb=a.g[7];a.O=0;a.R=null;a.D&&(we(a),a.Sd=fd(a.D))}
function we(a){a.jc=a.ad;a.kc=a.cd;a.Tc=a.dd;a.lc=a.jd;a.sc&&(a.jc=a.oe,a.kc=a.te);a.tc&&(a.Tc=a.ze,a.lc=a.Ae);a.zb?(a.Ia=65536,a.vb=a.U&16?4186112:253952,a.Ga=a.se,a.oa=a.sc?a.$g:a.Dd,a.Hb=a.tc?a.si:a.Hd,Yc(a.D,a.U&16?22:18)):(a.Ia=0,a.vb=57344,a.Ga=a.Gf,a.oa=a.sc?a.Zg:a.ye,a.Hb=a.tc?a.ri:a.De,Yc(a.D,16))}function sd(a){var b=a.S;b&57344||(b=b&-3199|a.Ab<<5|a.sb<<1);return b}
function td(a,b){b&=-3073;if(a.S!=b){b&57344&&!(a.S&57344)&&(a.vc=a.O>>16&65535,a.wc=a.O&65535);a.S=b;a.Ab=(b&96)>>5;a.sb=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.zb!=c&&(a.zb=c,we(a))}}function ud(a){1==(a.S&57345)&&(a.vc=a.O>>16&65535);a=a.vc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function vd(a){1==(a.S&57345)&&(a.wc=a.O&65535);return a.wc}function wd(a,b){1170>a.ka&&(b&=-49);a.U!=b&&(a.U=b,a.lb=b&16?4194303:262143,we(a))}
function xe(a,b,c,d){a.Ud=b;ye(a,b);zd(a,0);a.D.reset();oc(a);if(c){a.g[0]=d||0;for(b=1;5>=b;b++)a.g[b]=0;a.g[6]=1024;a.A.aa?a.A.V||qc(a):a.A.ra=!0}else a.F&&a.A.aa?a.ba()||a.J.A.reset||(he(a.F),H(a.J,-1)):!1===c&&a.ba();!a.A.V&&a.ta&&a.ta.stop()}h.pe=function(){return 0};
h.save=function(){var a=new G(this);a.set(0,[this.g,this.qa,this.W,this.M,this.B,this.Ha,this.xc,this.P,this.uc,this.eb,this.xa,this.Ab,this.sb,this.kb,this.i,this.O,this.cb,this.Ac,this.Dc]);a.set(1,[yd(this),sd(this),ud(this),vd(this),this.U]);a.set(2,[this.pb,this.ob,this.A.ra]);a.set(3,ze(this));a.set(4,re(this));return a.data()};
h.restore=function(a){var b=ia(a[0]);this.g=b.next().value;this.qa=b.next().value;this.W=b.next().value;this.M=b.next().value;this.B=b.next().value;this.Ha=b.next().value;this.xc=b.next().value;this.P=b.next().value;this.uc=b.next().value;this.eb=b.next().value;this.xa=b.next().value;this.Ab=b.next().value;this.sb=b.next().value;this.kb=b.next().value;this.i=b.next().value;this.O=b.next().value;this.cb=b.next().value;this.Ac=b.next().value;this.Dc=b.next().value;b=a[1];zd(this,b[0]);td(this,b[1]);
this.vc=b[2];this.wc=b[3];wd(this,b[4]);b=a[2];this.pb=b[0];le(this,b[1]);this.A.ra=b[2];for(var b=a[3],c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.mc.length;d++){var e=this.mc[d];if(e.Fb===b[c]){d=e;break a}}d=null}d&&(d.next=this.R,this.R=d)}a=a[4];for(b=0;b<this.ia.length&&b<a.length;b++)this.ia[b][0]=a[b];return!0};function Ae(a){return a.C&65536?1:0}function Be(a){return a.G&32768?2:0}function Ce(a){return a.L&65535?0:4}function De(a){return a.I&32768?8:0}
function Ee(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function Fe(a,b,c){c&&(ye(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}function ye(a,b){a.g[7]=b&65535}function nd(a,b,c,d){b={Fb:b,qb:c,message:d||0,name:Ob[b],next:null};a.mc.push(b);return b}function Ge(a,b){var c=a.R;if(c==b)a.R=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.R&&(a.i|=1)}
function ld(a,b){if(b){if(b!=a.R){var c=a.R;if(!c||c.qb<=b.qb)b.next=c,a.R=b;else{do{var d=c.next;if(!d||d.qb<=b.qb){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&z(a,b.message|8)&&C(a,"setIRQ(vector="+E(b.Fb)+",priority="+b.qb+")",!0,!0)}}function rd(a,b){b&&(Ge(a,b),b.message&&z(a,b.message|8)&&C(a,"clearIRQ(vector="+E(b.Fb)+",priority="+b.qb+")",!0,!0))}function ze(a){var b=[];for(a=a.R;a;)b.push(a.Fb),a=a.next;return b}
function He(a){return a.i&64?(a.sa(168,64,-6),!0):a.i&32?(a.sa(4,32,-5),!0):a.i&16?(a.sa(12,16,-7),!0):!1}function yd(a){return a.w=a.w&63728|De(a)|Ce(a)|Be(a)|Ae(a)}function zd(a,b){b&=a.ee;a.I=b<<12;a.L=~b&4;a.G=b<<14;a.C=b<<16;if((b^a.w)&a.de)for(var c=a.qa.length;0<=--c;){var d=a.g[c];a.g[c]=a.qa[c];a.qa[c]=d}a.N=b>>14&3;c=a.w>>14&3;a.N!=c&&(a.W[c]=a.g[6],a.g[6]=a.W[a.N]);a.w=b;a.i&=-3;a.i|=a.R?2:1}function xd(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.eb=b}
h.Ea=function(a){this.I=this.L=a;this.G=0};h.rb=function(a,b){this.I=this.L=this.C=a;this.G=b||0};function Ie(a,b){a.I=a.L=a.C=b;a.G=a.I^a.C>>1}function Je(a,b,c,d){a.I=a.L=a.C=b;a.G=(c^d)&(d^b)}
h.sa=function(a,b,c){if(!this.pa){0>this.cb?this.cb=yd(this):this.N||(c=-4);-4==c&&(this.i&256&&(c=-1),this.i|=256,this.P|=4,this.g[6]=a=4);if(-1!=c){this.O=a|4143316992;this.N=0;var d=this.oa(a|this.Ia),e=this.oa(a+2&65535|this.Ia);zd(this,e&-12289|this.cb>>2&12288);Ke(this,this.cb);Ke(this,this.g[7]);ye(this,d)}this.b-=5;this.i&=~(b|19);this.i|=129;this.cb=-1;this.Ac=c;this.Dc=a;-1==c&&this.ba();if(-4<=c)throw a;}};
function Le(a){var b=Me(a),c=Me(a);a.w&49152&&(c=c&-225|a.w&63712);ye(a,b);zd(a,c);a.i&=-17}function Ne(a,b){var c=b>>13&31;31>c&&(b=a.U&32?a.Ha[c]+(b&8191)&4194303:b&-3932161);return b}
function Oe(a,b,c){var d=[];if(c){c=Ne(a,b);var e=b>>13&31;d.push(c);d.push(e);a.U&32&&(d.push(a.Ha[e]),d.push(b&8191))}else if(a.zb){var e=a.N<<1,f=b>>13;7<f&&(e|=1);a.U&a.Xd[a.N]||(f&=7);b&=8191;var g=a.M[a.N][f]<<6;c=g+b&a.lb;3932160<=c&&(c=Ne(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.lb)}else c=b&65535,57344<=c&&(c|=a.vb),d.push(c);return d}
function xc(a,b,c){var d,e,f;if(!(c&a.zb))return f=b&65535,57344<=f&&(f|=a.vb),f;d=b>>13;a.U&a.Xd[a.N]||(d&=7);e=a.B[a.N][d];f=(a.M[a.N][d]<<6)+(b&8191)&a.lb;3932160<=f&&(f=Ne(a,f));if(a.pa)return f;f>=a.Sd&&f<a.vb?(a.P|=32,a.sa(4,0,f)):f&1&&!(c&1)&&(a.P|=64,a.sa(4,0,f));var g=0;switch(e&7){case 1:g=4096;case 2:e|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:e|=c&4?192:128;break;default:g=32768}32512!=(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(g|=16384):(b&8128)>(e>>2&8128)&&
(g|=16384));a.B[a.N][d]=e;if(f!=(4194170&a.lb)||a.N)a.Ab=a.N,a.sb=d;g&&(g&57344&&(0<=a.cb&&(g|=128),a.S&57344||(g|=a.S&4096|a.Ab<<5|a.sb<<1,td(a,a.S&-61695|g&61694)),a.sa(168,64,-2)),a.S&61440||!(f<(4191360&a.lb)||f>(4194239&a.lb))||(a.S|=4096,a.S&512&&(a.i|=64)));return f}function Me(a){var b=a.oa(a.g[6]|a.Ia);a.g[6]=a.g[6]+2&65535;return b}function Ke(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.O=a.O&65535|(a.O&-65536)<<8|16121856;a.i&256||a.Lb(4,-2,c);a.Hb(c,b)}
function Pe(a,b,c,d){var e,f,g=d&8?0:a.Ia;switch(b){case 0:return a.sa(4,0,-3),0;case 1:return 6==c&&a.Lb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|g;case 2:f=2;e=a.g[c];6==c&&a.Lb(d,f,e);7!=c&&(e|=g,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;e=a.g[c];7!=c&&(e|=g);e=a.oa(e);e|=g;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.g[c]+f&65535;6==c&&a.Lb(d,f,e);7!=c&&(e|=g);a.b-=4;break;case 5:f=-2;e=a.g[c]-2&65535;7!=c&&(e|=g);e=a.oa(e)|g;a.b-=8;break;case 6:return e=a.oa(Ee(a,2)),e=e+a.g[c]&65535,6==c&&a.Lb(d,
0,e),a.b-=6,e|g;case 7:return e=a.oa(Ee(a,2)),e=e+a.g[c]&65535,e=a.oa(e|a.Ia),a.b-=10,e|g}a.g[c]=a.g[c]+f&65535;a.O=a.O&65535|(a.O&-65536)<<8|(f<<3&248|c)<<16;return e}h.Cf=function(a,b,c){!this.N&&0>=b&&c<=this.xa&&(this.i|=32)};h.Df=function(a,b,c){this.N||(65534<=c&&(c|=-65536),a&4&&c<=this.xa&&(c<=this.xa-32?this.sa(4,0,-4):(this.P|=8,this.i|=32)))};h.oe=function(a){this.F&&Rd(this.F,a,1);return this.ad(a)};h.te=function(a){this.F&&Rd(this.F,a,2);return this.cd(a)};
h.ze=function(a,b){this.F&&Sd(this.F,a,1);this.dd(a,b)};h.Ae=function(a,b){this.F&&Sd(this.F,a,2);this.jd(a,b)};function zc(a,b){a.pa++;b=a.D.Bc(xc(a,b,2));a.pa--;return b}function Qe(a,b){(b?--a.tc:--a.sc)||we(a)}h.Gf=function(a,b,c){return Pe(this,a,b,c)};h.se=function(a,b,c){return xc(this,Pe(this,a,b,c),c)};h.ye=function(a){return this.D.Bc(this.kb=a)};h.Zg=function(a){this.F&&Rd(this.F,a,2);return this.ye(a)};h.Dd=function(a){return this.D.Bc(this.kb=xc(this,a,2))};
h.$g=function(a){this.F&&Rd(this.F,a,2);return this.Dd(a)};h.De=function(a,b){this.D.ac(this.kb=a,b)};h.ri=function(a,b){this.F&&Sd(this.F,a,2);this.De(a,b)};h.Hd=function(a,b){this.D.ac(this.kb=xc(this,a,4),b)};h.si=function(a,b){this.F&&Sd(this.F,a,2);this.Hd(a,b)};function Re(a,b,c){var d=a.j=b&7;(b=a.u=(b&56)>>3)?(d=Pe(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.N=a.w>>12&3,c=a.oa(d|c&a.Ia),a.N=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.W[a.w>>12&3];return c}
function Se(a,b,c,d){a.O=a.O&65535|1441792;var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=Pe(a,b,e,4),c&65536||(e&=65535),a.N=a.w>>12&3,e=xc(a,e|c&65536,4),a.N=a.w>>14&3,a.lc(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.W[a.w>>12&3]=d}function Te(a,b){b>>=6;var c=a.Y=b&7;return(b=a.X=(b&56)>>3)?a.jc(a.Ga(b,c,3)):a.g[c+a.zc]&a.Yd}function Ue(a,b){var c;b>>=6;var d=a.Y=b&7;(b=a.X=(b&56)>>3)?c=a.kc(a.Ga(b,d,2)):c=a.g[d+a.zc];return c}function Ve(a,b){var c=a.j=b&7;b=a.u=(b&56)>>3;return Pe(a,b,c,8)}
function We(a,b){var c=a.j=b&7;return(b=a.u=(b&56)>>3)?a.jc(a.Ga(b,c,3)):a.g[c]&255}function Xe(a,b){var c,d=a.j=b&7;(b=a.u=(b&56)>>3)?c=a.kc(a.Ga(b,d,2)):c=a.g[d];return c}function Ye(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Wc=a.Ga(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Tc(e,d.call(a,c,a.jc(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function P(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Ga(b,e,6),a.lc(e,d.call(a,0>c?a.g[-c-1]:c,a.kc(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function Ze(a,b,c,d,e){var f=a.j=b&7;(b=a.u=(b&56)>>3)?(d=a.Ga(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Tc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function $e(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Ga(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.lc(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}
h.Cc=function(a){this.A.complete=!0;var b=this.F?af(this.F)?1:this.A.Sc?-1:0:0,c=a?this.A.Sc?0:1:-1;this.A.Sc=!1;this.nb=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(bf(this.F,this.g[7],c)){this.ba();break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.eb&224)>>5,f=this.R&&this.R.qb>e?this.R:null;f&&(d=f.Fb,e=f.qb);e>(this.w&224)>>5?(this.i&8&&(Ee(this,2),this.i&=-9),this.sa(d,0,-10),e=!0):e=!1;e&&(f&&Ge(this,f),a=!0);this.R||this.eb||(this.i&=-3)}else this.i&
1&&this.i++;if(a){if(this.i&4&&bf(this.F,this.g[7],c)){this.ba();break}if(0>c)break}if(this.i&112&&He(this)){if(this.i&4&&bf(this.F,this.g[7],c)){this.ba();break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.O=this.g[7];f=this.oa(a);this.g[7]=a+2&65535;this.Rd(f)}while(0<this.b);return this.A.complete?this.nb-this.b:!1===this.A.complete?-1:0};qb(function(){for(var a=x(document,w,"cpu"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new te(d);xa(d,c)}});
function yf(a,b){var c=b+a;this.I=this.L=this.C=c;this.G=(a^c)&(b^c);return c&65535}function zf(a,b){var c=b+a,d=c<<8;this.I=this.L=this.C=d;this.G=(a<<8^d)&(b<<8^d);return c&255}function Af(a,b){a=b<<1;Ie(this,a);return a&65535}function Bf(a,b){a=b<<1;Ie(this,a<<8);return a&255}function Cf(a,b){a=b&32768|b>>1|b<<16;Ie(this,a);return a&65535}function Df(a,b){a=b&128|b>>1|b<<8;Ie(this,a<<8);return a&255}function Ef(a,b){a=b&~a;this.Ea(a);return a}function Ff(a,b){a=b&~a;this.Ea(a<<8);return a}
function Gf(a,b){a|=b;this.Ea(a);return a}function Hf(a,b){a|=b;this.Ea(a<<8);return a}function If(a,b){a=~b|65536;this.rb(a);return a&65535}function Jf(a,b){a=~b|256;this.rb(a<<8);return a&255}function Kf(a,b){this.I=this.L=a=b-a;this.G=b&(b^a);return a&65535}function Lf(a,b){a=b-a;var c=a<<8;b<<=8;this.I=this.L=c;this.G=b&(b^c);return a&255}function Mf(a,b){this.I=this.L=a=b+a;this.G=a&(b^a);return a&65535}function Nf(a,b){a=b+a;var c=a<<8;this.I=this.L=c;this.G=c&(b<<8^c);return a&255}
function Of(a,b){a=-b;this.rb(a,a&b&32768);return a&65535}function Pf(a,b){a=-b;this.rb(a<<8,(a&b&128)<<8);return a&255}function Qf(a,b){a=b<<1|this.C>>16&1;Ie(this,a);return a&65535}function Rf(a,b){a=b<<1|this.C>>16&1;Ie(this,a<<8);return a&255}function Sf(a,b){a=(this.C&65536|b)>>1|b<<16;Ie(this,a);return a&65535}function Tf(a,b){a=((this.C&65536)>>8|b)>>1|b<<8;Ie(this,a<<8);return a&255}function Uf(a,b){var c=b-a;Je(this,c,a,b);return c&65535}
function Vf(a,b){var c=b-a;Je(this,c<<8,a<<8,b<<8);return c&255}function Wf(a,b){this.I=this.L=b&65280;this.G=this.C=0;return(b<<8|b>>8)&65535}function Xf(a,b){a^=b;this.Ea(a);return a&65535}function Yf(a){P(this,a,Ue(this,a),yf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}
function Zf(a){var b=Xe(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.C=this.G=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.C=c<<17-b,c>>=b;else if(b)if(16<b)this.G=c,c=0;else{this.C=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.G=32768)}this.g[a]=c&65535;this.I=this.L=c;this.b-=(this.u?6:7)+b}
function $f(a){var b=Xe(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.C=this.G=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.C=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.C=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.G=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.I=d>>16;this.L=d>>16|d;this.b-=(this.u?6:7)+b}function ag(a){Fe(this,a,!Ae(this))}function bg(a){Fe(this,a,Ae(this))}
function cg(a){P(this,a,Ue(this,a),Ef);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}function dg(a){Ye(this,a,Te(this,a),Ff);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}function eg(a){P(this,a,Ue(this,a),Gf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}function fg(a){Ye(this,a,Te(this,a),Hf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}
function gg(a){var b=Ue(this,a);a=Xe(this,a);this.Ea((0>b?this.g[-b-1]:b)&a);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.X?4:3)+(7==this.j?2:0)}function hg(a){var b=Te(this,a);a=We(this,a);this.Ea(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.X?4:3)+(7==this.j?2:0)}function ig(a){Fe(this,a,Ce(this))}function jg(a){Fe(this,a,!De(this)==!Be(this))}function kg(a){Fe(this,a,!Ce(this)&&!De(this)==!Be(this))}function lg(a){Fe(this,a,!Ae(this)&&!Ce(this))}
function mg(a){Fe(this,a,Ce(this)||!De(this)!=!Be(this))}function ng(a){Fe(this,a,Ae(this)||Ce(this))}function og(a){Fe(this,a,!De(this)!=!Be(this))}function pg(a){Fe(this,a,De(this))}function qg(a){Fe(this,a,!Ce(this))}function rg(a){Fe(this,a,!De(this))}function sg(){this.sa(12,0,-9)}function tg(a){Fe(this,a,!0)}function ug(a){Fe(this,a,!Be(this))}function vg(a){Fe(this,a,Be(this))}function wg(a){a&1&&(this.C=0);a&2&&(this.G=0);a&4&&(this.L=1);a&8&&(this.I=0);this.b-=5}
function xg(a){var b=Ue(this,a);a=Xe(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;Je(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.X?4:3)+(7==this.j?2:0)}function yg(a){var b=Te(this,a);a=We(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);Je(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.X?4:3)+(7==this.j?2:0)}
function zg(a){var b=Xe(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.C=this.G=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.L=d>>16|d,this.I=d>>16):(this.G=32768,this.L=d>>15|d,this.I=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.L=this.I=0,this.G=32768,this.C=65536,this.b-=7}function Ag(){this.sa(24,0,-9);this.b-=20}
function Bg(){this.w&49152?(this.P|=128,this.sa(4,0,-8)):(this.ta&&1120==this.ka&&this.ta.setData(this.g[0],!0),this.F?Cg(this.F):this.ba());this.b-=7}function Dg(){this.sa(16,0,-9);this.b-=20}var Eg=[0,7,7,10,7,11,9,13];function Fg(a){this.la=this.b;ye(this,Ve(this,a));this.b=this.la-Eg[this.u]}var Gg=[0,14,14,17,14,18,16,20];function Hg(a){this.la=this.b;var b=Ve(this,a);a=a>>6&7;Ke(this,this.g[a]);this.g[a]=this.g[7];ye(this,b);this.b=this.la-Gg[this.u]}
var Ig=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Jg(a){var b=Ue(this,a);this.la=this.b;$e(this,a,b,this.Ea);this.b=this.la-Ig[(this.X?8:0)+this.u]+(7!=this.j||this.u?0:2)}function Kg(a){var b=Te(this,a);Ze(this,a,b,65535,this.Ea);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}var Lg=[7,13,13,17,14,18,17,21];
function Mg(a){var b=Xe(this,a);a=a>>6&7;b=(b<<16>>16)*(this.g[a]<<16>>16);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;b|=0;this.I=b>>16;this.L=this.I|b;this.G=0;this.C=-32768>b||32767<b?65536:0;this.b-=23}function Ng(){this.b-=5}function Og(){this.w&49152||(this.D.reset(),oc(this),this.ta&&this.ta.setData(this.g[0],!0));this.b-=667}function Pg(a){if(a&8)Q.call(this,a);else{var b=Me(this);a&=7;7==a?ye(this,b):(ye(this,this.g[a]),this.g[a]=b);this.b-=9}}function Qg(){Le(this);this.b-=13}
function Rg(a){a&1&&(this.C=65536);a&2&&(this.G=32768);a&4&&(this.L=0);a&8&&(this.I=32768);this.b-=5}function Sg(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)ye(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function Tg(a){P(this,a,Ue(this,a),Uf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.X?5:3)+(7==this.j?2:0)}function Ug(a){P(this,a,0,Wf);this.b-=this.u?9:3+(7==this.j?2:0)}function Vg(){this.sa(28,0,-9)}
function Wg(){this.ta&&(this.ta.Fd(this.g[7],!0),this.ta.setData(this.g[0],!0));this.i|=8;Ee(this,-2);this.b-=3}function Xg(a){P(this,a,this.g[(a>>6&7)+this.zc],Xf);this.b-=this.u?9:3+(7==this.j?2:0)}function Q(a){var b;if(b=this.F)b=this.F,z(b,1)?(C(b,"undefined opcode "+K(b,a),!0,!0),b=Cg(b)):b=!1;b||this.sa(8,0,-9)}function ue(a){Yg[a>>12].call(this,a)}function Zg(a){$g[a>>6&3].call(this,a)}function ah(a){bh[a>>6&3].call(this,a)}function ch(a){dh[a>>6&3].call(this,a)}
function eh(a){fh[a&15].call(this,a)}function gh(a){hh[a&15].call(this,a)}function ih(a){jh[a>>6&3].call(this,a)}function kh(a){lh[a>>6&3].call(this,a)}function mh(a){nh[a>>6&3].call(this,a)}
var Yg=[function(a){oh[a>>8&15].call(this,a)},Jg,xg,gg,cg,eg,Yf,Q,function(a){ph[a>>8&15].call(this,a)},Kg,yg,hg,dg,fg,Tg,Q],oh=[function(a){qh[a>>4&15].call(this,a)},tg,qg,ig,jg,og,kg,mg,Hg,Hg,Zg,ah,ch,Q,Q,Q],$g=[function(a){$e(this,a,0,this.rb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,If);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Mf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Kf);this.b-=this.u?9:3+(7==this.j?2:0)}],bh=[function(a){P(this,a,0,Of);
this.b-=this.u?11:6},function(a){P(this,a,Ae(this)?1:0,yf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,Ae(this)?1:0,Uf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Xe(this,a);this.rb(a);this.b-=this.u?4:3+(7==this.j?2:0)}],dh=[function(a){P(this,a,0,Sf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Qf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Cf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Af);this.b-=this.u?9:3+(7==this.j?2:0)}],qh=
[function(a){rh[a&15].call(this,a)},Q,Q,Q,Fg,Fg,Fg,Fg,Pg,Q,eh,gh,Ug,Ug,Ug,Ug],rh=[Bg,Wg,Qg,sg,Dg,Og,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],fh=[Ng,function(){this.C=0;this.b-=5},function(){this.G=0;this.b-=5},wg,function(){this.L=1;this.b-=5},wg,wg,wg,function(){this.I=0;this.b-=5},wg,wg,wg,wg,wg,wg,wg],hh=[Ng,function(){this.C=65536;this.b-=5},function(){this.G=32768;this.b-=5},Rg,function(){this.L=0;this.b-=5},Rg,Rg,Rg,function(){this.I=32768;this.b-=5},Rg,Rg,Rg,Rg,Rg,Rg,Rg],ph=[rg,pg,lg,ng,ug,vg,ag,bg,Ag,Vg,ih,kh,
mh,Q,Q,Q],jh=[function(a){Ze(this,a,0,255,this.rb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ye(this,a,0,Jf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ye(this,a,1,Nf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ye(this,a,1,Lf);this.b-=this.u?9:3+(7==this.j?2:0)}],lh=[function(a){Ye(this,a,0,Pf);this.b-=this.u?11:6},function(a){Ye(this,a,Ae(this)?1:0,zf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ye(this,a,Ae(this)?1:0,Vf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=We(this,
a);this.rb(a<<8);this.b-=this.u?4:3+(7==this.j?2:0)}],nh=[function(a){Ye(this,a,0,Tf);this.b-=this.u?9+(this.Wc&1):3+(7==this.j?2:0)},function(a){Ye(this,a,0,Rf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ye(this,a,0,Df);this.b-=this.u?9+(this.Wc&1):3+(7==this.j?2:0)},function(a){Ye(this,a,0,Bf);this.b-=this.u?9:3+(7==this.j?2:0)}];function ve(a){sh[a>>12].call(this,a)}
var sh=[function(a){th[a>>8&15].call(this,a)},Jg,xg,gg,cg,eg,Yf,function(a){uh[a>>8&15].call(this,a)},function(a){vh[a>>8&15].call(this,a)},Kg,yg,hg,dg,fg,Tg,Q],th=[function(a){wh[a>>4&15].call(this,a)},tg,qg,ig,jg,og,kg,mg,Hg,Hg,Zg,ah,ch,function(a){xh[a>>6&3].call(this,a)},Q,Q],xh=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.oa(a|this.Ia);ye(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=Re(this,a,0);this.Ea(a);Ke(this,a);this.b-=11},function(a){var b=Me(this);
this.la=this.b;this.Ea(b);Se(this,a,0,b);this.b=this.la-Lg[this.u]},function(a){$e(this,a,De(this)?65535:0,this.Ea);this.b-=this.u?9:3+(7==this.j?2:0)}],wh=[function(a){yh[a&15].call(this,a)},Q,Q,Q,Fg,Fg,Fg,Fg,Pg,function(a){!(a&8)||1145>this.ka?Q.call(this,a):(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5)},eh,gh,Ug,Ug,Ug,Ug],yh=[Bg,Wg,function(){Le(this);this.i|=this.w&16;this.b-=13},sg,Dg,Og,Qg,function(a){Q.call(this,a)},Q,Q,Q,Q,Q,Q,Q,Q],uh=[Mg,Mg,zg,zg,Zf,Zf,$f,$f,
Xg,Xg,Q,Q,Q,Q,Sg,Sg],vh=[rg,pg,lg,ng,ug,vg,ag,bg,Ag,Vg,ih,kh,mh,function(a){1145>this.ka?Q.call(this,a):zh[a>>6&3].call(this,a)},Q,Q],zh=[function(a){Q.call(this,a)},function(a){a=Re(this,a,65536);this.Ea(a);Ke(this,a);this.b-=11},function(a){var b=Me(this);this.la=this.b;this.Ea(b);Se(this,a,65536,b);this.b=this.la-Lg[this.u]},function(a){Q.call(this,a)}];
function Ah(a){r.call(this,"ROM",a,128);this.ga=this.g=null;this.u=+a.addr;this.b=+a.size;this.w=!1;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.j=a.file;this.B=Na(this.j);if(this.j){a=this.j;var b=Oa(this.B);"json"!=b&&"hex"!=b&&(a=cb()+"/api/v1/dump?file="+this.j+"&format=bytes&decimal=true");var c=this;ab(a,null,!0,function(a,b,f){f?(c.T("Unable to load ROM resource (error "+f+": "+a+")"),c.j=null):(oa(c.wb,a,b),(a=bb(a,b))?(c.g=a.ca,c.ga=a.ga):c.j=null);Bh(c)})}}p(Ah,r);
h=Ah.prototype;h.Aa=function(a,b,c,d){this.D=b;this.f=c;this.F=d;Bh(this)};h.Da=function(){this.ga&&(this.F&&Ch(this.F,this.id,this.u,this.b,this.ga),delete this.ga);return!0};h.Ca=function(){return!0};
function Bh(a){if(!Fa(a)){if(a.j){if(!a.g||!a.D)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)Da(a,"ROM size ("+F(a.g.length,8,!0)+") does not match specified size ("+F(a.b,8,!0)+")");else{var b;a:{b=a.u;if(57344<=b&&b<57344+Fc){var c={},c=(c[b]=[Ah.prototype.Jg,Ah.prototype.Zh,null,null,null,a.b>>1],c);if(Vb(a.D,a,c)){a.status("Added "+a.b+"-byte ROM at "+E(b));b=a.w=!0;break a}}else if(Wc(a.D,b,a.b,Gd)){for(c=0;c<a.g.length;c++)ed(a.D,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.i?
b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.D,g=d.b,k=[],l=d.u>>>f.g;0<g&&l<f.b.length;)k.push(f.b[l++]),g-=f.j;f=d.D;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){l=k[g++];if(!l)break;f.b[e++]=l;d-=f.j}}a.w||delete a.g}}}y(a)}}h.Jg=function(a){return this.g[a-this.u]};h.Zh=function(){};qb(function(){for(var a=x(document,w,"rom"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new Ah(d);xa(d,c)}});
function Dh(a){r.call(this,"RAM",a);this.ga=this.g=null;this.i=+a.addr;this.j=+a.size;this.za=a.load;this.ya=a.exec;null!=this.za&&(this.za=+this.za);null!=this.ya&&(this.ya=+this.ya);this.u=!1;this.b=a.file;this.w=Na(this.b);if(this.b){a=this.b;var b=Oa(this.w);"json"!=b&&"hex"!=b&&(a=cb()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;ab(a,null,!0,function(a,b,f){f?(c.T("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(oa(c.wb,a,b),(a=bb(a,b))?(c.g=a.ca,c.ga=a.ga,
null==c.za&&(c.za=a.za),null==c.ya&&(c.ya=a.ya)):c.b=null);Eh(c)})}}p(Dh,r);Dh.prototype.Aa=function(a,b,c,d){this.D=b;this.f=c;this.F=d;Eh(this)};Dh.prototype.Da=function(a,b){this.ga&&(this.F&&Ch(this.F,this.id,this.i,this.j,this.ga),delete this.ga);b||this.reset();return!0};Dh.prototype.Ca=function(){return!0};
function Eh(a){if(a.D&&(!a.u&&a.j&&(Wc(a.D,a.i,a.j,gd)?a.u=!0:a.j=0),!Fa(a))){if(!a.u)v("No RAM allocated");else if(a.b){if(!a.g||!a.D)return;Fh(a,a.g,a.za,a.ya,a.i)?a.status('Loaded image "'+a.w+'"'):a.T('Error loading image "'+a.w+'"')}y(a)}}
Dh.prototype.reset=function(){if(this.u){for(var a=this.D,b=this.i,c=this.j,d=b&a.i,b=b>>>a.g;0<c&&b<a.b.length;){var e=a.b[b],f=c,g=0,k,d=d||0,g=(g||0)&255;void 0===f&&(f=e.size);if(Eb&&e.g)for(k=d;f--&&k<e.g.length;k++)e.g[k]=g;else for(k=d;f--&&k<e.size;k++)e.F(d,g,e.K+d);c-=a.j;b++;d=0}this.g&&Fh(this,this.g,this.za,this.ya,this.i,!this.F)}};
function Fh(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){var n=l;if(1!=m){C(a,"invalid signature ("+Ma(m)+") at offset "+Ma(n),4096);break}if(l+6>=b.length){C(a,"invalid block at offset "+Ma(n),4096);break}for(var l=l+2,q=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8,m=m+((q&255)+(q>>8)+(t&255)+(t>>8)),u=l,D=q-=6;0<q&&l<b.length;)m+=b[l++]&255,q--;if(q||l>=b.length){C(a,"insufficient data for block at offset "+Ma(n),4096);
break}m+=b[l++]&255;if(m&255){C(a,"invalid checksum ("+F(m,2,!0)+") for block at offset "+Ma(n),4096);break}if(D)for(C(a,"loading "+Ma(D)+" bytes at "+Ma(t)+"-"+Ma(t+D),4096);D--;)ed(a.D,t++,b[u++]&255);else t&1?g=!0:null==d&&(d=t),null!=d&&C(a,"starting address: "+Ma(d),4096);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)ed(a.D,c+e,b[e]);k=!0}if(k){if(null==d||g)a.f.ba(),f=!1;null!=d&&xe(a.f,d,f)}return k}
qb(function(){for(var a=x(document,w,"ram"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new Dh(d);xa(d,c)}});function Gh(a){r.call(this,"Keyboard",a,1024);y(this)}p(Gh,r);Gh.prototype.va=function(){return!1};Gh.prototype.Aa=function(a,b,c,d){this.J=a;this.f=c;this.F=d};qb(function(){for(var a=x(document,w,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new Gh(d);xa(d,c)}});
function Hh(a){r.call(this,"SerialPort",a,1048576);this.M=+a.adapter;this.S=+a.baudReceive||9600;this.Y=+a.baudTransmit||9600;this.L=a.upperCase;"string"==typeof this.L&&(this.L="true"==this.L);this.u=this.w=null;this.W=+a.tabSize;this.U=+a.charBOL;this.B=0;this.I=!0;this.P=this.N=null;this.R=this.X=-1;this.C=this.b=this.g=0;this.i=[];var b=a.binding;if("console"==b)this.w="";else{var c;a=Ih;b&&(void 0===c&&(c="Panel"),(c=va(c,this.id))&&(b=c.H[b])&&this.va(null,a,b))}this.j=this.G=this.O=null;this.exports=
{connect:this.ue,receiveData:this.Oc,receiveStatus:this.fh,setConnection:this.jh}}p(Hh,r);h=Hh.prototype;
h.va=function(a,b,c){var d=this;switch(b){case Ih:return this.H[b]=this.u=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?la.Md:la.cc:46==c?b=la.Md:a.ctrlKey&&c>=la.Id&&c<=la.xf&&(b=c-(la.Id-la.Fe));b&&(a.preventDefault&&a.preventDefault(),d.Oc(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==la.He&&(b=la.Ge);d.Oc(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Oc(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};
h.Aa=function(a,b,c,d){this.J=a;this.D=b;this.f=c;this.F=d;var e=this;this.P=nd(this.f,this.M?-1:48,4,1048576);this.R=kd(this.f,function(){var a;a=-1;e.i.length&&(a=e.i.shift()&255,C(e,"receiveByte("+F(a,2,!0)+")"),e.L&&97<=a&&122>a&&(a-=32),md(e.f,e.R,1E3/Math.round(e.S/10)));0<=a&&(e.C=a,e.b&128?e.C|=49152:e.b|=128,e.b&64&&ld(c,e.P))});this.N=nd(this.f,this.M?-1:52,4,1048576);this.X=kd(this.f,function(){e.g|=128;e.g&64&&ld(c,e.N)});Vb(b,this,Jh,this.M?64832+8*(this.M-1)-65392:0);Xb(b,this.reset.bind(this));
y(this)};h.ue=function(a){if(!this.j){var b=ee(this.J,"connection");if(b){var c=b.split("->");if(2==c.length){var d=Xa(c[0]);if(d!=this.Mb)return;c=Xa(c[1]);if(this.j=ua(c)){var e=this.j.exports;if(e){var f=e.connect;f&&f.call(this.j,this.I);if(this.G=e.receiveData){this.I=a;this.O=e.receiveStatus;this.status("Connected "+this.wb+"."+d+" to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.Da=function(a,b){if(!b)if(this.ue(this.I),!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){Kh(this)};h.save=function(){var a=new G(this);a.set(0,[this.C,this.b,this.g,this.i]);return a.data()};h.restore=function(a){return Kh(this,a[0])};function Kh(a,b){b||(b=[0,8192,128,a.i]);b=ia(b);a.C=b.next().value;a.b=b.next().value;a.g=b.next().value;a.i=b.next().value;return!0}
h.Oc=function(a){if("number"==typeof a)this.i.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.i.push(b)}else this.i=this.i.concat(a);md(this.f,this.R,1E3/Math.round(this.S/10));return!0};h.fh=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&ld(this.f,this.P))};h.jh=function(a,b){return this.j?!1:(this.j=a,this.G=b,!0)};
h.wg=function(){var a=this.b&65534;this.b&=-32769;return a};h.Mh=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.O&&b&6&&(b=0,b=this.I?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.O.call(this.j,b))};h.vg=function(){this.b&=-129;return this.C};h.Lh=function(){};h.eh=function(){return this.g};h.ui=function(a){this.g&128&&(a&64?ld(this.f,this.N):rd(this.f,this.N));this.g=this.g&-70|a&69};h.dh=function(){return 0};
h.ti=function(a){a&=255;this.G&&this.G.call(this.j,a);a&=127;if(this.u)if(13==a)this.B=0;else if(8==a)this.u.value=this.u.value.slice(0,-1),0<this.B&&this.B--;else{if(a){var b;13!=a&&10!=a&&(b=Ya[a]);b=b?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.W||8,c=a-this.B%a,this.W&&(b=Wa("",c)));this.U&&!this.B&&c&&(b=String.fromCharCode(this.U)+b);this.u.value+=b;this.u.scrollTop=this.u.scrollHeight;this.B+=c}}else if(null!=this.w){if(10==a||1024<=this.w.length)this.v(this.w),
this.w="";10!=a&&(this.w+=String.fromCharCode(a))}md(this.f,this.X,1E3/Math.round(this.Y/10));this.g&=-129};var Ih="buffer",Lh={},Jh=(Lh[65392]=[null,null,Hh.prototype.wg,Hh.prototype.Mh,"RCSR"],Lh[65394]=[null,null,Hh.prototype.vg,Hh.prototype.Lh,"RBUF"],Lh[65396]=[null,null,Hh.prototype.eh,Hh.prototype.ui,"XCSR"],Lh[65398]=[null,null,Hh.prototype.dh,Hh.prototype.ti,"XBUF"],Lh);qb(function(){for(var a=x(document,w,"serial"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new Hh(d);xa(d,c)}});
function Ad(a){r.call(this,"PC11",a,4096);this.N=Mh(this,a.autoMount);this.g=0;this.U=+a.baudReceive||3600;this.w=this.b=0;this.L=32768;this.i=this.R=0;this.C=[];this.B=Nh;this.j=Oh;this.M=this.u="";this.ca=this.za=this.ya=null;this.P=-1;this.O=!hb("Mobi")&&window&&"FileReader"in window;this.G=null;this.S=-1;this.I=null}p(Ad,r);function Mh(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){v(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=Ad.prototype;
h.va=function(a,b,c){var d=this,e=Oh;switch(b){case "listTapes":return this.H[b]=c,c.onchange=function(){var a=d.H.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){v("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.H[b]=c,!0;case "readTape":e=Ph;case "loadTape":return e||(e=Qh),this.H[b]=c,c.onclick=
function(){var a=d.H.listTapes;a&&Rh(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.O){c.parentNode.removeChild(c);break}this.H[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Rh(d,Na(b,!0),b,Qh,a)}return!1};return!0;case Sh:return this.H[b]=c,!0}return!1};
h.Aa=function(a,b,c,d){this.J=a;this.D=b;this.f=c;this.F=d;this.I=Th(a);var e=this;if(a=Mh(this,ee(this.J,"autoMount")))for(var f in a)"PTR"==f&&(this.N[f]=a[f]);this.G=nd(this.f,56,4,4096);this.S=kd(this.f,function(){1!=(e.b&32769)||e.b&128||(e.i<e.C.length?(e.w=e.C[e.i]&255,z(e)&&C(e,e.type+".advanceReader("+e.i+"): "+F(e.w,2,!0),!0),e.i++,Uh(e,e.i/e.C.length*100)):e.b|=32768,e.b|=128,e.b&=-2049,e.b&64&&ld(e.f,e.G))});Vb(b,this,Vh);Xb(b,this.reset.bind(this));Wh(this,"None",Nh,!0);this.O&&Wh(this,
"Local Tape",Xh);Wh(this,"Remote Tape",Yh);Zh(this)||y(this)};h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.b&=-2241;this.w=0};function Zh(a){a.g=0;var b=a.N.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.H.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=Na(c,!0)}c&&b?$h(a,b,c,Qh,!0):ai(a)}return!!a.g}
function Rh(a,b,c,d,e){if(c)if(c==Xh)a.T('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==Yh){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=Na(c);a.status("Attempting to load "+c+' as "'+b+'"');a.B=Yh}else a.B=c;$h(a,b,c,d,!1,e)}else bi(a,!1)}
function $h(a,b,c,d,e,f){var g=-1;if(a.u.toLowerCase()!=c.toLowerCase()||a.j!=d)g++,bi(a,!0),a.A.gb?a.T("PC11 busy"):(e&&(a.g++,z(a)&&C(a,"auto-loading tape: "+b)),ci(a,b,c,d,f)?g++:a.A.gb=!0);g&&di(a,a.M,a.u,a.j,a.ca,a.za,a.ya)}
function ci(a,b,c,d,e){var f=c;if(e){var g=new FileReader;g.onload=function(){var e=g.result;e&&(e=new Uint8Array(e,0,e.byteLength),di(a,b,c,d,e),a.B=Xh);a.A.gb=!1;ai(a)};g.readAsArrayBuffer(e);return!1}0>c.indexOf("/api/v1/dump")&&(e=Oa(c),f="json"==e||"gz"==e?encodeURI(c):cb()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!ab(f,null,!0,function(e,f,g){var k=0>g&&!!a.J&&!a.J.A.aa;g?a.T('Unable to load tape "'+b+'" (error '+g+": "+e+")",k):(oa(a.wb,e,f),(e=bb(e,f))&&di(a,b,c,d,
e.ca,e.za,e.ya));a.A.gb=!1;a.g&&(a.g--,a.g||y(a));ai(a)})}function Wh(a,b,c,d){if((a=a.H.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function ai(a){var b=a.H.listTapes;if(b&&b.options){a=a.B||a.u;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function Uh(a,b){b|=0;if(b!==a.P){var c=a.H[Sh];c&&(c=(c=x(c,ei))&&c[0])&&c.style&&(c.style.width=b+"%");a.P=b}}
function di(a,b,c,d,e,f,g){a.M=b;a.u=c;a.j=d;a.ca=e;a.za=f;a.ya=g;d==Ph?a.I&&Fh(a.I,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.T('No valid memory address for tape "'+b+'"'):(a.i=0,a.C=e,a.b&=-32769,a.status('Loaded tape "'+b+'" ('+e.length+" bytes)"),Uh(a,0))}function bi(a,b){if(a.u||!1===b)a.M="",a.u="",b||(a.j&&a.status(a.j==Qh?"tape detached":"tape unloaded"),a.B=Nh,a.j=Oh,ai(a))}h.save=function(){return(new G(this)).data()};h.restore=function(){return!0};h.pg=function(){return this.b&65534};
h.Fh=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&ld(this.f,this.G)):(this.b&=-129,this.b|=2048,this.w=0,md(this.f,this.S,1E3/Math.round(this.U/10))));this.b=this.b&-66|a&65};h.og=function(){this.b&=-129;this.b|=2048;return this.w};h.Eh=function(){};h.ng=function(){return this.L};h.Dh=function(a){this.L=this.L&-65|a&64};h.mg=function(){return this.R};h.Ch=function(a){this.R=a&255};
var Nh="",Xh="?",Yh="??",Oh=0,Qh=1,Ph=2,Sh="readProgress",ei="pcjs-progress-bar",fi={},Vh=(fi[65384]=[null,null,Ad.prototype.pg,Ad.prototype.Fh,"PRS"],fi[65386]=[null,null,Ad.prototype.og,Ad.prototype.Eh,"PRB"],fi[65388]=[null,null,Ad.prototype.ng,Ad.prototype.Dh,"PPS"],fi[65390]=[null,null,Ad.prototype.mg,Ad.prototype.Ch,"PPB"],fi);
function gi(a,b,c){r.call(this,"Disk",{id:a.wb+".disk"+F(++hi,4)},8192);this.controller=a;this.J=a.J;this.F=a.F;this.u=b;this.Ya=b.name;this.Oa=this.Ed="";this.zd=b.zd;this.Z=this.ja=this.ea=this.ua=this.mode=0;this.b=[];this.i=null;this.j=!1;ii(this,c,b.Z,b.ja,b.ea,b.ua);this.g=this.w=null;y(this)}p(gi,r);h=gi.prototype;h.Aa=function(a,b,c,d){this.F=d};
function ii(a,b,c,d,e,f){a.mode=b;a.Z=c;a.ja=d;a.ea=e;a.ua=f;a.b=[];if("preload"!=a.mode){b=Array(a.Z);for(c=0;c<b.length;c++){d=Array(a.ja);for(e=0;e<d.length;e++){f=Array(a.ea);for(var g=1;g<=f.length;g++)f[g-1]=ji(null,c,e,g,a.ua,0);d[e]=f}b[c]=d}a.b=b}a.i=null}
function ki(a,b,c,d,e){var f=c;if(a.g)return!0;a.Ya=b;a.Oa=c;a.Ed=Na(c);a.g=e;a.w=a.controller;if(d){var g=new FileReader;g.onload=function(){var b=g.result,c,d=b?b.byteLength:0,e=ka[d];if(e){a.Z=e[0];a.ja=e[1];a.ea=e[2];a.ua=e[3]||512;c=a.ua>>2;var f=e=0,b=new DataView(b,0,d);a.b=Array(a.Z);for(d=0;d<a.b.length;d++)for(var t=a.b[d]=Array(a.ja),u=0;u<t.length;u++)for(var D=t[u]=Array(a.ea),A=0;A<D.length;A++){for(var B=ji(null,d,u,A+1,a.ua,0),J=B.data,vb=0;vb<c;vb++,f+=4)var Dd=J[vb]=b.getInt32(f,
!0),e=e+Dd&-1;B.La=c;D[A]=B}a.i=e;c=a}else a.T("Unrecognized disk format ("+d+" bytes)");a.g&&(a.g.call(a.controller,a.u,c,a.Ya,a.Oa),a.g=null)};g.readAsArrayBuffer(d);return!0}0>c.indexOf("/api/v1/dump")&&(b=Oa(c),"json"==b||"gz"==b?f=encodeURI(c):(d="path",e="&mbhd=10",!c.indexOf("http:")||!c.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(b)?(d="disk",e="&mbhd=0"):Pa(c,"/")&&(d="dir"),f=cb()+"/api/v1/dump?"+d+"="+encodeURIComponent(c)+(a.zd?"":e)+"&format=json"));return!!ab(f,
null,!0,function(b,c,d){li(a,b,c,d)})}
function li(a,b,c,d){var e=null,f=0>d&&!!a.J&&!a.J.A.aa;a.j=!1;if(d)a.controller.T('Unable to load disk "'+a.Ya+'" (error '+d+": "+b+")",f);else{oa(a.controller.wb,b,c);try{if(0<Na(a.Ed,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var k;"<"==c.substr(0,1)?k=["Missing disk image: "+a.Ya]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+
c+")");if(k.length)if(1==k.length)v(k[0]);else{a.Z=k.length;a.ja=k[0].length;a.ea=k[0][0].length;var l=k[0][0][0];a.ua=l&&l.length||512;for(d=c=0;d<a.Z;d++)for(f=0;f<a.ja;f++)for(g=0;g<a.ea;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);var m=m>>2,n=l.pattern;void 0===n&&(n=l.pattern=0);var q=l.data;if(void 0===q){var t=l.bytes;if(void 0!==t&&t.length){for(var u=m<<2,D=t.length;D<u;D++)t[D]=n;mi(l,t)}else q=[],n=l.pattern=n|n<<8|n<<16|n<<24,l.data=q;delete l.bytes}ji(l,d,f);for(u=
0;u<q.length;u++)c=c+q[u]&-1}a.b=k;a.i=c;e=a}else v("Empty disk image: "+a.Ya)}catch(A){v("Disk image error ("+b+"): "+A.message)}}a.g&&(a.g.call(a.w,a.u,e,a.Ya,a.Oa),a.g=null)}function ji(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.xk=b;a.yk=c;a.Va=a.La=0;a.hb=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.u,g=this.b[a];if(g){var k=g[b];if(!k&&f.zf&&b<f.ja)for(k=g[b]=Array(f.Af),g=0;g<k.length;g++)k[g]=ji(null,a,b,g+1,f.ve,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.zf&&9==f.ie&&(d=k[g]=ji(null,a,b,f.ie,f.ve,0))}}e&&e(d,!1);return d};function mi(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length)var c=a.data,d=b>>2,c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255;return c};h.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.La?f<a.Va?(a.La+=a.Va-f,a.Va=f):f>=a.Va+a.La&&(a.La+=f-(a.Va+a.La)+1):(a.Va=f,a.La=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function ni(a,b){var c=a.ja*a.ea,d=b/c|0;return d<a.Z?(b%=c,a.seek(d,b/a.ea|0,b%a.ea+1)):null}function oi(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}h.save=function(){var a=0,b=[];b[a++]=[this.Oa,this.i,this.Z,this.ja,this.ea,this.ua];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.La){for(var k=[],l=0,m=g.Va,n=g.Va+g.La;m<n;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.Va,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?ii(this,"local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.b.length||l>=this.b[k].length||m>=this.b[k][l].length){c="sector (CHS="+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.b[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.Va=e;for(k.La=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.T("Unable to restore disk '"+this.Ya+": "+c);return b};
h.toJSON=function(){var a;a=0;for(var b;b=ni(this,a++);)pi(b);a=JSON.stringify(this.b,function(a,b){if("file"!=a)return b});a=a.replace(/,"length":512/gm,"").replace(/,"pattern":0/gm,"");a=a.replace(/"(sector|length|data|pattern)":/gm,"$1:");a=a.replace(/,"[^"]*":([0-9]+|true|false)/gm,"");a=a.replace(/(sector|length|data|pattern):/gm,'"$1":');return a=a.replace(/([\]}]),/gm,"$1,\n")};
function pi(a){var b=a.data,c=b.length;if(c<<2==a.length){for(var d=c-1,e=b[d],f=0;d--&&b[d]===e;)f++;f++&&(b.length=c-f,a.pattern=e)}}var hi=0;function qi(a,b,c,d,e,f){r.call(this,a,b,c);this.N=ri(this,b.autoMount);this.M=0;this.R=d;this.S=e;this.U=f;this.P=d.Zc;this.g=Array(this.P);this.O=!hb("Mobi")&&window&&"FileReader"in window;this.B=[];this.Qa=null;this.exports={bootDisk:this.ke,loadDisk:this.Ad,selectDrive:this.ih,wait:this.lh}}p(qi,r);
function ri(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){v(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=qi.prototype;
h.va=function(a,b,c){var d=this;switch(b){case "listDisks":return this.H[b]=c,c.onchange=function(){si(d)},!0;case "descDisk":case "listDrives":return this.H[b]=c,c.onchange=function(){var a=Ja(c.value,10);null!=a&&Mi(d,a)},!0;case "loadDisk":return this.H[b]=c,c.onclick=function(){d.Ad()},!0;case "bootDisk":return this.H[b]=c,c.onclick=function(){d.ke()},!0;case "saveDisk":if(!this.O){c.parentNode.removeChild(c);break}this.H[b]=c;c.onclick=function(){var a=d.H.listDrives;if(a&&a.options&&d.g)if(a=
d.g[Ja(a.value,10)||0])if(a=a.da){var b;b="";for(var c=0,k;k=ni(a,c++);)for(var l=0,m=k.length;l<m;l++)b+=String.fromCharCode(oi(a,k,l));b=btoa(b);a=a.Ed.replace(".json",".img");c=null;b="data:application/octet-stream;base64,"+b;a&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=b,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),a="Check your Downloads folder for "+a+"."):(window.open(b),a="Check your browser for a new window/tab containing the requested data"+
(a?" ("+a+")":"")+".");v(a)}else d.T("No disk loaded in drive.");else d.T("No disk drive selected.")};return!0;case "mountDisk":if(this.O)return this.H[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;d.Ad(Na(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.Aa=function(a,b,c,d){this.J=a;this.D=b;this.f=c;this.F=d;if(a=ri(this,ee(this.J,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.N[e]=a[e]);this.reset();this.Qa=nd(this.f,this.R.ud,this.R.qd,this.ha);Vb(b,this,this.U);Xb(b,this.reset.bind(this));Oi(this,"None",Pi,!0);this.O&&Oi(this,"Local Disk",Qi);Oi(this,"Remote Disk",Ri);Si(this)||y(this)};
h.Da=function(a,b){if(!b){if(!a){if(this.reset(),this.J.M){this.B=[];for(a=0;a<this.g.length;a++)Ti(this,a,!0);Si(this,!0)}}else if(!this.restore(a))return!1;if(a=this.H.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.P;b++){var c=document.createElement("option");c.value=b;c.text=this.g[b].Qc||"---";a.appendChild(c)}0<this.P&&(a.value="0",Mi(this,0))}}return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.Db();Ui(this)};
h.save=function(){var a=new G(this);a.set(0,this.Rc());a.set(1,Vi(this));a.set(2,Wi(this));return a.data()};h.restore=function(a){var b=!0;this.Db(a[0])||(b=!1);var c=a[1];c&&(this.B=c);Ui(this,a[2])||(b=!1);return b};h.Db=function(){return!0};h.Rc=function(){return[]};
function Ui(a,b){for(var c=0;c<a.g.length;c++){var d=a.g[c];void 0===d&&(d=a.g[c]={});var e=a,f=d,d=c,g=a.S,k=b&&b[c],l=0;f.Tb=d;f.name=e.Mb;f.Mc=f.Pb=!1;f.ic=null;f.zd=!0;f.Qc=g[l++]+d;f.Z=g[l++];f.ja=g[l++];f.ea=g[l++];f.ua=g[l++];f.If=g[l++];f.Jf=g[l++];f.Kf=g[l++];f.Bf=g[l++];f.status=g[l++];f.rk=0;f.qk=0;f.ie=1;f.Af=f.ea;f.ve=f.ua;f.zk=0;f.Gk=null;f.da||(f.Oa="");k&&(l=k[1],g=k[2],k[0]?(f=l,k=g,g=e.g[d],Ti(e,d,!0),g.Pb=!0,d=new gi(e,g,"preload"),e.ne(g,d,f,k,!0)):Xi(e,d,l,g,!0)?f.da&&g&&Yi(e,
l,g,f.da):y(e,!1))}return!0}function Wi(a){for(var b=[],c=0;c<a.g.length;c++){var d=a.g[c];b.push([d.Pb,d.Ya,d.Oa])}return b}function Vi(a){for(var b=0;b<a.g.length;b++){var c=a.g[b];c.da&&Zi(a,c.Oa,c.da)}return a.B}
function Si(a,b){b||(a.M=0);for(var c in a.N){var d=a.N[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.H.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=Na(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!Xi(a,g,f,e,!0)&&b&&y(a,!1);continue}a.T("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.M}
h.Ad=function(a,b,c){if(!a&&!b){var d=this.H.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.H.listDrives)&&Ja(d.value,10);if(void 0===d||0>d||d>=this.g.length)return this.T("Unable to load the selected drive"),!1;if(!b)return Ti(this,d),!0;if(b==Qi)return this.T('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==Ri){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=Na(b);this.status("Attempting to load "+b+' as "'+
a+'"')}Xi(this,d,a,b,!1,c);return!0};h.ke=function(){var a,b=this.H.listDrives,b=b&&Ja(b.value,10);if(null==b||0>b||b>=this.g.length||!(a=this.g[b]))return this.T("Unable to boot the selected drive"),!1;if(!a.da)return this.T("Load a disk into the drive first"),!1;xe(this.f,0,!0,b);return(a=this.Ub(a,a.If,a.Jf,a.Kf,a.Bf,0,2))?(this.T("Unable to read the boot sector ("+a+")"),!1):!0};
function Xi(a,b,c,d,e,f){var g=-1,k=a.g[b];k.Oa.toLowerCase()!=d.toLowerCase()&&(g++,Ti(a,b,!0),k.Mc?a.T(a.type+" busy"):(k.Mc=!0,e&&(k.yd=!0,a.M++,z(a)&&C(a,"auto-loading disk: "+c)),k.Pb=!!f,ki(new gi(a,k,"preload"),c,d,f,a.ne)&&g++));return g}
h.ne=function(a,b,c,d,e){a.Mc=!1;b&&(b.Z>a.Z||b.ja>a.ja)&&(this.T('Disk "'+c+'" too large for drive '+(this.g[a.Tb].Qc||"---")),b=null);b?(a.da=b,a.Ya=c,a.Oa=d,this.we(a.Tb),Yi(this,c,d,b),this.T('Loaded disk "'+c+'" in drive '+(this.g[a.Tb].Qc||"---"),a.yd||e),this.J&&oe(this.J)):a.Pb=!1;a.yd&&(a.yd=!1,--this.M||y(this));Mi(this,a.Tb);a.ic&&(a.ic(),a.ic=null)};
function Oi(a,b,c,d){if((a=a.H.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Mi(a,b,c){var d=!1;if(0<=b&&b<a.g.length){var e=a.g[b],f=a.H.listDisks;a=a.H.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(Ja(a.options[c].value,10)==e.Tb){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=Ja(a.value,10);e=e.Pb?Qi:e.Oa;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
h.ih=function(a){var b=this.H.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=Ja(b.options[d].value,10);if(0<=e)return Mi(this,e,!0)}return!1};
function si(a){var b=a.H.listDisks,c=a.H.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){v(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='<a href="'+b+'" target="_blank">'+a+"</a>");c.innerHTML=a}}h.lh=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(c&&c.Mc)return c.ic||(c.ic=a),!1}return!0};
function Ti(a,b,c){var d=a.g[b];if(d.da||!1===c)Zi(a,d.Oa,d.da),d.Ya="",d.Oa="",d.da=null,d.Pb=!1,c||(a.T("Drive "+(a.g[b].Qc||"---")+" unloaded",c),Mi(a,b))}function Yi(a,b,c,d){var e;for(e=0;e<a.B.length;e++)if(a.B[e][1]==c){d.restore(a.B[e][2]);return}a.B[e]=[b,c,[]]}function Zi(a,b,c){var d;for(d=0;d<a.B.length;d++)if(a.B[d][1]==b){a.B[d][2]=c.save();break}}h.we=function(){};h.Ub=function(){return-1};h.Uc=function(){return-1};var Pi="",Qi="?",Ri="??";
function N(a){qi.call(this,"RK11",a,65536,Lb,Lb.Gc,$i);this.G=this.i=this.b=this.w=this.u=this.j=this.C=0}p(N,qi);h=N.prototype;h.Db=function(a){a||(a=[aj.Gc|aj.ce|aj.Zd,0,R.$a,0,0,0,0]);a=ia(a);this.G=a.next().value;this.i=a.next().value;this.b=a.next().value;this.w=a.next().value;this.u=a.next().value;this.j=a.next().value;this.C=a.next().value;return!0};h.Rc=function(){return[this.G,this.i,this.b,this.w,this.u,this.j,this.C]};
h.Ub=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.da;var n=null,q;a||(m=S.Td,e=0);for(;e;){if(!n){if(b>=a.Z){m=S.Ec;break}n=a.seek(b,c,d+1);if(!n){m=S.be;break}q=0;++d>=a.ea&&(d=0,++c>=a.ja&&(c=0,++b))}var t,u;if(0>(t=a.read(n,q++))||0>(u=a.read(n,q++))){m=S.Fc;break}if(!k&&(wc(this.D,Ne(this.f,f),t|u<<8),jd(this.D))){m=S.ec;break}q>=a.ua&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Uc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.da;var n=null,q;a||(m=S.Td,e=0);for(;e;){var t=yc(this.D,Ne(this.f,f));if(jd(this.D)){m=S.ec;break}if(!n){if(b>=a.Z){m=S.Ec;break}n=a.seek(b,c,d+1,!0);if(!n){m=S.be;break}q=0;++d>=a.ea&&(d=0,++c>=a.ja&&(c=0,++b))}if(k){var u,D;if(0>(u=a.read(n,q++))||0>(D=a.read(n,q++))){m=S.Fc;break}if(t!=(u|D<<8)){m=S.fe;break}}else if(!a.write(n,q++,t&255)||!a.write(n,q++,t>>8)){m=S.Fc;break}q>=a.ua&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Ze=function(a,b,c,d,e,f){this.u=f&65535;this.b=this.b&~R.Jb|f>>16-R.ma.Jb&R.Jb;this.w=65536-e&65535;this.j=this.j&~bj.rd|d&bj.rd;this.i|=a;cj(this);return!0};function cj(a){a.b&=~R.jb;a.i&&(a.i|=S.Je,a.b|=R.jb,a.i&S.ed&&(a.b|=R.ed),z(a)&&C(a,a.type+": ERROR: "+E(a.i)))}h.Bg=function(){return this.G};h.Rh=function(){};h.Cg=function(){return this.i};h.Sh=function(){};h.yg=function(){return this.b&R.fc};
h.Oh=function(a){this.b=this.b&~R.Sa|a&R.Sa;if(this.b&R.dc){a=!0;var b,c,d="",e=(this.j&bj.tb)>>bj.ma.tb,f=this.g[e],g,k,l,m,n,q;this.b&=~(R.$a|R.sd);this.i&=~S.qf;switch(c=this.b&R.wa){case dj.Ee:z(this)&&C(this,this.type+": CRESET("+e+")",!0);this.i=this.j=0;this.b=R.$a;break;case dj.Ue:d="RCHK";case dj.ub:d||(d="READ"),b=this.Ub;case dj.vd:d||(d="WCHK");case dj.hc:d||(d="WRITE");b||(b=this.Uc);g=(this.j&bj.bc)>>bj.ma.bc;k=(this.j&bj.hd)>>bj.ma.hd;l=this.j&bj.rd;m=65536-this.w&65535;n=(this.b&R.Jb)<<
16-R.ma.Jb|this.u;q=this.b&R.Qe?0:2;z(this)&&C(this,this.type+": "+d+"("+g+":"+k+":"+l+") "+E(n)+"--"+E(n+(m<<1)),!0,!0);if(g>=f.Z){this.i|=S.Ec;break}if(l>=f.ea){this.i|=S.Fc;break}a=b.call(this,f,g,k,l,m,n,q,c>=dj.vd,this.Ze.bind(this));break;case dj.Kc:g=(this.j&bj.bc)>>bj.ma.bc;z(this)&&C(this,this.type+": SEEK("+g+")",!0);g<f.Z?this.b|=R.sd:this.i|=S.Ec;break;case dj.Ke:z(this)&&C(this,this.type+": DRESET("+e+")");this.i=this.j=0;this.b=R.$a|R.sd;break;default:z(this)&&C(this,this.type+": UNSUPPORTED("+
c+")")}this.G=f.status|(f.da?aj.Fa:0)|e<<aj.ma.kd|this.j&aj.pf;cj(this);a&&(this.b&=~R.dc,this.b|=R.$a,this.b&R.Ib&&ld(this.f,this.Qa))}};h.Dg=function(){return this.w};h.Th=function(a){this.w=a};h.xg=function(){return this.u};h.Nh=function(a){this.u=a};h.zg=function(){return this.j};h.Ph=function(a){this.j=a};h.Ag=function(){return this.C};h.Qh=function(a){this.C=a};
var aj=Lb.Hc,S=Lb.bf,R=Lb.$e,bj=Lb.af,dj=Lb.wa,ej={},$i=(ej[65280]=[null,null,N.prototype.Bg,N.prototype.Rh,"RKDS"],ej[65282]=[null,null,N.prototype.Cg,N.prototype.Sh,"RKER"],ej[65284]=[null,null,N.prototype.yg,N.prototype.Oh,"RKCS"],ej[65286]=[null,null,N.prototype.Dg,N.prototype.Th,"RKWC"],ej[65288]=[null,null,N.prototype.xg,N.prototype.Nh,"RKBA"],ej[65290]=[null,null,N.prototype.zg,N.prototype.Ph,"RKDA"],ej[65294]=[null,null,N.prototype.Ag,N.prototype.Qh,"RKDB"],ej);
function Bd(a){qi.call(this,"RL11",a,131072,Mb,Mb.cf,fj);this.b=this.C=this.i=this.j=this.w=this.u=0}p(Bd,qi);h=Bd.prototype;h.Db=function(a){a||(a=[U.Fa|U.$a,0,0,0,0,0]);a=ia(a);this.b=a.next().value;this.C=a.next().value;this.i=a.next().value;this.j=a.next().value;this.w=a.next().value;this.u=a.next().value;return!0};h.Rc=function(){return[this.b,this.C,this.i,this.j,this.w,this.u]};
h.Ub=function(a,b,c,d,e,f,g,k,l){g=0;a=a.da;k=null;var m;a||(g=gj.ab,e=0);for(;e;){if(!k){k=a.seek(b,c,d+1);if(!k){g=gj.ab;break}m=0}var n,q;if(0>(n=a.read(k,m++))||0>(q=a.read(k,m++))){g=gj.ab;break}wc(this.D,Ne(this.f,f),n|q<<8);if(jd(this.D)){g=gj.ec;break}f+=2;e--;if(m>=a.ua&&(k=null,++d>=a.ea&&(d=0,++c>=a.ja&&(c=0,++b>=a.Z)))){g=gj.ab;break}}return l?l(g,b,c,d,e,f):g};
h.Uc=function(a,b,c,d,e,f,g,k,l){g=0;a=a.da;k=null;var m;a||(g=gj.ab,e=0);for(;e;){var n=yc(this.D,Ne(this.f,f));if(jd(this.D)){g=gj.ec;break}f+=2;e--;if(!k){k=a.seek(b,c,d+1,!0);if(!k){g=gj.ab;break}m=0}if(!a.write(k,m++,n&255)||!a.write(k,m++,n>>8)){g=gj.ab;break}if(m>=a.ua&&(k=null,++d>=a.ea&&(d=0,++c>=a.ja&&(c=0,++b>=a.Z)))){g=gj.ab;break}}return l?l(g,b,c,d,e,f):g};
h.df=function(a,b,c,d,e,f){this.C=f&65535;this.b=this.b&~U.Za|f>>16-U.ma.Za&U.Za;this.u=f>>16&hj.bb;this.j=this.i=b<<ij.ma.gc|(c?ij.Jc:0)|d&ij.$d;this.w=65536-e&65535;a&&(this.b=this.b|a|U.jb);return!0};h.Gg=function(){return this.b&U.fc};
h.Wh=function(a){this.b=this.b&~U.Sa|a&U.Sa;this.u=this.u&60|(a&U.Za)>>U.ma.Za;if(!(this.b&U.$a)){a=!0;var b,c="",d=this.g[(this.b&U.tb)>>U.ma.tb],e=d.da,f,g,k;this.b&=~U.Fa;switch(this.b&U.wa){case jj.uf:this.w&kj.Qd&&(this.b&=U.Fa|U.wa|U.Za);this.w=d.status|this.j&ij.Jc|(e&&512==e.Z?kj.Ne:0);break;case jj.Kc:(this.i&ij.Me)==ij.rf&&(b=this.i&ij.gc,c=(this.i&ij.tf)<<2,this.j=this.i&ij.sf?this.j+b:this.j-b,this.i=this.j=this.j&ij.gc|c);break;case jj.Ye:this.w=this.j;break;case jj.Ve:c="READ",b=this.Ub;
case jj.wf:c||(c="WRITE"),b||(b=this.Uc),f=this.i>>ij.ma.gc,g=this.i&ij.Jc?1:0,k=this.i&ij.$d,!e||f>=e.Z||k>=e.ea?this.b=this.b|gj.ab|U.jb:(a=65536-this.w&65535,e=(this.u&hj.bb)<<16|this.C,z(this)&&C(this,this.type+": "+c+"("+f+":"+g+":"+k+") "+E(e)+"--"+E(e+(a<<1)),!0,!0),a=b.call(this,d,f,g,k,a,e,2,!1,this.df.bind(this)))}a&&(this.b=this.b|U.Fa|U.$a,this.b&U.Ib&&ld(this.f,this.Qa))}};h.Eg=function(){return this.C};h.Uh=function(a){this.C=a&lj.Sa};h.Hg=function(){return this.i};
h.Xh=function(a){this.i=a};h.Ig=function(){return this.w};h.Yh=function(a){this.w=a};h.Fg=function(){return this.u};h.Vh=function(a){this.u=a&hj.bb;this.b=this.b&~U.Za|(this.u&3)<<U.ma.Za};
var U=Mb.gf,lj=Mb.ef,ij=Mb.hf,kj=Mb.Ic,hj=Mb.ff,gj=Mb.Pd,jj=Mb.wa,mj={},fj=(mj[63744]=[null,null,Bd.prototype.Gg,Bd.prototype.Wh,"RLCS"],mj[63746]=[null,null,Bd.prototype.Eg,Bd.prototype.Uh,"RLBA"],mj[63748]=[null,null,Bd.prototype.Hg,Bd.prototype.Xh,"RLDA"],mj[63750]=[null,null,Bd.prototype.Ig,Bd.prototype.Yh,"RLMP"],mj[63752]=[null,null,Bd.prototype.Fg,Bd.prototype.Vh,"RLBE"],mj);
function Cd(a){qi.call(this,"RX11",a,262144,Nb,Nb.jf,nj);this.I=this.G=this.i=this.L=this.b=this.C=0;this.j=V.Kb;this.u=0;this.w=Array(128).fill(0)}p(Cd,qi);h=Cd.prototype;h.Db=function(a){a?(a=ia(a),this.b=a.next().value,this.C=a.next().value,this.I=a.next().value,this.G=a.next().value,this.i=a.next().value,this.L=a.next().value,this.j=a.next().value,this.u=a.next().value,this.w=a.next().value):(this.C=this.b=0,this.G=this.I=1,this.L=this.i=0,this.j=V.ub,this.u=0,rd(this.f,this.Qa),oj(this));return!0};
h.Rc=function(){return[this.b,this.C,this.I,this.G,this.i,this.L,this.j,this.u,this.w]};h.we=function(a){a||this.Db()};function pj(a,b){b&&(a.L=b,a.C=a.i,a.b|=W.jb);a.j=V.Kb;a.b|=W.DONE;a.b&W.Ib&&ld(a.f,a.Qa)}
h.Ub=function(a,b,c,d,e,f,g,k,l){k=0;var m=a.da,n=null,q;z(this)&&C(this,this.type+".readData("+b+":"+c+":"+d+") "+E(f)+"--"+E(f+(e<<1)),!0,!0);m||(k=a.Tb?qj.gd:qj.fd,e=0);for(;e;){if(!n){if(b>=m.Z){k=qj.Se;break}n=m.seek(b,c,d+1);if(!n){k=qj.pd;break}q=0;++d>=m.ea&&(d=0,++c>=m.ja&&(c=0,++b))}var t;if(0>(a=m.read(n,q++))||0>(t=m.read(n,q++))){k=qj.od;break}wc(this.D,Ne(this.f,f),a|t<<8);q>=m.ua&&(n=null);f+=g;e--}return l?l(k,b,c,d,e,f):k};
function oj(a){var b=0,c=a.b&W.td?1:0,d=a.g[c],d=d&&d.da,e=a.I&rj.bb,f=a.G&sj.bb;a.i&=~(tj.Ld|tj.Wd|tj.cc|tj.Fa);if(d)if(a.i|=tj.Fa,z(a)&&C(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.w.length;e<f;){var g=d.read(c,e);if(0>g){b=qj.od;break}a.w[e++]=g}c.Ef&&(a.i|=tj.cc)}else b=qj.pd;else b=c?qj.gd:qj.fd;pj(a,b)}
h.Kg=function(a,b){a=this.b;if(!b)switch(a&=W.fc,this.j){case V.bd:case V.EMPTY:this.u<this.w.length&&(this.b|=W.fb);break;case V.ub:case V.hc:case V.Lc:2>this.u&&(this.b|=W.fb)}return a};
h.$h=function(a){this.b=this.b&~W.Sa|a&W.Sa;if(this.b&W.INIT)this.Db();else if(this.b&W.dc&&this.j==V.Kb)switch(this.j=this.b&W.wa,this.b&=~(W.dc|W.fb|W.DONE|W.jb),rd(this.f,this.Qa),z(this)&&C(this,this.type+".processCommand("+uj[this.j>>1]+")",!0,!0),this.j){case V.bd:case V.EMPTY:case V.ub:case V.hc:case V.Lc:this.u=0;break;case V.Xe:a=this.g[this.b&W.td?1:0];this.i&=~tj.Fa;a&&a.da&&(this.i|=tj.Fa);this.C=this.i;pj(this);break;case V.We:this.C=this.L,pj(this)}else this.b&W.Ib?this.b&W.DONE&&ld(this.f,
this.Qa):rd(this.f,this.Qa)};h.Lg=function(a,b){if(!b)switch(this.j){case V.EMPTY:this.b&W.fb&&(this.b&=~W.fb,this.C=this.w[this.u]&255,z(this)&&C(this,this.type+".readByte("+this.u+"): "+F(this.C,2,!0),!0,!0),++this.u>=this.w.length&&pj(this))}return this.C};
h.ai=function(a){switch(this.j){case V.bd:this.b&W.fb&&(this.b&=~W.fb,this.w[this.u]=a&255,z(this)&&C(this,this.type+".writeByte("+this.u+","+F(a,2,!0)+")",!0,!0),++this.u>=this.w.length&&pj(this));break;case V.ub:case V.hc:case V.Lc:if(this.b&W.fb)switch(this.b&=~W.fb,this.u++){case 0:this.G=a;break;case 1:if(this.I=a,this.j==V.ub)oj(this);else{var b=this.j==V.Lc,c=0,d=this.b&W.td?1:0,e=this.g[d],e=e&&e.da,f=this.I&rj.bb,g=this.G&sj.bb;this.i&=~(tj.Ld|tj.Wd|tj.cc|tj.Fa);if(e)if(this.i|=tj.Fa,z(this)&&
C(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.Ef=!0),b=0,f=this.w.length;b<f;){if(!e.write(d,b,this.w[b]&255)){c=qj.od;break}b++}else c=qj.pd;else c=d?qj.gd:qj.fd;pj(this,c)}}}this.C=a};var W=Nb.kf,rj=Nb.nf,sj=Nb.mf,tj=Nb.lf,V=Nb.wa,qj=Nb.ERROR,uj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),vj={},nj=(vj[65144]=[null,null,Cd.prototype.Kg,Cd.prototype.$h,"RXCS"],vj[65146]=[null,null,Cd.prototype.Lg,Cd.prototype.ai,"RXDB"],vj);
function wj(a){r.call(this,"Debugger",a);this.Ba=+a.base||16;this.ia=!1;this.w=0;this.O=!1;this.u=-1;this.j=[];this.S={}}p(wj,r);wj.prototype.qe=function(){return-1};wj.prototype.re=function(){};
function xj(a,b,c,d){if(c)if(b){0>a.u&&a.j.length&&(a.u=0);if(0>a.u||b!=a.j[a.u])a.j.splice(0,0,b),a.u=0;a.u--}else a.O?b="end":b=a.j[a.u+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Xa(b.substring(c,f))),c=f+1}}return a}
function yj(a,b,c){for(c=c||-1;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop(),f=a.pop();switch(d){case "*":d=f*e;break;case "/":if(!e)return!1;d=f/e;break;case "%":if(!e)return!1;d=f%e;break;case "+":d=f+e;break;case "-":d=f-e;break;case "<<":d=f<<e;break;case ">>":d=f>>e;break;case ">>>":d=f>>>e;break;case "<":d=f<e?1:0;break;case "<=":d=f<=e?1:0;break;case ">":d=f>e?1:0;break;case ">=":d=f>=e?1:0;break;case "==":d=f==e?1:0;break;case "!=":d=f!=e?1:0;break;case "&":d=f&e;break;
case "^":d=f^e;break;case "|":d=f|e;break;case "&&":d=f&&e?1:0;break;case "||":d=f||e?1:0;break;default:return!1}a.push(d|0)}return!0}
function zj(a,b,c){var d;if(b){b=Aj(a,b);for(var e=0,f=!1,g=b,k=[],l=[],m=b.split(/(\|\||&&|\||^|&|!=|==|>=|>>>|>>|>|<=|<<|<|-|\+|%|\/|\*)/);e<m.length;){var n=m[e++],q=n.length,n=Xa(n);if(!n){f=!0;break}n=Bj(a,n,null,!1===c);if(void 0===n){f=!0;c=!1;break}k.push(n);if(e==m.length)break;var n=m[e++],t=n.length;l.length&&Cj[n]<Cj[l[l.length-1]]&&yj(k,l,1);l.push(n);b=b.substr(q+t)}yj(k,l)&&1==k.length||(f=!0);f?c&&a.v("error parsing '"+g+"' at character "+(g.length-b.length)):(d=k.pop(),c&&Dj(a,null,
d))}return d}function Aj(a,b){for(var c,d=a.ia?"(":"{",e=a.ia?")":"}",f=new RegExp(a.ia?"\\((.*?)\\)":"\\{(.*?)\\}");(c=b.match(f))&&!(0<=c[1].indexOf(d));){var g=zj(a,c[1]);b=b.replace(d+c[1]+e,null!=g?K(a,g):"undefined")}for(;(c=b.match(/\[(.*?)]/))&&!(0<=c[1].indexOf("["));)b=b.replace("["+c[1]+"]","unimplemented");for(a=b;b=a.match(/\$([a-z]+)/i);){c=null;switch(b[1].toLowerCase()){case "ops":c=0}if(null==c)break;a=a.replace(b[0],c.toString())}return a}
function Bj(a,b,c,d){var e;null!=b?(e=a.qe(b),0<=e?e=a.re(e):(e=a.S[b],null==e&&(e=Ja(b,a.Ba))),null!=e||d||a.v("invalid "+(c?c:"value")+": "+b)):d||a.v("missing "+(c||"value"));return e}function Dj(a,b,c){var d,e=!1;if(void 0!==c){e=!0;d=c;var f=4,g="";if(!f||4<f)f=4;for(var k=0;k<f;k++)g&&(g=","+g),g=Ka(d&255,8)+g,d>>=8;d=F(c,0,!0)+" "+c+". "+E(c,0,!0)+" "+("0b"+g);32<=c&&127>c&&(d+=" '"+String.fromCharCode(c)+"'")}a.v((null!=b?b+": ":"")+d);return e}
function Ej(a,b){if(b)return Dj(a,b,a.S[b]);var c=0;for(b in a.S)Dj(a,b,a.S[b]),c++;return 0<c}function K(a,b,c,d){switch(a.Ba){case 8:a=E(b,3*c-(2<c?1:0));break;case 10:a=b.toString();break;default:a=F(b,2*c)}d?d=a.replace(/^0+([0-9A-F]+)$/i,"$1"):d=a;return d}var Cj={"||":0,"&&":1,"|":2,"^":3,"&":4,"!=":5,"==":5,">=":6,">":6,"<=":6,"<":6,">>>":7,">>":7,"<<":7,"-":8,"+":8,"%":9,"/":9,"*":9};
function Fj(a){wj.call(this,a);this.Ga=!1;this.ia=!0;this.G=X();this.xa=X();this.N=X();this.B=[];this.g=this.L=this.C=[];Gj(this);this.P=this.Y=0;this.i=[];this.pa=void 0;Hj(this);this.F=this;this.ka={};this.ha=this.je=0;this.R=null;this.M=[];Ij(this,a.messages);this.ta=a.commands;this.Ja=Jj;this.W=[];this.I=0;this.Ka=this.qa=null;this.w=this.Ia=this.Ha=this.X=this.la=0;this.b=this.U=null;var b=this;window?void 0===window[w]&&(window[w]=function(a){return je(b,a)}):void 0===global[w]&&(global[w]=
function(a){return je(b,a)})}p(Fj,wj);function Kj(a){a=a&&a.K;null==a&&(a=-1);return a}function X(a,b,c){return{K:void 0===a?null:a,Ma:void 0===b?!1:b,Ua:!1,Ba:c}}h=Fj.prototype;h.Fd=function(a,b){a.K=b;a.Ua=!1;a.Ba=void 0;return a};function Lj(a){return[a.K,a.Ma,a.Ba,a.Ua,a.Pc]}function Mj(a,b){var c=X(b[0],b[1],b[2]);c.Ua=b[3];b[4]&&(c.ge=xj(a,c.Pc=b[4]));return c}
h.Aa=function(a,b,c,d){this.D=b;this.J=a;this.f=c;this.b=a.i;(a=ee(a,"messages"))&&Ij(this,a);1140>this.f.ka&&(this.W=this.W.concat(Nj));1145>this.f.ka&&(this.W=this.W.concat(Oj));pd(this,16,function(a){a:{var b=d.D.b,c=a[0],e=a=0,l=b.length;if(c){a=Kj(Pj(d,c));if(-1===a){d.v("invalid address: "+c);break a}e=a>>>d.D.g;l=1}d.v("blockid   physical   blockaddr  used    size    type");d.v("--------  ---------  ---------  ------  ------  ----");for(var c=-1,m=0;l--;){var n=b[e];n.type==c?m++||d.v("..."):
(c=n.type,m=bd[c],n&&d.v(F(n.id,8)+"  %"+F(e<<d.D.g,8)+"  %"+F(n.K,8)+"  "+Ma(n.Xb)+"  "+Ma(n.size)+"  "+m),c!=Fd&&(c=-1),m=0);a+=d.D.j;e++}}});y(this)};
h.va=function(a,b,c){var d=this;switch(b){case "debugInput":return this.U=this.H[b]=c,c.onkeydown=function(a){var b;if(13==a.keyCode)b=c.value,c.value="",je(d,b,!0);else if(27==a.keyCode)c.value=b="";else if(38==a.keyCode?(b=null,d.u<d.j.length-1&&(b=d.j[++d.u])):40==a.keyCode&&(0<d.u?b=d.j[--d.u]:(b="",d.u=-1)),null!=b){var e=b.length;c.value=b;c.setSelectionRange(e,e)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.H[b]=c,ob(c,function(){if(d.U){var a=d.U.value;d.U.value=
"";je(d,a,!0);return!0}return!1}),!0;case "step":return this.H[b]=c,ob(c,function(a){var b=!1;Ga(d,!0)||(Ha(d,!0),b=rc(d,a?1:0,null),Ha(d,!1));return b}),!0}return!1};function ie(a){if(a.U){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.U.focus();window&&window.scrollTo(b,c)}}h.Nd=function(a,b){var c=255,d=Kj(a);-1!==d&&(a.Ma||65535<d?(c=this.D,d=Ne(this.f,d),c.C=!1,c.na++,d=dd(c,d).J(d&c.i,d),c.na--):(c=this.f,c.pa++,d=c.D.Jd(xc(c,d,3)),c.pa--),c=d,b&&Qj(a,b));return c};
h.Ra=function(a,b){var c=65535,d=Kj(a);-1!==d&&(c=a.Ma||65535<d?yc(this.D,Ne(this.f,d)):zc(this.f,d),b&&Qj(a,b));return c};h.Od=function(a,b,c){var d=Kj(a);if(-1!==d){if(a.Ma||65535<d)ed(this.D,Ne(this.f,d),b);else{var e=this.f;e.pa++;e.D.Kd(xc(e,d,5),b);e.pa--}c&&Qj(a,c);H(this.J,-1)}};h.Le=function(a,b,c){var d=Kj(a);if(-1!==d){if(a.Ma||65535<d)wc(this.D,Ne(this.f,d),b);else{var e=this.f;e.pa++;e.D.ac(xc(e,d,4),b);e.pa--}c&&Qj(a,c);H(this.J,-1)}};
function Pj(a,b,c){var d;c=(c?a.G:a.xa).K;var e,f;if(void 0!==b){b=Aj(a,b);"%"==b.charAt(0)&&(e=!0,b=b.substr(1));d=b;var g,k;a:{c=a.D;var l;l=d.toUpperCase();for(k in c.Pa){var m=+k;if(c.Pa[m][4]==l){k=c.B+m;break a}}k=null}if(null==k&&d.match(/^[a-z_][a-z0-9_]*$/i))for(d=d.toUpperCase(),c=0;c<a.B.length;c++)if(l=a.B[c].ga[d],null!=l){k=l.o;break}null!=k&&(g=X(k));if(d=g)return d;0<=b.indexOf("0x")?f=16:0<=b.indexOf("0o")?f=8:0<=b.indexOf(".")&&(f=10);c=zj(a,b,void 0)}null!=c&&(d=X(c,e,f));return d}
function Rj(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.ge=xj(a,b.Pc=c[2]))}function Qj(a,b){null!=a.K&&(a.K+=b||1)}function Sj(a,b){return(b.Ma?"%":"")+K(a,b.K)}
function Ij(a,b){a.F=a;a.ha=a.je=536870912;a.R=null;a.M=[];b=xj(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in Pb){var d;a:if(d=void 0,Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}0<=d&&(a.ha|=Pb[c],a.v(c+" messages enabled"))}}function pd(a,b,c){for(var d in Pb)if(b==Pb[d]){a.ka[d]=c;break}}
h.qe=function(a){a=a.toUpperCase();var b=Tj[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function Uj(a){return 6>a?"R"+a:6==a?"SP":"PC"}
h.re=function(a){var b;if(0<=a)if(8>a)b=this.f.g[a];else if(16>a)b=this.f.qa[a-8];else if(20>a)b=this.f.W[a-16];else{var c=this.f,d=this.b;switch(a){case Vj:b=yd(this.f);break;case Wj:b=c.eb;break;case Xj:b=c.P;break;case Yj:b=c.xa&65280;break;case Zj:b=sd(c);break;case ak:b=ud(c);break;case bk:b=vd(c);break;case ck:b=c.U;break;case dk:d&&(b=d.fa);break;case ek:d&&(b=d.Wa);break;case fk:d&&Bc(d)&&(b=d.Xa)}}return b};
h.message=function(a,b){b&&(a+=" @"+Sj(this,X(this.f.O&65535)));if(!this.R||a!=this.R)if(this.R=a,this.ha&1073741824)this.M.push(a);else{var c;if(this.ha&-2147483648&&this.f&&(c=this.f.A.V)||Ga(this,!0))this.ba(),c&&(a+=" (cpu halted)");this.v(a);this.f&&(a=this.f,pe(a),a.Bb=0,a.J&&H(a.J,void 0))}};
function Hj(a){var b;if(!af(a))a.i&&a.i.length&&a.v("instruction history buffer freed"),a.P=0,a.i=[];else if(!a.i||!a.i.length){a.i=Array(gk);for(b=0;b<a.i.length;b++)a.i[b]=X();a.P=0;a.v("instruction history buffer allocated")}}function hk(a,b,c){if(!ik(a,c))return!1;qc(a.f,b);return!0}
function rc(a,b,c,d){if(!ik(a))return!1;var e="";null===c&&(e=(c=!a.qa||"tr"==a.qa)?"tr":"t");a.w=0;b||af(a)&&bf(a,a.f.g[7],0);try{b=qe(a.f,b);var f=a.f.Cc(b);0<f&&(sc(a.f,f),a.w+=f,tc(a.f,f,!0),uc(a.f,f),a.X++)}catch(g){"number"!=typeof g&&(a.w=0,Da(a.f,g.stack||g.message))}!1!==d&&(a.b&&a.b.stop(),H(a.J,-1));he(a,c||!1,e);return 0<a.w}h.ba=function(a){this.f&&this.f.ba(a)};
function he(a,b,c){if(a.Ga){void 0===b&&(b=!0);c&&a.v(jk+c);c=a.f;if(c=c.i&128?c.Dc|c.Ac<<8:0){var d=c>>8;a.v("trapped to "+K(a,c&255,1)+" ("+(0>d?Kb[-d]:K(a,d))+")")}a.G=X(a.f.g[7]);b&&1!=a.I?kk(a):lk(a)}}function ik(a,b){var c;(c=!a.f||!Fa(a.f))||(c=a.f,c.A.aa?c=!0:(c.v(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.A.V?(b||a.v("cpu busy or unavailable, command ignored"),!1):!Ea(a.f)}h.Da=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
h.Ca=function(a,b){b&&this.v(a?"suspending":"shutting down");return a?this.save():!0};h.reset=function(a){Hj(this);this.X=0;this.R=null;this.w=0;this.G=X(this.f.g[7]);this.A.V=!1;mk(this);a||he(this)};h.save=function(){var a=new G(this);a.set(0,Lj(this.G));a.set(1,Lj(this.N));a.set(2,[this.j,this.O,this.ha]);a.set(3,this.B);return a.data()};
h.restore=function(a){var b=0;void 0!==a[2]&&(this.G=Mj(this,a[b++]),this.N=Mj(this,a[b++]),this.j=a[b][0],"string"==typeof this.j&&(this.j=[this.j]),this.O=a[b][1],this.ha|=a[b][2]);a[3]&&(this.B=a[3]);return!0};h.start=function(a,b){this.I||this.v("running");this.A.V=!0;this.Ha=a;this.Ia=b};
h.stop=function(a,b){if(this.A.V){this.A.V=!1;this.w=b-this.Ia;if(!this.I){b="stopped";if(this.w){a-=this.Ha;var c=0<a?Math.round(1E3*this.w/a):0;b+=" (";af(this)&&(b+=this.X+" instructions, ",this.X=0);b+=this.w+" cycles, "+a+" ms, "+c+" hz)"}else z(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.v(b)}he(this,!0);ie(this);mk(this,this.f.g[7]);this.R=null}};function af(a){return 1<a.g.length||!!a.Y}
function bf(a,b,c){var d=-1;c||(d=zc(a.f,b))||(a.f.O&65535)!=b||(b=Ee(a.f,2));if(0<c&&(a.Y&&!--a.Y||nk(a,b,1,a.g)))return!0;0<=c&&a.i.length&&(a.X++,0>d&&(d=zc(a.f,b)),65535!=(d&65535)&&(a.Fd(a.i[a.P],b),++a.P==a.i.length&&(a.P=0)));return!1}function Cg(a){var b=a.f;if(b.A.V)throw ye(b,a.f.O&65535),a.ba(),-1;return!1}function Rd(a,b,c){nk(a,b,c||1,a.L)&&a.ba(!1)}function Sd(a,b,c){nk(a,b,c||1,a.C)&&a.ba(!1)}
function Gj(a){var b,c,d;a.g=["bp"];if(a.L)for(b=1;b<a.L.length;b++)c=a.L[b],d=Kj(c),c.Ma?(c=a.D,Qd(c.b[d>>>c.g],!1)):Qe(a.f,!1);a.L=["br"];if(a.C)for(b=1;b<a.C.length;b++)c=a.C[b],d=Kj(c),c.Ma?(c=a.D,Qd(c.b[d>>>c.g],!0)):Qe(a.f,!0);a.C=["bw"];a.la=0;a.Y=0}
h.Cb=function(a,b,c){var d=!0;c||ok(this,a,b,!1,!0);if(a!=this.g){var e=Kj(b);if(-1===e)this.v("invalid address: "+Sj(this,b)),d=!1;else{var f=a==this.C;65535<e&&(b.Ma=!0);if(b.Ma){var g=this.D;g.b[e>>>g.g].Cb(e&g.i,f)}else e=this.f,(f?e.tc++:e.sc++)||we(e)}}d&&(a.push(b),c?b.Ua=!0:(pk(this,a,a.length-1,"set"),Hj(this)));return d};
function ok(a,b,c,d,e){var f=!1;c=Kj(c);for(var g=1;g<b.length;g++){var k=b[g];if(c==Kj(k)&&(!d||k.Ua)){f=!0;k.Ua||e||pk(a,b,g,"cleared");b.splice(g,1);b!=a.g&&(b=b==a.C,k.Ma?(d=a.D,Qd(d.b[c>>>d.g],b)):Qe(a.f,b));k.Ua||Hj(a);break}}return f}function qk(a,b){for(var c=1;c<b.length;c++)pk(a,b,c);return b.length-1}function pk(a,b,c,d){c=b[c];a.v(b[0]+" "+Sj(a,c)+(d?" "+d:c.Pc?' "'+c.Pc+'"':""))}
function mk(a,b){if(void 0!==b)nk(a,b,1,a.g,!0),a.I=0;else for(b=1;b<a.g.length;b++){var c=a.g[b];if(c.Ua){if(!ok(a,a.g,c,!0))break;b=0}}}
function nk(a,b,c,d,e){var f=!1;if(!a.la++)for(var g=1;!f&&g<d.length;g++){var k=d[g];if(!e||k.Ua)for(var l=Kj(k)&(d==a.g?65535:-1),m=0;m<c;m++)if(b+m==l){var n,f=!0;k.Ua&&(ok(a,d,k,!0),e=!0);if(n=k.ge){for(var f=!1,q=0;q<n.length;q++)if(!rk(a,n[q],!0)){if(n[q].indexOf("if")){f=!0;break}for(var t=q+1;t<n.length&&n[t].indexOf("else");t++)q++;if(t==n.length){f=!0;break}}a.f.A.V||(f=!0)}if(f){e||pk(a,d,g,"hit");break}}}a.la--;return f}
function sk(a,b,c,d){var e=X(b.K),f=a.Ra(b,2),g,k;for(k in a.Ja)if(g=a.Ja[k][f&k])break;g||(g=tk);var l=g[0];0<=a.W.indexOf(l)&&(g=tk,l=g[0]);var m=k="",n=uk[l],q=g.length-1;l||q||(k=K(a,f));for(l=1;l<=q;l++){var t=g[l];if(void 0!==t){var u;u=a;var D=t,t=b,A="",B=D&vk;if(B==Y)t=t.K+((f&255)<<24>>23)&65535,A=K(u,t);else if(B==wk)t=t.K-((f&63)<<1)&65535,A=K(u,t);else if(B==xk)A=K(u,f&7,1);else if(B==yk)A=K(u,f&63,1);else if(B==zk)A=K(u,f&255,1);else if(B=f&D,D&Ak&&(B>>=6,D>>=6),D&Z){var D=null,J=B&
Bk;switch(B&Ck){case 0:A=Uj(J);break;case 8:A="@"+Uj(J);D=Dk(u,u.f.g[J]);break;case 16:7>J?A="("+Uj(J)+")+":(B=u.Ra(t,2),A="#"+K(u,B,0,!0));break;case 24:7>J?A="@("+Uj(J)+")+":(B=u.Ra(t,2),A="@#"+K(u,B,0,!0),D=Dk(u,B));break;case 32:A="-("+Uj(J)+")";break;case 40:A="@-("+Uj(J)+")";break;case 48:B=u.Ra(t,2);A=K(u,B,0,!0)+"("+Uj(J)+")";7==J&&(A=K(u,B=B+t.K&65535),D=Dk(u,B));break;case 56:B=u.Ra(t,2),A="@"+K(u,B)+"("+Uj(J)+")",7==J&&(A="@"+K(u,B=B+t.K&65535),D=Dk(u,zc(u.f,B)))}D&&(A=[A,D])}u=A;if(!u||
!u.length){k="INVALID";break}"string"!=typeof u&&(m=u[1],u=u[0]);0<k.length&&(k+=",");k+=u||"???"}}f="";g=Sj(a,e)+":";if(-1!==e.K&&-1!==b.K){do if(f+=" "+K(a,a.Ra(e,2)),null==e.K)break;while(e.K!=b.K)}g+=Wa(f,24);g+=Wa(n,5);k&&(g+=" "+k);if(c||m)g=Wa(g,60)+";"+(c||""),g=a.f.A.Nb?g+("cycles="+ke(a.f).toString()+" cs="+F(a.f.oc)):g+(null!=d?"="+d.toString():""),m&&(";"!=g.slice(-1)&&(g+=" "),g+=m);return g}
function Dk(a,b){b=Oe(a.f,b)[0];b>=a.f.vb&&b<a.D.B&&(b=b-a.f.vb+a.D.B);var c=a.D;a=null;b>=c.B&&(b=c.Pa[b&id])&&(a=b[4]);return a}function Ek(a,b){switch(b){case "N":a=De(a.f);break;case "Z":a=Ce(a.f);break;case "V":a=Be(a.f);break;case "C":a=Ae(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}
function Fk(a,b){var c="",d=a.f;if(8>b)c=Uj(b),c+="="+K(a,d.g[b]);else if(13>b)c="A"+(b-8)+"="+K(a,d.qa[b-8]);else if(16<=b&&20>b)c="S"+(b-16)+"="+K(a,d.W[b-16]);else switch(b){case Vj:c="PS="+K(a,yd(d));break;case Wj:c="PI="+K(a,d.eb);break;case Xj:c="ER="+K(a,d.P);break;case Yj:c="SL="+K(a,d.xa&65280);break;case Zj:c="M0="+K(a,sd(d));break;case ak:c="M1="+K(a,ud(d));break;case bk:c="M2="+K(a,vd(d));break;case ck:c="M3="+K(a,d.U);break;case dk:a.b&&(c="AR="+K(a,a.b.fa,3));break;case ek:a.b&&(c="DR="+
K(a,a.b.Wa));break;case fk:a.b&&Bc(a.b)&&(c="SR="+K(a,a.b.Xa,3))}c&&(c+=" ");return c}function Gk(a,b){var c,d="";for(c=0;6>c;c++)d+=Fk(a,c);d=d+"\n"+(Fk(a,6)+Fk(a,7));d+=Fk(a,Vj)+Fk(a,Wj)+Fk(a,Yj);d+=Ek(a,"T")+Ek(a,"N")+Ek(a,"Z")+Ek(a,"V")+Ek(a,"C");b&&(b=d,c=""+(Fk(a,Zj)+Fk(a,ak)),c+=Fk(a,bk)+Fk(a,ck)+Fk(a,Xj),c=c+"\n"+(Fk(a,fk)+Fk(a,dk)+Fk(a,ek)),d=b+("\n"+c));return d}h.le=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Ch(a,b,c,d,e){var f=[],g;for(g in e){var k=e[g];"number"==typeof k&&(e[g]=k={o:k});var l=k.o,m=k.a;if(void 0!==l){var n=f,l=[l>>>0,g],q=Za(n,l,a.le);0>q&&n.splice(-(q+1),0,l)}m&&(k.a=m.replace(/''/g,'"'))}a.B.push({Fk:b,K:c,Lf:d,ga:e,he:f})}function Hk(a,b,c){var d=[],e=Kj(b)>>>0;for(b=0;b<a.B.length;b++){var f=a.B[b],g=f.K>>>0,k=f.Lf;if(e>=g&&e<g+k){e=Za(f.he,[e-g],a.le);0<=e?Ik(a,b,e,d):c&&(e=~e,Ik(a,b,e-1,d),Ik(a,b,e,d));break}}return d}
function Ik(a,b,c,d){var e={},f=a.B[b].he,g=0,k=null;0<=c&&c<f.length&&(g=f[c][0],k=f[c][1]);k&&(e=a.B[b].ga[k],k="."==k.charAt(0)?null:e.l||k);d.push(k);d.push(g);d.push(e.a);d.push(e.c)}function Jk(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Ej(a)||a.v("no variables"),!0;if(!c[2])return Ej(a,c[1]);if(!c[3])return delete a.S[c[1]],!0;b=zj(a,c[3]);return void 0!==b?(a.S[c[1]]=b,!0):!1}a.v("invalid assignment:"+b);return!1}
function Kk(a,b,c){var d=null;if(b=Pj(a,b,!0)){var e=Hk(a,b,!0);if(e.length){var f,g;e[0]&&(g="",(f=b.K-e[1])&&(g=" + "+Ma(f)),f=e[0]+" ("+K(a,e[1])+")"+g,c&&a.v(f),d=f);4<e.length&&e[4]&&(g="",(f=e[5]-b.K)&&(g=" - "+Ma(f)),f=e[4]+" ("+K(a,e[5])+")"+g,c&&a.v(f),d||(d=f))}else c&&a.v("no symbols")}return d}
function kk(a,b){var c;if(b&&"?"==b[1])a.v("register commands:"),a.v("\tr\tdump registers"),a.v("\trm\tdump misc registers"),a.v("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.v("missing value for "+b[1]);return}g=zj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":ye(e,
g);a.G=X(e.g[7]);break;case "N":e.I=g?32768:0;break;case "Z":e.L=g?0:1;break;case "V":e.G=g?32768:0;break;case "C":e.C=g?65536:0;break;case "PS":zd(e,g);break;case "PI":xd(e,g);break;case "ER":e.P=g;d=!0;break;case "SL":e.xa=g|255;break;case "M0":td(e,g);d=!0;break;case "M3":wd(e,g);d=!0;break;case "AR":a.b&&(d=a.b,gc(d,d.fa=g));d=!0;break;case "DR":a.b&&(d=a.b,Sb(d,d.Wa=g));d=!0;break;case "SR":if(a.b&&Bc(a.b)){hc(a.b,g);d=!0;break}default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=
g&65535;break}a.v("unknown register: "+f);return}H(a.J);a.v("updated registers:")}}a.v(Gk(a,d));c&&(a.G=X(e.g[7]),lk(a,Sj(a,a.G)))}}function Lk(a,b){b=Xa(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.v(c[2]):Dj(a,null,c[2].charCodeAt(0)):zj(a,b,!0)}
function Mk(a,b,c){if("?"==c)a.v("trace commands:"),a.v("\tt  [#]\ttrace # instructions"),a.v("\ttr [#]\ttrace # instructions with register updates"),a.v("\ttc [#]\ttrace # cycles"),a.v("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Bj(a,c,null,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.qa=b;nb(c,function(){return Ha(a,!0)&&rc(a,e,d,!1)},function(){a.b&&a.b.stop();H(a.J,-1);Ha(a,!1)})}}
function lk(a,b,c,d){if(b=Pj(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Bj(a,c.substr(1)),null!=c&&(d=c);else{d=Pj(a,c,!0);if(!d||d.K<b.K)return;e=d.K-b.K;if(256<e){a.v("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Ga(a,!1)||a.I?a.w:null;var g=null!=f?"cycles":null,k=Hk(a,b),l=b.K;if(k[0]&&d&&(!c&&d||0>k[0].indexOf("+"))){var m=k[0]+":";k[2]&&(m+=" "+k[2]);a.v(m)}k[3]&&(g=k[3],f=null);f=sk(a,b,g,f);a.v(f);a.G=b;e-=b.K-l;c++}}}
function rk(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.v(jk+b):(a.O&&(a.v("ended assemble at "+Sj(a,a.N)),a.G=a.N,a.O=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.R=null;if(Fa(a)&&0<b.length){a.O&&(b="a "+Sj(a,a.N)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var k=g[0],l=k.charAt(0),m=1;m<k.length;m++){var n=k.charAt(m);if("?"==l||"r"==l||"a">n||"z"<n){g[0]=k.substr(m);g.unshift(k.substr(0,m));break}}switch(g[0].charAt(0)){case "a":var q=
Pj(a,g[1],!0);if(q)if(a.N=q,void 0===g[2])a.v("begin assemble at "+Sj(a,q)),a.O=!0,H(a.J);else{var t;a.v("not supported yet");t=[];if(t.length){for(var u=0;u<t.length;u++)a.Od(q,t[u],1);a.v(sk(a,a.N))}}break;case "b":a:{var D=g[0],A=g[1],B=b;if("?"==A)a.v("breakpoint commands:"),a.v("\tbp #\tset exec breakpoint"),a.v("\tbr #\tset read breakpoint"),a.v("\tbw #\tset write breakpoint"),a.v("\tbc #\tclear breakpoint (* to clear all)"),a.v("\tbl\tlist all breakpoints"),a.v("\tbn [#]\tbreak after # instruction(s)");
else{var J=D.charAt(1);if("l"==J){var vb;vb=0+qk(a,a.g);vb+=qk(a,a.L);(vb+=qk(a,a.C))||a.v("no breakpoints")}else if("n"==J){var Dd=+A||0;A&&(a.Y=Dd);a.v("break after "+Dd+" instruction(s)")}else if(void 0===A)a.v("missing breakpoint address");else{var sa=X();if("*"!=A&&(sa=Pj(a,A,!0),!sa))break a;"c"==J?null==sa.K?(Gj(a),a.v("all breakpoints cleared")):ok(a,a.g,sa)||ok(a,a.L,sa)||ok(a,a.C,sa)||a.v("breakpoint missing: "+Sj(a,sa)):null!=sa.K&&(Rj(a,sa,B),"p"==J?a.Cb(a.g,sa):"r"==J?a.Cb(a.L,sa):"w"==
J?a.Cb(a.C,sa):a.v("unknown breakpoint command: "+J))}}}break;case "c":a.Ta&&(a.Ta.value="");break;case "d":a:{var Zb,jb=g[0],Sa=g[1],kb=g[2],kl=g[3];if("?"==Sa){var $b="";for(Zb in Pb)a.ka[Zb]&&($b&&($b+=","),$b+=Zb);$b+=",state,symbols";a.v("dump memory commands:");a.v("\tda [a]        dump info for address a");a.v("\tdb [a] [n]    dump n bytes at address a");a.v("\tdw [a] [n]    dump n words at address a");a.v("\tdd [a] [n]    dump n dwords at address a");a.v("\tds [a] [n]    dump n words at address a as JSON");
a.v("\tdh [p] [n]    dump n instructions from history position p");$b.length&&a.v("dump extension commands:\n\t"+$b)}else if("state"==Sa){var cf=Nk(a.J,!0);"console"==kb?console.log(cf):(a.Ta&&(a.Ta.value=""),cf&&a.v(cf))}else if("symbols"==Sa)for(var df=0;df<a.B.length;df++){var ef=a.B[df],ac;for(ac in ef.ga)if("."!=ac.charAt(0)){var ti=ef.ga[ac].o;if(void 0!==ti){var ui=ef.ga[ac].l;ui&&(ac=ui);a.v(K(a,ti)+" "+ac)}}}else{if("d"==jb){for(Zb in Pb)if(g[1]==Zb){var vi=a.ka[Zb];vi?(g.shift(),g.shift(),
vi(g)):a.v("no dump registered for "+Sa);break a}Sa||(jb=a.Ka||"dw")}else a.Ka=jb;if("dh"==jb){var wi=Sa,xi=kb,yi="",zi=0,Ia=a.P,Ta=a.i;if(Ta.length){var Ca=+wi||a.pa,Lc=+xi||10;isNaN(Ca)?Ca=Lc:yi="more ";Ca>Ta.length&&(a.v("note: only "+Ta.length+" available"),Ca=Ta.length);Ia-=Ca;0>Ia&&(null==Ta[Ta.length-1].K?(Ca=Ia+Ca,Ia=0):Ia+=Ta.length);var ff=[];"call"==xi&&(Lc=1E5,ff=["CALL"]);for(void 0!==wi&&a.v(Ca+" instructions earlier:");0<Lc&&Ia!=a.P;){var Ai=Ta[Ia++];if(null==Ai.K)break;var Mc=X(Ai.K),
ll=Ca--,Bi=sk(a,Mc,"history",ll);(!ff.length||0<=Bi.indexOf(ff[0]))&&a.v(Bi);Mc.xd&&(Ia+=Mc.xd,Lc-=Mc.xd,Ca-=Mc.xd);Ia>=Ta.length&&(Ia=0);a.pa=Ca;zi++;Lc--}}zi||(a.v("no "+yi+"history available"),a.pa=void 0)}else{var na=Pj(a,Sa);if(na)if("da"==jb){var gf=na.Ma||65535<na.K,O=Oe(a.f,na.K||0,gf);a.v(Wa("",gf?12:19)+Ka(na.K,gf?22:17,3)+"  "+E(na.K,8));6>O.length?(2<O.length&&(a.v("    OFFSET:             "+Ka(O[3],13,3)+"  "+E(O[3],8)),a.v("UNIMAP["+La(O[1])+"]: "+Ka(O[2],22,3)+"  "+E(O[2],8))),a.v("  PHYSICAL: "+
Ka(O[0],22,3)+"  "+E(O[0],8))):(a.v("    OFFSET:             "+Ka(O[1],13,3)+"  "+E(O[1],8)),a.v("+   "+Ok[O[2]]+"PAR"+O[3]+": "+Ka(O[4],22,3)+"  "+E(O[4],8)),a.v("&  MMUMASK: "+Ka(O[5],22,3)+"  "+E(O[5],8)),a.v("= PHYSICAL: "+Ka(O[0],22,3)+"  "+E(O[0],8)))}else{var xb=0,hf="ds"==jb;if(kb){if("l"==kb.charAt(0))kb=kb.substr(1)||kl,xb=Bj(a,kb);else{var Ci=Pj(a,kb);Ci&&(xb=Ci.K-na.K)}0>xb&&(xb=0);65536<xb&&(xb=65536)}var nl=a.Ba;na.Ba&&(a.Ba=na.Ba);for(var yb="dd"==jb?4:"db"==jb?1:2,Wd=yb*xb||128,jf=
hf?16:a.Ba,ol=(Wd+jf-1)/jf|0||1,zb="";ol--&&0<Wd;){for(var Ab="",kf="",Sa=Sj(a,na),Xd=jf,Nc=0,Oc=0;0<Xd&&0<Wd;){var bc=1,Yd=1==yb?a.Nd(na,bc):a.Ra(na,bc=2),Nc=Nc|Yd<<(Oc<<3),Oc=Oc+bc;Oc==yb&&(hf?(Ab&&(Ab+=","),Ab+="0x"+F(Nc,2*yb)):(Ab+=K(a,Nc,yb),Ab+=1==yb?9==Xd?"-":" ":"  "),Nc=Oc=0);Xd-=bc;for(Wd-=bc;1==yb&&bc--;)var lf=Yd&255,kf=kf+(32<=lf&&128>lf?String.fromCharCode(lf):"."),Yd=Yd>>8}zb&&(zb+="\n");zb=hf?zb+(Ab+","):zb+(Sa+":  "+Ab+(Xd?"":" "+kf))}zb&&a.v(zb);a.xa=na;a.Ba=nl}}}}break;case "e":if("else"==
g[0])break;var cc,mf,nf,of,pf=g[0],qf=g[1];"eb"==pf?(cc=1,mf=255,nf=a.Nd,of=a.Od):"e"==pf||"ew"==pf?(cc=2,mf=65535,nf=a.Ra,of=a.Le):qf=null;if(null==qf)a.v("edit memory commands:"),a.v("\teb [a] [...]  edit bytes at address a"),a.v("\tew [a] [...]  edit words at address a");else{var Zd=Pj(a,qf);if(Zd)for(var $d=2;$d<g.length;$d++){var Pc=zj(a,g[$d]);if(void 0===Pc){a.v("unrecognized value: "+g[$d]);break}Pc&~mf&&a.v("warning: "+F(Pc)+" exceeds "+cc+"-byte value");a.v("changing "+Sj(a,Zd)+(z(a,16)?
"":" from "+K(a,nf.call(a,Zd),cc))+" to "+K(a,Pc,cc));of.call(a,Zd,Pc,cc)}}break;case "g":a:{var Di=g[1],pl=b;if(void 0!==Di){var rf=Pj(a,Di,!0);if(!rf)break a;Rj(a,rf,pl);a.Cb(a.g,rf,!0)}hk(a,!0,c)}break;case "h":a.A.V?(c||a.v("halting"),a.ba()):Ga(a,!0)||c||a.v("already halted");break;case "i":if("if"==g[0]){var sf;var Qc=b.substr(2),Qc=Xa(Qc);zj(a,Qc)?(c||a.v("true: "+Qc),sf=!0):(c||a.v("false: "+Qc),sf=!1);sf||(d=!1);break}f=!0;break;case "k":var ql=g[0];if("?"==g[1])a.v("stack trace commands:"),
a.v("\tk\tshow frame addresses"),a.v("\tks\tshow symbol information");else{var tf=0,uf=X(),Rc=X(a.f.g[6]);for(a.v("stack trace for "+Sj(a,Rc));10>tf;){for(var Bb=null,rl=256;65536>Rc.K>>>0;){uf.K=a.Ra(Rc,2);if(null==Rc.K||!rl--)break;if(!(uf.K&1)){for(var sl=a,ae=uf,Ei=null,Sc=ae.K,Fi=Sc,vf=1;6>=vf&&Sc;vf++){if(2<vf){ae.K=Sc;var be=sk(sl,ae);if(0<=be.indexOf("JSR")){var Gi=be.indexOf(" ");if(Sc+(be.indexOf(" ",Gi+1)-Gi-1)/2==Fi){Ei=be;break}}}Sc-=2}ae.K=Fi;if(Bb=Ei)break}}if(!Bb||null==Bb)break;var Hi=
null;if("ks"==ql){var Ii=Bb.match(/[0-9A-F]+$/);Ii&&(Hi=Kk(a,Ii[0]))}Bb=Wa(Bb,50)+"  ;"+(Hi||"stack="+Sj(a,Rc));a.v(Bb);tf++}tf||a.v("no return addresses found")}break;case "l":if("ln"==g[0]){Kk(a,g[1],!0);break}f=!0;break;case "m":a:{var Ua,Va=null,T=g[1];"?"==T&&(T=void 0);if(void 0!==T){var lb=0;if("all"==T)lb=1879046143,T=null;else if("on"==T)Va=!0,T=null;else if("off"==T)Va=!1,T=null;else{"keys"==T&&(T="key");"kbd"==T&&(T="keyboard");for(Ua in Pb)if(T==Ua){lb=Pb[Ua];Va=!!(a.ha&lb);break}if(!lb){a.v("unknown message category: "+
T);break a}}if(lb)if("on"==g[2])a.ha|=lb,Va=!0;else if("off"==g[2]&&(a.ha&=~lb,Va=!1,1073741824==lb)){for(var Ji=1E3<=a.M.length?a.M.length-1E3:0;Ji<a.M.length;)a.v(a.M[Ji++]);a.M=[]}}var tl=0,Tc="";for(Ua in Pb)if(!T||T==Ua){var ul=!!(a.ha&Pb[Ua]);if(null===Va||Va==ul)Tc&&(Tc+=","),++tl%10||(Tc+="\n\t"),"key"==Ua&&(Ua="keys"),Tc+=Ua}void 0===T&&a.v("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.v((null!==Va?Va?"messages on:  ":"messages off: ":"message categories:\n\t")+
(Tc||"none"));Hj(a)}break;case "p":if("print"==g[0]){Lk(a,b.substr(5));break}var vl=g[0];if("?"==g[1])a.v("step commands:"),a.v("\tp\tstep over instruction"),a.v("\tpr\tstep over instruction with register update");else{var Ki="pr"==vl?1:0,Li=1+Ki;if(a.I)a.v("step in progress");else{var ce=X(a.f.g[7]),dc=a.Ra(ce);3==dc||4==dc||34816==(dc&65280)||32256==(dc&65024)||35072==(dc&65280)?(a.I=Li,Qj(ce,2)):2048==(dc&65024)&&(sk(a,ce),a.I=Li);a.I?(a.Cb(a.g,ce,!0),hk(a)||(a.J&&oe(a.J),a.I=0)):Mk(a,Ki?"tr":
"t")}}break;case "r":if("reset"==b){a.J&&a.J.reset();break}kk(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var Uc=+g[2];if(8==Uc||10==Uc||16==Uc)a.Ba=Uc;else{a.v("invalid base: "+Uc);break}}a.v("default base: "+a.Ba);break;case "cs":var Vc;void 0!==g[3]&&(Vc=+g[3]);switch(g[2]){case "int":a.f.Ob=Vc;break;case "start":a.f.pc=Vc;break;case "stop":a.f.Rb=Vc;break;default:a.v("unknown cs option");break a}void 0!==Vc&&ge(a.f);a.v("checksums "+(a.f.A.Nb?"enabled":"disabled"));break;case "sp":void 0!==
g[2]&&(le(a.f,+g[2])||a.v("warning: using 1x multiplier, previous target not reached"));a.v("target speed: "+(a.f.yb.toFixed(2)+"Mhz")+" ("+a.f.ob+"x)");break;default:if(g[1]){a.v("unknown option: "+g[1]);break}case "?":a.v("debugger options:"),a.v("\tbase #\t\tset default base to #"),a.v("\tcs int #\tset checksum cycle interval to #"),a.v("\tcs start #\tset checksum cycle start count to #"),a.v("\tcs stop #\tset checksum cycle stop count to #"),a.v("\tsp #\t\tset speed multiplier to #")}break;case "t":Mk(a,
g[0],g[1]);break;case "u":lk(a,g[1],g[2],8);break;case "v":if("var"==g[0]){Jk(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.v((Fb||"PDP11")+" version 1.34.0 ("+a.f.ka+",RELEASE"+(Hb?",TYPEDARRAYS":Gb?",BYTEARRAYS":",LONGARRAYS")+")");a.v(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){Lk(a,b.substr(1));break}var wf="commands:",xf;for(xf in Pk)wf+="\n"+Wa(xf,9)+Pk[xf];af(a)||(wf+="\nnote: history disabled if no exec breakpoints");a.v(wf);break;default:f=!0}f&&(a.v("unknown command: "+
b),d=!1)}}catch(Ni){a.v("debugger error: "+(Ni.stack||Ni.message)),d=!1}return d}function je(a,b,c){b=xj(a,b,c);for(var d in b)if(!rk(a,b[+d]))return!1;return!0}
var Pk={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},uk=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
Vj=20,Wj=21,Xj=22,Yj=23,Zj=24,ak=25,bk=26,ck=27,dk=28,ek=29,fk=30,Tj={SP:6,PC:7,PS:Vj,PI:Wj,ER:Xj,SL:Yj,M0:Zj,M1:ak,M2:bk,M3:ck,AR:dk,DR:ek,SR:fk},Ok="KI KD SI SD ?? ?? UI UD".split(" "),Bk=7,Ck=56,Z=Ck|Bk,Ak=4032,Y=4096,wk=8192,xk=12288,yk=24576,zk=32768,vk=61440,Jj={61440:{4096:[62,Ak,Z],8192:[47,Ak,Z],12288:[18,Ak,Z],16384:[14,Ak,Z],20480:[16,Ak,Z],24576:[3,Ak,Z],36864:[63,Ak,Z],40960:[48,Ak,Z],45056:[19,Ak,Z],49152:[15,Ak,Z],53248:[17,Ak,Z],57344:[94,Ak,Z]},65024:{2048:[57,448,Z],28672:[100,Z,
448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,wk]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,zk],35072:[107,zk]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,yk],3392:[60,
Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Bk],152:[108,xk]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],
179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},tk=[0],Nj=[58,60,65,96,110,100,101,102,103,104,105],Oj=[108,59,64],gk=1E3,jk=">> ";qb(function(){for(var a=x(document,w,"debugger"),b=0;b<a.length;b++){var c=a[b],d=wa(c),d=new Fj(d);xa(d,c)}});
function Qk(a,b,c){r.call(this,"Computer",a,33554432);this.A.aa=!1;this.O=null;Rk(this,b);this.L=ee(this,"autoPower",a,6);this.j=0;this.S=+a.busWidth||+a.buswidth;this.G=this.w=this.I=null;this.C=this.R=!1;this.B=this.u=null;this.P=this.M=this.N=!1;this.U=ee(this,"url")||"";(Math.random()+.1).toString(36);this.g=Sk(this);if(this.f=va("CPU",this.id)){this.F=va("Debugger",this.id);this.D=new Ec({id:this.wb+".bus",busWidth:this.S},this.f,this.F);var d,e=ta(this.id);if((this.i=va("Panel",this.id))&&this.i.Ta)for(b=
0;b<e.length;b++)d=e[b],d.T=this.i.T,d.v=this.i.v,d.Ta=this.i.Ta;this.v(Fb+" v1.34.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.v("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis <http://skn.noip.me/pdp11/pdp11.html>");for(b=0;b<e.length;b++)d=e[b],d.Aa&&d.Aa(this,this.D,this.f,this.F);b=null;d=ee(this,"resume",a);void 0!==d&&(1<d.length?b=this.w=d:this.b=parseInt(d,10));var f;if(a=ee(this,"state")||
(f=!0,a.state))this.I=b=a,f||(this.C=!0,this.b=Tk),this.b&&(this.B=new G(this,"1.34.0"),Uk(this.B)?b=null:delete this.B);!b&&this.b&&(b=Vk(this))&&(this.C=!0);if(b){var g=this;ab(b,null,!0,function(a,b,c){c?(g.w=null,g.C=!1,g.T("Unable to load machine state from server (error "+c+(b?": "+Xa(b):"")+")")):(g.G=b,g.R=!0);y(g)})}else y(this);this.H.power||(this.L=!0);!c&&this.L&&this.yc(this.rc)}else v("Unable to find CPU component")}p(Qk,r);
function Rk(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){v(d.message+" ("+c+")")}}a.O=b}function ee(a,b,c,d){var e=b.toLowerCase(),e=ib(b)||ib(e);void 0===e&&a.O&&(e=a.O[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}h=Qk.prototype;
h.yc=function(a,b){for(var c=this,d=ta(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Fa(f)){Fa(f,function(){c.yc(a,b)});return}}a.call(this,b)};function Wk(a,b){var c=new G(a,"1.34.0",Xk);if(Uk(c)&&Yk(c)){var d=c.get(Zk),e=b?b.get(Zk):"unknown";d!=e&&(a.T("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
h.rc=function(a){void 0===a&&(a=this.b||(this.G?$k:Tk));if(!this.j){this.j++;var b=!1,c=!1;this.N=!1;var d=this.B||new G(this,"1.34.0");if(a==al)b=!0;else if(a>Tk){if(Uk(d,this.G)){this.u=new G(this,"1.34.0",bl);Uk(this.u)&&(cl(this,d),a=dl,el(this.u));this.u.set(Zk,$a());fl(this.u);var e=this.b&&!this.C;if(a==$k||ra("Click OK to restore the previous "+Fb+" machine state, or CANCEL to reset the machine.")){if(c=Yk(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?Uk(d,g):("error"==f&&"no machine state"!=
g?(this.T("Error: "+g),"unable to verify user"==g&&(gb(gl,""),this.g=null)):this.v(f+": "+g),el(d),Uk(d)?(c=Yk(d),e=!0):c=!1))}e&&Wk(this,c?d:null)}else a==dl&&d.clear()}else Wk(this);delete this.G;delete this.B}e=ta(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=hl(this,g,d,b,c));b=[d,a,c];a!=al?this.yc(this.me,b):this.me(b)}};
function hl(a,b,c,d,e){if(!b.A.aa){b.A.aa=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,".")))),"string"===typeof f&&(f=null),!b.Da(f,d)&&f&&(v("Unable to restore state for "+b.type),a.I&&!a.R?(c.clear(),a.b=Tk,window&&window.location.reload()):a.N=!0,b.Da(null),e=!1),!d&&b.Vd){var g=b.Vd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(k){v("Error restoring state for "+b.type+" ("+k.message+")")}}return e}
h.me=function(a){var b=a[0],c=0>a[1];a=a[2];this.P=!0;this.A.aa=!0;var d=this.H.power;d&&(d.textContent="Shutdown");this.f&&(hl(this,this.f,b,c,a),H(this,-2),this.f.ra());this.N&&(cl(this,b),b.clear());!c&&this.u&&(this.u.clear(),delete this.u);this.j=0};
function cl(a,b){if(ra("There may be a problem with your "+Fb+" machine.\n\nTo help us diagnose it, click OK to send this "+Fb+" machine state to http://www.pcjs.org.")){var c=a.U;a=a.g||"";b=b.toString();var d={};d.app=Fb;d.ver="1.34.0";d.url=c;d.user=a;d.type="bug";d.data=b;ab("http://www.pcjs.org/api/v1/report",d,!0)}}
function Nk(a,b,c){var d,e="none";if(a.j)return null;a.j--;var f=new G(a,"1.34.0"),g=new G(a,"1.34.0",Xk),k=$a();g.set(Zk,k);f.set(Zk,k);f.set(il,"1.34.0");f.set(jl,window?window.location.href:null);f.set(ml,window?window.navigator.userAgent:"");a.f&&a.f.Ca&&(c&&(b&&(a.f.A.ra=a.f.A.V),a.f.ba()),d=a.f.Ca(b,c),"object"===typeof d&&f.set(a.f.id,d),c&&(a.f.A.aa=!1,!1===d&&(e=null)));for(var k=ta(a.id),l=0;l<k.length;l++){var m=k[l];m.A.aa&&(m.Ca&&(d=m.Ca(b,c),"object"===typeof d&&f.set(m.id,d)),c&&(m.A.aa=
!1,!1===d&&(e=null)))}e&&(c?(k=d=!1,b?(a.g&&wl(a,a.g,f.toString()),fl(g)&&fl(f)||(e=null,d=k=!0)):a.b&&(d=!0,k=a.b==xl),d&&f.clear(k)):e=f.toString());c&&(a.A.aa=!1,b=a.H.power)&&(b.textContent="Power");a.j=0;return e}
h.reset=function(){this.A.reset=!0;this.D&&this.D.reset&&(C(this,"Resetting "+this.D.type),this.D.reset());this.f&&this.f.reset&&(C(this,"Resetting "+this.f.type),this.f.reset());for(var a=ta(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.D&&c!==this.f&&c.reset&&(C(this,"Resetting "+c.type),c.reset())}this.A.reset=!1;H(this,-1)};h.start=function(a,b){for(var c=ta(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}H(this,-1)};
h.stop=function(a,b){for(var c=ta(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}H(this,-1)};
function H(a,b){if(a.f){var c=a.f,d=b||0,e=c.H.speed;e&&(0>=d||30<=(c.$c+=d))&&(e.textContent=c.A.V?c.xb.toFixed(2)+"Mhz":"Stopped",c.$c=0)}if(a.i&&(a=a.i,b=b||0,a.u)){c=a.f.A.V;d=!!(a.f.i&8);if(0>=b||60<=(a.j+=b)){for(e=0;e<a.f.g.length;e++)kc(a,"R"+e,a.f.g[e]);e=yd(a.f);kc(a,"PS",e);kc(a,"NF",e&8?1:0,1);kc(a,"ZF",e&4?1:0,1);kc(a,"VF",e&2?1:0,1);kc(a,"CF",e&1?1:0,1);a.j=0}-1>b?a.fa=a.f.g[7]:0<b&&c&&!d&&(a.fa=a.f.kb);gc(a,a.fa);Sb(a,a.Wa);b=a.f;b=b.zb?b.U&16?1:2:4;Ac(a,"B22",b&1);Ac(a,"B18",b&2);
Ac(a,"B16",b&4)}}
h.va=function(a,b,c){var d=this;switch(b){case "power":return this.H[b]=c,c.onclick=function(){d.j||(d.A.aa?Nk(d,!1,!0):d.yc(d.rc))},!0;case "reset":return this.H[b]=c,c.onclick=function(){if(d.A.aa&&!d.j)if(d.b&&!d.w){var a=ra("Click OK to save changes to this "+Fb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Nk(d,a,!0);!a&&d.I?window&&window.location.reload():(a||(d.M=!0),d.rc(Tk),d.M=!1)}else d.reset(),d.f&&!d.F&&d.f.ra()},!0;case "save":if(Pa(cb(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.H[b]=c,c.onclick=function(){var a=Sk(d,!0);if(a){var b=!!(d.b&&!d.w||d.I),c=Nk(d,b);b?wl(d,a,c):d.T("Resume disabled, machine state not saved")}},!0}return!1};
function Sk(a,b){var c=a.g;c||((c=fb(gl),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=yl(a,c))||a.T("The user ID is invalid.")):b&&a.T("Browser local storage is not available"));return c}
function yl(a,b){a.g=null;b=ab(cb()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(gb(gl,b.data),a.g=b.data)}catch(d){v(d.message+" ("+c+")")}return a.g}function Vk(a){var b=null;a.g&&(b=cb()+"/api/v1/user?req=load&user="+a.g+"&state="+zl(a,"1.34.0"));return b}
function wl(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=zl(a,"1.34.0");d.data=c;b=ab(cb()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.T("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.T(c),gb(gl,""),a.g=null)}}
function Th(a){var b;a=ta(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function oe(a,b){if(a.Ta){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.Ta.focus();!b&&window&&window.scrollTo(c,d)}}var bl="failsafe",Xk="validate",Zk="timestamp",il="version",jl="url",ml="browser",gl="user",al=-1,Tk=0,$k=1,dl=2,xl=3;
qb(function(){for(var a=x(document,w+"-machine"),b=0;b<a.length;b++)for(var c=a[b],d=wa(c),c=x(c,w,"computer"),e=0;e<c.length;e++){var f=c[e],g=wa(f),g=new Qk(g,d,!0);xa(g,f);g.L&&g.yc(g.rc)}});rb.show.push(function(){for(var a=x(document,w,"computer"),b=0;b<a.length;b++){var c=wa(a[b]);(c=va("Computer",c.id))&&c.P&&!c.A.aa&&c.rc(al)}});rb.exit.push(function(){for(var a=x(document,w,"computer"),b=0;b<a.length;b++){var c=wa(a[b]);(c=va("Computer",c.id))&&c.A.aa&&Nk(c,!(!c.b||c.w),!0)}});
function G(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.D=!1;this.key=zl(a,b,c);el(this,a.vf)}h=G.prototype;h.set=function(a,b){try{this.f[a]=b}catch(c){}};h.get=function(a){return this.f[a]||null};h.data=function(){return this.f};function Uk(a,b){return b?(a.b=b,a.g=!0,a.D=!1,!0):a.g?!0:db()&&(b=fb(a.key))?(a.b=b,a.g=!0):!1}function Yk(a){var b=!0;if(!a.D)try{a.f=JSON.parse(a.b),a.D=!0}catch(c){v(c.message||c),b=!1}return b}
function fl(a){var b=!0;if(db()){var c=JSON.stringify(a.f);gb(a.key,c)||(v("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}h.toString=function(){return this.f?JSON.stringify(this.f):this.b};function el(a,b){a.b="";a.f={};a.g=a.D=!1;b&&a.set("parms",b)}
h.clear=function(a){el(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function zl(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Al=0;
function Bl(a,b,c,d,e,f){e("Loading "+a+"...");ab(a,null,!0,function(g,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),f(k,null)):Cl(k,a,b,c,d,e,f)})}
function Cl(a,b,c,d,e,f,g){function k(a,f){if(f)g(f,null);else{c&&(oa(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),
a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pdp11$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(n){f=null,a=n.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);g(a,f)}}a?e?Dl(a,f,k):k(a,null):g("no data"+(b?" for file: "+b:""),null)}
function Dl(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");ab(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,n=/( [a-z]+=)(['"])(.*?)\2/g;m=n.exec(f);)l=0>l.indexOf(m[1])?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],g);Dl(a,b,c)}})}else c(a,null)}
function El(a,b,c,d){function e(a){if(void 0===k){var b=g&&x(g,"machine-warning");k=b&&b[0]||g}k&&(k.innerHTML=Qa(a))}function f(a){e("Error: "+a);l&&(--Al||ub(!0));l=!1}var g,k,l=!0;Al++;pa[a]={};try{if(g=document.getElementById(a)){var m;if("object"==typeof resources&&(m=resources.css)){var n=document.head||document.getElementsByTagName("head")[0],q=document.createElement("style");q.type="text/css";q.styleSheet?q.styleSheet.cssText=m:q.appendChild(document.createTextNode(m));n.appendChild(q)}c||
(c="/versions/pdpjs/1.34.0/components.xsl");m=function(d,k){k?Bl(c,null,null,!1,e,function(d,l){l?(oa(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(l=k.transformNode(l))?(g.outerHTML=l,--Al||ub(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(l),(l=d.transformToFragment(k,document))?g.parentNode?(g.parentNode.replaceChild(l,g),--Al||ub(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?Bl(b,a,d,!0,e,m):Cl(b,null,a,d,!1,e,m)}else f("missing machine element: "+a)}catch(t){f(t.message)}return l}window.embedPDP11=function(a,b,c,d){ub(!1);return El(a,b,c,d)};window.findMachineComponent=function(a,b){return va(b,a+".machine")};
window.processMachineScript=function(a,b,c){b=!1;if("string"==typeof c){b=!0;for(var d=c.length,e=[],f=[],g="",k=null,l=0;l<d;l++){var m=c[l];if('"'==m||"'"==m)k&&m!=k?g+=m:(k?k=null:k=m,g&&(f.push(g),g=""));else{if(!k){if("\r"==m||"\n"==m)m=";";if(" "==m||"\t"==m||";"==m){g&&(f.push(g),g="");";"==m&&f.length&&(e.push(f),f=[]);continue}}g+=m}}f.length&&e.push(f);ya(a+".machine",e,0)||(b=!1)}return b};window.enableEvents=ub;window.sendEvent=Cb;})();//# sourceMappingURL=/tmp/pdpjs/1.34.0/pdp11-dbg.map
