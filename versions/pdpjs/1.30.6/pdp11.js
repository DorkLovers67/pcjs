(function(){/*
 http://pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/serialport.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2016
*/
for(var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,ca=["Math","log2"],da=0;da<ca.length-1;da++){var ea=ca[da];ea in ba||(ba[ea]={});ba=ba[ea]}var fa=ca[ca.length-1],ga=ba[fa],ha=ga?ga:function(a){return Math.log(a)/Math.LN2};
ha!=ga&&null!=ha&&aa(ba,fa,{configurable:!0,writable:!0,value:ha});
var ia={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],21368320:[615,4,17],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},n={cf:0,wc:1,ef:2,ff:3,gf:4,hf:5,jf:6,kf:7,dc:8,lf:9,xc:10,mf:11,nf:12,yc:13,pf:14,qf:15,rf:16,sf:17,tf:18,uf:19,vf:20,wf:21,xf:22,yf:23,zf:24,Af:25,Bf:26," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,
"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,ac:65,bf:66,df:67,Cf:68,E:69,Df:70,Ef:71,Ff:72,Gf:73,Hf:74,If:75,Jf:76,Kf:77,Lf:78,Mf:79,Nf:80,Q:81,Of:82,Pf:83,Qf:84,Rf:85,Sf:86,Tf:87,Uf:88,Vf:89,Gc:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,Wf:97,Xf:98,Yf:99,d:100,e:101,$f:102,ag:103,bg:104,cg:105,fg:106,k:107,gg:108,hg:109,n:110,ig:111,p:112,q:113,r:114,jg:115,t:116,kg:117,lg:118,mg:119,x:120,y:121,z:122,"{":123,
"|":124,"}":125,"~":126,zc:127};
function q(a){var b=10,c;if(a){b||(b=10);var d=a.charAt(0),e=0<a.indexOf(",");e&&(a=a.replace(/,/g,""));"#"==d?(b=8,d=null):"$"==d&&(b=16,d=null);null==d?a=a.substr(1):("0"==d&&(d=a.charAt(1),"b"==d&&e&&(b=2,d=null),"o"==d?(b=8,d=null):"x"==d&&(b=16,d=null)),null==d?a=a.substr(2):(d=a.charAt(a.length-1).toLowerCase(),"y"==d?(b=2,d=null):"."==d?(b=10,d=null):"h"==d&&(b=16,d=null),null==d&&(a=a.substr(0,a.length-1))));var f,d=a;((e=b)&&10!=e?16==e?d.match(/^[0-9a-f]+$/i):8==e?d.match(/^[0-7]+$/):2==
e&&d.match(/^[01]+$/):d.match(/^[0-9]+$/))&&!isNaN(f=parseInt(a,b))&&(c=f|0)}return c}function ja(a,b){var c="";b?11<b&&(b=11):b=a&-16777216?11:a&-65536?8:6;if(null==a||isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;)c=String.fromCharCode((a&7)+48)+c,a>>=3;return""+c}function r(a,b,c){var d="";b?8<b&&(b=8):b=a&-65536?8:4;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;){var e=a&15,e=e+(0<=e&&9>=e?48:55),d=String.fromCharCode(e)+d;a>>=4}return(c?"0x":"")+d}
function u(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}function ka(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function la(a,b){return-1!==a.indexOf(b,a.length-b.length)}var ma={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function na(a){return a.replace(/[&<>"']/g,function(a){return ma[a]})}
function oa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var pa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"},qa=Date.now||function(){return+new Date};
function ra(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function w(a,b,c,d){var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(k.onreadystatechange=function(){4===k.readyState&&(f=k.responseText,200==k.status||!k.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),d&&d(a,f,e))});if(b&&"object"==
typeof b){var l="",m;for(m in b)b.hasOwnProperty(m)&&(l&&(l+="&"),l+=m+"="+encodeURIComponent(b[m]));l=l.replace(/%20/g,"+");k.open("POST",a,!!c);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l)}else k.open("GET",a,!!c),"bytes"==b&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.send();c||(f=k.responseText,200!=k.status&&(e=k.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function sa(a,b){var c,d={M:null,da:null,pa:null,oa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.pa=g.load;d.oa=g.exec;if(e=g.bytes)d.M=e;else if(e=g.words)for(d.M=Array(2*e.length),f=c=0;c<e.length;c++)d.M[f++]=e[c]&255,d.M[f++]=e[c]>>8&255;else if(e=g.data)for(d.M=Array(4*e.length),f=c=0;c<e.length;c++)d.M[f++]=e[c]&
255,d.M[f++]=e[c]>>8&255,d.M[f++]=e[c]>>16&255,d.M[f++]=e[c]>>24&255;else d.M=g;d.da=g.symbols;d.M.length?1==d.M.length&&(x(d.M[0]),d=null):(x("Empty resource: "+a),d=null)}catch(k){x("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){x("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.M=e)}return d}
function ta(){return"http://"+(window?window.location.host:"www.pcjs.org")}function x(a){window&&window.alert(a)}function ua(a){var b=!1;window&&(b=window.confirm(a));return b}var va=null;function wa(){if(null==va){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}va=a}return va}
function za(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}function Aa(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Ba(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&b.match(/(iPod|iPhone|iPad)/)&&b.match(/AppleWebKit/)||"MSIE"==a&&b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)?!0:!1}return!1}
function Ca(a,b){var c=null;a="data:application/octet-stream;base64,"+a;b&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),b="Check your Downloads folder for "+b+"."):(window.open(a),b="Check your browser for a new window/tab containing the requested data"+(b?" ("+b+")":"")+".");return b}var Da={init:[],show:[],exit:[]},Ea=!1,Fa=!1,Ga=!0;
function Ha(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function Ia(a){Da.init.push(a)}function Ja(a){if(Ga)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){x(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function Ka(a){!Ga&&a?(Ga=!0,Ea&&La("init"),Fa&&La("show")):Ga=a}function La(a){Da[a]&&Ja(Da[a])}Ha("onload",function(){Ea=!0;Ja(Da.init)});Ha("onpageshow",function(){Fa=!0;Ja(Da.show)});
Ha(Ba("Opera")||Ba("iOS")?"onunload":"onbeforeunload",function(){Ja(Da.exit)});function z(a,b,c,d){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.jc=b.comment;this.cd=b;b=this.id.indexOf(".");0>b?this.Aa=this.id:(this.Ba=this.id.substr(0,b),this.Aa=this.id.substr(b+1));this[a]=c;this.m={ready:!1,Oa:!1,Ob:!1,R:!1,error:!1};this.Fb=null;this.m.error=!1;this.j={};this.D=null;this.Sc=d||0;A.push(this)}var Ma=void 0,Na={};
if(window){Ma||(Ma=window.location.search.substr(1));for(var Oa,Pa=/\+/g,Qa=/([^&=]+)=?([^&]*)/g;Oa=Qa.exec(Ma);)Na[decodeURIComponent(Oa[1].replace(Pa," "))]=decodeURIComponent(Oa[2].replace(Pa," "))}function Ra(a){function b(){}if(window){if(!a)throw new TypeError;if(Object.create)return Object.create(a);var c=typeof a;if("object"!==c&&"function"!==c)throw new TypeError;}b.prototype=a;return new b}
function B(a,b){b||(b=z);a.prototype=Ra(b.prototype);a.prototype.constructor=a;a.prototype.parent=b.prototype}if(window){window.PCjs||(window.PCjs={});var Sa=window.PCjs.Machines||(window.PCjs.Machines={}),A=window.PCjs.Components||(window.PCjs.Components=[])}else Sa={},A=[];function Ta(a,b,c){Sa[a]&&b&&(Sa[a][b]=c)}function C(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<A.length;b++){var d=A[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Ua(a){if(void 0!==a){var b;for(b=0;b<A.length;b++)if(A[b].id===a)return A[b]}return null}function Va(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<A.length;d++)if(c)c==A[d]&&(c=null);else if(!(a!=A[d].type||b&&A[d].id.indexOf(b)))return A[d]}return null}function D(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){x(c.message+" ("+a+")")}return b}
function E(a,b){b=F(b.parentNode,"pdp11-control");for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){var g=f.getAttribute("class");if(g)for(var k=g.split(" "),l=0;l<k.length;l++)switch(g=k[l],g){case "pdp11-binding":(g=D(f))&&g.binding&&a.ba(g.type,g.binding,f,g.value),l=k.length}}}}
function F(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
z.prototype={constructor:z,parent:null,toString:function(){return this.name?this.name:this.id||this.type},ba:function(a,b,c){switch(b){case "clear":return this.j[b]||(this.j[b]=c,c.onclick=function(a){return function(){a.j.print&&(a.j.print.value="")}}(this)),!0;case "print":return this.j[b]||(this.nb=this.j[b]=c,c.value="",this.V=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(c),
this.B=function(a){this.V(a,this.Aa)}),!0;default:return!1}},log:function(){},V:function(){},status:function(a){this.V(this.Aa+": "+a)},B:function(a,b,c){c=c||this.type;b||x((c?c+": ":"")+a)},ka:function(){return this.m.R=!0},ja:function(a,b){b&&(this.m.R=!1);return!0}};function Wa(a,b){a.m.Ob?(a.m.Oa=!1,a.m.Ob=!1):a.m.error?a.V(a.toString()+" error"):a.m.Oa=b}function G(a,b){a.m.error||(a.m.ready=!1!==b,a.m.ready&&(b=a.Fb,a.Fb=null,b&&b()))}
function Xa(a,b){b&&(a.m.ready?b():a.Fb=b);return a.m.ready}function Ya(a,b){a.m.error=!0;a.B(b)}Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});var Za="undefined"!==typeof ArrayBuffer,$a={48:"DL11R",52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11"};
function ab(a){z.call(this,"Panel",a,ab,512);this.la=this.i=this.c=this.o=this.s=this.v=0;this.A=this.C=this.w=!1;this.F=bb;this.f={};this.b={START:[1,1,!0,!1,this.$c],STEP:[1,1,!1,!1,this.ad],ENABLE:[1,1,!1,!1,this.Wc],CONT:[1,1,!0,!1,this.Uc],DEP:[0,0,!0,!1,this.Vc],EXAM:[1,1,!0,!1,this.Xc],LOAD:[1,1,!0,!1,this.Zc],TEST:[0,0,!0,!1,this.Yc]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.bd,a]}B(ab);var bb=7;function cb(a,b){return a.b[b]&&a.b[b][1]}h=ab.prototype;h.reset=function(){this.stop()};
h.ba=function(a,b,c,d){if(this.l&&this.l.ba(a,b,c,d)||this.a&&this.a.ba(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.j[b]=c,this.v++,!0;default:return"led"==a||"rled"==a?(this.j[b]=c,this.f[b]=d?1:0,this.v++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.j[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,b){return function(){db(a,
b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){eb(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){db(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){eb(a,b)}}(this,b),!0):this.parent.ba.call(this,a,b,c,d)}};h.ia=function(a,b,c,d){this.l=a;this.h=b;this.a=c;this.D=d;fb(b,this,gb);hb(b,this.reset.bind(this));ib(this);jb(this)};h.ka=function(a,b){b||(kb(),this.reset());return!0};h.ja=function(){return!0};
function lb(a,b,c){if(a=a.j[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function ib(a,b){for(var c in a.f)lb(a,c,null!=b?b:a.f[c])}function mb(a,b,c){if(a=a.j[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function jb(a){for(var b in a.b)mb(a,b,a.b[b][1])}function nb(a,b,c,d){a.j[b]&&(void 0===c&&(Ya(a,"Value for "+b+" is invalid"),H(a.a)),c=8==(a.D&&a.D.c||8)?ja(c,d):r(c,d),a.j[b].textContent!=c&&(a.j[b].textContent=c))}
function db(a,b){var c=a.b[b];mb(a,b,c[1]=1-c[1]);c[3]=!0;c[4]&&c[4].call(a,c[1],c[5]);"STEP"!=b&&(a.A="DEP"==b,a.C="EXAM"==b)}function eb(a,b){var c=a.b[b];c[2]&&c[3]&&(mb(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5]));c[3]=!1}h.$c=function(a){a||this.a.m.O||(a=this.a,a.h.reset(),ob(a),cb(this,"ENABLE")&&pb(this.a))};h.ad=function(){};h.Wc=function(a){a||H(this.a)};
h.Uc=function(a){if(!a&&!this.a.m.O)if(cb(this,"ENABLE"))pb(this.a);else{a=this.D;var b;if(b=a)a.m.Oa&&(a.m.Ob=!0),b=!a.m.Oa;if(b)Wa(a,!0),a.Ib(0,null),Wa(a,!1);else try{var c=this.a.Ib(1);0<c&&(qb(this.a,c),rb(this.a,c,!0),sb(this.a,c))}catch(d){"number"!=typeof d&&Ya(this.a,d.stack||d.message)}this.stop();this.l&&this.l.za()}};h.Vc=function(a){if(a&&!this.a.m.O)if(this.A&&tb(this),a=ub(this,this.c),this.F==bb)this.h.tb(this.la,a);else{var b=this.a,c=this.la;b.Va++;b.h.La(vb(b,c,4),a);b.Va--}};
h.Xc=function(a){if(!a&&!this.a.m.O){this.C&&tb(this);if(this.F==bb)a=this.h.pb(this.la);else{a=this.a;var b=this.la;a.Va++;b=a.h.Ia(vb(a,b,2));a.Va--;a=b}ub(this,a)}};h.Zc=function(a){a||this.a.m.O||wb(this,this.c)};h.Yc=function(a){if(a)this.w=!0,ib(this,!0);else if(this.w=!1,ib(this),void 0!==this.j.S0){for(a=this.c=0;22>a;a++)this.b["S"+a][1]=0&1<<a?1:0;jb(this)}};h.bd=function(a,b){this.c=a?this.c|1<<b:this.c&~(1<<b)};
function tb(a){var b=1145>a.a.Ja?8:16,c=65472<=a.la&&a.la<65472+b,b=c?1:2,c=c?15:a.h.Za;cb(a,"STEP")||(b=-b);wb(a,a.la&~c|a.la+b&c)}function wb(a,b){a.la=b&a.h.Za;b=a.la;for(var c=0;22>c;c++)xb(a,"A"+c,b&1<<c)}function ub(a,b){a.i=b&65535;b=a.i;for(var c=0;16>c;c++)xb(a,"D"+c,b&1<<c);return a.i}function xb(a,b,c){a.f[b]=c;a.w||lb(a,b,c)}h.stop=function(){wb(this,this.a.g[7])};h.setData=function(a,b){b?this.o=a:this.i=a};h.dd=function(a,b){return(b?this.o:this.c)&65535};h.fe=function(a){this.o=a};
var yb={},gb=(yb[65400]=[null,null,ab.prototype.dd,ab.prototype.fe,"CNSW"],yb);function kb(){for(var a=!1,b=F(document,"pdp11","panel"),c=0;c<b.length;c++){var d=b[c],e=D(d),f=Ua(e.id);f||(a=!0,f=new ab(e));E(f,d);a&&G(f)}}Ia(kb);
function zb(a,b,c){z.call(this,"Bus",a,zb,16);this.a=b;this.D=c;this.L=a.busWidth||16;this.w=1<<this.L;this.Za=this.w-1;this.b=Ab;this.c=Math.log2(this.b);this.I=this.b>>2;this.l=this.b-1;this.v=this.w/this.b|0;this.Ga=[];this.f=0;this.o=!1;this.A=[];this.Hc=[Bb,Cb,Db,Eb];a=new I(this);Fb(a,this.D);this.h=Array(this.v);this.i=Array(this.v);for(b=0;b<this.v;b++)this.h[b]=this.i[b]=a;this.Ca=this.w-Ab;Gb(this,this.Ca,Ab,Hb,this);this.H=this.F=(this.Ca&this.Za)>>>this.c;this.C=0;this.s=this.Za;G(this)}
B(zb);var Ab=8192,Ib=Ab-1;function Bb(a,b){var c=-1,d=this.controller,e=d.Ga[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Ga[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return c;J(d,b,16);return 255}
function Cb(a,b,c){var d=!1,e=this.controller,f=e.Ga[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Ga[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d||J(e,c,16)}function Db(a,b){var c=-1,d=this.controller;a=d.Ga[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return c;J(d,b,16);return 65535}
function Eb(a,b,c){var d=!1,e=this.controller;a=e.Ga[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d||J(e,c,16)}function Jb(a,b){if(b!=a.C){for(var c=0;c<a.v;c++)a.i[c]=a.h[c];a.C=0;a.s=a.Za;b&&(a.C=b,b=1<<b,a.s=b-1,b-=Ab,a.H=(b&a.s)>>>a.c,a.i[a.H]=a.h[a.F])}}h=zb.prototype;h.reset=function(){for(var a=0;a<this.A.length;a++)this.A[a]();Jb(this,16)};h.ka=function(a,b){b||this.reset();return!0};
function Gb(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.c;0<g&&k<a.h.length;){var l=a.h[k],m=k*a.b,p=a.b-(f-m);p>g&&(p=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.Na)return l.ub+=l.Na-f,l.Na=f,!0;if(f>=l.Na+l.ub){p=l.size-(f-m);p>g&&(p=g);l.ub=f-l.Na+p;f=m+a.b;g-=p;k++;continue}}return Kb(1,f,g)}f=new I(a,f,p,a.b,d,e);Fb(f,a.D,l);a.h[k++]=f;f=m+a.b;g-=p}return 0>=g?(a.status((c>>10)+"Kb "+Lb[d]+" at "+ja(b)),!0):Kb(2,b,c)}h.ob=function(a){return this.i[(a&this.s)>>>this.c].Tb(a&this.l,a)};
h.Ia=function(a){return this.i[(a&this.s)>>>this.c].aa(a&this.l,a)};h.Hb=function(a,b){this.i[(a&this.s)>>>this.c].$b(a&this.l,b,a)};h.La=function(a,b){this.i[(a&this.s)>>>this.c].Jb(a&this.l,b,a)};function Mb(a,b){return a.h[(b&a.Za)>>>a.c]}h.kc=function(a){this.o=!1;this.f++;a=Mb(this,a).w(a&this.l,a);this.f--;return a};h.pb=function(a){this.o=!1;this.f++;a=Mb(this,a).F(a&this.l,a);this.f--;return a};h.sb=function(a,b){this.o=!1;this.f++;Mb(this,a).s(a&this.l,b&255,a);this.f--};
h.tb=function(a,b){this.o=!1;this.f++;Mb(this,a).I(a&this.l,b&65535,a);this.f--};function Nb(a){for(var b=0,c=[],d=0;d<a.v;d++){var e=a.h[d];if(e.wa||e.Nc){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],p=g+1;p<e.length&&e[p]===m;)p++;l[k++]=p-g;l[k++]=m;g=p}l.length<e.length&&(e=l)}c[f]=e}}return c}function Ob(a){for(var b=Pb,c=0,d=0;d<a.h.length;d++){var e=a.h[d];e.type==b&&(c=e.Na+e.ub)}return c}
function Qb(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var p=b&Ib;if(void 0!==a.Ga[p])return x("I/O address already registered: "+r(b,8,!0)),!1;var t=l||"unknown";t&&0<=m&&(t+=m++);a.Ga[p]=[d,e,f,g,t,k||16,!1]}return!0}
function fb(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.a.Ja)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,p=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&p&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(p)));for(var t=g[4],v=g[5]||1,y=0;y<v;y++,f+=2)if(t&&1<v&&(t=g[4]+y),!Qb(a,f,f,k,l,m,p,g[7]||b.Sc,t||b.Aa))return!1}}return!0}
function hb(a,b){a.A.push(b)}function J(a,b,c){a.o=!0;a.f||(c&&(a.a.X|=c),K(a.a,4,0,b))}function Rb(a){var b=a.o;a.o=!1;return b}function Kb(a,b,c){x("Memory block error ("+a+": "+r(b)+","+r(c)+")");return!1}function L(a){z.call(this,"Device",a,L,256);this.b={Zf:0,Yb:-1}}B(L);h=L.prototype;
h.ia=function(a,b,c,d){this.h=b;this.l=a;this.a=c;this.D=d;var e=this;this.b.Yb=Sb(c,function(){e.b.Ya|=128;e.b.Ya&64&&M(e.a,e.b.Xa);e.l&&e.l.za(1);Tb(e.a,e.b.Yb,1E3/60)});this.b.Xa=Vb(c,64,6,524288);fb(b,this,Wb);hb(b,this.reset.bind(this));G(this)};h.reset=function(){this.b.Ya=128;Tb(this.a,this.b.Yb,1E3/60,!0)};h.ld=function(){return this.b.Ya};h.me=function(a){this.b.Ya=a&192;this.b.Ya&64||Xb(this.a,this.b.Xa)};h.nd=function(){var a=this.a,b=a.Y;b&57344||(b=b&-3199|a.hb<<5|a.ib<<1);return b};
h.oe=function(a){Yb(this.a,a&-129|this.a.Y&128)};h.od=function(){var a=this.a;a.Y&57344||(a.Bb=a.A>>16&65535);a=a.Bb;a&65280&&(a=(a<<8|a>>8)&65535);return a};h.pd=function(){var a=this.a;a.Y&57344||(a.Cb=a.A&65535);return a.Cb};h.qd=function(){return this.a.ya};h.pe=function(a){var b=this.a;1170>b.Ja&&(a&=-49);b.ya!=a&&(b.ya=a,b.Ta=a&16?4194303:262143,Zb(b))};h.Yd=function(a){a=a>>1&63;var b=this.a.eb[a>>1];return a&1?b>>16:b&65535};
h.Xe=function(a,b){b=b>>1&63;var c=b>>1;this.a.eb[c]=b&1?this.a.eb[c]&65535|(a&63)<<16:this.a.eb[c]&-65536|a&65534};h.Rd=function(a){return this.a.J[1][a>>1&7]};h.Qe=function(a,b){this.a.J[1][b>>1&7]=a&65295};h.Pd=function(a){return this.a.J[1][(a>>1&7)+8]};h.Oe=function(a,b){this.a.J[1][(b>>1&7)+8]=a&65295};h.Qd=function(a){return this.a.Z[1][a>>1&7]};h.Pe=function(a,b){b=b>>1&7;this.a.Z[1][b]=a;this.a.J[1][b]&=65295};h.Od=function(a){return this.a.Z[1][(a>>1&7)+8]};
h.Ne=function(a,b){b=(b>>1&7)+8;this.a.Z[1][b]=a;this.a.J[1][b]&=65295};h.kd=function(a){return this.a.J[0][a>>1&7]};h.le=function(a,b){this.a.J[0][b>>1&7]=a&65295};h.hd=function(a){return this.a.J[0][(a>>1&7)+8]};h.je=function(a,b){this.a.J[0][(b>>1&7)+8]=a&65295};h.jd=function(a){return this.a.Z[0][a>>1&7]};h.ke=function(a,b){b=b>>1&7;this.a.Z[0][b]=a;this.a.J[0][b]&=65295};h.gd=function(a){return this.a.Z[0][(a>>1&7)+8]};h.ie=function(a,b){b=(b>>1&7)+8;this.a.Z[0][b]=a;this.a.J[0][b]&=65295};
h.Xd=function(a){return this.a.J[3][a>>1&7]};h.We=function(a,b){this.a.J[3][b>>1&7]=a&65295};h.Vd=function(a){return this.a.J[3][(a>>1&7)+8]};h.Ue=function(a,b){this.a.J[3][(b>>1&7)+8]=a&65295};h.Wd=function(a){return this.a.Z[3][a>>1&7]};h.Ve=function(a,b){b=b>>1&7;this.a.Z[3][b]=a;this.a.J[3][b]&=65295};h.Ud=function(a){return this.a.Z[3][(a>>1&7)+8]};h.Te=function(a,b){b=(b>>1&7)+8;this.a.Z[3][b]=a;this.a.J[3][b]&=65295};h.ab=function(a){a&=7;return this.a.G&2048?this.a.Ka[a]:this.a.g[a]};
h.fb=function(a,b){b&=7;this.a.G&2048?this.a.Ka[b]=a:this.a.g[b]=a};h.vd=function(){return this.a.G&49152?this.a.qa[0]:this.a.g[6]};h.ue=function(a){this.a.G&49152?this.a.qa[0]=a:this.a.g[6]=a};h.yd=function(){return this.a.g[7]};h.xe=function(a){this.a.g[7]=a};h.bb=function(a){a&=7;return this.a.G&2048?this.a.g[a]:this.a.Ka[a]};h.gb=function(a,b){b&=7;this.a.G&2048?this.a.g[b]=a:this.a.Ka[b]=a};h.wd=function(){return 1==(this.a.G&49152)>>14?this.a.g[6]:this.a.qa[1]};
h.ve=function(a){1==(this.a.G&49152)>>14?this.a.g[6]=a:this.a.qa[1]=a};h.xd=function(){return 3==(this.a.G&49152)>>14?this.a.g[6]:this.a.qa[3]};h.we=function(a){3==(this.a.G&49152)>>14?this.a.g[6]=a:this.a.qa[3]=a};h.fd=function(a){return this.a.Vb[a-65504>>1]};h.he=function(a,b){this.a.Vb[b-65504>>1]=a};h.tc=function(a){return 65520==a?(Ob(this.h)>>6)-1:0};h.vc=function(){};h.Td=function(){return 1};h.Se=function(){};h.ed=function(){return this.a.X};h.ge=function(){this.a.X=0};h.md=function(){return this.a.Ub};
h.ne=function(a,b){b&1||(a&=255);this.a.Ub=a};h.rd=function(a,b){return b?0:this.a.rb};h.qe=function(a){var b=this.a;if(a&=65024){var c=a>>9;do a+=34;while(c>>=1);b.u|=1}b.rb=a};h.Sd=function(a,b){return b?0:this.a.cb&65280};h.Re=function(a){this.a.cb=a|255};h.ud=function(){return $b(this.a)};h.te=function(a){ac(this.a,a)};h.uc=function(){};
var N={},Wb=(N[61568]=[null,null,L.prototype.Yd,L.prototype.Xe,"UNIMAP",64,1170],N[62592]=[null,null,L.prototype.Rd,L.prototype.Qe,"SIPDR",8,1145,64],N[62608]=[null,null,L.prototype.Pd,L.prototype.Oe,"SDPDR",8,1145,64],N[62624]=[null,null,L.prototype.Qd,L.prototype.Pe,"SIPAR",8,1145,64],N[62640]=[null,null,L.prototype.Od,L.prototype.Ne,"SDPAR",8,1145,64],N[62656]=[null,null,L.prototype.kd,L.prototype.le,"KIPDR",8,1145,64],N[62672]=[null,null,L.prototype.hd,L.prototype.je,"KDPDR",8,1145,64],N[62688]=
[null,null,L.prototype.jd,L.prototype.ke,"KIPAR",8,1145,64],N[62704]=[null,null,L.prototype.gd,L.prototype.ie,"KDPAR",8,1145,64],N[62798]=[null,null,L.prototype.qd,L.prototype.pe,"MMR3",1,1145,64],N[65382]=[null,null,L.prototype.ld,L.prototype.me,"LKS"],N[65402]=[null,null,L.prototype.nd,L.prototype.oe,"MMR0",1,1145,64],N[65404]=[null,null,L.prototype.od,L.prototype.uc,"MMR1",1,1145,64],N[65406]=[null,null,L.prototype.pd,L.prototype.uc,"MMR2",1,1145,64],N[65408]=[null,null,L.prototype.Xd,L.prototype.We,
"UIPDR",8,1145,64],N[65424]=[null,null,L.prototype.Vd,L.prototype.Ue,"UDPDR",8,1145,64],N[65440]=[null,null,L.prototype.Wd,L.prototype.Ve,"UIPAR",8,1145,64],N[65456]=[null,null,L.prototype.Ud,L.prototype.Te,"UDPAR",8,1145,64],N[65472]=[null,null,L.prototype.ab,L.prototype.fb,"R0SET0"],N[65473]=[null,null,L.prototype.ab,L.prototype.fb,"R1SET0"],N[65474]=[null,null,L.prototype.ab,L.prototype.fb,"R2SET0"],N[65475]=[null,null,L.prototype.ab,L.prototype.fb,"R3SET0"],N[65476]=[null,null,L.prototype.ab,
L.prototype.fb,"R4SET0"],N[65477]=[null,null,L.prototype.ab,L.prototype.fb,"R5SET0"],N[65478]=[null,null,L.prototype.vd,L.prototype.ue,"R6KERNEL"],N[65479]=[null,null,L.prototype.yd,L.prototype.xe,"R7KERNEL"],N[65480]=[null,null,L.prototype.bb,L.prototype.gb,"R0SET1",1,1145],N[65481]=[null,null,L.prototype.bb,L.prototype.gb,"R1SET1",1,1145],N[65482]=[null,null,L.prototype.bb,L.prototype.gb,"R2SET1",1,1145],N[65483]=[null,null,L.prototype.bb,L.prototype.gb,"R3SET1",1,1145],N[65484]=[null,null,L.prototype.bb,
L.prototype.gb,"R4SET1",1,1145],N[65485]=[null,null,L.prototype.bb,L.prototype.gb,"R5SET1",1,1145],N[65486]=[null,null,L.prototype.wd,L.prototype.ve,"R6SUPER",1,1145],N[65487]=[null,null,L.prototype.xd,L.prototype.we,"R6USER",1,1145],N[65504]=[null,null,L.prototype.fd,L.prototype.he,"CTRL",8,1170],N[65520]=[null,null,L.prototype.tc,L.prototype.vc,"LSIZE",1,1170],N[65522]=[null,null,L.prototype.tc,L.prototype.vc,"HSIZE",1,1170],N[65524]=[null,null,L.prototype.Td,L.prototype.Se,"SYSID",1,1170],N[65526]=
[null,null,L.prototype.ed,L.prototype.ge,"ERR",1,1170],N[65528]=[null,null,L.prototype.md,L.prototype.ne,"MBR",1,1170],N[65530]=[null,null,L.prototype.rd,L.prototype.qe,"PIR"],N[65532]=[null,null,L.prototype.Sd,L.prototype.Re,"SLR"],N[65534]=[null,null,L.prototype.ud,L.prototype.te,"PSW"],N);
Ia(function(){for(var a=F(document,"pdp11","device"),b=0;b<a.length;b++){var c,d=a[b];c=D(d);switch(c.type){case "default":c=new L(c);E(c,d);break;case "pc11":c=new bc(c);E(c,d);break;case "rl11":c=new O(c);E(c,d);break;case "rk11":c=new P(c),E(c,d)}}});var cc;if(Za){var dc=new ArrayBuffer(2);(new DataView(dc)).setUint16(0,256,!0);cc=256===(new Uint16Array(dc))[0]}else cc=!1;var ec=cc;
function I(a,b,c,d,e,f){this.h=a;this.id=fc+=2;this.a=null;this.Na=b;this.ub=c;this.size=d||0;this.type=e||gc;this.l=e==hc;this.controller=null;Fb(this);this.wa=this.Nc=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.a=a[0],ic(this,f.Hc);else if(Za)this.b=new ArrayBuffer(this.size),this.c=new DataView(this.b,0,this.size),this.j=new Uint8Array(this.b,0,this.size),this.v=new Uint16Array(this.b,0,this.size>>1),this.a=new Int32Array(this.b,0,this.size>>2),ic(this,ec?jc:kc);else{a=this.a=Array(this.size>>
2);for(f=0;f<a.length;f++)a[f]=0;ic(this,mc)}else ic(this)}var gc=0,Pb=1,hc=2,Hb=4,Lb=["NONE","RAM","ROM","VID","H/W"],fc=0;
I.prototype={constructor:I,parent:null,save:function(){var a,b;if(this.controller)a=null;else if(Za)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.c.getInt32(b<<2,!0);else a=this.a;return a},restore:function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(Za)for(b=0;b<a.length;b++)this.c.setInt32(b<<2,a[b],!0);else this.a=a;return this.wa=!0}return!1},A:function(a,b){J(this.h,b,32);return 255},f:function(a,b,c){J(this.h,c,32)},C:function(a,b){return this.Tb(a++,b++)|
this.Tb(a,b)<<8},H:function(a,b,c){this.$b(a++,b&255,c++);this.$b(a,b>>8,c)},fa:function(a){return this.a[a>>2]>>>((a&3)<<3)&255},sa:function(a,b){a&1&&J(this.h,b,64);b=a>>2;a=(a&3)<<3;var c=this.a[b]>>a;return 24>a?c&65535:c&255|(this.a[b+1]&255)<<8},va:function(a,b){var c=a>>2;a=(a&3)<<3;this.a[c]=this.a[c]&~(255<<a)|b<<a;this.wa=!0},Fa:function(a,b,c){a&1&&J(this.h,c,64);c=a>>2;a=(a&3)<<3;24>a?this.a[c]=this.a[c]&~(65535<<a)|b<<a:(this.a[c]=this.a[c]&16777215|b<<24,c++,this.a[c]=this.a[c]&-256|
b>>8);this.wa=!0},S:function(a,b){return this.w(a,b)},Aa:function(a,b){return this.F(a,b)},na:function(a,b,c){this.l?this.f(a,b,c):this.s(a,b,c)},Da:function(a,b,c){this.l?this.f(a,b,c):this.I(a,b,c)},L:function(a){return this.j[a]},U:function(a){return this.j[a]},ga:function(a,b){a&1&&J(this.h,b,64);return this.c.getUint16(a,!0)},Ba:function(a,b){a&1&&J(this.h,b,64);return this.v[a>>1]},ma:function(a,b){this.j[a]=b;this.wa=!0},ua:function(a,b){this.j[a]=b;this.wa=!0},Ca:function(a,b,c){a&1&&J(this.h,
c,64);this.c.setUint16(a,b,!0);this.wa=!0},Ea:function(a,b,c){a&1&&J(this.h,c,64);this.v[a>>1]=b;this.wa=!0}};function Fb(a,b,c){a.D=b;a.i=a.o=0;c&&((a.i=c.i)&&nc(a,oc,!1),(a.o=c.o)&&pc(a,oc,!1))}function pc(a,b,c){c&&a.o||(a.$b=!a.l&&b[1]||a.f,a.Jb=!a.l&&b[3]||a.H);if(c||void 0===c)a.s=b[1]||a.f,a.I=b[3]||a.H}function nc(a,b,c){c&&a.i||(a.Tb=b[0]||a.A,a.aa=b[2]||a.C);if(c||void 0===c)a.w=b[0]||a.A,a.F=b[2]||a.C}function ic(a,b){b||(b=qc);nc(a,b,void 0);pc(a,b,void 0)}
var qc=[],mc=[I.prototype.fa,I.prototype.va,I.prototype.sa,I.prototype.Fa],oc=[I.prototype.S,I.prototype.na,I.prototype.Aa,I.prototype.Da];if(Za)var kc=[I.prototype.L,I.prototype.ma,I.prototype.ga,I.prototype.Ca],jc=[I.prototype.U,I.prototype.ua,I.prototype.Ba,I.prototype.Ea];
function rc(a,b){z.call(this,"CPU",a,rc,1);b=a.cycles||b;var c=a.multiplier||1;this.Kb=0;this.yb=b;this.na=c;this.Pb=Math.round(this.yb/1E4)/100;this.Fa=this.Pb*this.na;this.m.O=!1;this.m.Xb=!1;this.m.Ha=a.autoStart;this.m.Db=!1;this.wb=this.Ua=0;this.xb=a.csStart;this.jb=a.csInterval;this.kb=a.csStop;this.L=[];this.qc=this.de.bind(this);G(this)}B(rc);var sc=["power","reset"];h=rc.prototype;
h.ia=function(a,b,c,d){this.l=a;this.h=b;this.D=d;this.v=a.v;for(a=0;a<sc.length;a++)(b=this.j[sc[a]])&&this.l.ba(null,sc[a],b);this.cc();G(this)};h.cc=function(){};h.bc=function(){};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.ka=function(a,b){var c=tc(this.l,"autoStart");null!=c?this.m.Ha="true"==c?!0:"false"==c?!1:!!c:null==this.m.Ha&&(this.m.Ha=void 0===this.j.run);if(!b){this.bc();if(a&&this.restore){uc(this);if(!this.restore(a))return!1;vc(this)}else this.reset();this.V("No debugger detected");this.m.Ha||this.V("CPU will not be auto-started, click Run to start")}return!0};h.ja=function(a){return a?this.save():!0};h.Ha=function(){return this.m.O?!0:this.m.Ha?(pb(this),!0):!1};h.lc=function(){return 0};
function vc(a){void 0===a.xb&&(a.xb=0);void 0===a.jb&&(a.jb=-1);void 0===a.kb&&(a.kb=-1);a.m.Db=0<=a.xb&&0<a.jb;a.m.Db&&(a.wb=0,a.Ua=a.xb-a.ua)}function sb(a,b){if(a.m.Db){var c=!1;a.wb=a.wb+a.lc()|0;a.Ua-=b;0>=a.Ua&&(a.Ua+=a.jb,c=!0);0<=a.kb&&a.kb<=wc(a)&&(a.jb=a.kb=-1,vc(a),H(a),c=!0);c&&a.V(wc(a)+" cycles: checksum="+r(a.wb))}}
h.ba=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.j[b]=c,!0;case "run":return this.j[b]=c,c.onclick=function(){var a;if(a=d.l)if(a=d.l,a.m.R)a=!0;else{var b=null,c,k=C(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.m.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.m.R);c++);c==k.length&&(b=a);x("The "+b.type+" component ("+b.id+") is not "+(b.m.ready?"powered yet":"ready yet"+(b.Fb?" (waiting for notification)":""))+".");a=!1}a&&(d.m.O?H(d):pb(d))},!0;case "speed":return this.j[b]=
c,!0;case "setSpeed":return this.j[b]=c,c.onclick=function(){xc(d,d.na<<1,!0)},c.textContent=this.Fa.toFixed(2)+"Mhz",!0}return!1};h.za=function(a){this.l&&this.l.za(a)};function rb(a,b,c){a.ua+=b;c&&(a.ma=a.a=a.I=0)}function yc(a,b){var c=1;b&&1<a.na&&a.Ea&&(c=a.Ea/a.Pb);a.nc=Math.round(1E3/30);a.zb=Math.floor(a.yb/30*c);b||(a.lb=a.zb);a.Qb=0}function wc(a){return a.ua+a.ga+a.ma-a.a}function uc(a){a.Ea=0;a.pc=0;a.ua=a.ga=a.ma=a.a=a.I=0;vc(a);xc(a,1)}
function xc(a,b,c){if(void 0!==b){.8>a.Ea/a.Fa&&(b=1);a.na=b;b=a.Pb*a.na;if(a.Fa!=b){a.Fa=b;b=a.Fa.toFixed(2)+"Mhz";var d=a.j.setSpeed;d&&(d.textContent=b);a.V("target speed: "+b)}c&&a.l&&zc(a.l)}rb(a,a.ga);a.ga=0;a.fa=qa();a.sa=0;yc(a)}function Sb(a,b){var c=a.L.length;a.L.push([-1,b]);return c}function Tb(a,b,c,d){0<=b&&b<a.L.length&&(d||0>a.L[b][0])&&(c=a.yb*a.na/1E3*c|0,a.m.O&&(c+=Ac(a)),a.L[b][0]=c)}
function qb(a,b){for(var c=a.L.length-1;0<=c;c--){var d=a.L[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Ac(a,b){var c=a.ma-=a.a;a.a=a.I=0;b&&(a.ma=0);return c}
h.de=function(){if(this.m.O){this.Qb>=this.yb&&yc(this,!0);this.mb=0;this.vb=qa();if(this.sa){var a=this.vb-this.sa;a>this.nc&&(this.fa+=a,this.fa>this.vb&&(this.fa=this.vb))}try{do{for(var b,c=this.m.Db?1:this.zb,d=this.L.length-1;0<=d;d--){var e=this.L[d];0>e[0]||c>e[0]&&(c=e[0])}b=c;try{this.Ib(b)}catch(f){if("number"!=typeof f)throw f;}b=Ac(this,!0);this.mb+=b;this.ga+=b;sb(this,b);qb(this,b);this.lb-=b;if(0>=this.lb){this.lb+=this.zb;15<=++this.pc&&(this.za(),this.pc=0);break}}while(this.m.O)}catch(f){H(this);
this.l&&this.l.stop(qa(),wc(this));Ya(this,f.stack||f.message);return}if(this.m.O){a=setTimeout;b=this.qc;this.sa=qa();c=this.nc;this.mb&&(c=Math.round(c*this.mb/this.zb));c-=this.sa-this.vb;if(d=this.sa-this.fa)this.Ea=Math.round(this.ga/(10*d))/100,864E5<=d&&(this.ua=0,xc(this));if(0>c||this.Ea<this.Fa)-1E3>c&&(this.fa-=c),c=0;this.Qb+=this.mb;this.sa+=c;a(b,c)}}};
function pb(a){var b;a.m.error?(a.V(a.toString()+" error"),b=!0):b=!1;if(!b)if(a.m.O)a.V(a.toString()+" busy");else{xc(a);a.m.O=!0;a.m.Xb=!0;if(b=a.j.run)b.textContent="Halt";a.l&&a.l.start(a.fa,wc(a));a.D||a.status("Started");setTimeout(a.qc,0)}}h.Ib=function(){return 0};function H(a){var b=!1;if(a.m.O){Ac(a);rb(a,a.ga);a.ga=0;a.m.O=!1;if(b=a.j.run)b.textContent="Run";a.l&&a.l.stop(qa(),wc(a));b=!0;a.D||a.status("Stopped")}a.m.complete=void 0;return b}
function Bc(a){this.Ja=+a.model||1170;this.ic=a.addrReset||0;rc.call(this,a,6666667);this.Ab=0;this.mc=255;1120>=this.Ja?(this.decode=Cc.bind(this),this.Da=this.Lc,this.Ab=8,this.mc=-1,this.sc=255,this.rc=0):(this.decode=Dc.bind(this),this.Da=this.Mc,this.sc=~(1792|(1145>this.Ja?2048:0))&65535,this.rc=1145<=this.Ja?2048:0);Ec(this);this.Va=0;this.H=null;this.Lb=[];this.m.complete=!1}B(Bc,rc);h=Bc.prototype;
h.cc=function(){this.kc=this.h.ob.bind(this.h);this.pb=this.h.Ia.bind(this.h);this.sb=this.h.Hb.bind(this.h);this.tb=this.h.La.bind(this.h)};h.bc=function(){for(var a=192,b=0;b<this.Lb.length;b++){var c=this.Lb[b];0>c.Zb&&(c.Zb=a,a+=4)}};h.reset=function(){this.status("Model "+this.Ja);this.m.O&&H(this);Ec(this);uc(this);this.m.error=!1;this.parent.reset.call(this)};
function Ec(a){a.o=65536;a.f=32768;a.i=65535;a.s=32768;a.G=15;a.g=[0,0,0,0,0,0,0,a.ic,-1,-2,-3,-4,-5,-6,-7,-8];a.Ka=[0,0,0,0,0,0];a.qa=[0,0,0,0];a.w=0;a.Tc=[4,2,0,1];a.J=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Z=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0]];a.eb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.Vb=[0,0,0,0,0,0,0,0];a.Ub=0;a.u=0;a.C=a.F=0;a.c=a.b=a.Nb=0;a.va=-1;ob(a)}function ob(a){a.Y=0;a.Bb=0;a.Cb=0;a.ya=0;a.X=0;a.rb=0;a.cb=255;a.Sa=0;a.hb=0;a.ib=0;a.Ta=262143;a.Wa=0;a.A=0;a.H=null;a.h&&(Zb(a),a.Rc=Ob(a.h))}
function Zb(a){a.ob=a.kc;a.Ia=a.pb;a.Hb=a.sb;a.La=a.tb;a.Sa?(a.U=65536,a.Ca=a.ya&16?4186112:253952,a.S=a.Pc,a.aa=a.$d,a.Jb=a.Ze,Jb(a.h,a.ya&16?22:18)):(a.U=0,a.Ca=57344,a.S=a.Oc,a.aa=a.Zd,a.Jb=a.Ye,Jb(a.h,16))}function Yb(a,b){b&=-3073;if(a.Y!=b){b&57344&&!(a.Y&57344)&&(a.Bb=a.A>>16&65535,a.Cb=a.A&65535);a.Y=b;a.hb=(b&96)>>5;a.ib=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.Sa!=c&&(a.Sa=c,Zb(a))}}
function Fc(a,b,c){a.ic=b;a.h.reset();ob(a);Q(a,b);ac(a,0);if(c){for(b=2;5>=b;b++)a.g[b]=0;a.m.O||pb(a)}else a.D?H(a)||a.D.b():!1===c&&H(a);!a.m.O&&a.v&&a.v.stop()}h.lc=function(){return 0};h.save=function(){var a=new R(this);a.set(0,[this.g,this.Ka,this.qa,this.eb,this.Vb,this.X,this.Ub,this.rb,this.cb,$b(this),this.va,this.w,this.u,this.Y,this.Bb,this.Cb,this.ya,this.hb,this.ib,this.J,this.Z,this.Sa,this.Ta,this.Wa,this.A]);a.set(1,[this.ua,this.na]);a.set(2,Nb(this.h));return a.data()};
h.restore=function(a){var b=a[1];this.ua=b[1];xc(this,b[3]);a:{b=this.h;a=a[2];var c;for(c=0;c<a.length-1;c+=2){var d=a[c],e=a[c+1];if(e&&e.length<b.I){for(var f=0,g=Array(b.I),k=0;k<e.length-1;)for(var l=e[k++],m=e[k++];l--;)g[f++]=m;e=g}f=b.h[d];if(!f||!f.restore(e)){x("Unable to restore memory block "+d);b=!1;break a}}b=!0}return b};function S(a){return a.o&65536?1:0}function Gc(a){return a.s&32768?8:0}function Hc(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function Q(a,b){a.g[7]=b&65535}
function Vb(a,b,c,d){c={Zb:b,$a:c,message:d||0,next:null};c.name=$a[b];a.Lb.push(c);return c}function Xb(a,b){var c=a.H;if(c==b)a.H=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.H&&(a.u|=1)}function M(a,b){if(b!=a.H){var c=a.H;if(!c||c.$a<=b.$a)b.next=c,a.H=b;else{do{var d=c.next;if(!d||d.$a<=b.$a){b.next=d;c.next=b;break}c=d}while(c)}}a.u|=1}function Ic(a){return a.u&64?(K(a,168,64,-6),!0):a.u&32?(K(a,4,32,-5),!0):a.u&16?(K(a,12,16,-7),!0):!1}
function $b(a){return a.G=a.G&63728|Gc(a)|(a.i&65535?0:4)|(a.f&32768?2:0)|S(a)}function ac(a,b){b&=a.sc;a.s=b<<12;a.i=~b&4;a.f=b<<14;a.o=b<<16;if((b^a.G)&a.rc)for(var c=a.Ka.length;0<=--c;){var d=a.g[c];a.g[c]=a.Ka[c];a.Ka[c]=d}a.w=b>>14&3;c=a.G>>14&3;a.w!=c&&(a.qa[c]=a.g[6],a.g[6]=a.qa[a.w]);a.G=b;a.u&=-3;a.u|=a.H?2:1}h.ca=function(a){this.s=this.i=a;this.f=0};h.Ma=function(a,b){this.s=this.i=this.o=a;this.f=b||0};function Jc(a,b){a.s=a.i=a.o=b;a.f=a.s^a.o>>1}
function Kc(a,b,c,d){a.s=a.i=a.o=b;a.f=(c^d)&(d^b)}function K(a,b,c,d){if(!a.Va){0>a.va?a.va=$b(a):a.w||(d=-4);-4==d&&(a.u&256&&(d=-1),a.u|=256,a.X|=4,a.g[6]=b=4);if(-1!=d){a.A=b|4143316992;a.w=0;var e=a.aa(b|a.U),f=a.aa(b+2&65535|a.U);ac(a,f&-12289|a.va>>2&12288);Lc(a,a.va);Lc(a,a.g[7]);Q(a,e)}a.a-=5;a.u&=~(c|19);a.u|=129;a.va=-1;-1==d&&H(a);if(-4<=d)throw b;}}function Mc(a){var b=Nc(a),c=Nc(a);a.G&49152&&(c=c&-225|a.G&63712);Q(a,b);ac(a,c);a.u&=-17}
function Oc(a,b){var c=b>>13&31;31>c&&(b=a.ya&32?a.eb[c]+(b&8191)&4194303:b&-3932161);return b}
function vb(a,b,c){var d,e,f;if(!(c&a.Sa))return f=b&65535,57344<=f&&(f|=a.Ca),f;d=b>>13;a.ya&a.Tc[a.w]||(d&=7);e=a.J[a.w][d];f=(a.Z[a.w][d]<<6)+(b&8191)&a.Ta;3932160<=f&&(f=Oc(a,f));if(a.Va)return f;f>=a.Rc&&f<a.Ca?(a.X|=32,K(a,4,0,f)):f&1&&!(c&1)&&(a.X|=64,K(a,4,0,f));var g=0;switch(e&7){case 1:g=4096;case 2:e|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:e|=c&4?192:128;break;default:g=32768}32512!=(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(g|=16384):(b&8128)>(e>>2&8128)&&
(g|=16384));a.J[a.w][d]=e;if(f!=(4194170&a.Ta)||a.w)a.hb=a.w,a.ib=d;g&&(g&57344&&(0<=a.va&&(g|=128),a.Y&57344||(g|=a.Y&4096|a.hb<<5|a.ib<<1,Yb(a,a.Y&-61695|g&61694)),K(a,168,64,-2)),a.Y&61440||!(f<(4191360&a.Ta)||f>(4194239&a.Ta))||(a.Y|=4096,a.Y&512&&(a.u|=64)));return f}function Nc(a){var b=a.aa(a.g[6]|a.U);a.g[6]=a.g[6]+2&65535;return b}function Lc(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.A=a.A&65535|(a.A&-65536)<<8|16121856;a.u&256||a.Da(4,-2,c);a.Jb(c,b)}
function Pc(a,b,c,d){var e,f,g=d&8?0:a.U;switch(b){case 0:return K(a,4,0,-3),0;case 1:return 6==c&&a.Da(d,0,a.g[6]),a.a-=3,7==c?a.g[c]:a.g[c]|g;case 2:f=2;e=a.g[c];6==c&&a.Da(d,f,e);7!=c&&(e|=g,6>c&&d&1&&(f=1));a.a-=3;break;case 3:f=2;e=a.g[c];7!=c&&(e|=g);e=a.aa(e);e|=g;a.a-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.g[c]+f&65535;6==c&&a.Da(d,f,e);7!=c&&(e|=g);a.a-=4;break;case 5:f=-2;e=a.g[c]-2&65535;7!=c&&(e|=g);e=a.aa(e)|g;a.a-=8;break;case 6:return e=a.aa(Hc(a,2)),e=e+a.g[c]&65535,6==c&&a.Da(d,
0,e),a.a-=6,e|g;case 7:return e=a.aa(Hc(a,2)),e=e+a.g[c]&65535,e=a.aa(e|a.U),a.a-=10,e|g}a.g[c]=a.g[c]+f&65535;a.A=a.A&65535|(a.A&-65536)<<8|(f<<3&248|c)<<16;return e}h.Lc=function(a,b,c){!this.w&&0>=b&&c<=this.cb&&(this.u|=32)};h.Mc=function(a,b,c){this.w||(65534<=c&&(c|=-65536),a&4&&c<=this.cb&&(c<=this.cb-32?K(this,4,0,-4):(this.X|=8,this.u|=32)))};h.Oc=function(a,b,c){return Pc(this,a,b,c)};h.Pc=function(a,b,c){return vb(this,Pc(this,a,b,c),c)};h.Zd=function(a){return this.h.Ia(this.Wa=a)};
h.$d=function(a){return this.h.Ia(this.Wa=vb(this,a,2))};h.Ye=function(a,b){this.h.La(this.Wa=a,b)};h.Ze=function(a,b){this.h.La(this.Wa=vb(this,a,4),b)};function Qc(a,b,c){var d=a.b=b&7;(b=a.c=(b&56)>>3)?(d=Pc(a,b,d,2),c&65536||61440!==(a.G&61440)&&(d&=65535),a.w=a.G>>12&3,c=a.aa(d|c&a.U),a.w=a.G>>14&3):c=6!=d||(a.G>>2&12288)===(a.G&12288)?a.g[d]:a.qa[a.G>>12&3];return c}
function Rc(a,b,c,d){a.A=a.A&65535|1441792;var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=Pc(a,b,e,4),c&65536||(e&=65535),a.w=a.G>>12&3,e=vb(a,e|c&65536,4),a.w=a.G>>14&3,a.La(e,d)):6!=e||(a.G>>2&12288)===(a.G&12288)?a.g[e]=d:a.qa[a.G>>12&3]=d}function Sc(a,b){var c;b>>=6;var d=a.F=b&7;(b=a.C=(b&56)>>3)?c=a.ob(a.S(b,d,3)):c=a.g[d+a.Ab]&a.mc;return c}function Tc(a,b){b>>=6;var c=a.F=b&7;return(b=a.C=(b&56)>>3)?a.Ia(a.S(b,c,2)):a.g[c+a.Ab]}function Uc(a,b){var c=a.b=b&7;b=a.c=(b&56)>>3;return Pc(a,b,c,8)}
function Vc(a,b){var c,d=a.b=b&7;(b=a.c=(b&56)>>3)?c=a.ob(a.S(b,d,3)):c=a.g[d]&255;return c}function Wc(a,b){var c=a.b=b&7;return(b=a.c=(b&56)>>3)?a.Ia(a.S(b,c,2)):a.g[c]}function T(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=a.Nb=a.S(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Hb(e,d.call(a,c,a.ob(e))),e&1&&a.a--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function U(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=a.S(b,e,6),a.La(e,d.call(a,0>c?a.g[-c-1]:c,a.Ia(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function Xc(a,b,c,d,e){var f=a.b=b&7;(b=a.c=(b&56)>>3)?(d=a.S(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Hb(d,c),d&1&&a.a--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function Yc(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=a.S(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.La(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}function V(a,b,c){c&&(Q(a,a.g[7]+(b<<24>>23)),a.a-=2);a.a-=3}
h.Ib=function(a){this.m.complete=!0;var b=a?this.m.Xb?0:1:-1;this.m.Xb=!1;this.ma=this.a=a;this.u=this.u&-5|0;do{if(this.u){if(a=this.u&11)if(a=!1,this.u&2){var c=160,d=(this.rb&224)>>5,e=this.H&&this.H.$a>d?this.H:null;e&&(c=e.Zb,d=e.$a);d>(this.G&224)>>5?(this.u&8&&(Hc(this,2),this.u&=-9),K(this,c,0,-10),d=!0):d=!1;d&&(e&&Xb(this,e),a=!0);this.H||this.rb||(this.u&=-3)}else this.u&1&&this.u++;if(a){if(this.u&4&&this.D.h(this.g[7],b)){H(this);break}if(0>b)break}if(this.u&112&&Ic(this)){if(this.u&
4&&this.D.h(this.g[7],b)){H(this);break}if(0>b)break}}this.u=this.u&15|this.G&16;a=this.A=this.g[7];e=this.aa(a);this.g[7]=a+2&65535;this.decode(e)}while(0<this.a);return this.m.complete?this.ma-this.a:void 0===this.m.complete?0:-1};Ia(function(){for(var a=F(document,"pdp11","cpu"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Bc(d);E(d,c)}});function Zc(a,b){var c=b+a;this.s=this.i=this.o=c;this.f=(a^c)&(b^c);return c&65535}
function $c(a,b){var c=b+a,d=c<<8;this.s=this.i=this.o=d;this.f=(a<<8^d)&(b<<8^d);return c&255}function ad(a,b){a=b<<1;Jc(this,a);return a&65535}function bd(a,b){a=b<<1;Jc(this,a<<8);return a&255}function cd(a,b){a=b&32768|b>>1|b<<16;Jc(this,a);return a&65535}function dd(a,b){a=b&128|b>>1|b<<8;Jc(this,a<<8);return a&255}function ed(a,b){a=b&~a;this.ca(a);return a}function fd(a,b){a=b&~a;this.ca(a<<8);return a}function gd(a,b){a|=b;this.ca(a);return a}function hd(a,b){a|=b;this.ca(a<<8);return a}
function id(a,b){a=~b|65536;this.Ma(a);return a&65535}function jd(a,b){a=~b|256;this.Ma(a<<8);return a&255}function kd(a,b){this.s=this.i=a=b-a;this.f=b&(b^a);return a&65535}function ld(a,b){a=b-a;var c=a<<8;b<<=8;this.s=this.i=c;this.f=b&(b^c);return a&255}function md(a,b){this.s=this.i=a=b+a;this.f=a&(b^a);return a&65535}function nd(a,b){a=b+a;var c=a<<8;this.s=this.i=c;this.f=c&(b<<8^c);return a&255}function od(a,b){a=-b;this.Ma(a,a&b&32768);return a&65535}
function pd(a,b){a=-b;this.Ma(a<<8,(a&b&128)<<8);return a&255}function qd(a,b){a=b<<1|this.o>>16&1;Jc(this,a);return a&65535}function rd(a,b){a=b<<1|this.o>>16&1;Jc(this,a<<8);return a&255}function sd(a,b){a=(this.o&65536|b)>>1|b<<16;Jc(this,a);return a&65535}function td(a,b){a=((this.o&65536)>>8|b)>>1|b<<8;Jc(this,a<<8);return a&255}function ud(a,b){var c=b-a;Kc(this,c,a,b);return c&65535}function vd(a,b){var c=b-a;Kc(this,c<<8,a<<8,b<<8);return c&255}
function wd(a,b){this.s=this.i=b&65280;this.f=this.o=0;return(b<<8|b>>8)&65535}function xd(a,b){a^=b;this.ca(a);return a&65535}function yd(a){U(this,a,Tc(this,a),Zc);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}
function zd(a){var b=Wc(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.o=this.f=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.o=c<<17-b,c>>=b;else if(b)if(16<b)this.f=c,c=0;else{this.o=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.f=32768)}this.g[a]=c&65535;this.s=this.i=c;this.a-=(this.c?6:7)+b}
function Ad(a){var b=Wc(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.o=this.f=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.o=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.o=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.f=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.s=d>>16;this.i=d>>16|d;this.a-=(this.c?6:7)+b}function Bd(a){V(this,a,!S(this))}function Cd(a){V(this,a,S(this))}
function Dd(a){U(this,a,Tc(this,a),ed);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}function Ed(a){T(this,a,Sc(this,a),fd);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}function Fd(a){U(this,a,Tc(this,a),gd);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}function Gd(a){T(this,a,Sc(this,a),hd);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}
function Hd(a){var b=Tc(this,a);a=Wc(this,a);this.ca((0>b?this.g[-b-1]:b)&a);this.a-=this.c?4+(this.F&&6<=this.b?1:0):(this.C?4:3)+(7==this.b?2:0)}function Id(a){var b=Sc(this,a);a=Vc(this,a);this.ca(((0>b?this.g[-b-1]&255:b)&a)<<8);this.a-=this.c?4+(this.F&&6<=this.b?1:0):(this.C?4:3)+(7==this.b?2:0)}function Jd(a){V(this,a,this.i&65535?0:4)}function Kd(a){V(this,a,!Gc(this)==!(this.f&32768))}function Ld(a){V(this,a,!!(this.i&65535)&&!Gc(this)==!(this.f&32768))}
function Md(a){V(this,a,!S(this)&&!!(this.i&65535))}function Nd(a){V(this,a,(this.i&65535?0:4)||!Gc(this)!=!(this.f&32768))}function Od(a){V(this,a,S(this)||(this.i&65535?0:4))}function Pd(a){V(this,a,!Gc(this)!=!(this.f&32768))}function Qd(a){V(this,a,Gc(this))}function Rd(a){V(this,a,!!(this.i&65535))}function Sd(a){V(this,a,!Gc(this))}function Td(){K(this,12,0,-9)}function Ud(a){V(this,a,!0)}function Vd(a){V(this,a,!(this.f&32768))}function Wd(a){V(this,a,this.f&32768?2:0)}
function W(a){a&1&&(this.o=0);a&2&&(this.f=0);a&4&&(this.i=1);a&8&&(this.s=0);this.a-=5}function Xd(a){var b=Tc(this,a);a=Wc(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;Kc(this,c,a,b);this.a-=this.c?4+(this.F&&6<=this.b?1:0):(this.C?4:3)+(7==this.b?2:0)}function Yd(a){var b=Sc(this,a);a=Vc(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);Kc(this,c,a,b);this.a-=this.c?4+(this.F&&6<=this.b?1:0):(this.C?4:3)+(7==this.b?2:0)}
function Zd(a){var b=Wc(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.o=this.f=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.i=d>>16|d,this.s=d>>16):(this.f=32768,this.i=d>>15|d,this.s=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.a-=53}else this.i=this.s=0,this.f=32768,this.o=65536,this.a-=7}function $d(){K(this,24,0,-9);this.a-=20}
function ae(){this.G&49152?(this.X|=128,K(this,4,0,-8)):(this.v&&1120==this.Ja&&this.v.setData(this.g[0],!0),this.D?this.D.l():H(this));this.a-=7}function be(){K(this,16,0,-9);this.a-=20}var ce=[0,7,7,10,7,11,9,13];function de(a){this.I=this.a;Q(this,Uc(this,a));this.a=this.I-ce[this.c]}var ee=[0,14,14,17,14,18,16,20];function fe(a){this.I=this.a;var b=Uc(this,a);a=a>>6&7;Lc(this,this.g[a]);this.g[a]=this.g[7];Q(this,b);this.a=this.I-ee[this.c]}var ge=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];
function he(a){var b=Tc(this,a);this.I=this.a;Yc(this,a,b,this.ca);this.a=this.I-ge[(this.C?8:0)+this.c]+(7!=this.b||this.c?0:2)}function ie(a){var b=Sc(this,a);Xc(this,a,b,65535,this.ca);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}var je=[7,13,13,17,14,18,17,21];
function ke(a){var b=Wc(this,a);a=a>>6&7;b&32768&&(b|=-65536);var c=this.g[a];c&32768&&(c|=-65536);b=~~(b*c);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;this.s=b>>16;this.i=this.s|b;this.f=0;this.o=-32768>b||32767<b?65536:0;this.a-=23}function le(){this.a-=5}function me(){this.G&49152||(this.h.reset(),ob(this),this.v&&this.v.setData(this.g[0],!0));this.a-=667}function ne(a){if(a&8)K(this,8,0,-9);else{var b=Nc(this);a&=7;7==a?Q(this,b):(Q(this,this.g[a]),this.g[a]=b);this.a-=9}}
function oe(){Mc(this);this.a-=13}function X(a){a&1&&(this.o=65536);a&2&&(this.f=32768);a&4&&(this.i=0);a&8&&(this.s=32768);this.a-=5}function pe(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)Q(this,this.g[7]-((a&63)<<1)),this.a+=1;this.a-=6}function qe(a){U(this,a,Tc(this,a),ud);this.a-=this.c?9+(this.F&&6<=this.b?1:0):(this.C?5:3)+(7==this.b?2:0)}function re(a){U(this,a,0,wd);this.a-=this.c?9:3+(7==this.b?2:0)}function se(){K(this,28,0,-9)}
function te(){this.v&&(this.v.la=this.g[7],this.v.setData(this.g[0],!0));this.u|=8;Hc(this,-2);this.a-=3}function ue(a){U(this,a,this.g[(a>>6&7)+this.Ab],xd);this.a-=this.c?9:3+(7==this.b?2:0)}function Y(){K(this,8,0,-9)}function Cc(a){ve[a>>12].call(this,a)}function we(a){xe[a>>6&3].call(this,a)}function ye(a){ze[a>>6&3].call(this,a)}function Ae(a){Be[a>>6&3].call(this,a)}function Ce(a){De[a&15].call(this,a)}function Ee(a){Fe[a&15].call(this,a)}function Ge(a){He[a>>6&3].call(this,a)}
function Ie(a){Je[a>>6&3].call(this,a)}function Ke(a){Le[a>>6&3].call(this,a)}
var ve=[function(a){Me[a>>8&15].call(this,a)},he,Xd,Hd,Dd,Fd,yd,Y,function(a){Ne[a>>8&15].call(this,a)},ie,Yd,Id,Ed,Gd,qe,Y],Me=[function(a){Oe[a>>4&15].call(this,a)},Ud,Rd,Jd,Kd,Pd,Ld,Nd,fe,fe,we,ye,Ae,Y,Y,Y],xe=[function(a){Yc(this,a,0,this.Ma);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,0,id);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,1,md);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,1,kd);this.a-=this.c?9:3+(7==this.b?2:0)}],ze=[function(a){U(this,a,0,od);
this.a-=this.c?11:6},function(a){U(this,a,S(this)?1:0,Zc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,S(this)?1:0,ud);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){a=Wc(this,a);this.Ma(a);this.a-=this.c?4:3+(7==this.b?2:0)}],Be=[function(a){U(this,a,0,sd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,0,qd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,0,cd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){U(this,a,0,ad);this.a-=this.c?9:3+(7==this.b?2:0)}],Oe=[function(a){Pe[a&
15].call(this,a)},Y,Y,Y,de,de,de,de,ne,Y,Ce,Ee,re,re,re,re],Pe=[ae,te,oe,Td,be,me,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y],De=[le,function(){this.o=0;this.a-=5},function(){this.f=0;this.a-=5},W,function(){this.i=1;this.a-=5},W,W,W,function(){this.s=0;this.a-=5},W,W,W,W,W,W,W],Fe=[le,function(){this.o=65536;this.a-=5},function(){this.f=32768;this.a-=5},X,function(){this.i=0;this.a-=5},X,X,X,function(){this.s=32768;this.a-=5},X,X,X,X,X,X,X],Ne=[Sd,Qd,Md,Od,Vd,Wd,Bd,Cd,$d,se,Ge,Ie,Ke,Y,Y,Y],He=[function(a){Xc(this,a,0,
255,this.Ma);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){T(this,a,0,jd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){T(this,a,1,nd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){T(this,a,1,ld);this.a-=this.c?9:3+(7==this.b?2:0)}],Je=[function(a){T(this,a,0,pd);this.a-=this.c?11:6},function(a){T(this,a,S(this)?1:0,$c);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){T(this,a,S(this)?1:0,vd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){a=Vc(this,a);this.Ma(a<<8);this.a-=this.c?4:3+(7==this.b?
2:0)}],Le=[function(a){T(this,a,0,td);this.a-=this.c?9+(this.Nb&1):3+(7==this.b?2:0)},function(a){T(this,a,0,rd);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){T(this,a,0,dd);this.a-=this.c?9+(this.Nb&1):3+(7==this.b?2:0)},function(a){T(this,a,0,bd);this.a-=this.c?9:3+(7==this.b?2:0)}];function Dc(a){Qe[a>>12].call(this,a)}
var Qe=[function(a){Re[a>>8&15].call(this,a)},he,Xd,Hd,Dd,Fd,yd,function(a){Se[a>>8&15].call(this,a)},function(a){Te[a>>8&15].call(this,a)},ie,Yd,Id,Ed,Gd,qe,Y],Re=[function(a){Ue[a>>4&15].call(this,a)},Ud,Rd,Jd,Kd,Pd,Ld,Nd,fe,fe,we,ye,Ae,function(a){Ve[a>>6&3].call(this,a)},Y,Y],Ve=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.aa(a|this.U);Q(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.a-=8},function(a){a=Qc(this,a,0);this.ca(a);Lc(this,a);this.a-=11},function(a){var b=Nc(this);this.I=
this.a;this.ca(b);Rc(this,a,0,b);this.a=this.I-je[this.c]},function(a){Yc(this,a,Gc(this)?65535:0,this.ca);this.a-=this.c?9:3+(7==this.b?2:0)}],Ue=[function(a){We[a&15].call(this,a)},Y,Y,Y,de,de,de,de,ne,function(a){a&8?(this.G&49152||(this.G=this.G&-225|(a&7)<<5,this.u|=1,this.u&=-3),this.a-=5):K(this,8,0,-9)},Ce,Ee,re,re,re,re],We=[ae,te,function(){Mc(this);this.u|=this.G&16;this.a-=13},Td,be,me,oe,function(){K(this,8,0,-9)},Y,Y,Y,Y,Y,Y,Y,Y],Se=[ke,ke,Zd,Zd,zd,zd,Ad,Ad,ue,ue,Y,Y,Y,Y,pe,pe],Te=[Sd,
Qd,Md,Od,Vd,Wd,Bd,Cd,$d,se,Ge,Ie,Ke,function(a){Xe[a>>6&3].call(this,a)},Y,Y],Xe=[Y,function(a){a=Qc(this,a,65536);this.ca(a);Lc(this,a);this.a-=11},function(a){var b=Nc(this);this.I=this.a;this.ca(b);Rc(this,a,65536,b);this.a=this.I-je[this.c]},Y];
function Ye(a){z.call(this,"ROM",a,Ye,128);this.da=this.c=null;this.i=a.addr;this.b=a.size;this.o=!1;this.f=a.alias;this.l=a.file;this.s=u(this.l);if(this.l){a=this.l;var b=ka(this.s);"json"!=b&&"hex"!=b&&(a=ta()+"/api/v1/dump?file="+this.l+"&format=bytes&decimal=true");var c=this;w(a,null,!0,function(a,b,f){f?(c.B("Unable to load ROM resource (error "+f+": "+a+")"),c.l=null):(Ta(c.Ba,a,b),(a=sa(a,b))?(c.c=a.M,c.da=a.da):c.l=null);Ze(c)})}}B(Ye);h=Ye.prototype;
h.ia=function(a,b,c,d){this.h=b;this.a=c;this.D=d;Ze(this)};h.ka=function(){this.da&&(this.D&&this.D.a(this.id,this.i,this.b,this.da),delete this.da);return!0};h.ja=function(){return!0};
function Ze(a){if(!Xa(a)){if(a.l){if(!a.c||!a.h)return;a.b||(a.b=a.c.length);if(a.c.length!=a.b)Ya(a,"ROM size ("+r(a.c.length,8,!0)+") does not match specified size ("+r(a.b,8,!0)+")");else{var b;a:{b=a.i;a.status(a.b+"-byte ROM at "+ja(b));if(57344<=b&&b<57344+Ab){var c={};b=(c[b]=[Ye.prototype.Nd,Ye.prototype.Me,null,null,null,a.b>>1],c);if(fb(a.h,a,b)){b=a.o=!0;break a}}else if(Gb(a.h,b,a.b,hc)){for(c=0;c<a.c.length;c++)a.h.sb(b+c,a.c[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.f?b.push(a.f):
null!=a.f&&a.f.length&&(b=a.f);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.h,g=d.b,k=[],l=d.i>>>f.c;0<g&&l<f.h.length;)k.push(f.h[l++]),g-=f.b;f=d.h;d=d.b;g=0;for(e>>>=f.c;0<d&&e<f.h.length;){l=k[g++];if(!l)break;f.h[e++]=l;d-=f.b}}a.o||delete a.c}}}G(a)}}h.Nd=function(a){return this.c[a-this.i]};h.Me=function(){};Ia(function(){for(var a=F(document,"pdp11","rom"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Ye(d);E(d,c)}});
function $e(a){z.call(this,"RAM",a,$e);this.da=this.c=null;this.l=a.addr;this.f=a.size;this.pa=a.load;this.oa=a.exec;this.i=!1;this.b=a.file;this.o=u(this.b);if(this.b){a=this.b;var b=ka(this.o);"json"!=b&&"hex"!=b&&(a=ta()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;w(a,null,!0,function(a,b,f){f?(c.B("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(Ta(c.Ba,a,b),(a=sa(a,b))?(c.c=a.M,c.da=a.da,null==c.pa&&(c.pa=a.pa),null==c.oa&&(c.oa=a.oa)):c.b=null);af(c)})}}
B($e);$e.prototype.ia=function(a,b,c,d){this.h=b;this.a=c;this.D=d;af(this)};$e.prototype.ka=function(){this.da&&(this.D&&this.D.a(this.id,this.l,this.f,this.da),delete this.da);return!0};$e.prototype.ja=function(){return!0};function af(a){if(a.h&&(!a.i&&a.f&&(Gb(a.h,a.l,a.f,Pb)?a.i=!0:a.f=0),!Xa(a))){if(!a.i)x("No RAM allocated");else if(a.b){if(!a.c||!a.h)return;bf(a,a.c,a.pa,a.oa,a.l)}G(a)}}
$e.prototype.reset=function(){if(this.i){for(var a=this.h,b=this.l,c=this.f,d=b&a.l,b=b>>>a.c;0<c&&b<a.h.length;){var e=a.h[b],f=c,g=0,k,d=d||0,g=g&255;void 0===f&&(f=e.size);if(Za&&e.j)for(k=d;f--&&k<e.j.length;k++)e.j[k]=g;else for(k=d;f--&&k<e.size;k++)e.s(d,g,e.Na+d);c-=a.b;b++;d=0}this.c&&bf(this,this.c,this.pa,this.oa,this.l,!0)}};
function bf(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){if(1!=m)break;if(l+6>=b.length)break;for(var l=l+2,p=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8,m=m+((p&255)+(p>>8)+(t&255)+(t>>8)),v=l,y=p-=6;0<p&&l<b.length;)m+=b[l++]&255,p--;if(p||l>=b.length)break;m+=b[l++]&255;if(m&255)break;if(y)for(;y--;)a.h.sb(t++,b[v++]&255);else t&1?g=!0:null==d&&(d=t);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<
b.length;e++)a.h.sb(c+e,b[e]);k=!0}if(k){if(null==d||g)H(a.a),f=!1;null!=d&&Fc(a.a,d,f)}return k}Ia(function(){for(var a=F(document,"pdp11","ram"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new $e(d);E(d,c)}});function cf(a){z.call(this,"Keyboard",a,cf,1024);G(this)}B(cf);cf.prototype.ba=function(){return!1};cf.prototype.ia=function(a,b,c,d){this.l=a;this.a=c;this.D=d};Ia(function(){for(var a=F(document,"pdp11","keyboard"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new cf(d);E(d,c)}});
function Z(a){this.A=a.adapter;this.L=a.baudReceive||9600;this.ma=a.baudTransmit||9600;this.sa=a.upperCase;this.f=this.o=null;this.fa=a.tabSize;this.S=a.charBOL;this.s=0;this.w=!0;z.call(this,"SerialPort",a,Z,262144);var b=a.binding;if("console"==b)this.o="";else{var c;a=df;b&&(void 0===c&&(c="Panel"),(c=Va(c,this.id))&&(b=c.j[b])&&this.ba(null,a,b))}this.i=this.F=this.H=null;this.exports={connect:this.oc,receiveData:this.Gb,receiveStatus:this.ce}}B(Z);var df="buffer";h=Z.prototype;
h.ba=function(a,b,c){var d=this;switch(b){case df:return this.j[b]=this.f=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?n.dc:n.zc:46==c?b=n.dc:a.ctrlKey&&c>=n.ac&&c<=n.Gc&&(b=c-(n.ac-n.wc));b&&(a.preventDefault&&a.preventDefault(),d.Gb(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==n.yc&&(b=n.xc);d.Gb(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Gb(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};
h.ia=function(a,b,c,d){this.l=a;this.h=b;this.a=c;this.D=d;var e=this;this.U=Vb(this.a,this.A?-1:48,4,262144);this.ga=Sb(this.a,function(){var a;a=-1;e.v.length&&(a=e.v.shift()&255,e.sa&&97<=a&&122>a&&(a-=32),Tb(e.a,e.ga,1E3/Math.round(e.L/10)));0<=a&&(e.C=a,e.b&128?e.C|=49152:e.b|=128,e.b&64&&M(c,e.U))});this.I=Vb(this.a,this.A?-1:52,4,262144);this.na=Sb(this.a,function(){e.c|=128;e.c&64&&M(c,e.I)});fb(b,this,ef,this.A?64832+8*(this.A-1)-65392:0);hb(b,this.reset.bind(this));G(this)};
h.oc=function(a){if(!this.i){var b=tc(this.l,"connection");if(b){var c=b.split("->");if(2==c.length){var d=oa(c[0]);if(d!=this.Aa)return;c=oa(c[1]);if(this.i=Ua(c)){var e=this.i.exports;if(e){var f=e.connect;f&&f.call(this.i,this.w);if(this.F=e.receiveData){this.w=a;this.H=e.receiveStatus;this.status(this.Ba+"."+d+" connected to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.ka=function(a,b){if(!b)if(this.oc(this.w),!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.ja=function(a){return a?this.save():!0};h.reset=function(){ff(this)};h.save=function(){var a=new R(this);a.set(0,[]);return a.data()};h.restore=function(){return ff(this)};function ff(a){a.C=0;a.b=8192;a.c=128;a.v=[];return!0}
h.Gb=function(a){if("number"==typeof a)this.v.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.v.push(b)}else this.v=this.v.concat(a);Tb(this.a,this.ga,1E3/Math.round(this.L/10));return!0};h.ce=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&M(this.a,this.U))};h.Ad=function(){var a=this.b&65534;this.b&=-32769;return a};
h.ze=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.H&&b&6&&(b=0,b=this.w?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.H.call(this.i,b))};h.zd=function(){this.b&=-129;return this.C};h.ye=function(){};h.be=function(){return this.c};h.af=function(a){this.c&128&&(a&64?M(this.a,this.I):Xb(this.a,this.I));this.c=this.c&-70|a&69};h.ae=function(){return 0};
h.$e=function(a){a&=255;this.F&&this.F.call(this.i,a);a&=127;if(this.f)if(13==a)this.s=0;else if(8==a)this.f.value=this.f.value.slice(0,-1),0<this.s&&this.s--;else{if(a){var b;b=(b=13!=a&&10!=a?pa[a]:null)?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.fa||8,c=a-this.s%a,this.fa&&(b="                                        ".slice(0,c)));this.S&&!this.s&&c&&(b=String.fromCharCode(this.S)+b);this.f.value+=b;this.f.scrollTop=this.f.scrollHeight;this.s+=c}}else if(null!=
this.o){if(10==a||1024<=this.o.length)this.V(this.o),this.o="";10!=a&&(this.o+=String.fromCharCode(a))}Tb(this.a,this.na,1E3/Math.round(this.ma/10));this.c&=-129};var gf={},ef=(gf[65392]=[null,null,Z.prototype.Ad,Z.prototype.ze,"RCSR"],gf[65394]=[null,null,Z.prototype.zd,Z.prototype.ye,"RBUF"],gf[65396]=[null,null,Z.prototype.be,Z.prototype.af,"XCSR"],gf[65398]=[null,null,Z.prototype.ae,Z.prototype.$e,"XBUF"],gf);
Ia(function(){for(var a=F(document,"pdp11","serial"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Z(d);E(d,c)}});function bc(a){z.call(this,"PC11",a,bc);this.C=hf(this,a.autoMount);this.c=0;this.S=a.baudReceive||3600;this.v=this.w=this.b=0;this.s=[];this.o=jf;this.f=kf;this.A=this.i="";this.M=this.pa=this.oa=null;this.I=-1;this.F=!Ba("Mobi")&&window&&"FileReader"in window}B(bc);var jf="",kf=0;
function hf(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){x(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=bc.prototype;
h.ba=function(a,b,c){var d=this,e=kf;switch(b){case "listTapes":return this.j[b]=c,c.onchange=function(){var a=d.j.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){x("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.j[b]=c,!0;case "readTape":e=2;case "loadTape":return e||(e=1),this.j[b]=c,c.onclick=function(){var a=
d.j.listTapes;a&&lf(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.F){c.parentNode.removeChild(c);break}this.j[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;lf(d,u(b,!0),b,1,a)}return!1};return!0;case "readProgress":return this.j[b]=c,!0}return!1};
h.ia=function(a,b,c,d){this.l=a;this.h=b;this.a=c;this.D=d;this.L=mf(a);var e=this;if(a=hf(this,tc(this.l,"autoMount")))for(var f in a)"PTR"==f&&(this.C[f]=a[f]);this.H=Vb(this.a,56,4,4096);this.U=Sb(this.a,function(){1==(e.b&32769)&&!(e.b&128)&&e.v<e.s.length&&(e.w=e.s[e.v++]&255,nf(e,e.v/e.s.length*100),e.b|=128,e.b&=-2049,e.b&64&&M(e.a,e.H))});fb(b,this,of);hb(b,this.reset.bind(this));pf(this,"None",jf,!0);this.F&&pf(this,"Local Tape","?");pf(this,"Remote Tape","??");qf(this)||G(this)};
h.ka=function(a,b){if(!b)if(!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.ja=function(a){return a?this.save():!0};h.reset=function(){this.b&=-2241;this.w=0};function qf(a){a.c=0;var b=a.C.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.j.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=u(c,!0)}c&&b?rf(a,b,c,1,!0):sf(a)}return!!a.c}
function lf(a,b,c,d,e){if(c)if("?"==c)a.B('Use "Choose File" and "Mount" to select and load a local tape.');else{if("??"==c){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"');a.o="??"}else a.o=c;rf(a,b,c,d,!1,e)}else tf(a,!1)}function rf(a,b,c,d,e,f){var g=-1;if(a.i.toLowerCase()!=c.toLowerCase()||a.f!=d)g++,tf(a,!0),a.m.Oa?a.B("PC11 busy"):(e&&a.c++,uf(a,b,c,d,f)?g++:a.m.Oa=!0);g&&vf(a,a.A,a.i,a.f,a.M,a.pa,a.oa)}
function uf(a,b,c,d,e){var f=c;if(e){var g=new FileReader;g.onload=function(){var e=g.result;e&&(e=new Uint8Array(e,0,e.byteLength),vf(a,b,c,d,e),a.o="?");sf(a)};g.readAsArrayBuffer(e);return!0}0>c.indexOf("/api/v1/dump")&&(e=ka(c),f="json"==e||"gz"==e?encodeURI(c):ta()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!w(f,null,!0,function(e,f,g){var k=0>g&&a.l&&!a.l.m.R;g?a.B('Unable to load tape "'+b+'" (error '+g+": "+e+")",k):(Ta(a.Ba,e,f),(e=sa(e,f))&&vf(a,b,c,d,e.M,e.pa,e.oa));
a.m.Oa=!1;a.c&&(a.c--,a.c||G(a));sf(a)})}function pf(a,b,c,d){if((a=a.j.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}function sf(a){var b=a.j.listTapes;if(b&&b.options){a=a.o||a.i;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}
function nf(a,b){b|=0;if(b!==a.I){var c=a.j.readProgress;c&&(c=(c=F(c,"pcjs-progress-bar"))&&c[0])&&c.style&&(c.style.width=b+"%");a.I=b}}function vf(a,b,c,d,e,f,g){a.A=b;a.i=c;a.f=d;a.M=e;a.pa=f;a.oa=g;2==d?a.L&&bf(a.L,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.B('No valid memory address for tape "'+b+'"'):(a.v=0,a.s=e,a.status('Loaded tape "'+b+'"'),nf(a,0))}function tf(a,b){if(a.i||!1===b)a.A="",a.i="",b||(a.f&&a.status(1==a.f?"tape detached":"tape unloaded"),a.o=jf,a.f=kf,sf(a))}h.save=function(){return(new R(this)).data()};
h.restore=function(){return!0};h.td=function(){return this.b&65534};h.se=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&M(this.a,this.H)):(this.b&=-129,this.b|=2048,this.w=0,Tb(this.a,this.U,1E3/Math.round(this.S/10))));this.b=this.b&-66|a&65};h.sd=function(){this.b&=-129;this.b|=2048;return this.w};h.re=function(){};var wf={},of=(wf[65384]=[null,null,bc.prototype.td,bc.prototype.se,"PRS"],wf[65386]=[null,null,bc.prototype.sd,bc.prototype.re,"PRB"],wf);
function xf(a,b,c){z.call(this,"Disk",{id:a.Ba+".disk"+r(++yf,4)},xf,8192);this.controller=a;this.l=a.l;this.D=a.D;this.f=b;this.ra=b.name;this.Eb=b.Eb;zf(this,c,b.K,b.P,b.N,b.W);G(this)}var yf=0;B(xf);h=xf.prototype;h.ia=function(a,b,c,d){this.D=d};
function zf(a,b,c,d,e,f){a.mode=b;a.K=c;a.P=d;a.N=e;a.W=f;a.a=[];if("preload"!=a.mode){b=Array(a.K);for(c=0;c<b.length;c++){d=Array(a.P);for(e=0;e<d.length;e++){f=Array(a.N);for(var g=1;g<=f.length;g++)f[g-1]=Af(null,c,e,g,a.W,0);d[e]=f}b[c]=d}a.a=b}a.b=null}
function Bf(a,b,c,d,e){var f=c;if(a.h)return!0;a.ra=b;a.ea=c;a.Wb=u(c);a.h=e;a.i=a.controller;if(d){var g=new FileReader;g.onload=function(){var b=g.result,c,d=b?b.byteLength:0,e=ia[d];if(e){a.K=e[0];a.P=e[1];a.N=e[2];a.W=e[3]||512;c=a.W>>2;var f=e=0,b=new DataView(b,0,d);a.a=Array(a.K);for(d=0;d<a.a.length;d++)for(var v=a.a[d]=Array(a.P),y=0;y<v.length;y++)for(var xa=v[y]=Array(a.N),ya=0;ya<xa.length;ya++){for(var Ub=Af(null,d,y,ya+1,a.W,0),ng=Ub.data,lc=0;lc<c;lc++,f+=4)var og=ng[lc]=b.getInt32(f,
!0),e=e+og&-1;Ub.ha=c;xa[ya]=Ub}a.b=e;c=a}else a.B("Unrecognized disk format ("+d+" bytes)");a.h&&(a.h.call(a.controller,a.f,c,a.ra,a.ea),a.h=null)};g.readAsArrayBuffer(d);return!0}0>c.indexOf("/api/v1/dump")&&(b=ka(c),"json"==b||"gz"==b?f=encodeURI(c):(d="path",e="&mbhd=10",!c.indexOf("http:")||!c.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(b)?(d="disk",e="&mbhd=0"):la(c,"/")&&(d="dir"),f=ta()+"/api/v1/dump?"+d+"="+encodeURIComponent(c)+(a.Eb?"":e)+"&format=json"));return!!w(f,
null,!0,function(b,c,d){Cf(a,b,c,d)})}
function Cf(a,b,c,d){var e=null;a.c=!1;var f=0>d&&a.l&&!a.l.m.R;if(d)a.controller.B('Unable to load disk "'+a.ra+'" (error '+d+": "+b+")",f);else{Ta(a.controller.Ba,b,c);try{if(0<u(a.Wb,!0).toLowerCase().indexOf("-readonly"))a.c=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.c=!0)}var k;"<"==c.substr(0,1)?k=["Missing disk image: "+a.ra]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+
c+")");if(k.length)if(1==k.length)x(k[0]);else{a.K=k.length;a.P=k[0].length;a.N=k[0][0].length;var l=k[0][0][0];a.W=l&&l.length||512;for(d=c=0;d<a.K;d++)for(f=0;f<a.P;f++)for(g=0;g<a.N;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);var m=m>>2,p=l.pattern;void 0===p&&(p=l.pattern=0);var t=l.data;if(void 0===t){var v=l.bytes;if(void 0!==v&&v.length){for(var y=m<<2,xa=v.length;xa<y;xa++)v[xa]=p;Df(l,v)}else t=[],p=l.pattern=p|p<<8|p<<16|p<<24,l.data=t;delete l.bytes}Af(l,d,f);for(y=
0;y<t.length;y++)c=c+t[y]&-1}a.a=k;a.b=c;e=a}else x("Empty disk image: "+a.ra)}catch(ya){x("Disk image error ("+b+"): "+ya.message)}}a.h&&(a.h.call(a.i,a.f,e,a.ra,a.ea),a.h=null)}function Af(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.dg=b;a.eg=c;a.ta=a.ha=0;a.wa=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.f,g=this.a[a];if(g){var k=g[b];if(!k&&f.Jc&&b<f.P)for(k=g[b]=Array(f.gc),g=0;g<k.length;g++)k[g]=Af(null,a,b,g+1,f.Sb,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.Jc&&9==f.Mb&&(d=k[g]=Af(null,a,b,f.Mb,f.Sb,0))}}e&&e(d,!1);return d};function Df(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length)var c=a.data,d=b>>2,c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255;return c};h.write=function(a,b,c){if(this.c)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.ha?f<a.ta?(a.ha+=a.ta-f,a.ta=f):f>=a.ta+a.ha&&(a.ha+=f-(a.ta+a.ha)+1):(a.ta=f,a.ha=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function Ef(a,b){var c=a.P*a.N,d=b/c|0;return d<a.K?(b%=c,a.seek(d,b/a.N|0,b%a.N+1)):null}function Ff(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}function Gf(a){for(var b="",c=0,d;d=Ef(a,c++);)for(var e=0,f=d.length;e<f;e++)b+=String.fromCharCode(Ff(a,d,e));return btoa(b)}
h.save=function(){var a=0,b=[];b[a++]=[this.ea,this.b,this.K,this.P,this.N,this.W];if(!this.c)for(var c=this.a,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.ha){for(var k=[],l=0,m=g.ta,p=g.ta+g.ha;m<p;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.ta,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.a.length&&6<=e.length?zf(this,"local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.b&&e[1]!=this.b&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.b+")",b=-2));for(this.a.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.a.length||l>=this.a[k].length||m>=this.a[k][l].length){c="sector (CHS="+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.c){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.a[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.ta=e;for(k.ha=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.B("Unable to restore disk '"+this.ra+": "+c);return b};
h.toJSON=function(){var a;a=0;for(var b;b=Ef(this,a++);)Hf(b);a=JSON.stringify(this.a,function(a,b){if("file"!=a)return b});a=a.replace(/,"length":512/gm,"").replace(/,"pattern":0/gm,"");a=a.replace(/"(sector|length|data|pattern)":/gm,"$1:");a=a.replace(/,"[^"]*":([0-9]+|true|false)/gm,"");a=a.replace(/(sector|length|data|pattern):/gm,'"$1":');return a=a.replace(/([\]}]),/gm,"$1,\n")};
function Hf(a){var b=a.data,c=b.length;if(c<<2==a.length){for(var d=c-1,e=b[d],f=0;d--&&b[d]===e;)f++;f++&&(b.length=c-f,a.pattern=e)}}function P(a){z.call(this,"RK11",a,P,65536);this.w=If(this,a.autoMount);this.o=0;this.c=Array(8);this.A=!Ba("Mobi")&&window&&"FileReader"in window}B(P);function If(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){x(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=P.prototype;
h.ba=function(a,b,c){var d=this;switch(b){case "listDisks":return this.j[b]=c,c.onchange=function(){var a=d.j.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){x("RK11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.j[b]=c,c.onchange=function(){var a=q(c.value);null!=a&&Jf(d,a)},
!0;case "loadDisk":return this.j[b]=c,c.onclick=function(){var a=d.j.listDisks;a&&a.options&&Kf(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.j[b]=c,c.onclick=function(){var a,b=d.j.listDrives,b=b&&q(b.value);null==b||0>b||b>=d.c.length||!(a=d.c[b])?d.B("Unable to boot the selected drive"):a.T?(Fc(d.a,0,!0),(a=d.ec(a,0,0,0,512,0,2))&&d.B("Unable to read the boot sector ("+a+")")):d.B("Load a disk into the drive first")},!0;case "saveDisk":if(!this.A){c.parentNode.removeChild(c);
break}this.j[b]=c;c.onclick=function(){var a=d.j.listDrives;a&&a.options&&d.c&&((a=d.c[q(a.value)||0])?(a=a.T)?(a=Ca(Gf(a),a.Wb.replace(".json",".img")),x(a)):d.B("No disk loaded in drive."):d.B("No disk drive selected."))};return!0;case "mountDisk":if(this.A)return this.j[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Kf(d,u(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.ia=function(a,b,c,d){this.l=a;this.h=b;this.a=c;this.D=d;if(a=If(this,tc(this.l,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.w[e]=a[e]);Lf(this);this.Xa=Vb(this.a,144,5,65536);fb(b,this,Mf);hb(b,this.reset.bind(this));Nf(this,"None","",!0);this.A&&Nf(this,"Local Disk","?");Nf(this,"Remote Disk","??");Of(this)||G(this)};
h.ka=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.l.Rb){for(a=0;a<this.c.length;a++)Pf(this,a,!0);Of(this,!0)}}else if(!this.restore(a))return!1;if(a=this.j.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;8>b;b++){var c=document.createElement("option");c.value=b;c.text="RK"+b;a.appendChild(c)}a.value="0";Jf(this,0)}}return!0};h.ja=function(a){return a?this.save():!0};h.reset=function(){Lf(this)};h.save=function(){return(new R(this)).data()};
h.restore=function(a){return Lf(this,a[0])};function Of(a,b){b||(a.o=0);for(var c in a.w){var d=a.w[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.j.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=u(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.c.length)){!Qf(a,g,f,e,!0)&&b&&G(a,!1);continue}a.B("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.o}
function Kf(a,b,c,d){var e=a.j.listDrives,e=e&&q(e.value);if(void 0===e||0>e||e>=a.c.length)a.B("Unable to load the selected drive");else if(c)if("?"==c)a.B('Use "Choose File" and "Mount" to select and load a local disk.');else{if("??"==c){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"')}Qf(a,e,b,c,!1,d)}else Pf(a,e)}
function Qf(a,b,c,d,e,f){var g=-1,k=a.c[b];k.ea.toLowerCase()!=d.toLowerCase()&&(g++,Pf(a,b,!0),k.Qa?a.B("RK11 busy"):(k.Qa=!0,e&&(k.Pa=!0,a.o++),k.xa=!!f,Bf(new xf(a,k,"preload"),c,d,f,a.Bc)&&g++));return g}h.Bc=function(a,b,c,d,e){a.Qa=!1;b&&(b.K>a.K||b.P>a.P)&&(this.B('Disk "'+c+'" too large for drive '+("RK"+a.Ra)),b=null);b?(a.T=b,a.ra=c,a.ea=d,this.B('Loaded disk "'+c+'" in drive '+("RK"+a.Ra),a.Pa||e),this.l&&zc(this.l)):a.xa=!1;a.Pa&&(a.Pa=!1,--this.o||G(this));Jf(this,a.Ra)};
function Nf(a,b,c,d){if((a=a.j.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Jf(a,b){if(0<=b&&b<a.c.length){var c=a.c[b],d=a.j.listDisks;a=a.j.listDrives;if(d&&a&&d.options&&a.options&&(a=q(a.value),c=c.xa?"?":c.ea,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function Pf(a,b,c){var d=a.c[b];if(d.T||!1===c)d.ra="",d.ea="",d.T=null,d.xa=!1,c||(a.B("Drive RK"+b+" unloaded",c),Jf(a,b))}
function Lf(a,b){var c=0;b||(b=[]);a.F=b[c++]||2368;a.i=b[c++]||0;a.b=b[c++]||128;a.v=b[c++]||0;a.s=b[c++]||0;a.f=b[c++]||0;a.C=b[c]||0;for(b=0;b<a.c.length;b++){var d=a.c[b];void 0===d&&(d=a.c[b]={});c=a;d.Ra=b;d.name=c.Aa;d.Qa=d.xa=!1;d.K=203;d.P=2;d.N=12;d.W=512;d.Eb=!0;d.Kc=0;d.Ic=0;d.Mb=1;d.gc=d.N;d.Sb=d.W;d.Qc=0;d.ee=null;d.T||(d.ea="");d.status=2368}return!0}
h.ec=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.T;var p=null,t;a||(m=128,e=0);for(;e;){if(!p){if(b>=a.K){m=64;break}p=a.seek(b,c,d+1);if(!p){m=4096;break}t=0;++d>=a.N&&(d=0,++c>=a.P&&(c=0,++b))}var v,y;if(0>(v=a.read(p,t++))||0>(y=a.read(p,t++))){m=32;break}if(!k&&(this.h.tb(Oc(this.a,f),v|y<<8),Rb(this.h))){m=1024;break}t>=a.W&&(p=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Cc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.T;var p=null,t;a||(m=128,e=0);for(;e;){var v=this.h.pb(Oc(this.a,f));if(Rb(this.h)){m=1024;break}f+=g;e--;if(!p){if(b>=a.K){m=64;break}p=a.seek(b,c,d+1,!0);if(!p){m=4096;break}t=0;++d>=a.N&&(d=0,++c>=a.P&&(c=0,++b))}if(k){if(0>a.read(p,t++)||0>a.read(p,t++)){m=32;break}}else if(!a.write(p,t++,v&255)||!a.write(p,t++,v>>8)){m=32;break}t>=a.W&&(p=null)}return l?l(m,b,c,d,e,f):m};
h.Ac=function(a,b,c,d,e,f){this.s=f&65535;this.b=this.b&-49|f>>12&48;this.v=65536-e&65535;this.f=this.f&-16|d&15;a&&(this.i=this.i|a|32768,this.b|=49152);return!0};h.Fd=function(){return this.F};h.Ee=function(){};h.Gd=function(){return this.i};h.Fe=function(){};h.Cd=function(){return this.b&61438};
h.Be=function(a){this.b=this.b&-3968|a&3967;if(this.b&1){a=!0;var b,c=(this.f&57344)>>13,d=this.c[c],e,f,g,k,l,m;this.b&=-129;var p=this.b&14;switch(p){case 0:this.i=0;this.b=128;this.f=0;break;case 8:e=(this.f&8160)>>5;e>=d.K&&(this.i|=32832,this.b|=49152);break;case 10:case 4:b=this.ec;case 6:case 2:b||(b=this.Cc),e=(this.f&8160)>>5,f=(this.f&16)>>4,g=this.f&15,k=65536-this.v&65535,l=(this.b&48)<<12|this.s,m=this.b&2048?0:2,e>=d.K?(this.i|=32832,this.b|=49152):g>=d.N?(this.i|=32800,this.b|=49152):
a=b.call(this,d,e,f,g,k,l,m,6<=p,this.Ac.bind(this))}this.F=d.status|(d.T?128:0)|c<<13|this.f&15;a&&(this.b&=-2,this.b|=128,this.b&64&&M(this.a,this.Xa))}};h.Hd=function(){return this.v};h.Ge=function(a){this.v=a};h.Bd=function(){return this.s};h.Ae=function(a){this.s=a};h.Dd=function(){return this.f};h.Ce=function(a){this.f=a};h.Ed=function(){return this.C};h.De=function(a){this.C=a};
var Rf={},Mf=(Rf[65280]=[null,null,P.prototype.Fd,P.prototype.Ee,"RKDS"],Rf[65282]=[null,null,P.prototype.Gd,P.prototype.Fe,"RKER"],Rf[65284]=[null,null,P.prototype.Cd,P.prototype.Be,"RKCS"],Rf[65286]=[null,null,P.prototype.Hd,P.prototype.Ge,"RKWC"],Rf[65288]=[null,null,P.prototype.Bd,P.prototype.Ae,"RKBA"],Rf[65290]=[null,null,P.prototype.Dd,P.prototype.Ce,"RKDA"],Rf[65294]=[null,null,P.prototype.Ed,P.prototype.De,"RKDB"],Rf);
function O(a){z.call(this,"RL11",a,O,131072);this.A=Sf(this,a.autoMount);this.v=0;this.c=Array(4);this.C=!Ba("Mobi")&&window&&"FileReader"in window}B(O);function Sf(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){x(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=O.prototype;
h.ba=function(a,b,c){var d=this;switch(b){case "listDisks":return this.j[b]=c,c.onchange=function(){var a=d.j.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){x("RL11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.j[b]=c,c.onchange=function(){var a=q(c.value);null!=a&&Tf(d,a)},
!0;case "loadDisk":return this.j[b]=c,c.onclick=function(){var a=d.j.listDisks;a&&a.options&&Uf(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.j[b]=c,c.onclick=function(){var a,b=d.j.listDrives,b=b&&q(b.value);null==b||0>b||b>=d.c.length||!(a=d.c[b])?d.B("Unable to boot the selected drive"):a.T?(Fc(d.a,0,!0),(a=d.fc(a,0,0,0,512,0))&&d.B("Unable to read the boot sector ("+a+")")):d.B("Load a disk into the drive first")},!0;case "saveDisk":if(!this.C){c.parentNode.removeChild(c);
break}this.j[b]=c;c.onclick=function(){var a=d.j.listDrives;a&&a.options&&d.c&&((a=d.c[q(a.value)||0])?(a=a.T)?(a=Ca(Gf(a),a.Wb.replace(".json",".img")),x(a)):d.B("No disk loaded in drive."):d.B("No disk drive selected."))};return!0;case "mountDisk":if(this.C)return this.j[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Uf(d,u(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.ia=function(a,b,c,d){this.l=a;this.h=b;this.a=c;this.D=d;if(a=Sf(this,tc(this.l,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.A[e]=a[e]);Vf(this);this.Xa=Vb(this.a,112,5,131072);fb(b,this,Wf);hb(b,this.reset.bind(this));Xf(this,"None","",!0);this.C&&Xf(this,"Local Disk","?");Xf(this,"Remote Disk","??");Yf(this)||G(this)};
h.ka=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.l.Rb){for(a=0;a<this.c.length;a++)Zf(this,a,!0);Yf(this,!0)}}else if(!this.restore(a))return!1;if(a=this.j.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;4>b;b++){var c=document.createElement("option");c.value=b;c.text="RL"+b;a.appendChild(c)}a.value="0";Tf(this,0)}}return!0};h.ja=function(a){return a?this.save():!0};h.reset=function(){Vf(this)};h.save=function(){return(new R(this)).data()};
h.restore=function(a){return Vf(this,a[0])};function Yf(a,b){b||(a.v=0);for(var c in a.A){var d=a.A[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.j.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=u(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.c.length)){!$f(a,g,f,e,!0)&&b&&G(a,!1);continue}a.B("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.v}
function Uf(a,b,c,d){var e=a.j.listDrives,e=e&&q(e.value);if(void 0===e||0>e||e>=a.c.length)a.B("Unable to load the selected drive");else if(c)if("?"==c)a.B('Use "Choose File" and "Mount" to select and load a local disk.');else{if("??"==c){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"')}$f(a,e,b,c,!1,d)}else Zf(a,e)}
function $f(a,b,c,d,e,f){var g=-1,k=a.c[b];k.ea.toLowerCase()!=d.toLowerCase()&&(g++,Zf(a,b,!0),k.Qa?a.B("RL11 busy"):(k.Qa=!0,e&&(k.Pa=!0,a.v++),k.xa=!!f,Bf(new xf(a,k,"preload"),c,d,f,a.Ec)&&g++));return g}h.Ec=function(a,b,c,d,e){a.Qa=!1;b&&(b.K>a.K||b.P>a.P)&&(this.B('Disk "'+c+'" too large for drive '+("RL"+a.Ra)),b=null);b?(a.T=b,a.ra=c,a.ea=d,this.B('Loaded disk "'+c+'" in drive '+("RL"+a.Ra),a.Pa||e),this.l&&zc(this.l)):a.xa=!1;a.Pa&&(a.Pa=!1,--this.v||G(this));Tf(this,a.Ra)};
function Xf(a,b,c,d){if((a=a.j.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Tf(a,b){if(0<=b&&b<a.c.length){var c=a.c[b],d=a.j.listDisks;a=a.j.listDrives;if(d&&a&&d.options&&a.options&&(a=q(a.value),c=c.xa?"?":c.ea,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function Zf(a,b,c){var d=a.c[b];if(d.T||!1===c)d.ra="",d.ea="",d.T=null,d.xa=!1,c||(a.B("Drive RL"+b+" unloaded",c),Tf(a,b))}
function Vf(a,b){var c=0;b||(b=[]);a.b=b[c++]||129;a.w=b[c++]||0;a.f=b[c++]||0;a.i=b[c++]||0;a.s=b[c++]||0;a.o=b[c]||0;for(b=0;b<a.c.length;b++){var d=a.c[b];void 0===d&&(d=a.c[b]={});c=a;d.Ra=b;d.name=c.Aa;d.Qa=d.xa=!1;d.K=512;d.P=2;d.N=40;d.W=256;d.Eb=!0;d.Kc=0;d.Ic=0;d.Mb=1;d.gc=d.N;d.Sb=d.W;d.Qc=0;d.ee=null;d.T||(d.ea="");d.status=29}return!0}
h.fc=function(a,b,c,d,e,f,g){var k=0;a=a.T;var l=null,m;a||(k=5120,e=0);for(;e;){if(!l){l=a.seek(b,c,d+1);if(!l){k=5120;break}m=0}var p,t;if(0>(p=a.read(l,m++))||0>(t=a.read(l,m++))){k=5120;break}this.h.tb(Oc(this.a,f),p|t<<8);if(Rb(this.h)){k=8192;break}f+=2;e--;if(m>=a.W&&(l=null,++d>=a.N&&(d=0,++c>=a.P&&(c=0,++b>=a.K)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Fc=function(a,b,c,d,e,f,g){var k=0;a=a.T;var l=null,m;a||(k=5120,e=0);for(;e;){var p=this.h.pb(Oc(this.a,f));if(Rb(this.h)){k=8192;break}f+=2;e--;if(!l){l=a.seek(b,c,d+1,!0);if(!l){k=5120;break}m=0}if(!a.write(l,m++,p&255)||!a.write(l,m++,p>>8)){k=5120;break}if(m>=a.W&&(l=null,++d>=a.N&&(d=0,++c>=a.P&&(c=0,++b>=a.K)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Dc=function(a,b,c,d,e,f){this.w=f&65535;this.b=this.b&-49|f>>12&48;this.o=f>>16&63;this.i=this.f=b<<7|(c?64:0)|d&63;this.s=65536-e&65535;a&&(this.b=this.b|a|32768);return!0};h.Kd=function(){return this.b&65535};
h.Je=function(a){this.b=this.b&-1023|a&1022;this.o=this.o&60|(a&48)>>4;if(!(this.b&128)){a=!0;var b,c=this.c[(this.b&768)>>8],d=c.T,e,f,g;this.b&=-2;switch(this.b&14){case 4:this.s&8&&(this.b&=63);this.s=c.status|this.i&64|(d&&512==d.K?128:0);break;case 6:1==(this.f&3)&&(b=this.f&65408,c=(this.f&16)<<2,this.i=this.f&4?this.i+b:this.i-b,this.f=this.i=this.i&65408|c);break;case 8:this.s=this.i;break;case 12:b=this.fc;case 10:b||(b=this.Fc),e=this.f>>7,f=this.f&64?1:0,g=this.f&63,!d||e>=d.K||g>=d.N?
this.b|=37888:(a=65536-this.s&65535,d=(this.o&63)<<16|this.w,a=b.call(this,c,e,f,g,a,d,this.Dc.bind(this)))}a&&(this.b|=129,this.b&64&&M(this.a,this.Xa))}};h.Id=function(){return this.w};h.He=function(a){this.w=a&65534};h.Ld=function(){return this.f};h.Ke=function(a){this.f=a};h.Md=function(){return this.s};h.Le=function(a){this.s=a};h.Jd=function(){return this.o};h.Ie=function(a){this.o=a&63;this.b=this.b&-49|(this.o&3)<<4};
var ag={},Wf=(ag[63744]=[null,null,O.prototype.Kd,O.prototype.Je,"RLCS"],ag[63746]=[null,null,O.prototype.Id,O.prototype.He,"RLBA"],ag[63748]=[null,null,O.prototype.Ld,O.prototype.Ke,"RLDA"],ag[63750]=[null,null,O.prototype.Md,O.prototype.Le,"RLMP"],ag[63752]=[null,null,O.prototype.Jd,O.prototype.Ie,"RLBE"],ag);
function bg(a,b,c){z.call(this,"Computer",a,bg,33554432);this.m.R=!1;cg(this,b);this.A=tc(this,"autoPower",a);this.l=0;this.L=a.busWidth||a.buswidth;this.b=dg;this.s=null;this.i=this.H=!1;this.S=tc(this,"url")||"";(Math.random()+.1).toString(36);this.c=eg(this);if(this.a=Va("CPU",this.id)){this.D=Va("Debugger",this.id);this.h=new zb({id:this.Ba+".bus",busWidth:this.L},this.a,this.D);var d,e=C(this.id);if((this.v=Va("Panel",this.id))&&this.v.nb)for(b=0;b<e.length;b++)d=e[b],d.B=this.v.B,d.V=this.v.V,
d.nb=this.v.nb;this.V("PDPjs v1.30.6\nCopyright \u00a9 2012-2016 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.V("Portions adapted from the PDP-11/70 Emulator v1.4 by Paul Nankervis <paulnank@hotmail.com>");for(b=0;b<e.length;b++)d=e[b],d.ia&&d.ia(this,this.h,this.a,this.D);b=null;d=a.resume;void 0!==d&&(1<d.length?b=this.o=d:this.b=parseInt(d,10));var f;if(a=tc(this,"state")||(f=!0,a.state))b=this.C=a,f||(this.i=!0,this.b=dg),this.b&&(this.w=
new R(this,"1.30.6"),fg(this.w)?b=null:delete this.w);!b&&this.b&&(b=gg(this))&&(this.i=!0);if(b){var g=this;w(b,null,!0,function(a,b,c){c?(g.o=null,g.i=!1,g.B("Unable to load machine state from server (error "+c+(b?": "+oa(b):"")+")")):(g.s=b,g.H=!0);G(g)})}else G(this);this.j.power||(this.A=!0);!c&&this.A&&hg(this,this.qb)}else x("Unable to find CPU component")}B(bg);var dg=0;
function cg(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){x(d.message+" ("+c+")")}}a.I=b}function tc(a,b,c){var d=b.toLowerCase(),d=Na[b]||Na[d];void 0===d&&a.I&&(d=a.I[b]);void 0===d&&c&&(d=c[b]);void 0===d&&"object"==typeof resources&&resources[b]&&(d=b);return d}function hg(a,b,c){for(var d=C(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!Xa(f)){Xa(f,function(){hg(a,b,c)});return}}b.call(a,c)}
function ig(a,b){var c=new R(a,"1.30.6","validate");if(fg(c)&&jg(c)){var d=c.get("timestamp"),e=b?b.get("timestamp"):"unknown";d!=e&&(a.B("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}h=bg.prototype;
h.qb=function(a){void 0===a&&(a=this.b||(this.s?1:dg));if(!this.l){this.l++;var b=!1,c=!1;this.F=!1;var d=this.w||new R(this,"1.30.6");if(-1==a)b=!0;else if(a>dg){if(fg(d,this.s)){this.f=new R(this,"1.30.6","failsafe");fg(this.f)&&(kg(this,d),a=2,lg(this.f));this.f.set("timestamp",ra());mg(this.f);var e=this.b&&!this.i;if(1==a||ua("Click OK to restore the previous PDPjs machine state, or CANCEL to reset the machine.")){if(c=jg(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?fg(d,g):("error"==
f&&"no machine state"!=g?(this.B("Error: "+g),"unable to verify user"==g&&(Aa("user",""),this.c=null)):this.V(f+": "+g),lg(d),fg(d)?(c=jg(d),e=!0):c=!1))}e&&ig(this,c?d:null)}else 2==a&&d.clear()}else ig(this);delete this.s;delete this.w}e=C(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.a&&(c=pg(this,g,d,b,c));b=[d,a,c];-1!=a?hg(this,this.hc,b):this.hc(b)}};
function pg(a,b,c,d,e){if(!b.m.R){b.m.R=!0;if(b.ka){var f=null;e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,"."))));"string"===typeof f&&(f=null);!b.ka(f,d)&&f&&(x("Unable to restore state for "+b.type),a.C&&!a.H?(c.clear(),a.b=dg,window&&window.location.reload()):a.F=!0,b.ka(null),e=!1)}if(!d&&b.jc)for(a=b.jc.split("|"),c=0;c<a.length;c++)b.status(a[c])}return e}
h.hc=function(a){var b=a[0],c=0>a[1];a=a[2];this.U=!0;this.m.R=!0;var d=this.j.power;d&&(d.textContent="Shutdown");this.a&&(pg(this,this.a,b,c,a),this.za(),this.a.Ha());this.F&&(kg(this,b),b.clear());!c&&this.f&&(this.f.clear(),delete this.f);this.l=0};
function kg(a,b){if(ua("There may be a problem with your PDPjs machine.\n\nTo help us diagnose it, click OK to send this PDPjs machine state to http://www.pcjs.org.")){var c=a.c||"";b=b.toString();var d={app:"PDPjs",ver:"1.30.6"};d.url=a.S;d.user=c;d.type="bug";d.data=b;w("http://www.pcjs.org/api/v1/report",d,!0)}}
function qg(a,b,c){var d,e="none";if(a.l)return null;a.l--;var f=new R(a,"1.30.6"),g=new R(a,"1.30.6","validate"),k=ra();g.set("timestamp",k);f.set("timestamp",k);f.set("version","1.30.6");f.set("url",window?window.location.href:null);f.set("browser",window?window.navigator.userAgent:"");a.a&&a.a.ja&&(c&&H(a.a),d=a.a.ja(b,c),"object"===typeof d&&f.set(a.a.id,d),c&&(a.a.m.R=!1,!1===d&&(e=null)));for(var k=C(a.id),l=0;l<k.length;l++){var m=k[l];m.m.R&&(m.ja&&(d=m.ja(b,c),"object"===typeof d&&f.set(m.id,
d)),c&&(m.m.R=!1,!1===d&&(e=null)))}e&&(c?(k=d=!1,b?(a.c&&rg(a,a.c,f.toString()),mg(g)&&mg(f)||(e=null,d=k=!0)):a.b&&(d=!0,k=3==a.b),d&&f.clear(k)):e=f.toString());c&&(a.m.R=!1,b=a.j.power)&&(b.textContent="Power");a.l=0;return e}h.reset=function(){this.h&&this.h.reset&&this.h.reset();this.a&&this.a.reset&&this.a.reset();for(var a=C(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.h&&c!==this.a&&c.reset&&c.reset()}this.za(-1)};
h.start=function(a,b){for(var c=C(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}this.za(-1)};h.stop=function(a,b){for(var c=C(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}this.za(-1)};
h.za=function(a){if(this.a){var b=this.a,c=a||0,d=b.j.speed;d&&(0>=c||30<=(b.Kb+=c))&&(d.textContent=b.m.O?b.Ea.toFixed(2)+"Mhz":"Stopped",b.Kb=0)}if(this.v&&(b=this.v,a=a||0,b.v)){c=b.a.m.O;d=!!(b.a.u&8);if(0>=a||60<=(b.s+=a)){for(var e=0;e<b.a.g.length;e++)nb(b,"R"+e,b.a.g[e]);e=$b(b.a);nb(b,"PS",e);nb(b,"NF",e&8?1:0,1);nb(b,"ZF",e&4?1:0,1);nb(b,"VF",e&2?1:0,1);nb(b,"CF",e&1?1:0,1);b.s=0}wb(b,0<a&&c&&!d?b.a.Wa:b.la);ub(b,b.o);a=b.a;a=a.Sa?a.ya&16?1:2:4;xb(b,"B22",a&1);xb(b,"B18",a&2);xb(b,"B16",
a&4)}};
h.ba=function(a,b,c){var d=this;switch(b){case "power":return this.j[b]=c,c.onclick=function(){d.l||(d.m.R?qg(d,!1,!0):hg(d,d.qb))},!0;case "reset":return this.j[b]=c,c.onclick=function(){if(d.m.R&&!d.l)if(d.b&&!d.o){var a=ua("Click OK to save changes to this PDPjs machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");qg(d,a,!0);!a&&d.C?window&&window.location.reload():(a||(d.Rb=!0),d.qb(dg),d.Rb=!1)}else d.reset(),d.a&&d.a.Ha()},!0;case "save":if(la(ta(),"pcjs.org"))c.parentNode.removeChild(c);else return this.j[b]=
c,c.onclick=function(){var a=eg(d,!0);if(a){var b=!!(d.b&&!d.o||d.C),c=qg(d,b);b?rg(d,a,c):d.B("Resume disabled, machine state not saved")}},!0}return!1};
function eg(a,b){var c=a.c;c||((c=za("user"),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=sg(a,c))||a.B("The user ID is invalid.")):b&&a.B("Browser local storage is not available"));return c}
function sg(a,b){a.c=null;b=w(ta()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(Aa("user",b.data),a.c=b.data)}catch(d){x(d.message+" ("+c+")")}return a.c}function gg(a){var b=null;a.c&&(b=ta()+"/api/v1/user?req=load&user="+a.c+"&state="+tg(a,"1.30.6"));return b}
function rg(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=tg(a,"1.30.6");d.data=c;b=w(ta()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.B("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.B(c),Aa("user",""),a.c=null)}}
function mf(a){var b;a=C(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function zc(a){if(a.nb){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.nb.focus();window&&window.scrollTo(b,c)}}Ia(function(){for(var a=F(document,"pdp11-machine"),b=0;b<a.length;b++)for(var c=a[b],d=D(c),c=F(c,"pdp11","computer"),e=0;e<c.length;e++){var f=c[e],g=D(f),g=new bg(g,d,!0);E(g,f);g.A&&hg(g,g.qb)}});
Da.show.push(function(){for(var a=F(document,"pdp11","computer"),b=0;b<a.length;b++){var c=D(a[b]);(c=Va("Computer",c.id))&&c.U&&!c.m.R&&c.qb(-1)}});Da.exit.push(function(){for(var a=F(document,"pdp11","computer"),b=0;b<a.length;b++){var c=D(a[b]);(c=Va("Computer",c.id))&&c.m.R&&qg(c,!(!c.b||c.o),!0)}});function R(a,b,c){this.id=a.id;this.key=tg(a,b,c);this.D=a.D;lg(this,a.cd)}function tg(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}
R.prototype={constructor:R,set:function(a,b){try{this[this.id][a]=b}catch(c){}},get:function(a){return this[this.id][a]||null},value:function(){return this[this.id]},data:function(){return this[this.id]},toString:function(){var a=this[this.id];return"string"==typeof a?a:JSON.stringify(a)},clear:function(a){lg(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,
1);c=0}}};function lg(a,b){a[a.id]={};b&&a.set("parms",b);a.a=!1}function mg(a){var b=!0;if(wa()){var c=JSON.stringify(a[a.id]);Aa(a.key,c)||(x("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}function jg(a){var b=!0;try{a[a.id]=JSON.parse(a[a.id])}catch(c){x(c.message||c),b=!1}return b}function fg(a,b){return b?(a[a.id]=b,a.a=!0):a.a?!0:wa()&&(b=za(a.key))?(a[a.id]=b,a.a=!0):!1}var ug=0;
function vg(a,b,c,d,e,f){e("Loading "+a+"...");w(a,null,!0,function(g,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),f(k,null)):wg(k,a,b,c,d,e,f)})}
function wg(a,b,c,d,e,f,g){function k(a,f){if(f)g(f,null);else{c&&(Ta(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),
a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pdp11$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(p){f=null,a=p.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);g(a,f)}}a?e?xg(a,f,k):k(a,null):g("no data"+(b?" for file: "+b:""),null)}
function xg(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");w(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,p=/( [a-z]+=)(['"])(.*?)\2/g;m=p.exec(f);)l=0>l.indexOf(m[1])?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],g);xg(a,b,c)}})}else c(a,null)}
function yg(a,b,c,d){function e(a){if(void 0===k){var b=g&&F(g,"machine-warning");k=b&&b[0]||g}k&&(k.innerHTML=na(a))}function f(a){e("Error: "+a);l&&(--ug||Ka(!0));l=!1}var g,k,l=!0;ug++;Sa[a]={};try{if(g=document.getElementById(a)){var m;if("object"==typeof resources&&(m=resources.css)){var p=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";t.styleSheet?t.styleSheet.cssText=m:t.appendChild(document.createTextNode(m));p.appendChild(t)}c||
(c="/versions/pdpjs/1.30.6/components.xsl");m=function(d,k){k?vg(c,null,null,!1,e,function(d,l){l?(Ta(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(l=k.transformNode(l))?(g.outerHTML=l,--ug||Ka(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(l),(l=d.transformToFragment(k,document))?g.parentNode?(g.parentNode.replaceChild(l,g),--ug||Ka(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?vg(b,a,d,!0,e,m):wg(b,null,a,d,!1,e,m)}else f("missing machine element: "+a)}catch(v){f(v.message)}return l}window.embedPDP11=function(a,b,c,d){Ka(!1);return yg(a,b,c,d)};window.enableEvents=Ka;window.sendEvent=La;})();//# sourceMappingURL=/tmp/pdpjs/1.30.6/pdp11.map
