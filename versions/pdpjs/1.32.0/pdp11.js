(function(){/*
 http://pcjs.org/modules/shared/es6/diskapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/userapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/keys.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/state.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/es6/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2017
*/
var h;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}
for(var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,ca=["Math","log2"],da=0;da<ca.length-1;da++){var ea=ca[da];ea in ba||(ba[ea]={});ba=ba[ea]}var fa=ca[ca.length-1],ga=ba[fa],ha=ga?ga:function(a){return Math.log(a)/Math.LN2};
ha!=ga&&null!=ha&&aa(ba,fa,{configurable:!0,writable:!0,value:ha});
var ia={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],21368320:[615,4,17],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},q={Gf:0,Gc:1,If:2,Jf:3,Kf:4,Lf:5,Mf:6,Nf:7,ic:8,Of:9,Hc:10,Pf:11,Qf:12,Ic:13,Rf:14,Sf:15,Tf:16,Uf:17,Vf:18,Wf:19,Xf:20,Yf:21,Zf:22,$f:23,ag:24,bg:25,cg:26," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,
"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,hc:65,Ff:66,Hf:67,dg:68,E:69,eg:70,fg:71,gg:72,hg:73,ig:74,jg:75,kg:76,lg:77,mg:78,ng:79,og:80,Q:81,pg:82,qg:83,rg:84,sg:85,tg:86,ug:87,vg:88,wg:89,Uc:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,xg:97,yg:98,zg:99,d:100,e:101,Bg:102,Cg:103,Dg:104,Eg:105,Hg:106,k:107,Ig:108,Jg:109,n:110,Kg:111,p:112,q:113,r:114,Lg:115,t:116,Mg:117,Ng:118,Og:119,x:120,y:121,z:122,"{":123,
"|":124,"}":125,"~":126,Jc:127};
function r(a){var b=10,c;if(a){b||(b=10);var d=a.charAt(0),e=0<a.indexOf(",");e&&(a=a.replace(/,/g,""));"#"==d?(b=8,d=null):"$"==d&&(b=16,d=null);null==d?a=a.substr(1):("0"==d&&(d=a.charAt(1),"b"==d&&e&&(b=2,d=null),"o"==d?(b=8,d=null):"x"==d&&(b=16,d=null)),null==d?a=a.substr(2):(d=a.charAt(a.length-1).toLowerCase(),"y"==d?(b=2,d=null):"."==d?(b=10,d=null):"h"==d&&(b=16,d=null),null==d&&(a=a.substr(0,a.length-1))));var f,d=a;((e=b)&&10!=e?16==e?d.match(/^[0-9a-f]+$/i):8==e?d.match(/^[0-7]+$/):2==
e&&d.match(/^[01]+$/):d.match(/^[0-9]+$/))&&!isNaN(f=parseInt(a,b))&&(c=f|0)}return c}function ja(a,b){var c="";b?11<b&&(b=11):b=a&-16777216?11:a&-65536?8:6;if(null==a||isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;)c=String.fromCharCode((a&7)+48)+c,a>>=3;return""+c}function ka(a,b,c){var d="";b?8<b&&(b=8):b=a&-65536?8:4;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;){var e=a&15,e=e+(0<=e&&9>=e?48:55),d=String.fromCharCode(e)+d;a>>=4}return(c?"0x":"")+d}
function u(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}function la(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function ma(a,b){return-1!==a.indexOf(b,a.length-b.length)}function na(a){return a.replace(/[&<>"']/g,function(a){return oa[a]})}function pa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var oa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},qa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"};function ra(){return Date.now()||+new Date}
function sa(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function v(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(k.onreadystatechange=function(){4===k.readyState&&(f=k.responseText,200==k.status||!k.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var l="",m;for(m in b)b.hasOwnProperty(m)&&(l&&(l+="&"),l+=m+"="+encodeURIComponent(b[m]));l=l.replace(/%20/g,"+");k.open("POST",a,c);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l)}else k.open("GET",a,c),"bytes"==b&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.send();c||(f=k.responseText,200!=k.status&&(e=k.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function ta(a,b){var c,d={N:null,ga:null,Z:null,Y:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.Z=g.load;d.Y=g.exec;if(e=g.bytes)d.N=e;else if(e=g.words)for(d.N=Array(2*e.length),f=c=0;c<e.length;c++)d.N[f++]=e[c]&255,d.N[f++]=e[c]>>8&255;else if(e=g.data)for(d.N=Array(4*e.length),f=c=0;c<e.length;c++)d.N[f++]=e[c]&255,
d.N[f++]=e[c]>>8&255,d.N[f++]=e[c]>>16&255,d.N[f++]=e[c]>>24&255;else d.N=g;d.ga=g.symbols;d.N.length?1==d.N.length&&(y(d.N[0]),d=null):(y("Empty resource: "+a),d=null)}catch(k){y("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){y("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.N=e)}return d}
function ua(){return"http://"+(window?window.location.host:"www.pcjs.org")}function z(a){window&&window.alert(a)}function va(a){var b=!1;window&&(b=window.confirm(a));return b}function wa(){if(null==xa){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}xa=a}return xa}
function ya(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}function za(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Aa(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function Ba(a){if(!Ca){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}Ca=c}return Ca[a]}
function Ea(a,b){var c=null;a="data:application/octet-stream;base64,"+a;b&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),b="Check your Downloads folder for "+b+"."):(window.open(a),b="Check your browser for a new window/tab containing the requested data"+(b?" ("+b+")":"")+".");return b}
function Fa(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function Ga(a){Ha.init.push(a)}function Ia(a){if(Ja)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){z&&z(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function Ka(a){!Ja&&a?(Ja=!0,La&&Ma("init"),Na&&Ma("show")):Ja=a}function Ma(a){Ha[a]&&Ia(Ha[a])}var Ca=null,Ha={init:[],show:[],exit:[]},La=!1,Na=!1,Ja=!0,xa=null;
Fa("onload",function(){La=!0;Ia(Ha.init)});Fa("onpageshow",function(){Na=!0;Ia(Ha.show)});Fa(Aa("Opera")||Aa("iOS")?"onunload":"onbeforeunload",function(){Ia(Ha.exit)});
function A(a,b,c,d){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.mc=b.comment;this.Rc=b;this.exports={};a=this.id.indexOf(".");0>a?this.Ga=this.id:(this.Ha=this.id.substr(0,a),this.Ga=this.id.substr(a+1));this.l={ready:!1,Pa:!1,Xb:!1,R:!1,error:!1};this.zb=null;this.l.error=!1;this.j={};this.Kc=d||0;this.C=this.c=this.s=this.A=this.ab=null;B.push(this)}function Oa(a,b,c){Pa[a]&&b&&(Pa[a][b]=c)}function y(a){z&&z(a)}
function C(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<B.length;b++){var d=B[b];a&&d.id.indexOf(a)||c.push(d)}return c}function Qa(a){if(void 0!==a){var b;for(b=0;b<B.length;b++)if(B[b].id===a)return B[b]}return null}function Ra(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<B.length;d++)if(c)c==B[d]&&(c=null);else if(!(a!=B[d].type||b&&B[d].id.indexOf(b)))return B[d]}return null}
function D(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){y(c.message+" ("+a+")")}return b}function E(a,b){var c=F;b=G(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var k=g.getAttribute("class");if(k)for(var l=k.split(" "),m=0;m<l.length;m++)switch(k=l[m],k){case c+"-binding":(k=D(g))&&k.binding&&a.da(k.type,k.binding,g,k.value),m=l.length}}}}
function G(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}h=A.prototype;h.toString=function(){return this.name?this.name:this.id||this.type};
h.da=function(a,b,c){switch(b){case "clear":return this.j[b]||(this.j[b]=c,c.onclick=function(a){return function(){a.j.print&&(a.j.print.value="")}}(this)),!0;case "print":return this.j[b]||(this.ab=this.j[b]=c,c.value="",this.V=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(c),this.B=function(a){this.V(a,this.Ga)}),!0;default:return!1}};h.log=function(){};h.V=function(){};
h.status=function(a){this.V(this.Ga+": "+a)};h.B=function(a,b,c){c=c||this.type;!b&&z&&z((c?c+": ":"")+a)};function Sa(a,b){a.l.error=!0;a.B(b)}function Ta(a,b){b&&(a.l.ready?b():a.zb=b);return a.l.ready}function H(a,b){a.l.error||(a.l.ready=!1!==b,a.l.ready&&(b=a.zb,a.zb=null,b&&b()))}function Ua(a,b){a.l.Xb?(a.l.Pa=!1,a.l.Xb=!1):a.l.error?a.V(a.toString()+" error"):a.l.Pa=b}h.ba=function(){return this.l.R=!0};h.ia=function(a,b){b&&(this.l.R=!1);return!0};
window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]));var Pa=window?window.PCjs.Machines:{},B=window?window.PCjs.Components:[];Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var Va="undefined"!==typeof ArrayBuffer,F="pdp11",Wa="PDPjs",Xa=!0,Ya=!0,Za={48:"DL11R",52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11"},F="pdp11",Wa="PDPjs",Ya=Xa=!0;
function $a(a,b){A.call(this,"Panel",a,0,512);this.i=this.m=0;this.D=b;this.ja=this.g=this.b=this.h=0;this.u=this.v=this.o=!1;this.w=ab;this.f={};this.a={START:[1,1,!0,!1,this.md],STEP:[1,1,!1,!1,this.nd],ENABLE:[1,1,!1,!1,this.hd],CONT:[1,1,!0,!1,this.fd],DEP:[0,0,!0,!1,this.gd],EXAM:[1,1,!0,!1,this.jd],LOAD:[1,1,!0,!1,this.ld],TEST:[0,0,!0,!1,this.kd]};for(a=0;22>a;a++)this.a["S"+a]=[0,0,!1,!1,this.od,a];this.C=this.c=this.s=this.A=null;H(this)}n($a,A);h=$a.prototype;h.reset=function(){this.stop()};
h.da=function(a,b,c,d){if(this.A&&this.A.da(a,b,c,d)||this.c&&this.c.da(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.j[b]=c,this.m++,!0;default:return"led"==a||"rled"==a?(this.j[b]=c,this.f[b]=d?1:0,this.m++,!0):"switch"==a?(void 0===this.a[b]&&(this.a[b]=[d?1:0,d?1:0]),this.j[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,b){return function(){bb(a,
b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){cb(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){bb(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){cb(a,b)}}(this,b),!0):A.prototype.da.call(this,a,b,c,d)}};h.aa=function(a,b,c,d){this.A=a;this.s=b;this.c=c;this.C=d;db(b,this,eb);fb(b,this.reset.bind(this));gb(this);hb(this)};h.ba=function(a,b){b||(this.D&&ib(),this.reset());return!0};h.ia=function(){return!0};
function jb(a,b,c){if(a=a.j[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function gb(a,b){for(var c in a.f)jb(a,c,null!=b?b:a.f[c])}function kb(a,b,c){if(a=a.j[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function hb(a){for(var b in a.a)kb(a,b,a.a[b][1])}function lb(a,b,c,d){a.j[b]&&(void 0===c&&(Sa(a,"Value for "+b+" is invalid"),I(a.c)),c=8==(a.C&&a.C.h||8)?ja(c,d):ka(c,d),a.j[b].textContent!=c&&(a.j[b].textContent=c))}
function bb(a,b){var c=a.a[b];kb(a,b,c[1]=1-c[1]);c[3]=!0;c[4]&&c[4].call(a,c[1],c[5]);b!=mb&&(a.u=b==nb,a.v=b==ob)}function cb(a,b){var c=a.a[b];c[2]&&c[3]&&(kb(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5]));c[3]=!1}h.md=function(a){a||this.c.l.P||(a=this.c,a.s.reset(),pb(a),this.a[qb]&&this.a[qb][1]&&rb(this.c))};h.nd=function(){};h.hd=function(a){a||I(this.c)};
h.fd=function(a){if(!a&&!this.c.l.P)if(this.a[qb]&&this.a[qb][1])rb(this.c);else{a=this.C;var b;if(b=a)a.l.Pa&&(a.l.Xb=!0),b=!a.l.Pa;if(b)Ua(a,!0),a.f(0,null),Ua(a,!1);else try{var c=this.c.Qb(1);0<c&&(sb(this.c,c),tb(this.c,c,!0),ub(this.c,c))}catch(d){"number"!=typeof d&&Sa(this.c,d.stack||d.message)}this.stop();this.A&&vb(this.A)}};h.gd=function(a){if(a&&!this.c.l.P)if(this.u&&wb(this),a=xb(this,this.b),this.w==ab)yb(this.s,this.ja,a);else{var b=this.c,c=this.ja;b.$a++;b.s.wb(zb(b,c,4),a);b.$a--}};
h.jd=function(a){if(!a&&!this.c.l.P){this.v&&wb(this);if(this.w==ab)a=Ab(this.s,this.ja);else{a=this.c;var b=this.ja;a.$a++;b=a.s.vb(zb(a,b,2));a.$a--;a=b}xb(this,a)}};h.ld=function(a){a||this.c.l.P||Bb(this,this.b)};h.kd=function(a){if(a)this.o=!0,gb(this,!0);else if(this.o=!1,gb(this),void 0!==this.j[Cb]){for(a=this.b=0;22>a;a++)this.a["S"+a][1]=0&1<<a?1:0;hb(this)}};h.od=function(a,b){this.b=a?this.b|1<<b:this.b&~(1<<b)};
function wb(a){var b=1140>=a.c.oa?8:16,c=65472<=a.ja&&a.ja<65472+b,b=c?1:2,c=c?15:a.s.v;a.a[mb]&&a.a[mb][1]||(b=-b);Bb(a,a.ja&~c|a.ja+b&c)}function Bb(a,b){a.ja=b&a.s.v;b=a.ja;for(var c=0;22>c;c++)Db(a,"A"+c,b&1<<c)}function xb(a,b){a.g=b&65535;b=a.g;for(var c=0;16>c;c++)Db(a,"D"+c,b&1<<c);return a.g}function Db(a,b,c){a.f[b]=c;a.o||jb(a,b,c)}h.stop=function(){Bb(this,this.c.b[7])};h.setData=function(a,b){b?this.h=a:this.g=a};h.td=function(a,b){return(b?this.h:this.b)&65535};
h.Ee=function(a){this.h=a};function ib(){for(var a=G(document,F,"panel"),b=0;b<a.length;b++){var c=a[b],d=D(c),e=Qa(d.id);e||(e=new $a(d,!0));E(e,c)}}var ab=7,Cb="S0",nb="DEP",qb="ENABLE",ob="EXAM",mb="STEP",Eb={},eb=(Eb[65400]=[null,null,$a.prototype.td,$a.prototype.Ee,"CNSW"],Eb);Ga(ib);
function Fb(a,b,c){A.call(this,"Bus",a,0,16);this.c=b;this.C=c;this.S=+a.busWidth||16;this.F=1<<this.S;this.v=this.F-1;this.g=Gb;this.h=Math.log2(this.g);this.K=this.g>>2;this.f=this.g-1;this.u=this.F/this.g|0;this.L=this.u-1;this.Ca=[];this.m=0;this.o=!1;this.G=[];this.Vc=[Hb,Ib,Jb,Kb];this.a=this.b=[];this.D=this.w=this.i=this.H=this.I=0;a=new J(this);Lb(a);this.a=Array(this.u);this.b=Array(this.u);for(b=0;b<this.u;b++)this.a[b]=this.b[b]=a;this.D=this.F-Gb;Mb(this,this.D,Gb,Nb,this);this.I=this.H=
(this.D&this.v)>>>this.h;this.w=0;this.i=this.v;H(this)}n(Fb,A);function Ob(a,b){if(b!=a.w){for(var c=0;c<a.u;c++)a.b[c]=a.a[c];a.w=0;a.i=a.v;b&&(a.w=b,b=1<<b,a.i=b-1,b-=Gb,a.I=(b&a.i)>>>a.h,a.b[a.I]=a.a[a.H])}}h=Fb.prototype;h.reset=function(){for(var a=0;a<this.G.length;a++)this.G[a]();Ob(this,16)};h.ba=function(a,b){b||this.reset();return!0};
function Mb(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.h;0<g&&k<a.a.length;){var l=a.a[k],m=k*a.g,p=a.g-(f-m);p>g&&(p=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.Oa)return l.tb+=l.Oa-f,l.Oa=f,!0;if(f>=l.Oa+l.tb){p=l.size-(f-m);p>g&&(p=g);l.tb=f-l.Oa+p;f=m+a.g;g-=p;k++;continue}}return Pb(Qb,f,g)}f=new J(a,f,p,a.g,d,e);Lb(f,l);a.a[k++]=f;f=m+a.g;g-=p}return 0>=g?(a.status((c>>10)+"Kb "+Rb[d]+" at "+ja(b)),!0):Pb(Sb,b,c)}h.Ec=function(a){return this.b[(a&this.i)>>>this.h].fb(a&this.f,a)};
h.vb=function(a){var b=a&this.f,c=(a&this.i)>>>this.h;return Ya||b!=this.f?this.b[c].W(b,a):this.b[c++].fb(b,a)|this.b[c&this.L].fb(0,a+1)<<8};h.Fc=function(a,b){this.b[(a&this.i)>>>this.h].ib(a&this.f,b,a)};h.wb=function(a,b){var c=a&this.f,d=(a&this.i)>>>this.h;Ya||c!=this.f?this.b[d].lb(c,b,a):(this.b[d++].ib(c,b&255,a),this.b[d&this.L].ib(0,b>>8&255,a+1))};function Tb(a,b){return a.a[(b&a.v)>>>a.h]}
function Ab(a,b){var c;a.o=!1;a.m++;var d=b&a.f,e=Tb(a,b);Ya||d!=a.f?c=e.C(d,b):c=e.i(d,b)|Tb(a,b+1).i(0,b+1)<<8;a.m--;return c}function Ub(a,b,c){a.o=!1;a.m++;Tb(a,b).j(b&a.f,c&255,b);a.m--}function yb(a,b,c){a.o=!1;a.m++;var d=b&a.f,e=Tb(a,b);Ya||d!=a.f?e.m(d,c&65535,b):(e.j(d,c&255,b),Tb(a,b+1).j(0,c>>8&255,b+1));a.m--}
function Vb(a){for(var b=0,c=[],d=0;d<a.u;d++){var e=a.a[d];if(e.wa||e.ad){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],p=g+1;p<e.length&&e[p]===m;)p++;l[k++]=p-g;l[k++]=m;g=p}l.length<e.length&&(e=l)}c[f]=e}}return c}function Wb(a){for(var b=Xb,c=0,d=0;d<a.a.length;d++){var e=a.a[d];e.type==b&&(c=e.Oa+e.tb)}return c}
function Yb(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var p=b&Zb;if(void 0!==a.Ca[p])return z&&z("I/O address already registered: "+ka(b,8,!0)),!1;var t=l||"unknown";t&&0<=m&&(t+=m++);a.Ca[p]=[d,e,f,g,t,k||16,!1]}return!0}
function db(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.c.oa)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,p=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&p&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(p)));for(var t=g[4],x=g[5]||1,w=0;w<x;w++,f+=2)if(t&&1<x&&(t=g[4]+w),!Yb(a,f,f,k,l,m,p,g[7]||b.Kc,t||b.Ga))return!1}}return!0}
function fb(a,b){a.G.push(b)}function K(a,b,c){a.o=!0;a.m||(c&&(a.c.G|=c),L(a.c,4,0,b))}function $b(a){var b=a.o;a.o=!1;return b}function Pb(a,b,c){y("Memory block error ("+a+": "+ka(b)+","+ka(c)+")");return!1}var Gb=8192,Zb=Gb-1,Qb=1,Sb=2;function Hb(a,b){var c=-1,d=this.controller,e=d.Ca[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Ca[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return c;K(d,b,16);return 255}
function Ib(a,b,c){var d=!1,e=this.controller,f=e.Ca[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Ca[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d||K(e,c,16)}function Jb(a,b){var c=-1,d=this.controller;a=d.Ca[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return c;K(d,b,16);return 65535}
function Kb(a,b,c){var d=!1,e=this.controller;a=e.Ca[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d||K(e,c,16)}function M(a){A.call(this,"Device",a,0,256);this.a={Ag:0,bc:-1}}n(M,A);h=M.prototype;h.aa=function(a,b,c,d){this.s=b;this.A=a;this.c=c;this.C=d;var e=this;this.a.bc=ac(c,function(){e.a.cb|=128;e.a.cb&64&&bc(e.c,e.a.Da);e.A&&vb(e.A,1);cc(e.c,e.a.bc,1E3/60)});this.a.Da=ec(c,64,6,524288);db(b,this,fc);fb(b,this.reset.bind(this));H(this)};
h.reset=function(){this.a.cb=128;cc(this.c,this.a.bc,1E3/60,!0)};h.Ad=function(){return this.a.cb};h.Le=function(a){this.a.cb=a&192;this.a.cb&64||(a=this.a.Da)&&gc(this.c,a)};h.Cd=function(){var a=this.c,b=a.H;b&57344||(b=b&-3199|a.Wa<<5|a.Xa<<1);return b};h.Ne=function(a){hc(this.c,a&-129|this.c.H&128)};h.Dd=function(){var a=this.c;a.H&57344||(a.qb=a.F>>16&65535);a=a.qb;a&65280&&(a=(a<<8|a>>8)&65535);return a};h.Ed=function(){var a=this.c;a.H&57344||(a.rb=a.F&65535);return a.rb};h.Fd=function(){return this.c.pa};
h.Oe=function(a){var b=this.c;1170>b.oa&&(a&=-49);b.pa!=a&&(b.pa=a,b.Ka=a&16?4194303:262143,ic(b))};h.me=function(a){a=a>>1&63;var b=this.c.Na[a>>1];return a&1?b>>16:b&65535};h.xf=function(a,b){b=b>>1&63;var c=b>>1;this.c.Na[c]=b&1?this.c.Na[c]&65535|(a&63)<<16:this.c.Na[c]&-65536|a&65534};h.fe=function(a){return this.c.u[1][a>>1&7]};h.qf=function(a,b){this.c.u[1][b>>1&7]=a&65295};h.de=function(a){return this.c.u[1][(a>>1&7)+8]};h.nf=function(a,b){this.c.u[1][(b>>1&7)+8]=a&65295};
h.ee=function(a){return this.c.I[1][a>>1&7]};h.pf=function(a,b){b=b>>1&7;this.c.I[1][b]=a;this.c.u[1][b]&=65295};h.ce=function(a){return this.c.I[1][(a>>1&7)+8]};h.mf=function(a,b){b=(b>>1&7)+8;this.c.I[1][b]=a;this.c.u[1][b]&=65295};h.zd=function(a){return this.c.u[0][a>>1&7]};h.Ke=function(a,b){this.c.u[0][b>>1&7]=a&65295};h.xd=function(a){return this.c.u[0][(a>>1&7)+8]};h.Ie=function(a,b){this.c.u[0][(b>>1&7)+8]=a&65295};h.yd=function(a){return this.c.I[0][a>>1&7]};
h.Je=function(a,b){b=b>>1&7;this.c.I[0][b]=a;this.c.u[0][b]&=65295};h.wd=function(a){return this.c.I[0][(a>>1&7)+8]};h.He=function(a,b){b=(b>>1&7)+8;this.c.I[0][b]=a;this.c.u[0][b]&=65295};h.le=function(a){return this.c.u[3][a>>1&7]};h.wf=function(a,b){this.c.u[3][b>>1&7]=a&65295};h.je=function(a){return this.c.u[3][(a>>1&7)+8]};h.uf=function(a,b){this.c.u[3][(b>>1&7)+8]=a&65295};h.ke=function(a){return this.c.I[3][a>>1&7]};h.vf=function(a,b){b=b>>1&7;this.c.I[3][b]=a;this.c.u[3][b]&=65295};
h.ie=function(a){return this.c.I[3][(a>>1&7)+8]};h.tf=function(a,b){b=(b>>1&7)+8;this.c.I[3][b]=a;this.c.u[3][b]&=65295};h.gb=function(a){a&=7;return this.c.i&2048?this.c.va[a]:this.c.b[a]};h.jb=function(a,b){b&=7;this.c.i&2048?this.c.va[b]=a:this.c.b[b]=a};h.Kd=function(){return this.c.i&49152?this.c.fa[0]:this.c.b[6]};h.Te=function(a){this.c.i&49152?this.c.fa[0]=a:this.c.b[6]=a};h.Nd=function(){return this.c.b[7]};h.We=function(a){this.c.b[7]=a};
h.hb=function(a){a&=7;return this.c.i&2048?this.c.b[a]:this.c.va[a]};h.kb=function(a,b){b&=7;this.c.i&2048?this.c.b[b]=a:this.c.va[b]=a};h.Ld=function(){return 1==(this.c.i&49152)>>14?this.c.b[6]:this.c.fa[1]};h.Ue=function(a){1==(this.c.i&49152)>>14?this.c.b[6]=a:this.c.fa[1]=a};h.Md=function(){return 3==(this.c.i&49152)>>14?this.c.b[6]:this.c.fa[3]};h.Ve=function(a){3==(this.c.i&49152)>>14?this.c.b[6]=a:this.c.fa[3]=a};h.vd=function(a){return this.c.Nb[a-65504>>1]};
h.Ge=function(a,b){this.c.Nb[b-65504>>1]=a};h.zc=function(a){return 65520==a?(Wb(this.s)>>6)-1:0};h.Cc=function(){};h.he=function(){return 1};h.sf=function(){};h.ud=function(){return this.c.G};h.Fe=function(){this.c.G=0};h.Bd=function(){return this.c.Mb};h.Me=function(a,b){b&1||(a&=255);this.c.Mb=a};h.Gd=function(a,b){return b?0:this.c.bb};h.Pe=function(a){var b=this.c;if(a&=65024){var c=a>>9;do a+=34;while(c>>=1);b.g|=1}b.bb=a};h.ge=function(a,b){return b?0:this.c.Ma&65280};
h.rf=function(a){this.c.Ma=a|255};h.Jd=function(){return jc(this.c)};h.Se=function(a){kc(this.c,a)};h.Bc=function(){};
var N={},fc=(N[61568]=[null,null,M.prototype.me,M.prototype.xf,"UNIMAP",64,1170],N[62592]=[null,null,M.prototype.fe,M.prototype.qf,"SIPDR",8,1145,64],N[62608]=[null,null,M.prototype.de,M.prototype.nf,"SDPDR",8,1145,64],N[62624]=[null,null,M.prototype.ee,M.prototype.pf,"SIPAR",8,1145,64],N[62640]=[null,null,M.prototype.ce,M.prototype.mf,"SDPAR",8,1145,64],N[62656]=[null,null,M.prototype.zd,M.prototype.Ke,"KIPDR",8,1140,64],N[62672]=[null,null,M.prototype.xd,M.prototype.Ie,"KDPDR",8,1145,64],N[62688]=
[null,null,M.prototype.yd,M.prototype.Je,"KIPAR",8,1140,64],N[62704]=[null,null,M.prototype.wd,M.prototype.He,"KDPAR",8,1145,64],N[62798]=[null,null,M.prototype.Fd,M.prototype.Oe,"MMR3",1,1145,64],N[65382]=[null,null,M.prototype.Ad,M.prototype.Le,"LKS"],N[65402]=[null,null,M.prototype.Cd,M.prototype.Ne,"MMR0",1,1140,64],N[65404]=[null,null,M.prototype.Dd,M.prototype.Bc,"MMR1",1,1145,64],N[65406]=[null,null,M.prototype.Ed,M.prototype.Bc,"MMR2",1,1140,64],N[65408]=[null,null,M.prototype.le,M.prototype.wf,
"UIPDR",8,1140,64],N[65424]=[null,null,M.prototype.je,M.prototype.uf,"UDPDR",8,1145,64],N[65440]=[null,null,M.prototype.ke,M.prototype.vf,"UIPAR",8,1140,64],N[65456]=[null,null,M.prototype.ie,M.prototype.tf,"UDPAR",8,1145,64],N[65472]=[null,null,M.prototype.gb,M.prototype.jb,"R0SET0"],N[65473]=[null,null,M.prototype.gb,M.prototype.jb,"R1SET0"],N[65474]=[null,null,M.prototype.gb,M.prototype.jb,"R2SET0"],N[65475]=[null,null,M.prototype.gb,M.prototype.jb,"R3SET0"],N[65476]=[null,null,M.prototype.gb,
M.prototype.jb,"R4SET0"],N[65477]=[null,null,M.prototype.gb,M.prototype.jb,"R5SET0"],N[65478]=[null,null,M.prototype.Kd,M.prototype.Te,"R6KERNEL"],N[65479]=[null,null,M.prototype.Nd,M.prototype.We,"R7KERNEL"],N[65480]=[null,null,M.prototype.hb,M.prototype.kb,"R0SET1",1,1145],N[65481]=[null,null,M.prototype.hb,M.prototype.kb,"R1SET1",1,1145],N[65482]=[null,null,M.prototype.hb,M.prototype.kb,"R2SET1",1,1145],N[65483]=[null,null,M.prototype.hb,M.prototype.kb,"R3SET1",1,1145],N[65484]=[null,null,M.prototype.hb,
M.prototype.kb,"R4SET1",1,1145],N[65485]=[null,null,M.prototype.hb,M.prototype.kb,"R5SET1",1,1145],N[65486]=[null,null,M.prototype.Ld,M.prototype.Ue,"R6SUPER",1,1145],N[65487]=[null,null,M.prototype.Md,M.prototype.Ve,"R6USER",1,1145],N[65504]=[null,null,M.prototype.vd,M.prototype.Ge,"CTRL",8,1170],N[65520]=[null,null,M.prototype.zc,M.prototype.Cc,"LSIZE",1,1170],N[65522]=[null,null,M.prototype.zc,M.prototype.Cc,"HSIZE",1,1170],N[65524]=[null,null,M.prototype.he,M.prototype.sf,"SYSID",1,1170],N[65526]=
[null,null,M.prototype.ud,M.prototype.Fe,"ERR",1,1170],N[65528]=[null,null,M.prototype.Bd,M.prototype.Me,"MBR",1,1170],N[65530]=[null,null,M.prototype.Gd,M.prototype.Pe,"PIR"],N[65532]=[null,null,M.prototype.ge,M.prototype.rf,"SLR"],N[65534]=[null,null,M.prototype.Jd,M.prototype.Se,"PSW"],N);
Ga(function(){for(var a=G(document,F,"device"),b=0;b<a.length;b++){var c,d=a[b];c=D(d);switch(c.type){case "default":c=new M(c);E(c,d);break;case "pc11":c=new lc(c);E(c,d);break;case "rl11":c=new O(c);E(c,d);break;case "rk11":c=new P(c),E(c,d)}}});
function J(a,b,c,d,e,f){this.b=a;this.id=mc+=2;this.c=null;this.Oa=b;this.tb=c;this.size=d||0;this.type=e||nc;this.A=e==oc;this.controller=null;this.fb=this.i=this.Zb;this.W=this.C=this.$b;this.ib=this.j=this.ub;this.lb=this.m=this.dc;this.g=this.s=0;Lb(this);this.wa=this.ad=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.c=a[0],pc(this,f.Vc);else if(Va)this.f=new ArrayBuffer(this.size),this.h=new DataView(this.f,0,this.size),this.a=new Uint8Array(this.f,0,this.size),this.o=new Uint16Array(this.f,
0,this.size>>1),this.c=new Int32Array(this.f,0,this.size>>2),pc(this,qc?rc:sc);else{a=this.c=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;pc(this,tc)}else pc(this)}h=J.prototype;h.save=function(){var a,b;if(this.controller)a=null;else if(Va)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.h.getInt32(b<<2,!0);else a=this.c;return a};
h.restore=function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(Va)for(b=0;b<a.length;b++)this.h.setInt32(b<<2,a[b],!0);else this.c=a;return this.wa=!0}return!1};function pc(a,b){b||(b=uc);vc(a,b,void 0);wc(a,b,void 0)}function vc(a,b,c){c&&a.g||(a.fb=b[0]||a.Zb,a.W=b[2]||a.$b);if(c||void 0===c)a.i=b[0]||a.Zb,a.C=b[2]||a.$b}function wc(a,b,c){c&&a.s||(a.ib=!a.A&&b[1]||a.ub,a.lb=!a.A&&b[3]||a.dc);if(c||void 0===c)a.j=b[1]||a.ub,a.m=b[3]||a.dc}
function Lb(a,b){a.g=a.s=0;b&&((a.g=b.g)&&vc(a,yc,!1),(a.s=b.s)&&wc(a,yc,!1))}h.Zb=function(a,b){K(this.b,b,32);return 255};h.ub=function(a,b,c){K(this.b,c,32)};h.$b=function(a,b){return this.fb(a++,b++)|this.fb(a,b)<<8};h.dc=function(a,b,c){this.ib(a++,b&255,c++);this.ib(a,b>>8,c)};h.sd=function(a){return this.c[a>>2]>>>((a&3)<<3)&255};h.re=function(a,b){Xa&&a&1&&K(this.b,b,64);b=a>>2;a=(a&3)<<3;var c=this.c[b]>>a;return 24>a?c&65535:c&255|(this.c[b+1]&255)<<8};
h.De=function(a,b){var c=a>>2;a=(a&3)<<3;this.c[c]=this.c[c]&~(255<<a)|b<<a;this.wa=!0};h.Bf=function(a,b,c){Xa&&a&1&&K(this.b,c,64);c=a>>2;a=(a&3)<<3;24>a?this.c[c]=this.c[c]&~(65535<<a)|b<<a:(this.c[c]=this.c[c]&16777215|b<<24,c++,this.c[c]=this.c[c]&-256|b>>8);this.wa=!0};h.qd=function(a,b){return this.i(a,b)};h.oe=function(a,b){return this.C(a,b)};h.Be=function(a,b,c){this.A?this.ub(0,0,c):this.j(a,b,c)};h.zf=function(a,b,c){this.A?this.ub(0,0,c):this.m(a,b,c)};h.pd=function(a){return this.a[a]};
h.rd=function(a){return this.a[a]};h.ne=function(a,b){Xa&&a&1&&K(this.b,b,64);return this.h.getUint16(a,!0)};h.qe=function(a,b){Xa&&a&1&&K(this.b,b,64);return!Ya&&a&1?this.a[a]|this.a[a+1]<<8:this.o[a>>1]};h.Ae=function(a,b){this.a[a]=b;this.wa=!0};h.Ce=function(a,b){this.a[a]=b;this.wa=!0};h.yf=function(a,b,c){Xa&&a&1&&K(this.b,c,64);this.h.setUint16(a,b,!0);this.wa=!0};h.Af=function(a,b,c){Xa&&a&1&&K(this.b,c,64);!Ya&&a&1?(this.a[a]=b,this.a[a+1]=b>>8):this.o[a>>1]=b;this.wa=!0};
var nc=0,Xb=1,oc=2,Nb=4,Rb=["NONE","RAM","ROM","VID","H/W"],mc=0,uc=[],tc=[J.prototype.sd,J.prototype.De,J.prototype.re,J.prototype.Bf],yc=[J.prototype.qd,J.prototype.Be,J.prototype.oe,J.prototype.zf];if(Va)var sc=[J.prototype.pd,J.prototype.Ae,J.prototype.ne,J.prototype.yf],rc=[J.prototype.rd,J.prototype.Ce,J.prototype.qe,J.prototype.Af];var zc;if(Va){var Ac=new ArrayBuffer(2);(new DataView(Ac)).setUint16(0,256,!0);zc=256===(new Uint16Array(Ac))[0]}else zc=!1;var qc=zc;
function Bc(a,b){A.call(this,"CPU",a,0,1);b=+a.cycles||b;var c=+a.multiplier||1;this.ec=0;this.Jb=b;this.La=c;this.Tb=Math.round(this.Jb/1E4)/100;this.Va=this.Tb*this.La;this.Ub=this.pb=this.Ya=this.Kb=0;this.l.P=!1;this.l.ac=!1;this.l.la=a.autoStart;"string"==typeof this.l.la&&(this.l.la="true"==this.l.la);this.l.xb=!1;this.Fb=this.Ta=0;this.Gb=+a.csStart;this.nb=+a.csInterval;this.ob=+a.csStop;this.ra=[];this.pc=this.ve.bind(this);this.Aa=this.ua=this.za=this.a=this.S=this.ta=this.mb=this.ya=this.Za=
this.Vb=this.Ia=0;this.ka=null;H(this)}n(Bc,A);h=Bc.prototype;h.aa=function(a,b,c,d){this.A=a;this.s=b;this.C=d;this.ka=a.f;for(a=0;a<Cc.length;a++)(b=this.j[Cc[a]])&&this.A.da(null,Cc[a],b);H(this)};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.ba=function(a,b){var c=Dc(this.A,"autoStart");null!=c?this.l.la="true"==c?!0:"false"==c?!1:!!c:null==this.l.la&&(this.l.la=void 0===this.j.run);if(!b){if(a&&this.restore){Ec(this);if(!this.restore(a))return!1;Fc(this)}else this.reset();this.V("No debugger detected");this.l.la||this.V("CPU will not be auto-started "+(this.ka?"(click Run to start)":"(type 'go' to start)"))}return!0};h.ia=function(a){return a?this.save():!0};h.la=function(){return this.l.P?!0:this.l.la?(rb(this),!0):!1};h.wc=function(){return 0};
function Fc(a){void 0===a.Gb&&(a.Gb=0);void 0===a.nb&&(a.nb=-1);void 0===a.ob&&(a.ob=-1);a.l.xb=0<=a.Gb&&0<a.nb;a.l.xb&&(a.Fb=0,a.Ta=a.Gb-a.Aa)}function ub(a,b){if(a.l.xb){var c=!1;a.Fb=a.Fb+a.wc()|0;a.Ta-=b;0>=a.Ta&&(a.Ta+=a.nb,c=!0);0<=a.ob&&a.ob<=Gc(a)&&(a.nb=a.ob=-1,Fc(a),I(a),c=!0);c&&a.V(Gc(a)+" cycles: checksum="+ka(a.Fb))}}
h.da=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.j[b]=c,!0;case "run":return this.j[b]=c,c.onclick=function(){var a;if(a=d.A)if(a=d.A,a.l.R)a=!0;else{var b=null,c,k=C(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.l.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.l.R);c++);c==k.length&&(b=a);z("The "+b.type+" component ("+b.id+") is not "+(b.l.ready?"powered yet":"ready yet"+(b.zb?" (waiting for notification)":""))+".");a=!1}a&&(d.l.P?I(d):rb(d))},!0;case "speed":return this.j[b]=
c,!0;case "setSpeed":return this.j[b]=c,c.onclick=function(){Hc(d,d.La<<1,!0)},c.textContent=this.Va.toFixed(2)+"Mhz",!0}return!1};function tb(a,b,c){a.Aa+=b;c&&(a.za=a.a=a.S=0)}function Ic(a,b){var c=1;b&&1<a.La&&a.Ia&&(c=a.Ia/a.Tb);a.Ub=Math.round(1E3/Jc);a.pb=Math.floor(a.Jb/Jc*c);b||(a.Ya=a.pb);a.Kb=0}function Gc(a){return a.Aa+a.ua+a.za-a.a}function Ec(a){a.Ia=0;a.Vb=0;a.Aa=a.ua=a.za=a.a=a.S=0;Fc(a);Hc(a,1)}
function Hc(a,b,c){if(void 0!==b){.8>a.Ia/a.Va&&(b=1);a.La=b;b=a.Tb*a.La;if(a.Va!=b){a.Va=b;b=a.Va.toFixed(2)+"Mhz";var d=a.j.setSpeed;d&&(d.textContent=b);a.V("target speed: "+b)}c&&a.A&&Kc(a.A)}tb(a,a.ua);a.ua=0;a.ta=ra();a.ya=0;Ic(a)}function ac(a,b){var c=a.ra.length;a.ra.push([-1,b]);return c}function cc(a,b,c,d){0<=b&&b<a.ra.length&&(d||0>a.ra[b][0])&&(c=a.Jb*a.La/1E3*c|0,a.l.P&&(c+=Lc(a)),a.ra[b][0]=c)}
function sb(a,b){for(var c=a.ra.length-1;0<=c;c--){var d=a.ra[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Lc(a,b){var c=a.za-=a.a;a.a=a.S=0;b&&(a.za=0);return c}
h.ve=function(){if(this.l.P){this.Kb>=this.Jb&&Ic(this,!0);this.Za=0;this.mb=ra();if(this.ya){var a=this.mb-this.ya;a>this.Ub&&(this.ta+=a,this.ta>this.mb&&(this.ta=this.mb))}try{do{for(var b,c=this.l.xb?1:this.pb,d=this.ra.length-1;0<=d;d--){var e=this.ra[d];0>e[0]||c>e[0]&&(c=e[0])}b=c;try{this.Qb(b)}catch(f){if("number"!=typeof f)throw f;}b=Lc(this,!0);this.Za+=b;this.ua+=b;ub(this,b);sb(this,b);this.Ya-=b;if(0>=this.Ya){this.Ya+=this.pb;++this.Vb>=Mc&&(this.A&&vb(this.A,void 0),this.Vb=0);break}}while(this.l.P)}catch(f){I(this);
this.A&&this.A.stop(ra(),Gc(this));Sa(this,f.stack||f.message);return}if(this.l.P){a=setTimeout;b=this.pc;this.ya=ra();c=this.Ub;this.Za&&(c=Math.round(c*this.Za/this.pb));c-=this.ya-this.mb;if(d=this.ya-this.ta)this.Ia=Math.round(this.ua/(10*d))/100,864E5<=d&&(this.Aa=0,Hc(this));if(0>c||this.Ia<this.Va)-1E3>c&&(this.ta-=c),c=0;this.Kb+=this.Za;this.ya+=c;a(b,c)}}};
function rb(a){var b;a.l.error?(a.V(a.toString()+" error"),b=!0):b=!1;if(!b)if(a.l.P)a.V(a.toString()+" busy");else{Hc(a);a.l.P=!0;a.l.ac=!0;if(b=a.j.run)b.textContent="Halt";a.A&&a.A.start(a.ta,Gc(a));a.C||a.status("Started");setTimeout(a.pc,0)}}h.Qb=function(){return 0};function I(a){var b=!1;if(a.l.P){Lc(a);tb(a,a.ua);a.ua=0;a.l.P=!1;if(b=a.j.run)b.textContent="Run";a.A&&a.A.stop(ra(),Gc(a));b=!0;a.C||a.status("Stopped")}a.l.complete=void 0;return b}var Jc=30,Mc=15,Cc=["power","reset"];
function Nc(a){var b=+a.model||1170;Bc.call(this,a,6666667);this.oa=b;this.lc=+a.addrReset||0;this.i=this.v=this.m=this.o=this.w=0;this.b=this.va=this.fa=[];this.D=0;this.nc=[];this.u=this.I=this.Na=this.Nb=[];this.Lb=this.Fa=this.F=this.kc=this.Ja=this.Wa=this.Xa=this.Ka=this.G=this.bb=this.Ma=this.H=this.qb=this.rb=this.pa=this.Ba=this.h=this.f=this.Eb=this.K=this.L=this.g=this.Mb=0;this.oc=255;1120>=this.oa?(this.jc=Oc.bind(this),this.Ua=this.Zc,this.Lb=8,this.oc=-1,this.rc=255,this.qc=0):(this.jc=
Pc.bind(this),this.Ua=this.$c,this.rc=~(1792|(1140>=this.oa?2048:0))&65535,this.qc=1140<this.oa?2048:0);this.$a=0;this.X=null;this.Sb=[];this.l.complete=!1;this.Bb=this.fc=this.bd;this.Cb=this.gc=this.dd;this.Ob=this.Pb=this.xe;this.Db=this.Rb=this.ze;this.sa=this.Ab=0;this.na=this.xc;this.W=this.Ac;this.lb=this.Dc;this.Tc=this.Sc=0}n(Nc,Bc);h=Nc.prototype;h.aa=function(a,b,c,d){Bc.prototype.aa.call(this,a,b,c,d);this.fc=b.Ec.bind(b);this.gc=b.vb.bind(b);this.Pb=b.Fc.bind(b);this.Rb=b.wb.bind(b)};
h.ba=function(a,b){for(var c=192,d=0;d<this.Sb.length;d++){var e=this.Sb[d];0>e.cc&&(e.cc=c,c+=4)}return Bc.prototype.ba.call(this,a,b)};
h.reset=function(){this.status("Model "+this.oa);this.l.P&&I(this);this.v=65536;this.m=32768;this.o=65535;this.w=32768;this.i=15;this.b=[0,0,0,0,0,0,0,this.lc,-1,-2,-3,-4,-5,-6,-7,-8];this.va=[0,0,0,0,0,0];this.fa=[0,0,0,0];this.D=0;this.nc=[4,2,0,1];this.u=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.I=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Na=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Nb=[0,0,0,0,0,0,0,0];this.h=this.f=this.Eb=this.K=this.L=this.g=this.Mb=0;this.Ba=-1;pb(this);Ec(this);this.l.error=!1;Bc.prototype.reset.call(this)};function pb(a){a.H=0;a.qb=0;a.rb=0;a.pa=0;a.G=0;a.bb=0;a.Ma=255;a.Ja=0;a.Wa=0;a.Xa=0;a.Ka=262143;a.Fa=a.b[7];a.F=0;a.X=null;a.s&&(ic(a),a.kc=Wb(a.s))}
function ic(a){a.Bb=a.fc;a.Cb=a.gc;a.Ob=a.Pb;a.Db=a.Rb;a.Ja?(a.sa=65536,a.Ab=a.pa&16?4186112:253952,a.na=a.xc,a.W=a.Ac,a.lb=a.Dc,Ob(a.s,a.pa&16?22:18)):(a.sa=0,a.Ab=57344,a.na=a.cd,a.W=a.pe,a.lb=a.Cf,Ob(a.s,16))}function hc(a,b){b&=-3073;if(a.H!=b){b&57344&&!(a.H&57344)&&(a.qb=a.F>>16&65535,a.rb=a.F&65535);a.H=b;a.Wa=(b&96)>>5;a.Xa=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.Ja!=c&&(a.Ja=c,ic(a))}}
function Qc(a,b,c){a.lc=b;a.s.reset();pb(a);Q(a,b);kc(a,0);if(c){for(b=2;5>=b;b++)a.b[b]=0;a.l.P||rb(a)}else a.C?I(a)||a.C.g():!1===c&&I(a);!a.l.P&&a.ka&&a.ka.stop()}h.wc=function(){return 0};h.save=function(){var a=new R(this);a.set(0,[this.b,this.va,this.fa,this.Na,this.Nb,this.G,this.Mb,this.bb,this.Ma,jc(this),this.Ba,this.D,this.g,this.H,this.qb,this.rb,this.pa,this.Wa,this.Xa,this.u,this.I,this.Ja,this.Ka,this.Fa,this.F]);a.set(1,[this.Aa,this.La]);a.set(2,Vb(this.s));return a.data()};
h.restore=function(a){var b=a[1];this.Aa=b[1];Hc(this,b[3]);a:{b=this.s;a=a[2];var c;for(c=0;c<a.length-1;c+=2){var d=a[c],e=a[c+1];if(e&&e.length<b.K){for(var f=0,g=Array(b.K),k=0;k<e.length-1;)for(var l=e[k++],m=e[k++];l--;)g[f++]=m;e=g}f=b.a[d];if(!f||!f.restore(e)){y("Unable to restore memory block "+d);b=!1;break a}}b=!0}return b};function Rc(a){return a.v&65536?1:0}function Sc(a){return a.w&32768?8:0}function Tc(a,b){var c=a.b[7];a.b[7]=c+b&65535;return c}
function S(a,b,c){c&&(Q(a,a.b[7]+(b<<24>>23)),a.a-=2);a.a-=3}function Q(a,b){a.b[7]=b&65535}function ec(a,b,c,d){c={cc:b,eb:c,message:d||0,next:null};c.name=Za[b];a.Sb.push(c);return c}function gc(a,b){var c=a.X;if(c==b)a.X=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.X&&(a.g|=1)}function bc(a,b){if(b){if(b!=a.X){var c=a.X;if(!c||c.eb<=b.eb)b.next=c,a.X=b;else{do{var d=c.next;if(!d||d.eb<=b.eb){b.next=d;c.next=b;break}c=d}while(c)}}a.g|=1}}
function Uc(a){return a.g&64?(L(a,168,64,-6),!0):a.g&32?(L(a,4,32,-5),!0):a.g&16?(L(a,12,16,-7),!0):!1}function jc(a){return a.i=a.i&63728|Sc(a)|(a.o&65535?0:4)|(a.m&32768?2:0)|Rc(a)}function kc(a,b){b&=a.rc;a.w=b<<12;a.o=~b&4;a.m=b<<14;a.v=b<<16;if((b^a.i)&a.qc)for(var c=a.va.length;0<=--c;){var d=a.b[c];a.b[c]=a.va[c];a.va[c]=d}a.D=b>>14&3;c=a.i>>14&3;a.D!=c&&(a.fa[c]=a.b[6],a.b[6]=a.fa[a.D]);a.i=b;a.g&=-3;a.g|=a.X?2:1}h.ea=function(a){this.w=this.o=a;this.m=0};
h.Ea=function(a,b){this.w=this.o=this.v=a;this.m=b||0};function Vc(a,b){a.w=a.o=a.v=b;a.m=a.w^a.v>>1}function Wc(a,b,c,d){a.w=a.o=a.v=b;a.m=(c^d)&(d^b)}function L(a,b,c,d){if(!a.$a){0>a.Ba?a.Ba=jc(a):a.D||(d=-4);-4==d&&(a.g&256&&(d=-1),a.g|=256,a.G|=4,a.b[6]=b=4);if(-1!=d){a.F=b|4143316992;a.D=0;var e=a.W(b|a.sa),f=a.W(b+2&65535|a.sa);kc(a,f&-12289|a.Ba>>2&12288);Xc(a,a.Ba);Xc(a,a.b[7]);Q(a,e)}a.a-=5;a.g&=~(c|19);a.g|=129;a.Ba=-1;a.Tc=b;a.Sc=d;-1==d&&I(a);if(-4<=d)throw b;}}
function Yc(a){var b=Zc(a),c=Zc(a);a.i&49152&&(c=c&-225|a.i&63712);Q(a,b);kc(a,c);a.g&=-17}function $c(a,b){var c=b>>13&31;31>c&&(b=a.pa&32?a.Na[c]+(b&8191)&4194303:b&-3932161);return b}
function zb(a,b,c){var d,e,f;if(!(c&a.Ja))return f=b&65535,57344<=f&&(f|=a.Ab),f;d=b>>13;a.pa&a.nc[a.D]||(d&=7);e=a.u[a.D][d];f=(a.I[a.D][d]<<6)+(b&8191)&a.Ka;3932160<=f&&(f=$c(a,f));if(a.$a)return f;f>=a.kc&&f<a.Ab?(a.G|=32,L(a,4,0,f)):f&1&&!(c&1)&&(a.G|=64,L(a,4,0,f));var g=0;switch(e&7){case 1:g=4096;case 2:e|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:e|=c&4?192:128;break;default:g=32768}32512!=(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(g|=16384):(b&8128)>(e>>2&8128)&&
(g|=16384));a.u[a.D][d]=e;if(f!=(4194170&a.Ka)||a.D)a.Wa=a.D,a.Xa=d;g&&(g&57344&&(0<=a.Ba&&(g|=128),a.H&57344||(g|=a.H&4096|a.Wa<<5|a.Xa<<1,hc(a,a.H&-61695|g&61694)),L(a,168,64,-2)),a.H&61440||!(f<(4191360&a.Ka)||f>(4194239&a.Ka))||(a.H|=4096,a.H&512&&(a.g|=64)));return f}function Zc(a){var b=a.W(a.b[6]|a.sa);a.b[6]=a.b[6]+2&65535;return b}function Xc(a,b){var c=a.b[6]-2&65535;a.b[6]=c;a.F=a.F&65535|(a.F&-65536)<<8|16121856;a.g&256||a.Ua(4,-2,c);a.lb(c,b)}
function ad(a,b,c,d){var e,f,g=d&8?0:a.sa;switch(b){case 0:return L(a,4,0,-3),0;case 1:return 6==c&&a.Ua(d,0,a.b[6]),a.a-=3,7==c?a.b[c]:a.b[c]|g;case 2:f=2;e=a.b[c];6==c&&a.Ua(d,f,e);7!=c&&(e|=g,6>c&&d&1&&(f=1));a.a-=3;break;case 3:f=2;e=a.b[c];7!=c&&(e|=g);e=a.W(e);e|=g;a.a-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.b[c]+f&65535;6==c&&a.Ua(d,f,e);7!=c&&(e|=g);a.a-=4;break;case 5:f=-2;e=a.b[c]-2&65535;7!=c&&(e|=g);e=a.W(e)|g;a.a-=8;break;case 6:return e=a.W(Tc(a,2)),e=e+a.b[c]&65535,6==c&&a.Ua(d,0,
e),a.a-=6,e|g;case 7:return e=a.W(Tc(a,2)),e=e+a.b[c]&65535,e=a.W(e|a.sa),a.a-=10,e|g}a.b[c]=a.b[c]+f&65535;a.F=a.F&65535|(a.F&-65536)<<8|(f<<3&248|c)<<16;return e}h.Zc=function(a,b,c){!this.D&&0>=b&&c<=this.Ma&&(this.g|=32)};h.$c=function(a,b,c){this.D||(65534<=c&&(c|=-65536),a&4&&c<=this.Ma&&(c<=this.Ma-32?L(this,4,0,-4):(this.G|=8,this.g|=32)))};h.bd=function(a){return this.fc(a)};h.dd=function(a){return this.gc(a)};h.xe=function(a,b){this.Pb(a,b)};h.ze=function(a,b){this.Rb(a,b)};
h.cd=function(a,b,c){return ad(this,a,b,c)};h.xc=function(a,b,c){return zb(this,ad(this,a,b,c),c)};h.pe=function(a){return this.s.vb(this.Fa=a)};h.Ac=function(a){return this.s.vb(this.Fa=zb(this,a,2))};h.Cf=function(a,b){this.s.wb(this.Fa=a,b)};h.Dc=function(a,b){this.s.wb(this.Fa=zb(this,a,4),b)};
function bd(a,b,c){var d=a.f=b&7;(b=a.h=(b&56)>>3)?(d=ad(a,b,d,2),c&65536||61440!==(a.i&61440)&&(d&=65535),a.D=a.i>>12&3,c=a.W(d|c&a.sa),a.D=a.i>>14&3):c=6!=d||(a.i>>2&12288)===(a.i&12288)?a.b[d]:a.fa[a.i>>12&3];return c}function cd(a,b,c,d){a.F=a.F&65535|1441792;var e=a.f=b&7;(b=a.h=(b&56)>>3)?(e=ad(a,b,e,4),c&65536||(e&=65535),a.D=a.i>>12&3,e=zb(a,e|c&65536,4),a.D=a.i>>14&3,a.Db(e,d)):6!=e||(a.i>>2&12288)===(a.i&12288)?a.b[e]=d:a.fa[a.i>>12&3]=d}
function dd(a,b){b>>=6;var c=a.L=b&7;return(b=a.K=(b&56)>>3)?a.Bb(a.na(b,c,3)):a.b[c+a.Lb]&a.oc}function ed(a,b){var c;b>>=6;var d=a.L=b&7;(b=a.K=(b&56)>>3)?c=a.Cb(a.na(b,d,2)):c=a.b[d+a.Lb];return c}function fd(a,b){var c=a.f=b&7;b=a.h=(b&56)>>3;return ad(a,b,c,8)}function gd(a,b){var c=a.f=b&7;return(b=a.h=(b&56)>>3)?a.Bb(a.na(b,c,3)):a.b[c]&255}function hd(a,b){var c,d=a.f=b&7;(b=a.h=(b&56)>>3)?c=a.Cb(a.na(b,d,2)):c=a.b[d];return c}
function T(a,b,c,d){var e=a.f=b&7;(b=a.h=(b&56)>>3)?(e=a.Eb=a.na(b,e,7),c=0>c?a.b[-c-1]&255:c,a.Ob(e,d.call(a,c,a.Bb(e))),e&1&&a.a--):(b=a.b[e],c=0>c?a.b[-c-1]&255:c,a.b[e]=b&65280|d.call(a,c,b&255))}function U(a,b,c,d){var e=a.f=b&7;(b=a.h=(b&56)>>3)?(e=a.na(b,e,6),a.Db(e,d.call(a,0>c?a.b[-c-1]:c,a.Cb(e)))):a.b[e]=d.call(a,0>c?a.b[-c-1]:c,a.b[e])}
function id(a,b,c,d,e){var f=a.f=b&7;(b=a.h=(b&56)>>3)?(d=a.na(b,f,5),e.call(a,(c=0>c?a.b[-c-1]&255:c)<<8),a.Ob(d,c),d&1&&a.a--):(c?(c=0>c?a.b[-c-1]&255:c,a.b[f]=a.b[f]&~d|c<<24>>24&d):a.b[f]&=~d,e.call(a,c<<8))}function jd(a,b,c,d){var e=a.f=b&7;(b=a.h=(b&56)>>3)?(e=a.na(b,e,4),d.call(a,c=0>c?a.b[-c-1]:c),a.Db(e,c)):(a.b[e]=c=0>c?a.b[-c-1]:c,d.call(a,c))}
h.Qb=function(a){this.l.complete=!0;var b=a?this.l.ac?0:1:-1;this.l.ac=!1;this.za=this.a=a;this.g=this.g&-5|0;do{if(this.g){if(a=this.g&11)if(a=!1,this.g&2){var c=160,d=(this.bb&224)>>5,e=this.X&&this.X.eb>d?this.X:null;e&&(c=e.cc,d=e.eb);d>(this.i&224)>>5?(this.g&8&&(Tc(this,2),this.g&=-9),L(this,c,0,-10),d=!0):d=!1;d&&(e&&gc(this,e),a=!0);this.X||this.bb||(this.g&=-3)}else this.g&1&&this.g++;if(a){if(this.g&4&&this.C.b(this.b[7],b)){I(this);break}if(0>b)break}if(this.g&112&&Uc(this)){if(this.g&
4&&this.C.b(this.b[7],b)){I(this);break}if(0>b)break}}this.g=this.g&15|this.i&16;a=this.F=this.b[7];e=this.W(a);this.b[7]=a+2&65535;this.jc(e)}while(0<this.a);return this.l.complete?this.za-this.a:void 0===this.l.complete?0:-1};Ga(function(){for(var a=G(document,F,"cpu"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Nc(d);E(d,c)}});function kd(a,b){var c=b+a;this.w=this.o=this.v=c;this.m=(a^c)&(b^c);return c&65535}
function ld(a,b){var c=b+a,d=c<<8;this.w=this.o=this.v=d;this.m=(a<<8^d)&(b<<8^d);return c&255}function md(a,b){a=b<<1;Vc(this,a);return a&65535}function nd(a,b){a=b<<1;Vc(this,a<<8);return a&255}function od(a,b){a=b&32768|b>>1|b<<16;Vc(this,a);return a&65535}function pd(a,b){a=b&128|b>>1|b<<8;Vc(this,a<<8);return a&255}function qd(a,b){a=b&~a;this.ea(a);return a}function rd(a,b){a=b&~a;this.ea(a<<8);return a}function sd(a,b){a|=b;this.ea(a);return a}function td(a,b){a|=b;this.ea(a<<8);return a}
function ud(a,b){a=~b|65536;this.Ea(a);return a&65535}function vd(a,b){a=~b|256;this.Ea(a<<8);return a&255}function wd(a,b){this.w=this.o=a=b-a;this.m=b&(b^a);return a&65535}function xd(a,b){a=b-a;var c=a<<8;b<<=8;this.w=this.o=c;this.m=b&(b^c);return a&255}function yd(a,b){this.w=this.o=a=b+a;this.m=a&(b^a);return a&65535}function zd(a,b){a=b+a;var c=a<<8;this.w=this.o=c;this.m=c&(b<<8^c);return a&255}function Ad(a,b){a=-b;this.Ea(a,a&b&32768);return a&65535}
function Bd(a,b){a=-b;this.Ea(a<<8,(a&b&128)<<8);return a&255}function Cd(a,b){a=b<<1|this.v>>16&1;Vc(this,a);return a&65535}function Dd(a,b){a=b<<1|this.v>>16&1;Vc(this,a<<8);return a&255}function Ed(a,b){a=(this.v&65536|b)>>1|b<<16;Vc(this,a);return a&65535}function Fd(a,b){a=((this.v&65536)>>8|b)>>1|b<<8;Vc(this,a<<8);return a&255}function Gd(a,b){var c=b-a;Wc(this,c,a,b);return c&65535}function Hd(a,b){var c=b-a;Wc(this,c<<8,a<<8,b<<8);return c&255}
function Id(a,b){this.w=this.o=b&65280;this.m=this.v=0;return(b<<8|b>>8)&65535}function Jd(a,b){a^=b;this.ea(a);return a&65535}function Kd(a){U(this,a,ed(this,a),kd);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}
function Ld(a){var b=hd(this,a);a=a>>6&7;var c=this.b[a];c&32768&&(c|=4294901760);this.v=this.m=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.v=c<<17-b,c>>=b;else if(b)if(16<b)this.m=c,c=0;else{this.v=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.m=32768)}this.b[a]=c&65535;this.w=this.o=c;this.a-=(this.h?6:7)+b}
function Md(a){var b=hd(this,a);a=a>>6&7;var c=this.b[a]<<16|this.b[a|1];this.v=this.m=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.v=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.v=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.m=32768)):d=c;this.b[a]=d>>16&65535;this.b[a|1]=d&65535;this.w=d>>16;this.o=d>>16|d;this.a-=(this.h?6:7)+b}function Nd(a){S(this,a,!Rc(this))}function Od(a){S(this,a,Rc(this))}
function Pd(a){U(this,a,ed(this,a),qd);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}function Qd(a){T(this,a,dd(this,a),rd);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}function Rd(a){U(this,a,ed(this,a),sd);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}function Sd(a){T(this,a,dd(this,a),td);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}
function Td(a){var b=ed(this,a);a=hd(this,a);this.ea((0>b?this.b[-b-1]:b)&a);this.a-=this.h?4+(this.L&&6<=this.f?1:0):(this.K?4:3)+(7==this.f?2:0)}function Ud(a){var b=dd(this,a);a=gd(this,a);this.ea(((0>b?this.b[-b-1]&255:b)&a)<<8);this.a-=this.h?4+(this.L&&6<=this.f?1:0):(this.K?4:3)+(7==this.f?2:0)}function Vd(a){S(this,a,this.o&65535?0:4)}function Wd(a){S(this,a,!Sc(this)==!(this.m&32768))}function Xd(a){S(this,a,!!(this.o&65535)&&!Sc(this)==!(this.m&32768))}
function Yd(a){S(this,a,!Rc(this)&&!!(this.o&65535))}function Zd(a){S(this,a,(this.o&65535?0:4)||!Sc(this)!=!(this.m&32768))}function $d(a){S(this,a,Rc(this)||(this.o&65535?0:4))}function ae(a){S(this,a,!Sc(this)!=!(this.m&32768))}function be(a){S(this,a,Sc(this))}function ce(a){S(this,a,!!(this.o&65535))}function de(a){S(this,a,!Sc(this))}function ee(){L(this,12,0,-9)}function fe(a){S(this,a,!0)}function ge(a){S(this,a,!(this.m&32768))}function he(a){S(this,a,this.m&32768?2:0)}
function V(a){a&1&&(this.v=0);a&2&&(this.m=0);a&4&&(this.o=1);a&8&&(this.w=0);this.a-=5}function ie(a){var b=ed(this,a);a=hd(this,a);var c=(b=0>b?this.b[-b-1]:b)-a;Wc(this,c,a,b);this.a-=this.h?4+(this.L&&6<=this.f?1:0):(this.K?4:3)+(7==this.f?2:0)}function je(a){var b=dd(this,a);a=gd(this,a);var c=(b=(0>b?this.b[-b-1]&255:b)<<8)-(a<<=8);Wc(this,c,a,b);this.a-=this.h?4+(this.L&&6<=this.f?1:0):(this.K?4:3)+(7==this.f?2:0)}
function ke(a){var b=hd(this,a);if(b){a=a>>6&7;var c=this.b[a]<<16|this.b[a|1];this.v=this.m=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.b[a]=d&65535,this.b[a|1]=c-d*b&65535,this.o=d>>16|d,this.w=d>>16):(this.m=32768,this.o=d>>15|d,this.w=c>>16,-1===b&&65534===this.b[a]&&(this.b[a]=this.b[a|1]=1));this.a-=53}else this.o=this.w=0,this.m=32768,this.v=65536,this.a-=7}function le(){L(this,24,0,-9);this.a-=20}
function me(){this.i&49152?(this.G|=128,L(this,4,0,-8)):(this.ka&&1120==this.oa&&this.ka.setData(this.b[0],!0),this.C?this.C.i():I(this));this.a-=7}function ne(){L(this,16,0,-9);this.a-=20}var oe=[0,7,7,10,7,11,9,13];function pe(a){this.S=this.a;Q(this,fd(this,a));this.a=this.S-oe[this.h]}var qe=[0,14,14,17,14,18,16,20];function re(a){this.S=this.a;var b=fd(this,a);a=a>>6&7;Xc(this,this.b[a]);this.b[a]=this.b[7];Q(this,b);this.a=this.S-qe[this.h]}var se=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];
function te(a){var b=ed(this,a);this.S=this.a;jd(this,a,b,this.ea);this.a=this.S-se[(this.K?8:0)+this.h]+(7!=this.f||this.h?0:2)}function ue(a){var b=dd(this,a);id(this,a,b,65535,this.ea);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}var ve=[7,13,13,17,14,18,17,21];
function we(a){var b=hd(this,a);a=a>>6&7;b&32768&&(b|=-65536);var c=this.b[a];c&32768&&(c|=-65536);b=~~(b*c);this.b[a]=b>>16&65535;this.b[a|1]=b&65535;this.w=b>>16;this.o=this.w|b;this.m=0;this.v=-32768>b||32767<b?65536:0;this.a-=23}function xe(){this.a-=5}function ye(){this.i&49152||(this.s.reset(),pb(this),this.ka&&this.ka.setData(this.b[0],!0));this.a-=667}function ze(a){if(a&8)L(this,8,0,-9);else{var b=Zc(this);a&=7;7==a?Q(this,b):(Q(this,this.b[a]),this.b[a]=b);this.a-=9}}
function Ae(){Yc(this);this.a-=13}function W(a){a&1&&(this.v=65536);a&2&&(this.m=32768);a&4&&(this.o=0);a&8&&(this.w=32768);this.a-=5}function Be(a){var b=(a&448)>>6;if(this.b[b]=this.b[b]-1&65535)Q(this,this.b[7]-((a&63)<<1)),this.a+=1;this.a-=6}function Ce(a){U(this,a,ed(this,a),Gd);this.a-=this.h?9+(this.L&&6<=this.f?1:0):(this.K?5:3)+(7==this.f?2:0)}function De(a){U(this,a,0,Id);this.a-=this.h?9:3+(7==this.f?2:0)}function Ee(){L(this,28,0,-9)}
function Fe(){this.ka&&(this.ka.ja=this.b[7],this.ka.setData(this.b[0],!0));this.g|=8;Tc(this,-2);this.a-=3}function Ge(a){U(this,a,this.b[(a>>6&7)+this.Lb],Jd);this.a-=this.h?9:3+(7==this.f?2:0)}function X(){L(this,8,0,-9)}function Oc(a){He[a>>12].call(this,a)}function Ie(a){Je[a>>6&3].call(this,a)}function Ke(a){Le[a>>6&3].call(this,a)}function Me(a){Ne[a>>6&3].call(this,a)}function Oe(a){Pe[a&15].call(this,a)}function Qe(a){Re[a&15].call(this,a)}function Se(a){Te[a>>6&3].call(this,a)}
function Ue(a){Ve[a>>6&3].call(this,a)}function We(a){Xe[a>>6&3].call(this,a)}
var He=[function(a){Ye[a>>8&15].call(this,a)},te,ie,Td,Pd,Rd,Kd,X,function(a){Ze[a>>8&15].call(this,a)},ue,je,Ud,Qd,Sd,Ce,X],Ye=[function(a){$e[a>>4&15].call(this,a)},fe,ce,Vd,Wd,ae,Xd,Zd,re,re,Ie,Ke,Me,X,X,X],Je=[function(a){jd(this,a,0,this.Ea);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,0,ud);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,1,yd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,1,wd);this.a-=this.h?9:3+(7==this.f?2:0)}],Le=[function(a){U(this,a,0,Ad);
this.a-=this.h?11:6},function(a){U(this,a,Rc(this)?1:0,kd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,Rc(this)?1:0,Gd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){a=hd(this,a);this.Ea(a);this.a-=this.h?4:3+(7==this.f?2:0)}],Ne=[function(a){U(this,a,0,Ed);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,0,Cd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,0,od);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){U(this,a,0,md);this.a-=this.h?9:3+(7==this.f?2:0)}],$e=
[function(a){af[a&15].call(this,a)},X,X,X,pe,pe,pe,pe,ze,X,Oe,Qe,De,De,De,De],af=[me,Fe,Ae,ee,ne,ye,X,X,X,X,X,X,X,X,X,X],Pe=[xe,function(){this.v=0;this.a-=5},function(){this.m=0;this.a-=5},V,function(){this.o=1;this.a-=5},V,V,V,function(){this.w=0;this.a-=5},V,V,V,V,V,V,V],Re=[xe,function(){this.v=65536;this.a-=5},function(){this.m=32768;this.a-=5},W,function(){this.o=0;this.a-=5},W,W,W,function(){this.w=32768;this.a-=5},W,W,W,W,W,W,W],Ze=[de,be,Yd,$d,ge,he,Nd,Od,le,Ee,Se,Ue,We,X,X,X],Te=[function(a){id(this,
a,0,255,this.Ea);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){T(this,a,0,vd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){T(this,a,1,zd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){T(this,a,1,xd);this.a-=this.h?9:3+(7==this.f?2:0)}],Ve=[function(a){T(this,a,0,Bd);this.a-=this.h?11:6},function(a){T(this,a,Rc(this)?1:0,ld);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){T(this,a,Rc(this)?1:0,Hd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){a=gd(this,a);this.Ea(a<<8);this.a-=this.h?4:3+
(7==this.f?2:0)}],Xe=[function(a){T(this,a,0,Fd);this.a-=this.h?9+(this.Eb&1):3+(7==this.f?2:0)},function(a){T(this,a,0,Dd);this.a-=this.h?9:3+(7==this.f?2:0)},function(a){T(this,a,0,pd);this.a-=this.h?9+(this.Eb&1):3+(7==this.f?2:0)},function(a){T(this,a,0,nd);this.a-=this.h?9:3+(7==this.f?2:0)}];function Pc(a){bf[a>>12].call(this,a)}
var bf=[function(a){cf[a>>8&15].call(this,a)},te,ie,Td,Pd,Rd,Kd,function(a){df[a>>8&15].call(this,a)},function(a){ef[a>>8&15].call(this,a)},ue,je,Ud,Qd,Sd,Ce,X],cf=[function(a){ff[a>>4&15].call(this,a)},fe,ce,Vd,Wd,ae,Xd,Zd,re,re,Ie,Ke,Me,function(a){gf[a>>6&3].call(this,a)},X,X],gf=[function(a){a=this.b[7]+((a&63)<<1)&65535;var b=this.W(a|this.sa);Q(this,this.b[5]);this.b[6]=a+2&65535;this.b[5]=b;this.a-=8},function(a){a=bd(this,a,0);this.ea(a);Xc(this,a);this.a-=11},function(a){var b=Zc(this);this.S=
this.a;this.ea(b);cd(this,a,0,b);this.a=this.S-ve[this.h]},function(a){jd(this,a,Sc(this)?65535:0,this.ea);this.a-=this.h?9:3+(7==this.f?2:0)}],ff=[function(a){hf[a&15].call(this,a)},X,X,X,pe,pe,pe,pe,ze,function(a){!(a&8)||1145>this.oa?L(this,8,0,-9):(this.i&49152||(this.i=this.i&-225|(a&7)<<5,this.g|=1,this.g&=-3),this.a-=5)},Oe,Qe,De,De,De,De],hf=[me,Fe,function(){Yc(this);this.g|=this.i&16;this.a-=13},ee,ne,ye,Ae,function(){L(this,8,0,-9)},X,X,X,X,X,X,X,X],df=[we,we,ke,ke,Ld,Ld,Md,Md,Ge,Ge,X,
X,X,X,Be,Be],ef=[de,be,Yd,$d,ge,he,Nd,Od,le,Ee,Se,Ue,We,function(a){1145>this.oa?L(this,8,0,-9):jf[a>>6&3].call(this,a)},X,X],jf=[X,function(a){a=bd(this,a,65536);this.ea(a);Xc(this,a);this.a-=11},function(a){var b=Zc(this);this.S=this.a;this.ea(b);cd(this,a,65536,b);this.a=this.S-ve[this.h]},X];
function kf(a){A.call(this,"ROM",a,0,128);this.ga=this.b=null;this.h=+a.addr;this.a=+a.size;this.i=!1;this.f=a.alias;"string"==typeof this.f&&(this.f=eval(this.f));this.g=a.file;this.m=u(this.g);if(this.g){a=this.g;var b=la(this.m);"json"!=b&&"hex"!=b&&(a=ua()+"/api/v1/dump?file="+this.g+"&format=bytes&decimal=true");var c=this;v(a,null,!0,function(a,b,f){f?(c.B("Unable to load ROM resource (error "+f+": "+a+")"),c.g=null):(Oa(c.Ha,a,b),(a=ta(a,b))?(c.b=a.N,c.ga=a.ga):c.g=null);lf(c)})}}n(kf,A);
h=kf.prototype;h.aa=function(a,b,c,d){this.s=b;this.c=c;this.C=d;lf(this)};h.ba=function(){this.ga&&(this.C&&this.C.a(this.id,this.h,this.a,this.ga),delete this.ga);return!0};h.ia=function(){return!0};
function lf(a){if(!Ta(a)){if(a.g){if(!a.b||!a.s)return;a.a||(a.a=a.b.length);if(a.b.length!=a.a)Sa(a,"ROM size ("+ka(a.b.length,8,!0)+") does not match specified size ("+ka(a.a,8,!0)+")");else{var b;a:{b=a.h;a.status(a.a+"-byte ROM at "+ja(b));if(57344<=b&&b<57344+Gb){var c={};b=(c[b]=[kf.prototype.be,kf.prototype.lf,null,null,null,a.a>>1],c);if(db(a.s,a,b)){b=a.i=!0;break a}}else if(Mb(a.s,b,a.a,oc)){for(c=0;c<a.b.length;c++)Ub(a.s,b+c,a.b[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.f?b.push(a.f):
null!=a.f&&a.f.length&&(b=a.f);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.s,g=d.a,k=[],l=d.h>>>f.h;0<g&&l<f.a.length;)k.push(f.a[l++]),g-=f.g;f=d.s;d=d.a;g=0;for(e>>>=f.h;0<d&&e<f.a.length;){l=k[g++];if(!l)break;f.a[e++]=l;d-=f.g}}a.i||delete a.b}}}H(a)}}h.be=function(a){return this.b[a-this.h]};h.lf=function(){};Ga(function(){for(var a=G(document,F,"rom"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new kf(d);E(d,c)}});
function mf(a){A.call(this,"RAM",a);this.ga=this.b=null;this.f=+a.addr;this.g=+a.size;this.Z=a.load;this.Y=a.exec;null!=this.Z&&(this.Z=+this.Z);null!=this.Y&&(this.Y=+this.Y);this.h=!1;this.a=a.file;this.i=u(this.a);if(this.a){a=this.a;var b=la(this.i);"json"!=b&&"hex"!=b&&(a=ua()+"/api/v1/dump?file="+this.a+"&format=bytes&decimal=true");var c=this;v(a,null,!0,function(a,b,f){f?(c.B("Unable to load RAM resource (error "+f+": "+a+")"),c.a=null):(Oa(c.Ha,a,b),(a=ta(a,b))?(c.b=a.N,c.ga=a.ga,null==c.Z&&
(c.Z=a.Z),null==c.Y&&(c.Y=a.Y)):c.a=null);nf(c)})}}n(mf,A);mf.prototype.aa=function(a,b,c,d){this.s=b;this.c=c;this.C=d;nf(this)};mf.prototype.ba=function(){this.ga&&(this.C&&this.C.a(this.id,this.f,this.g,this.ga),delete this.ga);return!0};mf.prototype.ia=function(){return!0};
function nf(a){if(a.s&&(!a.h&&a.g&&(Mb(a.s,a.f,a.g,Xb)?a.h=!0:a.g=0),!Ta(a))){if(!a.h)y("No RAM allocated");else if(a.a){if(!a.b||!a.s)return;of(a,a.b,a.Z,a.Y,a.f)?a.status('Loaded image "'+a.i+'"'):a.B('Error loading image "'+a.i+'"')}H(a)}}
mf.prototype.reset=function(){if(this.h){for(var a=this.s,b=this.f,c=this.g,d=b&a.f,b=b>>>a.h;0<c&&b<a.a.length;){var e=a.a[b],f=c,g=0,k,d=d||0,g=(g||0)&255;void 0===f&&(f=e.size);if(Va&&e.a)for(k=d;f--&&k<e.a.length;k++)e.a[k]=g;else for(k=d;f--&&k<e.size;k++)e.j(d,g,e.Oa+d);c-=a.g;b++;d=0}this.b&&of(this,this.b,this.Z,this.Y,this.f,!0)}};
function of(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){if(1!=m)break;if(l+6>=b.length)break;for(var l=l+2,p=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8,m=m+((p&255)+(p>>8)+(t&255)+(t>>8)),x=l,w=p-=6;0<p&&l<b.length;)m+=b[l++]&255,p--;if(p||l>=b.length)break;m+=b[l++]&255;if(m&255)break;if(w)for(;w--;)Ub(a.s,t++,b[x++]&255);else t&1?g=!0:null==d&&(d=t);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<
b.length;e++)Ub(a.s,c+e,b[e]);k=!0}if(k){if(null==d||g)I(a.c),f=!1;null!=d&&Qc(a.c,d,f)}return k}Ga(function(){for(var a=G(document,F,"ram"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new mf(d);E(d,c)}});function pf(a){A.call(this,"Keyboard",a,0,1024);H(this)}n(pf,A);pf.prototype.da=function(){return!1};pf.prototype.aa=function(a,b,c,d){this.A=a;this.c=c;this.C=d};Ga(function(){for(var a=G(document,F,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new pf(d);E(d,c)}});
function Y(a){A.call(this,"SerialPort",a,0,262144);this.D=+a.adapter;this.K=+a.baudReceive||9600;this.fa=+a.baudTransmit||9600;this.w=a.upperCase;"string"==typeof this.w&&(this.w="true"==this.w);this.g=this.i=null;this.S=+a.tabSize;this.L=+a.charBOL;this.m=0;this.v=!0;this.H=this.F=null;this.I=this.X=-1;this.o=this.a=this.b=0;this.h=[];var b=a.binding;if("console"==b)this.i="";else{var c;a=qf;b&&(void 0===c&&(c="Panel"),(c=Ra(c,this.id))&&(b=c.j[b])&&this.da(null,a,b))}this.f=this.u=this.G=null;this.exports=
{connect:this.yc,receiveData:this.Hb,receiveStatus:this.ue,setConnection:this.ye}}n(Y,A);h=Y.prototype;
h.da=function(a,b,c){var d=this;switch(b){case qf:return this.j[b]=this.g=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?q.ic:q.Jc:46==c?b=q.ic:a.ctrlKey&&c>=q.hc&&c<=q.Uc&&(b=c-(q.hc-q.Gc));b&&(a.preventDefault&&a.preventDefault(),d.Hb(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==q.Ic&&(b=q.Hc);d.Hb(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Hb(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};
h.aa=function(a,b,c,d){this.A=a;this.s=b;this.c=c;this.C=d;var e=this;this.H=ec(this.c,this.D?-1:48,4,262144);this.I=ac(this.c,function(){var a;a=-1;e.h.length&&(a=e.h.shift()&255,e.w&&97<=a&&122>a&&(a-=32),cc(e.c,e.I,1E3/Math.round(e.K/10)));0<=a&&(e.o=a,e.a&128?e.o|=49152:e.a|=128,e.a&64&&bc(c,e.H))});this.F=ec(this.c,this.D?-1:52,4,262144);this.X=ac(this.c,function(){e.b|=128;e.b&64&&bc(c,e.F)});db(b,this,rf,this.D?64832+8*(this.D-1)-65392:0);fb(b,this.reset.bind(this));H(this)};
h.yc=function(a){if(!this.f){var b=Dc(this.A,"connection");if(b){var c=b.split("->");if(2==c.length){var d=pa(c[0]);if(d!=this.Ga)return;c=pa(c[1]);if(this.f=Qa(c)){var e=this.f.exports;if(e){var f=e.connect;f&&f.call(this.f,this.v);if(this.u=e.receiveData){this.v=a;this.G=e.receiveStatus;this.status(this.Ha+"."+d+" connected to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.ba=function(a,b){if(!b)if(this.yc(this.v),!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.ia=function(a){return a?this.save():!0};h.reset=function(){sf(this)};h.save=function(){var a=new R(this);a.set(0,[]);return a.data()};h.restore=function(){return sf(this)};function sf(a){a.o=0;a.a=8192;a.b=128;a.h=[];return!0}
h.Hb=function(a){if("number"==typeof a)this.h.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.h.push(b)}else this.h=this.h.concat(a);cc(this.c,this.I,1E3/Math.round(this.K/10));return!0};h.ue=function(a){var b=this.a;this.a&=-12289;a&32&&(this.a|=8192);a&256&&(this.a|=4096);b!=this.a&&(this.a|=32768,this.a&32&&bc(this.c,this.H))};h.ye=function(a,b){return this.f?!1:(this.f=a,this.u=b,!0)};
h.Pd=function(){var a=this.a&65534;this.a&=-32769;return a};h.Ye=function(a){var b=a^this.a;this.a=this.a&-112|a&111;this.G&&b&6&&(b=0,b=this.v?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.G.call(this.f,b))};h.Od=function(){this.a&=-129;return this.o};h.Xe=function(){};h.te=function(){return this.b};h.Ef=function(a){if(this.b&128)if(a&64)bc(this.c,this.F);else{var b=this.F;b&&gc(this.c,b)}this.b=this.b&-70|a&69};h.se=function(){return 0};
h.Df=function(a){a&=255;this.u&&this.u.call(this.f,a);a&=127;if(this.g)if(13==a)this.m=0;else if(8==a)this.g.value=this.g.value.slice(0,-1),0<this.m&&this.m--;else{if(a){var b;13!=a&&10!=a&&(b=qa[a]);b=b?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.S||8,c=a-this.m%a,this.S&&(b="                                        ".slice(0,c)));this.L&&!this.m&&c&&(b=String.fromCharCode(this.L)+b);this.g.value+=b;this.g.scrollTop=this.g.scrollHeight;this.m+=c}}else if(null!=
this.i){if(10==a||1024<=this.i.length)this.V(this.i),this.i="";10!=a&&(this.i+=String.fromCharCode(a))}cc(this.c,this.X,1E3/Math.round(this.fa/10));this.b&=-129};var qf="buffer",tf={},rf=(tf[65392]=[null,null,Y.prototype.Pd,Y.prototype.Ye,"RCSR"],tf[65394]=[null,null,Y.prototype.Od,Y.prototype.Xe,"RBUF"],tf[65396]=[null,null,Y.prototype.te,Y.prototype.Ef,"XCSR"],tf[65398]=[null,null,Y.prototype.se,Y.prototype.Df,"XBUF"],tf);
Ga(function(){for(var a=G(document,F,"serial"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Y(d);E(d,c)}});function lc(a){A.call(this,"PC11",a);this.D=uf(this,a.autoMount);this.b=0;this.I=+a.baudReceive||3600;this.m=this.o=this.a=0;this.i=[];this.h=vf;this.f=wf;this.w=this.g="";this.N=this.Z=this.Y=null;this.G=-1;this.F=!Aa("Mobi")&&window&&"FileReader"in window;this.u=null;this.H=-1;this.v=null}n(lc,A);
function uf(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=lc.prototype;
h.da=function(a,b,c){var d=this,e=wf;switch(b){case "listTapes":return this.j[b]=c,c.onchange=function(){var a=d.j.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){y("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.j[b]=c,!0;case "readTape":e=xf;case "loadTape":return e||(e=yf),this.j[b]=c,c.onclick=
function(){var a=d.j.listTapes;a&&zf(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.F){c.parentNode.removeChild(c);break}this.j[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;zf(d,u(b,!0),b,yf,a)}return!1};return!0;case Af:return this.j[b]=c,!0}return!1};
h.aa=function(a,b,c,d){this.A=a;this.s=b;this.c=c;this.C=d;this.v=Bf(a);var e=this;if(a=uf(this,Dc(this.A,"autoMount")))for(var f in a)"PTR"==f&&(this.D[f]=a[f]);this.u=ec(this.c,56,4,4096);this.H=ac(this.c,function(){1==(e.a&32769)&&!(e.a&128)&&e.m<e.i.length&&(e.o=e.i[e.m++]&255,Cf(e,e.m/e.i.length*100),e.a|=128,e.a&=-2049,e.a&64&&bc(e.c,e.u))});db(b,this,Df);fb(b,this.reset.bind(this));Ef(this,"None",vf,!0);this.F&&Ef(this,"Local Tape",Ff);Ef(this,"Remote Tape",Gf);Hf(this)||H(this)};
h.ba=function(a,b){if(!b)if(!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.ia=function(a){return a?this.save():!0};h.reset=function(){this.a&=-2241;this.o=0};function Hf(a){a.b=0;var b=a.D.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.j.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=u(c,!0)}c&&b?If(a,b,c,yf,!0):Jf(a)}return!!a.b}
function zf(a,b,c,d,e){if(c)if(c==Ff)a.B('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==Gf){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"');a.h=Gf}else a.h=c;If(a,b,c,d,!1,e)}else Kf(a,!1)}function If(a,b,c,d,e,f){var g=-1;if(a.g.toLowerCase()!=c.toLowerCase()||a.f!=d)g++,Kf(a,!0),a.l.Pa?a.B("PC11 busy"):(e&&a.b++,Lf(a,b,c,d,f)?g++:a.l.Pa=!0);g&&Mf(a,a.w,a.g,a.f,a.N,a.Z,a.Y)}
function Lf(a,b,c,d,e){var f=c;if(e){var g=new FileReader;g.onload=function(){var e=g.result;e&&(e=new Uint8Array(e,0,e.byteLength),Mf(a,b,c,d,e),a.h=Ff);Jf(a)};g.readAsArrayBuffer(e);return!0}0>c.indexOf("/api/v1/dump")&&(e=la(c),f="json"==e||"gz"==e?encodeURI(c):ua()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!v(f,null,!0,function(e,f,g){var k=0>g&&!!a.A&&!a.A.l.R;g?a.B('Unable to load tape "'+b+'" (error '+g+": "+e+")",k):(Oa(a.Ha,e,f),(e=ta(e,f))&&Mf(a,b,c,d,e.N,e.Z,e.Y));
a.l.Pa=!1;a.b&&(a.b--,a.b||H(a));Jf(a)})}function Ef(a,b,c,d){if((a=a.j.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}function Jf(a){var b=a.j.listTapes;if(b&&b.options){a=a.h||a.g;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}
function Cf(a,b){b|=0;if(b!==a.G){var c=a.j[Af];c&&(c=(c=G(c,Nf))&&c[0])&&c.style&&(c.style.width=b+"%");a.G=b}}function Mf(a,b,c,d,e,f,g){a.w=b;a.g=c;a.f=d;a.N=e;a.Z=f;a.Y=g;d==xf?a.v&&of(a.v,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.B('No valid memory address for tape "'+b+'"'):(a.m=0,a.i=e,a.status('Loaded tape "'+b+'"'),Cf(a,0))}function Kf(a,b){if(a.g||!1===b)a.w="",a.g="",b||(a.f&&a.status(a.f==yf?"tape detached":"tape unloaded"),a.h=vf,a.f=wf,Jf(a))}h.save=function(){return(new R(this)).data()};
h.restore=function(){return!0};h.Id=function(){return this.a&65534};h.Re=function(a){a&1&&(this.a&32768?(a&=-2,this.a&64&&bc(this.c,this.u)):(this.a&=-129,this.a|=2048,this.o=0,cc(this.c,this.H,1E3/Math.round(this.I/10))));this.a=this.a&-66|a&65};h.Hd=function(){this.a&=-129;this.a|=2048;return this.o};h.Qe=function(){};
var vf="",Ff="?",Gf="??",wf=0,yf=1,xf=2,Af="readProgress",Nf="pcjs-progress-bar",Of={},Df=(Of[65384]=[null,null,lc.prototype.Id,lc.prototype.Re,"PRS"],Of[65386]=[null,null,lc.prototype.Hd,lc.prototype.Qe,"PRB"],Of);
function Pf(a,b,c){A.call(this,"Disk",{id:a.Ha+".disk"+ka(++Qf,4)},0,8192);this.controller=a;this.A=a.A;this.C=a.C;this.h=b;this.ma=b.name;this.ca=this.Ib="";this.yb=b.yb;this.J=this.O=this.M=this.U=this.mode=0;this.a=[];this.f=null;this.g=!1;Rf(this,c,b.J,b.O,b.M,b.U);this.b=this.i=null;H(this)}n(Pf,A);h=Pf.prototype;h.aa=function(a,b,c,d){this.C=d};
function Rf(a,b,c,d,e,f){a.mode=b;a.J=c;a.O=d;a.M=e;a.U=f;a.a=[];if("preload"!=a.mode){b=Array(a.J);for(c=0;c<b.length;c++){d=Array(a.O);for(e=0;e<d.length;e++){f=Array(a.M);for(var g=1;g<=f.length;g++)f[g-1]=Sf(null,c,e,g,a.U,0);d[e]=f}b[c]=d}a.a=b}a.f=null}
function Tf(a,b,c,d,e){var f=c;if(a.b)return!0;a.ma=b;a.ca=c;a.Ib=u(c);a.b=e;a.i=a.controller;if(d){var g=new FileReader;g.onload=function(){var b=g.result,c,d=b?b.byteLength:0,e=ia[d];if(e){a.J=e[0];a.O=e[1];a.M=e[2];a.U=e[3]||512;c=a.U>>2;var f=e=0,b=new DataView(b,0,d);a.a=Array(a.J);for(d=0;d<a.a.length;d++)for(var x=a.a[d]=Array(a.O),w=0;w<x.length;w++)for(var Z=x[w]=Array(a.M),Da=0;Da<Z.length;Da++){for(var dc=Sf(null,d,w,Da+1,a.U,0),Qg=dc.data,xc=0;xc<c;xc++,f+=4)var Rg=Qg[xc]=b.getInt32(f,
!0),e=e+Rg&-1;dc.ha=c;Z[Da]=dc}a.f=e;c=a}else a.B("Unrecognized disk format ("+d+" bytes)");a.b&&(a.b.call(a.controller,a.h,c,a.ma,a.ca),a.b=null)};g.readAsArrayBuffer(d);return!0}0>c.indexOf("/api/v1/dump")&&(b=la(c),"json"==b||"gz"==b?f=encodeURI(c):(d="path",e="&mbhd=10",!c.indexOf("http:")||!c.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(b)?(d="disk",e="&mbhd=0"):ma(c,"/")&&(d="dir"),f=ua()+"/api/v1/dump?"+d+"="+encodeURIComponent(c)+(a.yb?"":e)+"&format=json"));return!!v(f,
null,!0,function(b,c,d){Uf(a,b,c,d)})}
function Uf(a,b,c,d){var e=null,f=0>d&&!!a.A&&!a.A.l.R;a.g=!1;if(d)a.controller.B('Unable to load disk "'+a.ma+'" (error '+d+": "+b+")",f);else{Oa(a.controller.Ha,b,c);try{if(0<u(a.Ib,!0).toLowerCase().indexOf("-readonly"))a.g=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.g=!0)}var k;"<"==c.substr(0,1)?k=["Missing disk image: "+a.ma]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+
c+")");if(k.length)if(1==k.length)y(k[0]);else{a.J=k.length;a.O=k[0].length;a.M=k[0][0].length;var l=k[0][0][0];a.U=l&&l.length||512;for(d=c=0;d<a.J;d++)for(f=0;f<a.O;f++)for(g=0;g<a.M;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);var m=m>>2,p=l.pattern;void 0===p&&(p=l.pattern=0);var t=l.data;if(void 0===t){var x=l.bytes;if(void 0!==x&&x.length){for(var w=m<<2,Z=x.length;Z<w;Z++)x[Z]=p;Vf(l,x)}else t=[],p=l.pattern=p|p<<8|p<<16|p<<24,l.data=t;delete l.bytes}Sf(l,d,f);for(w=0;w<
t.length;w++)c=c+t[w]&-1}a.a=k;a.f=c;e=a}else y("Empty disk image: "+a.ma)}catch(Da){y("Disk image error ("+b+"): "+Da.message)}}a.b&&(a.b.call(a.i,a.h,e,a.ma,a.ca),a.b=null)}function Sf(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.Fg=b;a.Gg=c;a.qa=a.ha=0;a.wa=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.h,g=this.a[a];if(g){var k=g[b];if(!k&&f.Xc&&b<f.O)for(k=g[b]=Array(f.uc),g=0;g<k.length;g++)k[g]=Sf(null,a,b,g+1,f.Yb,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.Xc&&9==f.Wb&&(d=k[g]=Sf(null,a,b,f.Wb,f.Yb,0))}}e&&e(d,!1);return d};function Vf(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length)var c=a.data,d=b>>2,c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255;return c};h.write=function(a,b,c){if(this.g)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.ha?f<a.qa?(a.ha+=a.qa-f,a.qa=f):f>=a.qa+a.ha&&(a.ha+=f-(a.qa+a.ha)+1):(a.qa=f,a.ha=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function Wf(a,b){var c=a.O*a.M,d=b/c|0;return d<a.J?(b%=c,a.seek(d,b/a.M|0,b%a.M+1)):null}function Xf(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}function Yf(a){for(var b="",c=0,d;d=Wf(a,c++);)for(var e=0,f=d.length;e<f;e++)b+=String.fromCharCode(Xf(a,d,e));return btoa(b)}
h.save=function(){var a=0,b=[];b[a++]=[this.ca,this.f,this.J,this.O,this.M,this.U];if(!this.g)for(var c=this.a,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.ha){for(var k=[],l=0,m=g.qa,p=g.qa+g.ha;m<p;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.qa,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.a.length&&6<=e.length?Rf(this,"local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.f&&e[1]!=this.f&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.f+")",b=-2));for(this.a.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.a.length||l>=this.a[k].length||m>=this.a[k][l].length){c="sector (CHS="+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.g){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.a[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.qa=e;for(k.ha=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.B("Unable to restore disk '"+this.ma+": "+c);return b};
h.toJSON=function(){var a;a=0;for(var b;b=Wf(this,a++);)Zf(b);a=JSON.stringify(this.a,function(a,b){if("file"!=a)return b});a=a.replace(/,"length":512/gm,"").replace(/,"pattern":0/gm,"");a=a.replace(/"(sector|length|data|pattern)":/gm,"$1:");a=a.replace(/,"[^"]*":([0-9]+|true|false)/gm,"");a=a.replace(/(sector|length|data|pattern):/gm,'"$1":');return a=a.replace(/([\]}]),/gm,"$1,\n")};
function Zf(a){var b=a.data,c=b.length;if(c<<2==a.length){for(var d=c-1,e=b[d],f=0;d--&&b[d]===e;)f++;f++&&(b.length=c-f,a.pattern=e)}}var Qf=0;function P(a){A.call(this,"RK11",a,0,65536);this.o=$f(this,a.autoMount);this.m=0;this.f=Array(8);this.u=!Aa("Mobi")&&window&&"FileReader"in window;this.Da=null;this.w=this.b=this.a=this.i=this.h=this.g=this.v=0}n(P,A);
function $f(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=P.prototype;
h.da=function(a,b,c){var d=this;switch(b){case "listDisks":return this.j[b]=c,c.onchange=function(){var a=d.j.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){y("RK11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.j[b]=c,c.onchange=function(){var a=r(c.value);null!=a&&ag(d,a)},
!0;case "loadDisk":return this.j[b]=c,c.onclick=function(){var a=d.j.listDisks;a&&a.options&&bg(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.j[b]=c,c.onclick=function(){var a,b=d.j.listDrives,b=b&&r(b.value);null==b||0>b||b>=d.f.length||!(a=d.f[b])?d.B("Unable to boot the selected drive"):a.T?(Qc(d.c,0,!0),(a=d.sc(a,0,0,0,512,0,2))&&d.B("Unable to read the boot sector ("+a+")")):d.B("Load a disk into the drive first")},!0;case "saveDisk":if(!this.u){c.parentNode.removeChild(c);
break}this.j[b]=c;c.onclick=function(){var a=d.j.listDrives;a&&a.options&&d.f&&((a=d.f[r(a.value)||0])?(a=a.T)?(a=Ea(Yf(a),a.Ib.replace(".json",".img")),z(a)):d.B("No disk loaded in drive."):d.B("No disk drive selected."))};return!0;case "mountDisk":if(this.u)return this.j[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;bg(d,u(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.aa=function(a,b,c,d){this.A=a;this.s=b;this.c=c;this.C=d;if(a=$f(this,Dc(this.A,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.o[e]=a[e]);cg(this);this.Da=ec(this.c,144,5,65536);db(b,this,dg);fb(b,this.reset.bind(this));eg(this,"None",fg,!0);this.u&&eg(this,"Local Disk",gg);eg(this,"Remote Disk",hg);ig(this)||H(this)};
h.ba=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.A.i){for(a=0;a<this.f.length;a++)jg(this,a,!0);ig(this,!0)}}else if(!this.restore(a))return!1;if(a=this.j.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;8>b;b++){var c=document.createElement("option");c.value=b;c.text="RK"+b;a.appendChild(c)}a.value="0";ag(this,0)}}return!0};h.ia=function(a){return a?this.save():!0};h.reset=function(){cg(this)};h.save=function(){return(new R(this)).data()};
h.restore=function(a){return cg(this,a[0])};function ig(a,b){b||(a.m=0);for(var c in a.o){var d=a.o[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.j.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=u(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.f.length)){!kg(a,g,f,e,!0)&&b&&H(a,!1);continue}a.B("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.m}
function bg(a,b,c,d){var e=a.j.listDrives,e=e&&r(e.value);if(void 0===e||0>e||e>=a.f.length)a.B("Unable to load the selected drive");else if(c)if(c==gg)a.B('Use "Choose File" and "Mount" to select and load a local disk.');else{if(c==hg){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"')}kg(a,e,b,c,!1,d)}else jg(a,e)}
function kg(a,b,c,d,e,f){var g=-1,k=a.f[b];k.ca.toLowerCase()!=d.toLowerCase()&&(g++,jg(a,b,!0),k.Ra?a.B("RK11 busy"):(k.Ra=!0,e&&(k.Qa=!0,a.m++),k.xa=!!f,Tf(new Pf(a,k,"preload"),c,d,f,a.Mc)&&g++));return g}h.Mc=function(a,b,c,d,e){a.Ra=!1;b&&(b.J>a.J||b.O>a.O)&&(this.B('Disk "'+c+'" too large for drive '+("RK"+a.Sa)),b=null);b?(a.T=b,a.ma=c,a.ca=d,this.B('Loaded disk "'+c+'" in drive '+("RK"+a.Sa),a.Qa||e),this.A&&Kc(this.A)):a.xa=!1;a.Qa&&(a.Qa=!1,--this.m||H(this));ag(this,a.Sa)};
function eg(a,b,c,d){if((a=a.j.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function ag(a,b){if(0<=b&&b<a.f.length){var c=a.f[b],d=a.j.listDisks;a=a.j.listDrives;if(d&&a&&d.options&&a.options&&(a=r(a.value),c=c.xa?gg:c.ca,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function jg(a,b,c){var d=a.f[b];if(d.T||!1===c)d.ma="",d.ca="",d.T=null,d.xa=!1,c||(a.B("Drive RK"+b+" unloaded",c),ag(a,b))}
function cg(a,b){var c=0;b||(b=[]);a.w=b[c++]||2368;a.b=b[c++]||0;a.a=b[c++]||128;a.i=b[c++]||0;a.h=b[c++]||0;a.g=b[c++]||0;a.v=b[c]||0;for(b=0;b<a.f.length;b++){var d=a.f[b];void 0===d&&(d=a.f[b]={});c=a;d.Sa=b;d.name=c.Ga;d.Ra=d.xa=!1;d.J=203;d.O=2;d.M=12;d.U=512;d.yb=!0;d.Yc=0;d.Wc=0;d.Wb=1;d.uc=d.M;d.Yb=d.U;d.ed=0;d.we=null;d.T||(d.ca="");d.status=2368}return!0}
h.sc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.T;var p=null,t;a||(m=128,e=0);for(;e;){if(!p){if(b>=a.J){m=64;break}p=a.seek(b,c,d+1);if(!p){m=4096;break}t=0;++d>=a.M&&(d=0,++c>=a.O&&(c=0,++b))}var x,w;if(0>(x=a.read(p,t++))||0>(w=a.read(p,t++))){m=32;break}if(!k&&(yb(this.s,$c(this.c,f),x|w<<8),$b(this.s))){m=1024;break}t>=a.U&&(p=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Nc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.T;var p=null,t;a||(m=128,e=0);for(;e;){var x=Ab(this.s,$c(this.c,f));if($b(this.s)){m=1024;break}if(!p){if(b>=a.J){m=64;break}p=a.seek(b,c,d+1,!0);if(!p){m=4096;break}t=0;++d>=a.M&&(d=0,++c>=a.O&&(c=0,++b))}if(k){var w,Z;if(0>(w=a.read(p,t++))||0>(Z=a.read(p,t++))){m=32;break}if(x!=(w|Z<<8)){m=1;break}}else if(!a.write(p,t++,x&255)||!a.write(p,t++,x>>8)){m=32;break}t>=a.U&&(p=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Lc=function(a,b,c,d,e,f){this.h=f&65535;this.a=this.a&-49|f>>12&48;this.i=65536-e&65535;this.g=this.g&-16|d&15;this.b|=a;lg(this);return!0};function lg(a){a.a&=-32769;a.b&&(a.b|=32768,a.a|=32768,a.b&32736&&(a.a|=16384))}h.Ud=function(){return this.w};h.cf=function(){};h.Vd=function(){return this.b};h.df=function(){};h.Rd=function(){return this.a&61438};
h.$e=function(a){this.a=this.a&-3968|a&3967;if(this.a&1){a=!0;var b,c,d=(this.g&57344)>>13,e=this.f[d],f,g,k,l,m,p;this.a&=-8321;this.b&=-4;switch(c=this.a&14){case 0:this.b=this.g=0;this.a=128;break;case 10:case 4:b=this.sc;case 6:case 2:b||(b=this.Nc);f=(this.g&8160)>>5;g=(this.g&16)>>4;k=this.g&15;l=65536-this.i&65535;m=(this.a&48)<<12|this.h;p=this.a&2048?0:2;if(f>=e.J){this.b|=64;break}if(k>=e.M){this.b|=32;break}a=b.call(this,e,f,g,k,l,m,p,6<=c,this.Lc.bind(this));break;case 8:f=(this.g&8160)>>
5;f<e.J?this.a|=8192:this.b|=64;break;case 12:this.b=this.g=0,this.a=8320}this.w=e.status|(e.T?128:0)|d<<13|this.g&15;lg(this);a&&(this.a&=-2,this.a|=128,this.a&64&&bc(this.c,this.Da))}};h.Wd=function(){return this.i};h.ef=function(a){this.i=a};h.Qd=function(){return this.h};h.Ze=function(a){this.h=a};h.Sd=function(){return this.g};h.af=function(a){this.g=a};h.Td=function(){return this.v};h.bf=function(a){this.v=a};
var fg="",gg="?",hg="??",mg={},dg=(mg[65280]=[null,null,P.prototype.Ud,P.prototype.cf,"RKDS"],mg[65282]=[null,null,P.prototype.Vd,P.prototype.df,"RKER"],mg[65284]=[null,null,P.prototype.Rd,P.prototype.$e,"RKCS"],mg[65286]=[null,null,P.prototype.Wd,P.prototype.ef,"RKWC"],mg[65288]=[null,null,P.prototype.Qd,P.prototype.Ze,"RKBA"],mg[65290]=[null,null,P.prototype.Sd,P.prototype.af,"RKDA"],mg[65294]=[null,null,P.prototype.Td,P.prototype.bf,"RKDB"],mg);
function O(a){A.call(this,"RL11",a,0,131072);this.u=ng(this,a.autoMount);this.o=0;this.b=Array(4);this.v=!Aa("Mobi")&&window&&"FileReader"in window;this.Da=null;this.a=this.m=this.f=this.g=this.i=this.h=0}n(O,A);function ng(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=O.prototype;
h.da=function(a,b,c){var d=this;switch(b){case "listDisks":return this.j[b]=c,c.onchange=function(){var a=d.j.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){y("RL11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.j[b]=c,c.onchange=function(){var a=r(c.value);null!=a&&og(d,a)},
!0;case "loadDisk":return this.j[b]=c,c.onclick=function(){var a=d.j.listDisks;a&&a.options&&pg(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.j[b]=c,c.onclick=function(){var a,b=d.j.listDrives,b=b&&r(b.value);null==b||0>b||b>=d.b.length||!(a=d.b[b])?d.B("Unable to boot the selected drive"):a.T?(Qc(d.c,0,!0),(a=d.tc(a,0,0,0,512,0))&&d.B("Unable to read the boot sector ("+a+")")):d.B("Load a disk into the drive first")},!0;case "saveDisk":if(!this.v){c.parentNode.removeChild(c);
break}this.j[b]=c;c.onclick=function(){var a=d.j.listDrives;a&&a.options&&d.b&&((a=d.b[r(a.value)||0])?(a=a.T)?(a=Ea(Yf(a),a.Ib.replace(".json",".img")),z(a)):d.B("No disk loaded in drive."):d.B("No disk drive selected."))};return!0;case "mountDisk":if(this.v)return this.j[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;pg(d,u(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.aa=function(a,b,c,d){this.A=a;this.s=b;this.c=c;this.C=d;if(a=ng(this,Dc(this.A,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.u[e]=a[e]);qg(this);this.Da=ec(this.c,112,5,131072);db(b,this,rg);fb(b,this.reset.bind(this));sg(this,"None",tg,!0);this.v&&sg(this,"Local Disk",ug);sg(this,"Remote Disk",vg);wg(this)||H(this)};
h.ba=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.A.i){for(a=0;a<this.b.length;a++)xg(this,a,!0);wg(this,!0)}}else if(!this.restore(a))return!1;if(a=this.j.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;4>b;b++){var c=document.createElement("option");c.value=b;c.text="RL"+b;a.appendChild(c)}a.value="0";og(this,0)}}return!0};h.ia=function(a){return a?this.save():!0};h.reset=function(){qg(this)};h.save=function(){return(new R(this)).data()};
h.restore=function(a){return qg(this,a[0])};function wg(a,b){b||(a.o=0);for(var c in a.u){var d=a.u[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.j.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=u(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.b.length)){!yg(a,g,f,e,!0)&&b&&H(a,!1);continue}a.B("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.o}
function pg(a,b,c,d){var e=a.j.listDrives,e=e&&r(e.value);if(void 0===e||0>e||e>=a.b.length)a.B("Unable to load the selected drive");else if(c)if(c==ug)a.B('Use "Choose File" and "Mount" to select and load a local disk.');else{if(c==vg){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=u(c);a.status("Attempting to load "+c+' as "'+b+'"')}yg(a,e,b,c,!1,d)}else xg(a,e)}
function yg(a,b,c,d,e,f){var g=-1,k=a.b[b];k.ca.toLowerCase()!=d.toLowerCase()&&(g++,xg(a,b,!0),k.Ra?a.B("RL11 busy"):(k.Ra=!0,e&&(k.Qa=!0,a.o++),k.xa=!!f,Tf(new Pf(a,k,"preload"),c,d,f,a.Pc)&&g++));return g}h.Pc=function(a,b,c,d,e){a.Ra=!1;b&&(b.J>a.J||b.O>a.O)&&(this.B('Disk "'+c+'" too large for drive '+("RL"+a.Sa)),b=null);b?(a.T=b,a.ma=c,a.ca=d,this.B('Loaded disk "'+c+'" in drive '+("RL"+a.Sa),a.Qa||e),this.A&&Kc(this.A)):a.xa=!1;a.Qa&&(a.Qa=!1,--this.o||H(this));og(this,a.Sa)};
function sg(a,b,c,d){if((a=a.j.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function og(a,b){if(0<=b&&b<a.b.length){var c=a.b[b],d=a.j.listDisks;a=a.j.listDrives;if(d&&a&&d.options&&a.options&&(a=r(a.value),c=c.xa?ug:c.ca,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function xg(a,b,c){var d=a.b[b];if(d.T||!1===c)d.ma="",d.ca="",d.T=null,d.xa=!1,c||(a.B("Drive RL"+b+" unloaded",c),og(a,b))}
function qg(a,b){var c=0;b||(b=[]);a.a=b[c++]||129;a.m=b[c++]||0;a.f=b[c++]||0;a.g=b[c++]||0;a.i=b[c++]||0;a.h=b[c]||0;for(b=0;b<a.b.length;b++){var d=a.b[b];void 0===d&&(d=a.b[b]={});c=a;d.Sa=b;d.name=c.Ga;d.Ra=d.xa=!1;d.J=512;d.O=2;d.M=40;d.U=256;d.yb=!0;d.Yc=0;d.Wc=0;d.Wb=1;d.uc=d.M;d.Yb=d.U;d.ed=0;d.we=null;d.T||(d.ca="");d.status=29}return!0}
h.tc=function(a,b,c,d,e,f,g){var k=0;a=a.T;var l=null,m;a||(k=5120,e=0);for(;e;){if(!l){l=a.seek(b,c,d+1);if(!l){k=5120;break}m=0}var p,t;if(0>(p=a.read(l,m++))||0>(t=a.read(l,m++))){k=5120;break}yb(this.s,$c(this.c,f),p|t<<8);if($b(this.s)){k=8192;break}f+=2;e--;if(m>=a.U&&(l=null,++d>=a.M&&(d=0,++c>=a.O&&(c=0,++b>=a.J)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Qc=function(a,b,c,d,e,f,g){var k=0;a=a.T;var l=null,m;a||(k=5120,e=0);for(;e;){var p=Ab(this.s,$c(this.c,f));if($b(this.s)){k=8192;break}f+=2;e--;if(!l){l=a.seek(b,c,d+1,!0);if(!l){k=5120;break}m=0}if(!a.write(l,m++,p&255)||!a.write(l,m++,p>>8)){k=5120;break}if(m>=a.U&&(l=null,++d>=a.M&&(d=0,++c>=a.O&&(c=0,++b>=a.J)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Oc=function(a,b,c,d,e,f){this.m=f&65535;this.a=this.a&-49|f>>12&48;this.h=f>>16&63;this.g=this.f=b<<7|(c?64:0)|d&63;this.i=65536-e&65535;a&&(this.a=this.a|a|32768);return!0};h.Zd=function(){return this.a&65535};
h.hf=function(a){this.a=this.a&-1023|a&1022;this.h=this.h&60|(a&48)>>4;if(!(this.a&128)){a=!0;var b,c=this.b[(this.a&768)>>8],d=c.T,e,f,g;this.a&=-2;switch(this.a&14){case 4:this.i&8&&(this.a&=63);this.i=c.status|this.g&64|(d&&512==d.J?128:0);break;case 6:1==(this.f&3)&&(b=this.f&65408,c=(this.f&16)<<2,this.g=this.f&4?this.g+b:this.g-b,this.f=this.g=this.g&65408|c);break;case 8:this.i=this.g;break;case 12:b=this.tc;case 10:b||(b=this.Qc),e=this.f>>7,f=this.f&64?1:0,g=this.f&63,!d||e>=d.J||g>=d.M?
this.a|=37888:(a=65536-this.i&65535,d=(this.h&63)<<16|this.m,a=b.call(this,c,e,f,g,a,d,this.Oc.bind(this)))}a&&(this.a|=129,this.a&64&&bc(this.c,this.Da))}};h.Xd=function(){return this.m};h.ff=function(a){this.m=a&65534};h.$d=function(){return this.f};h.jf=function(a){this.f=a};h.ae=function(){return this.i};h.kf=function(a){this.i=a};h.Yd=function(){return this.h};h.gf=function(a){this.h=a&63;this.a=this.a&-49|(this.h&3)<<4};
var tg="",ug="?",vg="??",zg={},rg=(zg[63744]=[null,null,O.prototype.Zd,O.prototype.hf,"RLCS"],zg[63746]=[null,null,O.prototype.Xd,O.prototype.ff,"RLBA"],zg[63748]=[null,null,O.prototype.$d,O.prototype.jf,"RLDA"],zg[63750]=[null,null,O.prototype.ae,O.prototype.kf,"RLMP"],zg[63752]=[null,null,O.prototype.Yd,O.prototype.gf,"RLBE"],zg);
function Ag(a,b,c){A.call(this,"Computer",a,0,33554432);this.l.R=!1;this.F=null;Bg(this,b);this.w=Dc(this,"autoPower",a,6);this.g=0;this.K=+a.busWidth||+a.buswidth;this.a=Cg;this.u=null;this.H=this.i=this.D=this.m=this.I=!1;this.h=null;this.L=Dc(this,"url")||"";(Math.random()+.1).toString(36);this.b=Dg(this);if(this.c=Ra("CPU",this.id)){this.C=Ra("Debugger",this.id);this.s=new Fb({id:this.Ha+".bus",busWidth:this.K},this.c,this.C);var d,e=C(this.id);if((this.f=Ra("Panel",this.id))&&this.f.ab)for(b=
0;b<e.length;b++)d=e[b],d.B=this.f.B,d.V=this.f.V,d.ab=this.f.ab;this.V(Wa+" v1.32.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.V("Portions adapted from the PDP-11/70 Emulator v1.4 by Paul Nankervis <paulnank@hotmail.com>");for(b=0;b<e.length;b++)d=e[b],d.aa&&d.aa(this,this.s,this.c,this.C);b=null;d=a.resume;void 0!==d&&(1<d.length?b=this.o=d:this.a=parseInt(d,10));var f;if(a=Dc(this,"state")||(f=!0,a.state))b=
this.G=a,f||(this.m=!0,this.a=Cg),this.a&&(this.v=new R(this,"1.32.0"),Eg(this.v)?b=null:delete this.v);!b&&this.a&&(b=Fg(this))&&(this.m=!0);if(b){var g=this;v(b,null,!0,function(a,b,c){c?(g.o=null,g.m=!1,g.B("Unable to load machine state from server (error "+c+(b?": "+pa(b):"")+")")):(g.u=b,g.I=!0);H(g)})}else H(this);this.j.power||(this.w=!0);!c&&this.w&&Gg(this,this.sb)}else y("Unable to find CPU component")}n(Ag,A);
function Bg(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){y(d.message+" ("+c+")")}}a.F=b}function Dc(a,b,c,d){var e=b.toLowerCase(),e=Ba(b)||Ba(e);void 0===e&&a.F&&(e=a.F[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);if("string"==typeof e&&d)switch(d){case 4:e=+e;break;case 6:e="true"==e}return e}
function Gg(a,b,c){for(var d=C(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!Ta(f)){Ta(f,function(){Gg(a,b,c)});return}}b.call(a,c)}function Hg(a,b){var c=new R(a,"1.32.0",Ig);if(Eg(c)&&Jg(c)){var d=c.get(Kg),e=b?b.get(Kg):"unknown";d!=e&&(a.B("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}h=Ag.prototype;
h.sb=function(a){void 0===a&&(a=this.a||(this.u?Lg:Cg));if(!this.g){this.g++;var b=!1,c=!1;this.D=!1;var d=this.v||new R(this,"1.32.0");if(a==Mg)b=!0;else if(a>Cg){if(Eg(d,this.u)){this.h=new R(this,"1.32.0",Ng);Eg(this.h)&&(Og(this,d),a=Pg,Sg(this.h));this.h.set(Kg,sa());Tg(this.h);var e=this.a&&!this.m;if(a==Lg||va("Click OK to restore the previous "+Wa+" machine state, or CANCEL to reset the machine.")){if(c=Jg(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?Eg(d,g):("error"==f&&"no machine state"!=
g?(this.B("Error: "+g),"unable to verify user"==g&&(za(Ug,""),this.b=null)):this.V(f+": "+g),Sg(d),Eg(d)?(c=Jg(d),e=!0):c=!1))}e&&Hg(this,c?d:null)}else a==Pg&&d.clear()}else Hg(this);delete this.u;delete this.v}e=C(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.c&&(c=Vg(this,g,d,b,c));b=[d,a,c];a!=Mg?Gg(this,this.vc,b):this.vc(b)}};
function Vg(a,b,c,d,e){if(!b.l.R){b.l.R=!0;if(b.ba){var f=null;e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,"."))));"string"===typeof f&&(f=null);!b.ba(f,d)&&f&&(y("Unable to restore state for "+b.type),a.G&&!a.I?(c.clear(),a.a=Cg,window&&window.location.reload()):a.D=!0,b.ba(null),e=!1)}if(!d&&b.mc)for(a=b.mc.split("|"),c=0;c<a.length;c++)b.status(a[c])}return e}
h.vc=function(a){var b=a[0],c=0>a[1];a=a[2];this.H=!0;this.l.R=!0;var d=this.j.power;d&&(d.textContent="Shutdown");this.c&&(Vg(this,this.c,b,c,a),vb(this),this.c.la());this.D&&(Og(this,b),b.clear());!c&&this.h&&(this.h.clear(),delete this.h);this.g=0};
function Og(a,b){if(va("There may be a problem with your "+Wa+" machine.\n\nTo help us diagnose it, click OK to send this "+Wa+" machine state to http://www.pcjs.org.")){var c=a.L;a=a.b||"";b=b.toString();var d={};d.app=Wa;d.ver="1.32.0";d.url=c;d.user=a;d.type="bug";d.data=b;v("http://www.pcjs.org/api/v1/report",d,!0)}}
function Wg(a,b,c){var d,e="none";if(a.g)return null;a.g--;var f=new R(a,"1.32.0"),g=new R(a,"1.32.0",Ig),k=sa();g.set(Kg,k);f.set(Kg,k);f.set(Xg,"1.32.0");f.set(Yg,window?window.location.href:null);f.set(Zg,window?window.navigator.userAgent:"");a.c&&a.c.ia&&(c&&I(a.c),d=a.c.ia(b,c),"object"===typeof d&&f.set(a.c.id,d),c&&(a.c.l.R=!1,!1===d&&(e=null)));for(var k=C(a.id),l=0;l<k.length;l++){var m=k[l];m.l.R&&(m.ia&&(d=m.ia(b,c),"object"===typeof d&&f.set(m.id,d)),c&&(m.l.R=!1,!1===d&&(e=null)))}e&&
(c?(k=d=!1,b?(a.b&&$g(a,a.b,f.toString()),Tg(g)&&Tg(f)||(e=null,d=k=!0)):a.a&&(d=!0,k=a.a==ah),d&&f.clear(k)):e=f.toString());c&&(a.l.R=!1,b=a.j.power)&&(b.textContent="Power");a.g=0;return e}h.reset=function(){this.s&&this.s.reset&&this.s.reset();this.c&&this.c.reset&&this.c.reset();for(var a=C(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.s&&c!==this.c&&c.reset&&c.reset()}vb(this,-1)};
h.start=function(a,b){for(var c=C(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}vb(this,-1)};h.stop=function(a,b){for(var c=C(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}vb(this,-1)};
function vb(a,b){if(a.c){var c=a.c,d=b||0,e=c.j.speed;e&&(0>=d||30<=(c.ec+=d))&&(e.textContent=c.l.P?c.Ia.toFixed(2)+"Mhz":"Stopped",c.ec=0)}if(a.f&&(a=a.f,b=b||0,a.m)){c=a.c.l.P;d=!!(a.c.g&8);if(0>=b||60<=(a.i+=b)){for(e=0;e<a.c.b.length;e++)lb(a,"R"+e,a.c.b[e]);e=jc(a.c);lb(a,"PS",e);lb(a,"NF",e&8?1:0,1);lb(a,"ZF",e&4?1:0,1);lb(a,"VF",e&2?1:0,1);lb(a,"CF",e&1?1:0,1);a.i=0}Bb(a,0<b&&c&&!d?a.c.Fa:a.ja);xb(a,a.h);b=a.c;b=b.Ja?b.pa&16?1:2:4;Db(a,"B22",b&1);Db(a,"B18",b&2);Db(a,"B16",b&4)}}
h.da=function(a,b,c){var d=this;switch(b){case "power":return this.j[b]=c,c.onclick=function(){d.g||(d.l.R?Wg(d,!1,!0):Gg(d,d.sb))},!0;case "reset":return this.j[b]=c,c.onclick=function(){if(d.l.R&&!d.g)if(d.a&&!d.o){var a=va("Click OK to save changes to this "+Wa+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Wg(d,a,!0);!a&&d.G?window&&window.location.reload():(a||(d.i=!0),d.sb(Cg),d.i=!1)}else d.reset(),d.c&&d.c.la()},!0;case "save":if(ma(ua(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.j[b]=c,c.onclick=function(){var a=Dg(d,!0);if(a){var b=!!(d.a&&!d.o||d.G),c=Wg(d,b);b?$g(d,a,c):d.B("Resume disabled, machine state not saved")}},!0}return!1};
function Dg(a,b){var c=a.b;c||((c=ya(Ug),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=bh(a,c))||a.B("The user ID is invalid.")):b&&a.B("Browser local storage is not available"));return c}
function bh(a,b){a.b=null;b=v(ua()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(za(Ug,b.data),a.b=b.data)}catch(d){y(d.message+" ("+c+")")}return a.b}function Fg(a){var b=null;a.b&&(b=ua()+"/api/v1/user?req=load&user="+a.b+"&state="+ch(a,"1.32.0"));return b}
function $g(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=ch(a,"1.32.0");d.data=c;b=v(ua()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.B("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.B(c),za(Ug,""),a.b=null)}}
function Bf(a){var b;a=C(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Kc(a){if(a.ab){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.ab.focus();window&&window.scrollTo(b,c)}}var Ng="failsafe",Ig="validate",Kg="timestamp",Xg="version",Yg="url",Zg="browser",Ug="user",Mg=-1,Cg=0,Lg=1,Pg=2,ah=3;
Ga(function(){for(var a=G(document,F+"-machine"),b=0;b<a.length;b++)for(var c=a[b],d=D(c),c=G(c,F,"computer"),e=0;e<c.length;e++){var f=c[e],g=D(f),g=new Ag(g,d,!0);E(g,f);g.w&&Gg(g,g.sb)}});Ha.show.push(function(){for(var a=G(document,F,"computer"),b=0;b<a.length;b++){var c=D(a[b]);(c=Ra("Computer",c.id))&&c.H&&!c.l.R&&c.sb(Mg)}});Ha.exit.push(function(){for(var a=G(document,F,"computer"),b=0;b<a.length;b++){var c=D(a[b]);(c=Ra("Computer",c.id))&&c.l.R&&Wg(c,!(!c.a||c.o),!0)}});
function R(a,b,c){this.id=a.id;this.a="";this.c={};this.b=this.j=!1;this.key=ch(a,b,c);Sg(this,a.Rc)}h=R.prototype;h.set=function(a,b){try{this.c[a]=b}catch(c){}};h.get=function(a){return this.c[a]||null};h.data=function(){return this.c};function Eg(a,b){return b?(a.a=b,a.b=!0,a.j=!1,!0):a.b?!0:wa()&&(b=ya(a.key))?(a.a=b,a.b=!0):!1}function Jg(a){var b=!0;if(!a.j)try{a.c=JSON.parse(a.a),a.j=!0}catch(c){y(c.message||c),b=!1}return b}
function Tg(a){var b=!0;if(wa()){var c=JSON.stringify(a.c);za(a.key,c)||(y("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}h.toString=function(){return this.c?JSON.stringify(this.c):this.a};function Sg(a,b){a.a="";a.c={};a.b=a.j=!1;b&&a.set("parms",b)}
h.clear=function(a){Sg(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function ch(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var dh=0;
function eh(a,b,c,d,e,f){e("Loading "+a+"...");v(a,null,!0,function(g,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),f(k,null)):fh(k,a,b,c,d,e,f)})}
function fh(a,b,c,d,e,f,g){function k(a,f){if(f)g(f,null);else{c&&(Oa(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),
a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pdp11$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(p){f=null,a=p.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);g(a,f)}}a?e?gh(a,f,k):k(a,null):g("no data"+(b?" for file: "+b:""),null)}
function gh(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");v(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,p=/( [a-z]+=)(['"])(.*?)\2/g;m=p.exec(f);)l=0>l.indexOf(m[1])?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],g);gh(a,b,c)}})}else c(a,null)}
function hh(a,b,c,d){function e(a){if(void 0===k){var b=g&&G(g,"machine-warning");k=b&&b[0]||g}k&&(k.innerHTML=na(a))}function f(a){e("Error: "+a);l&&(--dh||Ka(!0));l=!1}var g,k,l=!0;dh++;Pa[a]={};try{if(g=document.getElementById(a)){var m;if("object"==typeof resources&&(m=resources.css)){var p=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";t.styleSheet?t.styleSheet.cssText=m:t.appendChild(document.createTextNode(m));p.appendChild(t)}c||
(c="/versions/pdpjs/1.32.0/components.xsl");m=function(d,k){k?eh(c,null,null,!1,e,function(d,l){l?(Oa(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(l=k.transformNode(l))?(g.outerHTML=l,--dh||Ka(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(l),(l=d.transformToFragment(k,document))?g.parentNode?(g.parentNode.replaceChild(l,g),--dh||Ka(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?eh(b,a,d,!0,e,m):fh(b,null,a,d,!1,e,m)}else f("missing machine element: "+a)}catch(x){f(x.message)}return l}window.embedPDP11=function(a,b,c,d){Ka(!1);return hh(a,b,c,d)};window.enableEvents=Ka;window.sendEvent=Ma;})();//# sourceMappingURL=/tmp/pdpjs/1.32.0/pdp11.map
