(function(){/*
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/serialport.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2016
*/
for(var g,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,ca=["Math","log2"],da=0;da<ca.length-1;da++){var ea=ca[da];ea in ba||(ba[ea]={});ba=ba[ea]}var fa=ca[ca.length-1],ga=ba[fa],ha=ga?ga:function(a){return Math.log(a)/Math.LN2};
ha!=ga&&null!=ha&&aa(ba,fa,{configurable:!0,writable:!0,value:ha});function ia(a,b){var c="";b?11<b&&(b=11):b=a&-65536?11:6;if(null==a||isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;)c=String.fromCharCode((a&7)+48)+c,a>>=3;return""+c}function ja(a,b,c){var d="";b?8<b&&(b=8):b=a&-65536?8:4;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;){var e=a&15,e=e+(0<=e&&9>=e?48:55),d=String.fromCharCode(e)+d;a>>=4}return(c?"0x":"")+d}
function ka(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}function la(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function ma(){var a=na();return-1!==a.indexOf("pcjs.org",a.length-8)}var oa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function pa(a){return a.replace(/[&<>"']/g,function(a){return oa[a]})}
function qa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var ra={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"},sa=Date.now||function(){return+new Date};
function ta(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function k(a,b,c,d){var e=0,f=null,h=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),h;var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(l.onreadystatechange=function(){4===l.readyState&&(f=l.responseText,200==l.status||!l.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=l.status||-1),d&&d(a,f,e))});if(b&&"object"==
typeof b){var n="",r;for(r in b)b.hasOwnProperty(r)&&(n&&(n+="&"),n+=r+"="+encodeURIComponent(b[r]));n=n.replace(/%20/g,"+");l.open("POST",a,!!c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(n)}else l.open("GET",a,!!c),"bytes"==b&&l.overrideMimeType("text/plain; charset=x-user-defined"),l.send();c||(f=l.responseText,200!=l.status&&(e=l.status||-1),d&&d(a,f,e),h=[f,e]);return h}
function ua(a,b){var c,d={L:null,Y:null,cb:null,bb:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,h;if("<"==b.substr(0,1))throw Error(b);h=0>b.indexOf("0x")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.cb=h.load;d.bb=h.exec;if(e=h.bytes)d.L=e;else if(e=h.words)for(d.L=Array(2*e.length),f=c=0;c<e.length;c++)d.L[f++]=e[c]&255,d.L[f++]=e[c]>>8&255;else if(e=h.data)for(d.L=Array(4*e.length),f=c=0;c<e.length;c++)d.L[f++]=e[c]&255,
d.L[f++]=e[c]>>8&255,d.L[f++]=e[c]>>16&255,d.L[f++]=e[c]>>24&255;else d.L=h;d.Y=h.symbols;d.L.length?1==d.L.length&&(m(d.L[0]),d=null):(m("Empty resource: "+a),d=null)}catch(l){m("Resource data error ("+a+"): "+l.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){m("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.L=e)}return d}
function na(){return"http://"+(window?window.location.host:"www.pcjs.org")}function m(a){window&&window.alert(a)}function va(a){var b=!1;window&&(b=window.confirm(a));return b}var wa=null;function xa(){if(null==wa){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}wa=a}return wa}
function ya(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}function za(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Aa(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&b.match(/(iPod|iPhone|iPad)/)&&b.match(/AppleWebKit/)||"MSIE"==a&&b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)?!0:!1}return!1}var p={init:[],show:[],exit:[]},Ba=!1,Ca=!1,Da=!0;
function Ea(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function q(a){p.init.push(a)}function Fa(a){if(Da)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){m(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function Ga(a){!Da&&a?(Da=!0,Ba&&Ha("init"),Ca&&Ha("show")):Da=a}function Ha(a){p[a]&&Fa(p[a])}Ea("onload",function(){Ba=!0;Fa(p.init)});Ea("onpageshow",function(){Ca=!0;Fa(p.show)});
Ea(Aa("Opera")||Aa("iOS")?"onunload":"onbeforeunload",function(){Fa(p.exit)});function u(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.pb=b.comment;this.Hb=b;b=this.id.indexOf(".");0>b?this.Ia=this.id:(this.ra=this.id.substr(0,b),this.Ia=this.id.substr(b+1));this[a]=c;this.i={ready:!1,Wa:!1,gd:!1,M:!1,error:!1};this.Sa=null;this.i.error=!1;this.s={};this.F=null;v.push(this)}var Ia=void 0,Ja={};
if(window){Ia||(Ia=window.location.search.substr(1));for(var Ka,La=/\+/g,Ma=/([^&=]+)=?([^&]*)/g;Ka=Ma.exec(Ia);)Ja[decodeURIComponent(Ka[1].replace(La," "))]=decodeURIComponent(Ka[2].replace(La," "))}function Na(a){function b(){}if(window){if(!a)throw new TypeError;if(Object.create)return Object.create(a);var c=typeof a;if("object"!==c&&"function"!==c)throw new TypeError;}b.prototype=a;return new b}
function w(a,b){b||(b=u);a.prototype=Na(b.prototype);a.prototype.constructor=a;a.prototype.parent=b.prototype}if(window){window.PCjs||(window.PCjs={});var Oa=window.PCjs.Machines||(window.PCjs.Machines={}),v=window.PCjs.Components||(window.PCjs.Components=[])}else Oa={},v=[];function Pa(a,b,c){Oa[a]&&b&&(Oa[a][b]=c)}function x(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<v.length;b++){var d=v[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Qa(a){if(void 0!==a){var b;for(b=0;b<v.length;b++)if(v[b].id===a)return v[b]}return null}function Ra(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<v.length;d++)if(c)c==v[d]&&(c=null);else if(!(a!=v[d].type||b&&v[d].id.indexOf(b)))return v[d]}return null}function y(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){m(c.message+" ("+a+")")}return b}
function z(a,b){b=A(b.parentNode,"pdp11-control");for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){var h=f.getAttribute("class");if(h)for(var l=h.split(" "),n=0;n<l.length;n++)switch(h=l[n],h){case "pdp11-binding":(h=y(f))&&h.binding&&a.V(h.type,h.binding,f,h.value),n=l.length}}}}
function A(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
u.prototype={constructor:u,parent:null,toString:function(){return this.name?this.name:this.id||this.type},V:function(a,b,c){switch(b){case "clear":return this.s[b]||(this.s[b]=c,c.onclick=function(a){return function(){a.s.print&&(a.s.print.value="")}}(this)),!0;case "print":return this.s[b]||(this.Xa=this.s[b]=c,c.value="",this.P=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(c),
this.I=function(a){this.P(a,this.Ia)}),!0;default:return!1}},log:function(){},P:function(){},status:function(a){this.P(this.Ia+": "+a)},I:function(a,b,c){c=c||this.type;b||m((c?c+": ":"")+a)},$:function(){return this.i.M=!0},Z:function(a,b){b&&(this.i.M=!1);return!0}};function B(a){if(!a.i.error&&(a.i.ready=!0,a.i.ready)){var b=a.Sa;a.Sa=null;b&&b()}}function Sa(a,b){b&&(a.i.ready?b():a.Sa=b);return a.i.ready}
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});var Ta="undefined"!==typeof ArrayBuffer;function Ua(a){u.call(this,"Panel",a,Ua);this.b=0;this.i.kb=!0}w(Ua);g=Ua.prototype;
g.V=function(a,b,c,d){if(this.v&&this.v.V(a,b,c,d)||this.a&&this.a.V(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.s[b]=c,this.b++,!0;default:return"rled"==a?(this.s[b]=c,this.b++,!0):this.parent.V.call(this,a,b,c,d)}};g.ea=function(a,b,c,d){this.v=a;this.m=b;this.a=c;this.F=d};g.$=function(a,b){b||Va();return!0};g.Z=function(){return!0};
function Wa(a,b,c,d){if(a.s[b]){void 0===c&&(a.i.error=!0,a.I("Value for "+b+" is invalid"),Xa(a.a));var e=a.F&&a.F.b||8;c=!a.a.i.U||a.i.kb?8==e?ia(c,d):ja(c,d):"--------".substr(0,d||4);a.s[b].textContent!=c&&(a.s[b].textContent=c)}}function Ya(a,b,c,d){for(var e=0;e<d;e++){var f=a.s[b+e];f&&(f.style.backgroundColor=c&1<<e?"#ff0000":"#000000")}}
g.fa=function(a){if(this.b&&(a||!this.a.i.U||this.i.kb)){for(a=0;a<this.a.f.length;a++)Wa(this,"R"+a,this.a.f[a]);a=Za(this.a);Wa(this,"PS",a);Wa(this,"NF",a&8?1:0,1);Wa(this,"ZF",a&4?1:0,1);Wa(this,"VF",a&2?1:0,1);Wa(this,"CF",a&1?1:0,1);Ya(this,"D",this.a.f[0],16);Ya(this,"A",this.a.f[7],22)}};function Va(){for(var a=!1,b=A(document,"pdp11","panel"),c=0;c<b.length;c++){var d=b[c],e=y(d),f=Qa(e.id);f||(a=!0,f=new Ua(e));z(f,d);a&&B(f)}}q(Va);
function $a(a,b,c){u.call(this,"Bus",a,$a);this.a=b;this.F=c;this.H=a.busWidth||16;this.j=0;this.C=[];this.u=null;this.A=Math.pow(2,this.H);this.h=this.A-1|0;this.c=C;this.m=Math.log2(this.c);this.B=this.c>>2;this.g=this.c-1;this.v=this.A/this.c|0;this.ka=[];this.T=0;this.o=[];this.Bb=[ab,bb,cb,db];a=new E(this);eb(a,this.F);this.b=Array(this.v);for(b=0;b<this.v;b++)this.b[b]=a;B(this)}w($a);var C=8192,fb=C-1;
function ab(a,b){var c=-1,d=this.controller,e=d.ka[a];e?e[0]?c=e[0](b):e[2]&&(c=b&1?e[2](b&-2)>>8:e[2](b)&255):b&1&&(e=d.ka[a&-2])&&e[2]&&(c=e[2](b&-2)>>8);return 0<=c?c:c=gb(d,b)}function bb(a,b,c){var d=!1,e=this.controller,f=e.ka[a];if(f)if(f[1])f[1](b,c),d=!0;else{if(f[3]){a=f[2]?f[2](0):0;if(c&1)f[3](a&255|b<<8,c&-2);else f[3](a&-256|b,c);d=!0}}else c&1&&(f=e.ka[a&-2])&&f[3]&&(c&=-2,a=f[2]?f[2](0):0,f[3](a&255|b<<8,c),d=!0);d||gb(e,c)}
function cb(a,b){var c=-1,d=this.controller;(a=d.ka[a])&&(a[2]?c=a[2](b):a[0]&&(c=a[0](b)|a[0](b+1)<<8));return 0<=c?c:c=gb(d,b)}function db(a,b,c){var d=!1,e=this.controller;if(a=e.ka[a])a[3]?(a[3](b,c),d=!0):a[1]&&(a[1](b&255,c),a[1](b>>8,c+1),d=!0);d||gb(e,c)}function hb(a,b){if(b!=a.j){var c;a.j&&(c=(1<<a.j)-C,ib(a,c,C,a.C),a.j=0);b&&(a.j=b,c=(1<<b)-C,a.C=jb(a,c,C),a.u?ib(a,c,C,a.u):(kb(a,c,C,lb,a),a.u=jb(a,c,C)))}}
$a.prototype.reset=function(){for(var a=0;a<this.o.length;a++)this.o[a]();hb(this,16)};function gb(a,b){a.T||F(a.a,4,b);return 0}$a.prototype.$=function(a,b){b||this.reset();return!0};
function kb(a,b,c,d,e){for(var f=b,h=c,l=f>>>a.m;0<h&&l<a.b.length;){var n=a.b[l],r=l*a.c,t=a.c-(f-r);t>h&&(t=h);if(!e&&n&&n.size){if(n.type==d){if(f+h<=n.Ca)return n.Ua+=n.Ca-f,n.Ca=f,!0;if(f>=n.Ca+n.Ua){t=n.size-(f-r);t>h&&(t=h);n.Ua=f-n.Ca+t;f=r+a.c;h-=t;l++;continue}}return mb(1,f,h)}f=new E(a,f,t,a.c,d,e);eb(f,a.F,n);a.b[l++]=f;f=r+a.c;h-=t}if(0>=h){c/=1024;var D;e="";D?10<D&&(D=10):D=c&-65536?10:5;if(null==c||isNaN(c))for(;0<D--;)e="?"+e;else for(;0<D--;)e=String.fromCharCode(c%10+48)+e,c/=
10;a.status(e+"Kb "+nb[d]+" at "+ia(b));return!0}return mb(2,b,c)}function jb(a,b,c){var d=[];for(b>>>=a.m;0<c&&b<a.b.length;)d.push(a.b[b++]),c-=a.c;return d}function ib(a,b,c,d){var e=0;for(b>>>=a.m;0<c&&b<a.b.length;){var f=d[e++];if(!f)break;a.b[b++]=f;c-=a.c}}function ob(a,b){return a.b[(b&a.h)>>>a.m].eb(b&a.g,b)}function pb(a,b){return a.b[(b&a.h)>>>a.m].R(b&a.g,b)}$a.prototype.Ga=function(a,b){this.T++;this.b[(a&this.h)>>>this.m].yb(a&this.g,b&255,a);this.T--};
function qb(a,b,c){a.b[(b&a.h)>>>a.m].Va(b&a.g,c&65535,b)}function rb(a){for(var b=0,c=[],d=0;d<a.v;d++){var e=a.b[d];if(e.la||e.Db){c[b++]=d;var f=b++;if(e=e.save()){for(var h=0,l=0,n=[];h<e.length;){for(var r=e[h],t=h+1;t<e.length&&e[t]===r;)t++;n[l++]=t-h;n[l++]=r;h=t}n.length<e.length&&(e=n)}c[f]=e}}return c}function sb(a,b,c,d,e,f,h,l){for(;b<=c;b+=2){var n=b&fb;void 0!==a.ka[n]?m("I/O address already registered: "+ja(b,8,!0)):a.ka[n]=[d,e,f,h,l||"unknown",!1]}}
function tb(a,b,c){for(var d in c){var e=+d,f=c[d];if(!(f[5]&&f[5]>a.a.Ha)){var h=f[0]?f[0].bind(b):null,l=f[1]?f[1].bind(b):null,n=f[2]?f[2].bind(b):null,r=f[3]?f[3].bind(b):null;65472<=e&&65487>=e&&(!h&&n&&(h=function(a){return function(b){return a(b)&255}.bind(b)}(n)),!l&&r&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(r)));sb(a,e,e,h,l,n,r,f[4])}}}function ub(a,b){a.o.push(b)}function vb(a,b){a.T||F(a.a,4,b)}
function mb(a,b,c){m("Memory block error ("+a+": "+ja(b)+","+ja(c)+")");return!1}function G(a){u.call(this,"Device",a,G);this.c={data:0,fd:0,Ta:20,uc:0};this.b={hd:0,ib:-1}}w(G);g=G.prototype;g.ea=function(a,b,c,d){this.m=b;this.a=c;this.F=d;var e=this;this.b.ib=wb(c,function(){e.b.na|=128;e.b.na&64&&(xb(e.a,e.b.vc),yb(e.a,e.b.ib,1E3/60))});this.b.vc=zb(64,6);tb(b,this,H);ub(b,this.reset.bind(this));B(this)};g.reset=function(){this.c.Ta=this.c.Ta&-120|20;this.b.na=0};
g.Qb=function(){var a=this.b.na;this.b.na&=-129;return a};g.Ec=function(a){this.b.na=a;a&64&&yb(this.a,this.b.ib,1E3/60);this.b.na=a&-129};g.Jb=function(a){return(a?this.c.uc:this.c.data)&65535};g.xc=function(a){this.c.data=a};g.Sb=function(){var a=this.a;return a.A&62337|a.Ja<<5|a.Ka<<1};g.Gc=function(a){var b=this.a;a&=62337;if(b.A!=a){b.A=a;b.Ja=a>>5&3;b.Ka=a>>1&15;var c=0;a&257&&(c=4,a&1&&(c|=2));b.Ea!=c&&(b.Ea=c,Ab(b))}Bb(this)};
g.Tb=function(){var a=this.a.oa;a&65280&&(a=(a<<8|a>>8)&65535);return a};g.Ub=function(){return this.a.gb};g.Vb=function(){return this.a.pa};g.Hc=function(a){var b=this.a;1170>b.Ha&&(a&=-49);b.pa!=a&&(b.pa=a,a&16?(b.$a=4194303,b.La=3915776):(b.$a=262143,b.La=253952),Ab(b));Bb(this)};function Bb(a){a.c.Ta=a.c.Ta&-8|(a.a.Ea?a.a.pa&16?1:2:4)}g.ic=function(a){return this.a.D[1][a>>1&7]};g.Vc=function(a,b){this.a.D[1][b>>1&7]=a&65295};g.gc=function(a){return this.a.D[1][(a>>1&7)+8]};
g.Tc=function(a,b){this.a.D[1][(b>>1&7)+8]=a&65295};g.hc=function(a){return this.a.S[1][a>>1&7]};g.Uc=function(a,b){b=b>>1&7;this.a.S[1][b]=a;this.a.D[1][b]&=65295};g.fc=function(a){return this.a.S[1][(a>>1&7)+8]};g.Sc=function(a,b){b=(b>>1&7)+8;this.a.S[1][b]=a;this.a.D[1][b]&=65295};g.Pb=function(a){return this.a.D[0][a>>1&7]};g.Dc=function(a,b){this.a.D[0][b>>1&7]=a&65295};g.Nb=function(a){return this.a.D[0][(a>>1&7)+8]};g.Bc=function(a,b){this.a.D[0][(b>>1&7)+8]=a&65295};
g.Ob=function(a){return this.a.S[0][a>>1&7]};g.Cc=function(a,b){b=b>>1&7;this.a.S[0][b]=a;this.a.D[0][b]&=65295};g.Mb=function(a){return this.a.S[0][(a>>1&7)+8]};g.Ac=function(a,b){b=(b>>1&7)+8;this.a.S[0][b]=a;this.a.D[0][b]&=65295};g.oc=function(a){return this.a.D[3][a>>1&7]};g.ad=function(a,b){this.a.D[3][b>>1&7]=a&65295};g.mc=function(a){return this.a.D[3][(a>>1&7)+8]};g.Zc=function(a,b){this.a.D[3][(b>>1&7)+8]=a&65295};g.nc=function(a){return this.a.S[3][a>>1&7]};
g.$c=function(a,b){b=b>>1&7;this.a.S[3][b]=a;this.a.D[3][b]&=65295};g.lc=function(a){return this.a.S[3][(a>>1&7)+8]};g.Yc=function(a,b){b=(b>>1&7)+8;this.a.S[3][b]=a;this.a.D[3][b]&=65295};g.wa=function(a){a&=7;return this.a.w&2048?this.a.ua[a]:this.a.f[a]};g.ya=function(a,b){b&=7;this.a.w&2048?this.a.ua[b]=a:this.a.f[b]=a};g.$b=function(){return this.a.w&49152?this.a.aa[0]:this.a.f[6]};g.Mc=function(a){this.a.w&49152?this.a.aa[0]=a:this.a.f[6]=a};g.cc=function(){return this.a.f[7]};
g.Pc=function(a){this.a.f[7]=a};g.xa=function(a){a&=7;return this.a.w&2048?this.a.f[a]:this.a.ua[a]};g.za=function(a,b){b&=7;this.a.w&2048?this.a.f[b]=a:this.a.ua[b]=a};g.ac=function(){return 1==(this.a.w&49152)>>14?this.a.f[6]:this.a.aa[1]};g.Nc=function(a){1==(this.a.w&49152)>>14?this.a.f[6]=a:this.a.aa[1]=a};g.bc=function(){return 3==(this.a.w&49152)>>14?this.a.f[6]:this.a.aa[3]};g.Oc=function(a){3==(this.a.w&49152)>>14?this.a.f[6]=a:this.a.aa[3]=a};g.Lb=function(a){return this.a.vb[a-65504>>1]};
g.zc=function(a,b){this.a.vb[b-65504>>1]=a};g.tb=function(a){return 65520==a?61183:0};g.Ab=function(){};g.kc=function(){return 1};g.Xc=function(){};g.Kb=function(){return this.a.G};g.yc=function(){this.a.G=0};g.Rb=function(){return this.a.ub};g.Fc=function(a,b){b&1||(a&=255);this.a.ub=a};g.Wb=function(a){return a?this.a.hb:0};g.Ic=function(a){var b=this.a;if(a&=65024){var c=a>>9;do a+=34;while(c>>=1)}b.hb=a;b.l|=2};g.jc=function(a){return a?this.a.qa&65280:0};g.Wc=function(a){this.a.qa=a|255};
g.Zb=function(){return Za(this.a)};g.Lc=function(a){Cb(this.a,a&-1809|Za(this.a)&1808);this.a.l|=128};g.zb=function(){};
var I={},H=(I[62592]=[null,null,G.prototype.ic,G.prototype.Vc,"SISDR",1145],I[62608]=[null,null,G.prototype.gc,G.prototype.Tc,"SDSDR",1145],I[62624]=[null,null,G.prototype.hc,G.prototype.Uc,"SISAR",1145],I[62640]=[null,null,G.prototype.fc,G.prototype.Sc,"SDSAR",1145],I[62656]=[null,null,G.prototype.Pb,G.prototype.Dc,"KISDR",1145],I[62672]=[null,null,G.prototype.Nb,G.prototype.Bc,"KDSDR",1145],I[62688]=[null,null,G.prototype.Ob,G.prototype.Cc,"KISAR",1145],I[62704]=[null,null,G.prototype.Mb,G.prototype.Ac,
"KDSAR",1145],I[62798]=[null,null,G.prototype.Vb,G.prototype.Hc,"MMR3",1145],I[65382]=[null,null,G.prototype.Qb,G.prototype.Ec,"LKS"],I[65400]=[null,null,G.prototype.Jb,G.prototype.xc,"CNSL"],I[65402]=[null,null,G.prototype.Sb,G.prototype.Gc,"MMR0",1145],I[65404]=[null,null,G.prototype.Tb,G.prototype.zb,"MMR1",1145],I[65406]=[null,null,G.prototype.Ub,G.prototype.zb,"MMR2",1145],I[65408]=[null,null,G.prototype.oc,G.prototype.ad,"UISDR",1145],I[65424]=[null,null,G.prototype.mc,G.prototype.Zc,"UDSDR",
1145],I[65440]=[null,null,G.prototype.nc,G.prototype.$c,"UISAR",1145],I[65456]=[null,null,G.prototype.lc,G.prototype.Yc,"UDSAR",1145],I[65472]=[null,null,G.prototype.wa,G.prototype.ya,"R0SET0"],I[65473]=[null,null,G.prototype.wa,G.prototype.ya,"R1SET0"],I[65474]=[null,null,G.prototype.wa,G.prototype.ya,"R2SET0"],I[65475]=[null,null,G.prototype.wa,G.prototype.ya,"R3SET0"],I[65476]=[null,null,G.prototype.wa,G.prototype.ya,"R4SET0"],I[65477]=[null,null,G.prototype.wa,G.prototype.ya,"R5SET0"],I[65478]=
[null,null,G.prototype.$b,G.prototype.Mc,"R6KERNEL"],I[65479]=[null,null,G.prototype.cc,G.prototype.Pc,"R7KERNEL"],I[65480]=[null,null,G.prototype.xa,G.prototype.za,"R0SET1",1145],I[65481]=[null,null,G.prototype.xa,G.prototype.za,"R1SET1",1145],I[65482]=[null,null,G.prototype.xa,G.prototype.za,"R2SET1",1145],I[65483]=[null,null,G.prototype.xa,G.prototype.za,"R3SET1",1145],I[65484]=[null,null,G.prototype.xa,G.prototype.za,"R4SET1",1145],I[65485]=[null,null,G.prototype.xa,G.prototype.za,"R5SET1",1145],
I[65486]=[null,null,G.prototype.ac,G.prototype.Nc,"R6SUPER",1145],I[65487]=[null,null,G.prototype.bc,G.prototype.Oc,"R6USER",1145],I[65504]=[null,null,G.prototype.Lb,G.prototype.zc,"CTRL",1170],I[65520]=[null,null,G.prototype.tb,G.prototype.Ab,"LSIZE",1170],I[65522]=[null,null,G.prototype.tb,G.prototype.Ab,"HSIZE",1170],I[65524]=[null,null,G.prototype.kc,G.prototype.Xc,"SYSID",1170],I[65526]=[null,null,G.prototype.Kb,G.prototype.yc,"CPUERR",1170],I[65528]=[null,null,G.prototype.Rb,G.prototype.Fc,
"MB",1170],I[65530]=[null,null,G.prototype.Wb,G.prototype.Ic,"PIR"],I[65532]=[null,null,G.prototype.jc,G.prototype.Wc,"SL"],I[65534]=[null,null,G.prototype.Zb,G.prototype.Lc,"PSW"],I);H[62594]=H[62592];H[62596]=H[62592];H[62598]=H[62592];H[62600]=H[62592];H[62602]=H[62592];H[62604]=H[62592];H[62606]=H[62592];H[62610]=H[62608];H[62612]=H[62608];H[62614]=H[62608];H[62616]=H[62608];H[62618]=H[62608];H[62620]=H[62608];H[62622]=H[62608];H[62626]=H[62624];H[62628]=H[62624];H[62630]=H[62624];H[62632]=H[62624];
H[62634]=H[62624];H[62636]=H[62624];H[62638]=H[62624];H[62642]=H[62640];H[62644]=H[62640];H[62646]=H[62640];H[62648]=H[62640];H[62650]=H[62640];H[62652]=H[62640];H[62654]=H[62640];H[62658]=H[62656];H[62660]=H[62656];H[62662]=H[62656];H[62664]=H[62656];H[62666]=H[62656];H[62668]=H[62656];H[62670]=H[62656];H[62674]=H[62672];H[62676]=H[62672];H[62678]=H[62672];H[62680]=H[62672];H[62682]=H[62672];H[62684]=H[62672];H[62686]=H[62672];H[62690]=H[62688];H[62692]=H[62688];H[62694]=H[62688];H[62696]=H[62688];
H[62698]=H[62688];H[62700]=H[62688];H[62702]=H[62688];H[62706]=H[62704];H[62708]=H[62704];H[62710]=H[62704];H[62712]=H[62704];H[62714]=H[62704];H[62716]=H[62704];H[62718]=H[62704];H[65410]=H[65408];H[65412]=H[65408];H[65414]=H[65408];H[65416]=H[65408];H[65418]=H[65408];H[65420]=H[65408];H[65422]=H[65408];H[65426]=H[65424];H[65428]=H[65424];H[65430]=H[65424];H[65432]=H[65424];H[65434]=H[65424];H[65436]=H[65424];H[65438]=H[65424];H[65442]=H[65440];H[65444]=H[65440];H[65446]=H[65440];H[65448]=H[65440];
H[65450]=H[65440];H[65452]=H[65440];H[65454]=H[65440];H[65458]=H[65456];H[65460]=H[65456];H[65462]=H[65456];H[65464]=H[65456];H[65466]=H[65456];H[65468]=H[65456];H[65470]=H[65456];H[65506]=H[65504];H[65508]=H[65504];H[65510]=H[65504];H[65512]=H[65504];H[65514]=H[65504];H[65516]=H[65504];H[65518]=H[65504];q(function(){for(var a=A(document,"pdp11","device"),b=0;b<a.length;b++){var c,d=a[b];c=y(d);switch(c.type){case "default":c=new G(c);z(c,d);break;case "pc11":c=new J(c),z(c,d)}}});var Db;
if(Ta){var Eb=new ArrayBuffer(2);(new DataView(Eb)).setUint16(0,256,!0);Db=256===(new Uint16Array(Eb))[0]}else Db=!1;var Fb=Db;
function E(a,b,c,d,e,f){this.m=a;this.id=Gb+=2;this.a=null;this.Ca=b;this.Ua=c;this.size=d||0;this.type=e||Hb;this.g=e==Ib;this.controller=null;eb(this);this.la=this.Db=!1;if(d)if(f)this.controller=f,this.a=null,Jb(this,f.Bb);else if(Ta)this.b=new ArrayBuffer(d),this.s=new DataView(this.b,0,d),this.c=new Uint8Array(this.b,0,d),this.o=new Uint16Array(this.b,0,d>>1),this.a=new Int32Array(this.b,0,d>>2),Jb(this,Fb?Kb:Lb);else{this.a=Array(d>>2);for(a=0;a<this.a.length;a++)this.a[a]=0;Jb(this,Mb)}else Jb(this)}
var Hb=0,Ib=2,lb=4,nb=["NONE","RAM","ROM","VID","H/W"],Gb=0;
E.prototype={constructor:E,parent:null,save:function(){var a,b;if(this.controller)a=null;else if(Ta)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.s.getInt32(b<<2,!0);else a=this.a;return a},restore:function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(Ta)for(b=0;b<a.length;b++)this.s.setInt32(b<<2,a[b],!0);else this.a=a;return this.la=!0}return!1},v:function(){return 255},A:function(){},u:function(a,b){return this.eb(a++,b++)|this.eb(a,b)<<8},B:function(a,b,c){this.jb(a++,
b&255,c++);this.jb(a,b>>8,c)},N:function(a){return this.a[a>>2]>>>((a&3)<<3)&255},ba:function(a,b){a&1&&vb(this.m,b);b=a>>2;a=(a&3)<<3;var c=this.a[b]>>a;return 24>a?c&65535:c&255|(this.a[b+1]&255)<<8},ha:function(a,b){var c=a>>2;a=(a&3)<<3;this.a[c]=this.a[c]&~(255<<a)|b<<a;this.la=!0},ta:function(a,b,c){a&1&&vb(this.m,c);c=a>>2;a=(a&3)<<3;24>a?this.a[c]=this.a[c]&~(65535<<a)|b<<a:(this.a[c]=this.a[c]&16777215|b<<24,c++,this.a[c]=this.a[c]&-256|b>>8);this.la=!0},H:function(a,b){return this.J(a,b)},
T:function(a,b){return this.W(a,b)},da:function(a,b,c){this.g||this.yb(a,b,c)},ja:function(a,b,c){this.g||this.ra(a,b,c)},C:function(a){return this.c[a]},K:function(a){return this.c[a]},O:function(a,b){a&1&&vb(this.m,b);return this.s.getUint16(a,!0)},X:function(a,b){a&1&&vb(this.m,b);return this.o[a>>1]},ca:function(a,b){this.c[a]=b;this.la=!0},ga:function(a,b){this.c[a]=b;this.la=!0},ia:function(a,b,c){a&1&&vb(this.m,c);this.s.setUint16(a,b,!0);this.la=!0},sa:function(a,b,c){a&1&&vb(this.m,c);this.o[a>>
1]=b;this.la=!0}};function eb(a,b,c){a.F=b;a.h=a.j=0;c&&((a.h=c.h)&&Nb(a,Ob,!1),(a.j=c.j)&&Pb(a,Ob,!1))}function Pb(a,b,c){c&&a.j||(a.jb=!a.g&&b[1]||a.A,a.Va=!a.g&&b[3]||a.B);if(c||void 0===c)a.yb=b[1]||a.A,a.ra=b[3]||a.B}function Nb(a,b,c){c&&a.h||(a.eb=b[0]||a.v,a.R=b[2]||a.u);if(c||void 0===c)a.J=b[0]||a.v,a.W=b[2]||a.u}function Jb(a,b){b||(b=Qb);Nb(a,b,void 0);Pb(a,b,void 0)}
var Qb=[],Mb=[E.prototype.N,E.prototype.ha,E.prototype.ba,E.prototype.ta],Ob=[E.prototype.H,E.prototype.da,E.prototype.T,E.prototype.ja];if(Ta)var Lb=[E.prototype.C,E.prototype.ca,E.prototype.O,E.prototype.ia],Kb=[E.prototype.K,E.prototype.ga,E.prototype.X,E.prototype.sa];
function Rb(a,b){u.call(this,"CPU",a,Rb);var c=a.multiplier||1;this.Qa=a.cycles||b;this.da=c;this.Za=Math.round(this.Qa/1E4)/100;this.ga=this.Za*this.da;this.i.U=!1;this.i.wb=!1;this.i.Da=a.autoStart;this.i.Pa=!1;this.Na=this.ia=0;this.Oa=a.csStart;this.sa=a.csInterval;this.ta=a.csStop;this.H=[];this.sb=this.tc.bind(this);B(this)}w(Rb);var Sb=["power","reset"];g=Rb.prototype;
g.ea=function(a,b,c,d){this.v=a;this.m=b;this.F=d;for(b=0;b<Sb.length;b++)(c=this.s[Sb[b]])&&this.v.V(null,Sb[b],c);a=Tb(a,"autoStart");null!=a&&(this.i.Da="true"==a?!0:"false"==a?!1:!!a);B(this)};g.reset=function(){};g.save=function(){return null};g.restore=function(){return!1};g.$=function(a,b){if(!b){if(a&&this.restore){Ub(this);if(!this.restore(a))return!1;Vb(this)}else this.reset();this.P("No debugger detected")}this.v.fa();return!0};g.Z=function(a){return a?this.save():!0};
g.Da=function(){return this.i.Da||void 0===this.s.run?(Wb(this),!0):!1};g.mb=function(){return 0};function Vb(a){void 0===a.Oa&&(a.Oa=0);void 0===a.sa&&(a.sa=-1);void 0===a.ta&&(a.ta=-1);a.i.Pa=0<=a.Oa&&0<a.sa;a.i.Pa&&(a.Na=0,a.ia=a.Oa-a.K)}
g.V=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.s[b]=c,!0;case "run":return this.s[b]=c,c.onclick=function(){var a;if(a=d.v)if(a=d.v,a.i.M)a=!0;else{var b=null,c,l=x(a.id);for(c=0;c<l.length&&(b=l[c],b===a||b.i.ready);c++);if(c==l.length)for(c=0;c<l.length&&(b=l[c],b===a||b.i.M);c++);c==l.length&&(b=a);m("The "+b.type+" component ("+b.id+") is not "+(b.i.ready?"powered yet":"ready yet"+(b.Sa?" (waiting for notification)":""))+".");a=!1}a&&(d.i.U?Xa(d):Wb(d))},!0;case "speed":return this.s[b]=
c,!0;case "setSpeed":return this.s[b]=c,c.onclick=function(){Xb(d,d.da<<1)},c.textContent=this.ga.toFixed(2)+"Mhz",!0}return!1};g.fa=function(){var a=this.s.speed;a&&(a.textContent=this.i.U&&this.ba?this.ba.toFixed(2)+"Mhz":"Stopped")};function Yb(a,b){var c=1;b&&1<a.da&&a.ba&&(c=a.ba/a.Za);a.qb=Math.round(1E3/30);a.Ra=Math.floor(a.Qa/30*c);b||(a.Aa=a.Ra);a.ab=0}function Zb(a){return a.K+a.W+a.ha-a.a}function Ub(a){a.ba=0;a.rb=0;a.K=a.W=a.ha=a.a=0;Vb(a);Xb(a,1)}
function Xb(a,b){if(void 0!==b&&(.8>a.ba/a.ga&&(b=1),a.da=b,b=a.Za*a.da,a.ga!=b)){a.ga=b;b=a.ga.toFixed(2)+"Mhz";var c=a.s.setSpeed;c&&(c.textContent=b);a.P("target speed: "+b)}a.K+=a.W;a.W=0;a.O=sa();a.ca=0;Yb(a)}function wb(a,b){var c=a.H.length;a.H.push([-1,b]);return c}function yb(a,b,c,d){0<=b&&b<a.H.length&&(d||0>a.H[b][0])&&(c=a.Qa*a.da/1E3*c|0,a.H[b][0]=c+$b(a))}function $b(a,b){var c=a.ha-=a.a;a.a=0;b&&(a.ha=0);return c}
g.tc=function(){if(this.i.U){this.ab>=this.Qa&&Yb(this,!0);this.Ba=0;this.Ma=sa();if(this.ca){var a=this.Ma-this.ca;a>this.qb&&(this.O+=a,this.O>this.Ma&&(this.O=this.Ma))}try{do{for(var b,c=this.i.Pa?1:this.Ra,d=this.H.length-1;0<=d;d--){var e=this.H[d];0>e[0]||c>e[0]&&(c=e[0])}b=c;try{this.xb(b)}catch(n){if("number"!=typeof n)throw n;}b=$b(this,!0);this.Ba+=b;this.W+=b;a=b;if(this.i.Pa){var f=!1;this.Na=this.Na+this.mb()|0;this.ia-=a;0>=this.ia&&(this.ia+=this.sa,f=!0);0<=this.ta&&this.ta<=Zb(this)&&
(this.sa=this.ta=-1,Vb(this),Xa(this),f=!0);f&&this.P(Zb(this)+" cycles: checksum="+ja(this.Na))}for(var a=b,h=this.H.length-1;0<=h;h--){var l=this.H[h];0>l[0]||(l[0]-=a,0>=l[0]&&(l[0]=-1,l[1]()))}this.Aa-=b;if(0>=this.Aa){this.Aa+=this.Ra;15<=++this.rb&&(this.v&&this.v.fa(),this.rb=0);break}}while(this.i.U)}catch(n){Xa(this);this.v&&this.v.stop(sa(),Zb(this));b=n.stack||n.message;this.i.error=!0;this.I(b);return}if(this.i.U){b=setTimeout;c=this.sb;this.ca=sa();d=this.qb;this.Ba&&(d=Math.round(d*
this.Ba/this.Ra));d-=this.ca-this.Ma;if(e=this.ca-this.O)this.ba=Math.round(this.W/(10*e))/100,864E5<=e&&(this.K=0,Xb(this));if(0>d||this.ba<this.ga)-1E3>d&&(this.O-=d),d=0;this.ab+=this.Ba;this.ca+=d;b(c,d)}}};function Wb(a){var b;a.i.error?(a.P(a.toString()+" error"),b=!0):b=!1;if(!b)if(a.i.U)a.P(a.toString()+" busy");else{Xb(a);a.i.U=!0;a.i.wb=!0;if(b=a.s.run)b.textContent="Halt";a.v&&a.v.start(a.O,Zb(a));setTimeout(a.sb,0)}}g.xb=function(){return 0};
function Xa(a){if(a.i.U){$b(a);a.K+=a.W;a.W=0;a.i.U=!1;var b=a.s.run;b&&(b.textContent="Run");a.v&&a.v.stop(sa(),Zb(a))}a.i.complete=void 0}function ac(a){this.Ha=+a.model||1170;this.ob=a.addrReset||0;Rb.call(this,a,6666667);this.decode=1120==this.Ha?bc.bind(this):cc.bind(this);dc(this);this.T=0;this.X=null;this.i.complete=this.i.Cb=!1}w(ac,Rb);g=ac.prototype;g.reset=function(){this.status("model "+this.Ha);this.i.U&&Xa(this);dc(this);Ub(this);this.i.error=!1;this.parent.reset.call(this)};
function dc(a){a.j=65536;a.g=32768;a.h=65535;a.o=32768;a.w=15;a.f=[0,0,0,0,0,0,0,a.ob];a.ua=[0,0,0,0,0,0];a.aa=[0,0,0,0];a.u=0;a.Ka=0;a.Gb=[4,2,0,1];a.D=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.S=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Ib=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.vb=[0,0,0,0,0,0,0,0];a.ub=0;a.l=0;a.B=a.C=0;a.c=a.b=a.Ya=0;a.ja=-1;ec(a)}function ec(a){a.qa=255;a.G=0;a.hb=0;a.A=0;a.oa=0;a.gb=0;a.pa=0;a.Ea=0;a.Ja=0;a.$a=262143;a.La=253952;a.l|=2;a.m&&Ab(a)}function Ab(a){a.Ea?(a.N=65536,a.J=a.Fb,a.R=a.qc,a.Va=a.cd,hb(a.m,a.pa&16?22:18)):(a.N=0,a.J=a.Eb,a.R=a.pc,a.Va=a.bd,hb(a.m,16))}g.mb=function(){return 0};
g.save=function(){var a=new K(this);a.set(0,[]);a.set(1,[this.K,this.da]);a.set(2,rb(this.m));return a.data()};g.restore=function(a){var b=a[1];this.K=b[1];Xb(this,b[3]);a:{b=this.m;a=a[2];var c;for(c=0;c<a.length-1;c+=2){var d=a[c],e=a[c+1];if(e&&e.length<b.B){for(var f=0,h=Array(b.B),l=0;l<e.length-1;)for(var n=e[l++],r=e[l++];n--;)h[f++]=r;e=h}f=b.b[d];if(!f||!f.restore(e)){m("Unable to restore memory block "+d);b=!1;break a}}b=!0}return b};function L(a){return a.j&65536?1:0}
g.ma=function(){return this.o&32768?8:0};function fc(a){var b=a.f[7];a.A&57344||(a.oa=0,a.gb=b);a.f[7]=b+2&65535;return a.R(b)}function gc(a,b){var c=a.f[7];a.f[7]=c+b&65535;return c}function M(a,b){a.f[7]=b&65535}function zb(a,b){return{wc:a,va:b,next:null}}function xb(a,b){if(b!=a.X){var c=a.X;if(!c||c.va<=b.va)b.next=c,a.X=b;else{do{var d=c.next;if(!d||d.va<=b.va){b.next=d;c.next=b;break}c=d}while(c)}}a.l|=2}function Za(a){return a.w=a.w&63728|a.ma()|(a.h&65535?0:4)|(a.g&32768?2:0)|L(a)}
function Cb(a,b){a.o=b<<12;a.h=~b&4;a.g=b<<14;a.j=b<<16;if((b^a.w)&2048)for(var c=a.ua.length;0<=--c;){var d=a.f[c];a.f[c]=a.ua[c];a.ua[c]=d}a.u=b>>14&3;c=a.w>>14&3;a.u!=c&&(a.aa[c]=a.f[6],a.f[6]=a.aa[a.u]);a.w=b;a.l|=2}function N(a,b){a.l&128||(a.o=a.h=b,a.g=0)}function O(a,b,c){a.l&128||(a.o=a.h=a.j=b,a.g=c||0)}function hc(a,b,c,d){a.l&128||(a.o=a.h=a.j=b,a.g=(c^b)&(d^b))}function P(a,b){a.l&128||(a.o=a.h=a.j=b,a.g=a.o^a.j>>1)}function ic(a,b,c,d){a.l&128||(a.o=a.h=a.j=b,a.g=(c^d)&(d^b))}
function F(a,b,c){if(!a.T){var d=!1;0>a.ja?a.ja=Za(a):a.u||(b=4,d=!0);a.A&57344||(a.oa=63222,a.gb=b);a.u=0;var e=a.R(b|a.N),f=a.R(b+2&65535|a.N);Cb(a,f&-12289|a.ja>>2&12288);d&&(a.G|=4,a.f[6]=4);jc(a,a.ja);jc(a,a.f[7]);M(a,e);a.l&=-113;a.ja=-1;if(26!=c)throw b;}}function kc(a){var b=lc(a),c=lc(a)&-1793;a.w&49152&&(c=c&-225|a.w&63712);M(a,b);Cb(a,c);a.l&=-17}
function mc(a,b,c){var d,e,f,h=0;d=b>>13;a.pa&a.Gb[a.u]||(d&=7);e=a.D[a.u][d];f=(a.S[a.u][d]<<6)+(b&8191)&a.$a;if(f<a.La)f&1&&!(c&1)&&(a.G|=64,F(a,4,10));else if(a.pa&16||253952<=f&&(f|=4186112),4186112>f){if(3932160<=f){f&=262143;var l=f>>13&31;31>l?a.pa&32&&(f=a.Ib[l]+(f&8190)&4194302,3932160<=f&&4186112>f&&console.log("panic(898)")):f|=4186112}f>=a.La&&4186112>f&&(a.G|=32,F(a,4,12))}switch(e&7){case 1:h=4096;case 2:e|=128;c&4&&(h=8192);break;case 4:h=4096;case 5:c&4&&(h=4096);case 6:e|=c&4?192:
128;break;default:h=32768}32512!==(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(h|=16384):(b&8128)>(e>>2&8128)&&(h|=16384));a.D[a.u][d]=e;if(4194170!==f||a.u)a.Ja=a.u,a.Ka=d;h&&(h&57344&&(0<=a.ja&&(h|=128),a.A&57344||(a.A=a.A|h|a.Ja<<5|a.Ka<<1),F(a,168,16)),a.A&61440||!(4191360>f||4194239<f)||(a.A|=4096,a.A&512&&(a.l|=32)));return f}function nc(a,b,c){b&1&&a.a--;a=a.m;a.b[(b&a.h)>>>a.m].jb(b&a.g,c&255,b)}function lc(a){var b=a.R(a.f[6]|a.N);a.f[6]=a.f[6]+2&65535;return b}
function jc(a,b){var c=a.f[6]-2&65535;a.f[6]=c;a.A&57344||(a.oa=a.oa<<8|246);!a.u&&c<=a.qa&&4<c&&(c<=a.qa-32?(a.G|=4,a.f[6]=4,F(a,4,18)):(a.G|=8,a.l|=4));a.Va(c,b)}
function oc(a,b,c,d){var e,f,h=d&8?0:a.N;switch(b){case 0:return F(a,4,20),0;case 1:return 6===c&&!a.u&&d&4&&(a.f[6]<=a.qa||65534<=a.f[6])&&(a.f[6]<=a.qa-32||65534<=a.f[6]?(a.G|=4,a.f[6]=4,F(a,4,22)):(a.G|=8,a.l|=64)),a.a-=3,7===c?a.f[c]:a.f[c]|h;case 2:f=2;e=a.f[c];7!==c&&(e|=h,6>c&&d&1&&(f=1));a.a-=3;break;case 3:f=2;e=a.f[c];7!==c&&(e|=h);e=a.R(e);e|=h;a.a-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.f[c]+f&65535;7!==c&&(e|=h);a.a-=4;break;case 5:f=-2;e=a.f[c]-2&65535;7!==c&&(e|=h);e=a.R(e)|h;a.a-=
8;break;case 6:return e=a.R(gc(a,2)),e=e+a.f[c]&65535|h,a.a-=6,e;case 7:return e=a.R(gc(a,2)),e=e+a.f[c]&65535,e=a.R(e|a.N)|h,a.a-=10,e}a.f[c]=a.f[c]+f&65535;!h||a.A&57344||(a.oa=a.oa<<8|f<<3&248|c);6==c&&!a.u&&d&4&&0>=f&&(a.f[6]<=a.qa||65534<=a.f[6])&&(a.f[6]<=a.qa-32?(a.G|=4,a.f[6]=4,F(a,4,24)):(a.G|=8,a.l|=64));return e}g.Ga=function(a,b){this.Ea?(this.T++,nc(this,mc(this,a,5),b),this.T--):this.m.Ga(a,b)};g.Eb=function(a,b,c){return oc(this,a,b,c)};
g.Fb=function(a,b,c){return mc(this,oc(this,a,b,c),c)};g.pc=function(a){return pb(this.m,a)};g.qc=function(a){return pb(this.m,mc(this,a,2))};g.bd=function(a,b){qb(this.m,a,b&65535)};g.cd=function(a,b){qb(this.m,mc(this,a,4),b)};function pc(a,b,c){var d=a.b=b&7;(b=a.c=(b&56)>>3)?(d=oc(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.u=a.w>>12&3,c=a.R(d|c&a.N),a.u=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.f[d]:a.aa[a.w>>12&3];return c}
function qc(a,b,c,d){a.A&57344||(a.oa=22);var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=oc(a,b,e,4),c&65536||(e&=65535),a.u=a.w>>12&3,e=mc(a,e|c&65536,4),a.u=a.w>>14&3,qb(a.m,e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.f[e]=d:a.aa[a.w>>12&3]=d}function rc(a,b){b>>=6;var c=a.C=b&7;(b=a.B=(b&56)>>3)?(c=a.J(b,c,3),a=ob(a.m,c)):a=a.f[c]&255;return a}function Q(a,b){b>>=6;var c=a.C=b&7;return(b=a.B=(b&56)>>3)?pb(a.m,a.J(b,c,2)):a.f[c]}function sc(a,b){var c=a.b=b&7;b=a.c=(b&56)>>3;return oc(a,b,c,8)}
function tc(a,b){var c=a.b=b&7;(b=a.c=(b&56)>>3)?(c=a.J(b,c,3),a=ob(a.m,c)):a=a.f[c]&255;return a}function uc(a,b){var c=a.b=b&7;return(b=a.c=(b&56)>>3)?pb(a.m,a.J(b,c,2)):a.f[c]}function R(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=a.Ya=a.J(b,e,7),nc(a,e,d.call(a,c,ob(a.m,e)))):a.f[e]=a.f[e]&65280|d.call(a,c,a.f[e])}function S(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?(e=a.J(b,e,6),qb(a.m,e,d.call(a,c,pb(a.m,e)))):a.f[e]=d.call(a,c,a.f[e])}
function vc(a,b,c,d){var e=a.b=b&7;(b=a.c=(b&56)>>3)?nc(a,a.J(b,e,5),c):a.f[e]=c?d&1?c<<24>>24&65535:a.f[e]&-256|c&255:a.f[e]&-256;return c}function wc(a,b,c){var d=a.b=b&7;(b=a.c=(b&56)>>3)?qb(a.m,a.J(b,d,4),c):a.f[d]=c&65535;return c}function T(a,b,c){c&&(M(a,a.f[7]+(b<<24>>23)),a.a-=2);a.a-=3}
g.xb=function(a){this.i.complete=!0;this.i.Cb=!1;this.i.wb=!1;this.ha=this.a=a;do{if(this.l&&(this.l&112&&(this.l&32?F(this,168,28):this.l&64?F(this,4,30):this.l&16&&F(this,12,32),this.l&=-113),this.l&7))if(this.l&2){this.l&=-3;var b=160,c=(this.hb&224)>>5;if(a=this.X&&this.X.va>c?this.X:null)b=a.wc,c=a.va;c>(this.w&224)>>5?(this.l&4&&(gc(this,2),this.l&=-5),F(this,b,26),c=!0):c=!1;if(c&&a)if(c=this.X,c==a)this.X=a.next;else for(;c;){b=c.next;if(b==a){c.next=b.next;break}c=b}}else this.l&1&&this.l++;
this.l=this.l&7|this.w&16;this.decode(fc(this))}while(0<this.a);return this.i.complete?this.ha-this.a:void 0===this.i.complete?0:-1};q(function(){for(var a=A(document,"pdp11","cpu"),b=0;b<a.length;b++){var c=a[b],d=y(c),d=new ac(d);z(d,c)}});function xc(a,b){var c=b+a;hc(this,c,a,b);return c&65535}function yc(a,b){var c=b+a;hc(this,c<<8,a<<8,b<<8);return c&255}function zc(a,b){a=b<<1;P(this,a);return a&65535}function Ac(a,b){a=b<<1;P(this,a<<8);return a&255}
function Bc(a,b){a=b&32768|b>>1|b<<16;P(this,a);return a&65535}function Cc(a,b){a=b&2048|b>>1|b<<8;P(this,a<<8);return a&255}function Dc(a,b){a=b&~a;N(this,a);return a}function Ec(a,b){a=b&~a;N(this,a<<8);return a}function Fc(a,b){a|=b;N(this,a);return a}function Gc(a,b){a|=b;N(this,a<<8);return a}function Hc(a,b){a=~b|65536;O(this,a);return a&65535}function Ic(a,b){a=~b|256;O(this,a<<8);return a&255}function Jc(a,b){a=b-a;this.l&128||(this.o=this.h=a,this.g=b&(b^a));return a&65535}
function Kc(a,b){a=b-a;var c=a<<8;b<<=8;this.l&128||(this.o=this.h=c,this.g=b&(b^c));return a&255}function Lc(a,b){a=b+a;this.l&128||(this.o=this.h=a,this.g=a&(b^a));return a&65535}function Mc(a,b){a=b+a;var c=a<<8;this.l&128||(this.o=this.h=c,this.g=c&(b<<8^c));return a&255}function Nc(a,b){a=-b;O(this,a,a&b&32768);return a&65535}function Oc(a,b){a=-b;O(this,a<<8,(a&b&128)<<8);return a&255}function Pc(a,b){a=b<<1|this.j>>16&1;P(this,a);return a&65535}
function Qc(a,b){a=b<<1|this.j>>16&1;P(this,a<<8);return a&255}function Rc(a,b){a=(this.j&65536|b)>>1|b<<16;P(this,a);return a&65535}function Sc(a,b){a=((this.j&65536)>>8|b)>>1|b<<8;P(this,a<<8);return a&255}function Tc(a,b){var c=b-a;ic(this,c,a,b);return c&65535}function Uc(a,b){var c=b-a;ic(this,c<<8,a<<8,b<<8);return c&255}function Vc(a,b){this.l&128||(this.o=this.h=b&65280,this.g=this.j=0);return(b<<8|b>>8)&65535}function Wc(a,b){a^=b;N(this,a);return a&65535}
function Xc(a){S(this,a,Q(this,a),xc);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}function Yc(a){var b=uc(this,a);a=a>>6&7;var c=this.f[a];c&32768&&(c|=4294901760);this.j=this.g=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.j=c<<17-b,c>>=b;else if(b)if(16<b)this.g=c,c=0;else{this.j=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.g=32768)}this.f[a]=c&65535;this.o=this.h=c;this.a-=(this.c?6:7)+b}
function Zc(a){var b=uc(this,a);a=a>>6&7;var c=this.f[a]<<16|this.f[a|1];this.j=this.g=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.j=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.j=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.g=32768)):d=c;this.f[a]=d>>16&65535;this.f[a|1]=d&65535;this.o=d>>16;this.h=d>>16|d;this.a-=(this.c?6:7)+b}function $c(a){T(this,a,!L(this))}function ad(a){T(this,a,L(this))}
function bd(a){S(this,a,Q(this,a),Dc);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}function cd(a){R(this,a,rc(this,a),Ec);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}function dd(a){S(this,a,Q(this,a),Fc);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}function ed(a){R(this,a,rc(this,a),Gc);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}
function fd(a){N(this,Q(this,a)&uc(this,a));this.a-=this.c?4+(this.C&&6<=this.b?1:0):(this.B?4:3)+(7==this.b?2:0)}function gd(a){N(this,(rc(this,a)&tc(this,a))<<8);this.a-=this.c?4+(this.C&&6<=this.b?1:0):(this.B?4:3)+(7==this.b?2:0)}function hd(a){T(this,a,this.h&65535?0:4)}function id(a){T(this,a,!this.ma()==!(this.g&32768))}function jd(a){T(this,a,!!(this.h&65535)&&!this.ma()==!(this.g&32768))}function kd(a){T(this,a,!L(this)&&!!(this.h&65535))}
function ld(a){T(this,a,(this.h&65535?0:4)||!this.ma()!=!(this.g&32768))}function md(a){T(this,a,L(this)||(this.h&65535?0:4))}function nd(a){T(this,a,!this.ma()!=!(this.g&32768))}function od(a){T(this,a,this.ma())}function pd(a){T(this,a,!!(this.h&65535))}function qd(a){T(this,a,!this.ma())}function rd(){F(this,12,1);this.a-=5}function sd(a){T(this,a,!0)}function td(a){T(this,a,!(this.g&32768))}function ud(a){T(this,a,this.g&32768?2:0)}
function U(a){a&1&&(this.j=0);a&2&&(this.g=0);a&4&&(this.h=1);a&8&&(this.o=0);this.a-=5}function vd(a){var b=Q(this,a);a=uc(this,a);ic(this,b-a,a,b);this.a-=this.c?4+(this.C&&6<=this.b?1:0):(this.B?4:3)+(7==this.b?2:0)}function wd(a){var b=rc(this,a)<<8;a=tc(this,a)<<8;ic(this,b-a,a,b);this.a-=this.c?4+(this.C&&6<=this.b?1:0):(this.B?4:3)+(7==this.b?2:0)}
function xd(a){var b=uc(this,a);if(b){a=a>>6&7;var c=this.f[a]<<16|this.f[a|1];this.j=this.g=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.f[a]=d&65535,this.f[a|1]=c-d*b&65535,this.h=d>>16|d,this.o=d>>16):(this.g=32768,this.h=d>>15|d,this.o=c>>16,-1===b&&65534===this.f[a]&&(this.f[a]=this.f[a|1]=1));this.a-=53}else this.h=this.o=0,this.g=32768,this.j=65536,this.a-=7}function yd(){F(this,24,2);this.a-=25}
function zd(){this.w&49152?(this.G|=128,F(this,4,3)):this.F?this.F.c():Xa(this);this.a-=7}function Ad(){F(this,16,4);this.a-=25}var Bd=[0,7,7,10,7,11,9,13];function V(a){var b=this.a;M(this,sc(this,a));this.a=b-Bd[this.c]}var Cd=[0,14,14,17,14,18,16,20];function Dd(a){var b=this.a,c=sc(this,a);a=a>>6&7;jc(this,this.f[a]);this.f[a]=this.f[7];M(this,c);this.a=b-Cd[this.c]}var Ed=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];
function Fd(a){var b=Q(this,a),c=this.a;N(this,wc(this,a,b));this.a=c-Ed[(this.B?8:0)+this.c]+(7!=this.b||this.c?0:2)}function Gd(a){var b=rc(this,a);N(this,vc(this,a,b,1)<<8);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}var Hd=[7,13,13,17,14,18,17,21];
function Id(a){var b=uc(this,a);a=a>>6&7;b&32768&&(b|=-65536);var c=this.f[a];c&32768&&(c|=-65536);b=~~(b*c);this.f[a]=b>>16&65535;this.f[a|1]=b&65535;this.l&128||(this.o=b>>16,this.h=this.o|b,this.g=0,this.j=-32768>b||32767<b?65536:0);this.a-=23}function Jd(){this.a-=5}function Kd(){this.w&49152||(ec(this),this.m.reset());this.a-=667}function Ld(){kc(this);this.l|=this.w&16;this.a-=13}function Md(a){if(a&8)F(this,8,6);else{var b=lc(this);a&=7;M(this,this.f[a]);this.f[a]=b;this.a-=9}}
function W(a){a&1&&(this.j=65536);a&2&&(this.g=32768);a&4&&(this.h=0);a&8&&(this.o=32768);this.a-=5}function Nd(a){var b=(a&448)>>6;if(this.f[b]=this.f[b]-1&65535)M(this,this.f[7]-((a&63)<<1)),this.a+=1;this.a-=6}function Od(a){S(this,a,Q(this,a),Tc);this.a-=this.c?9+(this.C&&6<=this.b?1:0):(this.B?5:3)+(7==this.b?2:0)}function X(a){S(this,a,0,Vc);this.a-=this.c?9:3+(7==this.b?2:0)}function Pd(){F(this,28,5);this.a-=5}function Qd(){this.l&4||this.v.fa();this.l|=4;gc(this,-2);this.a-=3}
function Rd(a){S(this,a,Q(this,a),Wc);this.a-=this.c?9:3+(7==this.b?2:0)}function Y(){F(this,8,6)}function bc(a){Sd[a>>12].call(this,a)}function Td(a){Ud[a>>6&3].call(this,a)}function Vd(a){Wd[a>>6&3].call(this,a)}function Xd(a){Zd[a>>6&3].call(this,a)}function $d(a){ae[a&15].call(this,a)}function be(a){ce[a&15].call(this,a)}function de(a){ee[a>>6&3].call(this,a)}function fe(a){ge[a>>6&3].call(this,a)}function he(a){ie[a>>6&3].call(this,a)}
var Sd=[function(a){je[a>>8&15].call(this,a)},Fd,vd,fd,bd,dd,Xc,Y,function(a){ke[a>>8&15].call(this,a)},Gd,wd,gd,cd,ed,Od,Y],je=[function(a){le[a>>4&15].call(this,a)},sd,pd,hd,id,nd,jd,ld,Dd,Dd,Td,Vd,Xd,Y,Y,Y],Ud=[function(a){O(this,wc(this,a,0));this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,0,Hc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,1,Lc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,1,Jc);this.a-=this.c?9:3+(7==this.b?2:0)}],Wd=[function(a){S(this,a,0,Nc);
this.a-=this.c?11:6},function(a){S(this,a,L(this)?1:0,xc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,L(this)?1:0,Tc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){a=uc(this,a);O(this,a);this.a-=this.c?4:3+(7==this.b?2:0)}],Zd=[function(a){S(this,a,0,Rc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,0,Pc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,0,Bc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){S(this,a,0,zc);this.a-=this.c?9:3+(7==this.b?2:0)}],le=[function(a){me[a&
15].call(this,a)},Y,Y,Y,V,V,V,V,Md,Y,$d,be,X,X,X,X],me=[zd,Qd,Ld,rd,Ad,Kd,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y],ae=[Jd,function(){this.j=0;this.a-=5},function(){this.g=0;this.a-=5},U,function(){this.h=1;this.a-=5},U,U,U,function(){this.o=0;this.a-=5},U,U,U,U,U,U,U],ce=[Jd,function(){this.j=65536;this.a-=5},function(){this.g=32768;this.a-=5},W,function(){this.h=0;this.a-=5},W,W,W,function(){this.o=32768;this.a-=5},W,W,W,W,W,W,W],ke=[qd,od,kd,md,td,ud,$c,ad,yd,Pd,de,fe,he,Y,Y,Y],ee=[function(a){O(this,vc(this,a,0));
this.a-=this.c?9:3+(7==this.b?2:0)},function(a){R(this,a,0,Ic);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){R(this,a,1,Mc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){R(this,a,1,Kc);this.a-=this.c?9:3+(7==this.b?2:0)}],ge=[function(a){R(this,a,0,Oc);this.a-=this.c?11:6},function(a){R(this,a,L(this)?1:0,yc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){R(this,a,L(this)?1:0,Uc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){a=tc(this,a);O(this,a<<8);this.a-=this.c?4:3+(7==this.b?2:0)}],ie=
[function(a){R(this,a,0,Sc);this.a-=this.c?9+(this.Ya&1):3+(7==this.b?2:0)},function(a){R(this,a,0,Qc);this.a-=this.c?9:3+(7==this.b?2:0)},function(a){R(this,a,0,Cc);this.a-=this.c?9+(this.Ya&1):3+(7==this.b?2:0)},function(a){R(this,a,0,Ac);this.a-=this.c?9:3+(7==this.b?2:0)}];function cc(a){ne[a>>12].call(this,a)}
var ne=[function(a){oe[a>>8&15].call(this,a)},Fd,vd,fd,bd,dd,Xc,function(a){pe[a>>8&15].call(this,a)},function(a){qe[a>>8&15].call(this,a)},Gd,wd,gd,cd,ed,Od,Y],oe=[function(a){re[a>>4&15].call(this,a)},sd,pd,hd,id,nd,jd,ld,Dd,Dd,Td,Vd,Xd,function(a){se[a>>6&3].call(this,a)},Y,Y],se=[function(a){a=this.f[7]+((a&63)<<1)&65535;var b=this.R(a|this.N);M(this,this.f[5]);this.f[6]=a+2&65535;this.f[5]=b;this.a-=8},function(a){a=pc(this,a,0);jc(this,a);N(this,a);this.a-=11},function(a){var b=lc(this),c=this.a;
qc(this,a,0,b);N(this,b);this.a=c-Hd[this.c]},function(a){N(this,wc(this,a,this.ma?65535:0));this.a-=this.c?9:3+(7==this.b?2:0)}],re=[function(a){te[a&15].call(this,a)},Y,Y,Y,V,V,V,V,Md,function(a){a&8?(this.w&49152||(this.w=this.w&-2017|(a&7)<<5,this.l|=1),this.a-=5):F(this,8,6)},$d,be,X,X,X,X],te=[zd,Qd,Ld,rd,Ad,Kd,function(){kc(this);this.a-=13},Y,Y,Y,Y,Y,Y,Y,Y,Y],pe=[Id,Id,xd,xd,Yc,Yc,Zc,Zc,Rd,Rd,Y,Y,Y,Y,Nd,Nd],qe=[qd,od,kd,md,td,ud,$c,ad,yd,Pd,de,fe,he,function(a){ue[a>>6&3].call(this,a)},Y,
Y],ue=[Y,function(a){a=pc(this,a,65536);jc(this,a);N(this,a);this.a-=11},function(a){var b=lc(this),c=this.a;qc(this,a,65536,b);N(this,b);this.a=c-Hd[this.c]},Y];
function ve(a){u.call(this,"ROM",a,ve);this.Y=this.b=null;this.j=a.addr;this.c=a.size;this.h=a.alias;this.g=a.file;this.o=ka(this.g);if(this.g){a=this.g;var b=la(this.o);"json"!=b&&"hex"!=b&&(a=na()+"/api/v1/dump?file="+this.g+"&format=bytes&decimal=true");var c=this;k(a,null,!0,function(a,b,f){f?c.I("Unable to load ROM resource (error "+f+": "+a+")"):(Pa(c.ra,a,b),(a=ua(a,b))?(c.b=a.L,c.Y=a.Y):c.g=null,we(c))})}}w(ve);ve.prototype.ea=function(a,b,c,d){this.m=b;this.a=c;this.F=d;we(this)};
ve.prototype.$=function(){this.Y&&(this.F&&this.F.a(this.id,this.j,this.c,this.Y),delete this.Y);return!0};ve.prototype.Z=function(){return!0};
function we(a){if(!Sa(a)){if(a.g){if(!a.b||!a.m)return;a.c||(a.c=a.b.length);if(a.b.length!=a.c){var b="ROM size ("+ja(a.b.length,8,!0)+") does not match specified size ("+ja(a.c,8,!0)+")";a.i.error=!0;a.I(b)}else{b=a.j;if(kb(a.m,b,a.c,Ib)){var c;for(c=0;c<a.b.length;c++)a.m.Ga(b+c,a.b[c]);b=!0}else b=!1;if(b){b=[];"number"==typeof a.h?b.push(a.h):null!=a.h&&a.h.length&&(b=a.h);for(c=0;c<b.length;c++){var d=a,e=b[c],f=jb(d.m,d.j,d.c);ib(d.m,e,d.c,f)}delete a.b}}}B(a)}}
q(function(){for(var a=A(document,"pdp11","rom"),b=0;b<a.length;b++){var c=a[b],d=y(c),d=new ve(d);z(d,c)}});
function xe(a){u.call(this,"RAM",a,xe);this.Y=this.c=null;this.o=a.addr;this.v=a.size;this.h=a.load;this.g=a.exec;this.j=!1;this.b=a.file;this.u=ka(this.b);if(this.b){a=this.b;var b=la(this.u);"json"!=b&&"hex"!=b&&(a=na()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;k(a,null,!0,function(a,b,f){f?c.I("Unable to load RAM resource (error "+f+": "+a+")"):(Pa(c.ra,a,b),(a=ua(a,b))?(c.c=a.L,c.Y=a.Y,null==c.h&&null!=a.cb&&(c.h=a.cb),null==c.g&&null!=a.bb&&(c.g=a.bb)):c.b=null,ye(c))})}}
w(xe);xe.prototype.ea=function(a,b,c,d){this.m=b;this.a=c;this.F=d;ye(this)};xe.prototype.$=function(){return!0};xe.prototype.Z=function(){return!0};function ye(a){!a.j&&a.v&&kb(a.m,a.o,a.v,1)&&(a.j=!0);if(!Sa(a)){if(!a.j)m("No RAM allocated");else if(a.b){if(!a.c||!a.m)return;var b=a.o;null!==a.h&&(b=a.h);for(var c=0;c<a.c.length;c++)a.m.Ga(b+c,a.c[c]);null!==a.g&&(b=a.a,c=a.g,b.ob=c,M(b,c));delete a.c}B(a)}}xe.prototype.reset=function(){};
q(function(){for(var a=A(document,"pdp11","ram"),b=0;b<a.length;b++){var c=a[b],d=y(c),d=new xe(d);z(d,c)}});function ze(a){u.call(this,"Keyboard",a,ze);B(this)}w(ze);ze.prototype.V=function(){return!1};ze.prototype.ea=function(a,b,c,d){this.v=a;this.a=c;this.F=d};q(function(){for(var a=A(document,"pdp11","keyboard"),b=0;b<a.length;b++){var c=a[b],d=y(c),d=new ze(d);z(d,c)}});
function Z(a){this.g=this.j=null;this.H=a.tabSize;this.B=a.charBOL;this.o=0;u.call(this,"SerialPort",a,Z);var b=a.binding;if("console"==b)this.j="";else{var c;a=Ae;b&&(void 0===c&&(c="Panel"),(c=Ra(c,this.id))&&(b=c.s[b])&&this.V(null,a,b))}this.u=this.A=null;this.exports={connect:this.nb,receiveData:this.fb}}w(Z);var Ae="buffer";g=Z.prototype;
g.V=function(a,b,c){var d=this;switch(b){case Ae:return this.s[b]=this.g=c,c.onkeydown=function(a){a=a||window.event;var b=a.keyCode;if(8===b||a.ctrlKey&&65<=b&&90>=b)a.preventDefault&&a.preventDefault(),64<b&&(b-=64),d.fb(b);return!0},c.onkeypress=function(a){a=a||window.event;d.fb(a.which||a.keyCode);a.preventDefault&&a.preventDefault();return!0},c.removeAttribute("readonly"),!0}return!1};
g.ea=function(a,b,c,d){this.v=a;this.m=b;this.a=c;this.F=d;var e=this;this.N=zb(48,4);this.J=wb(this.a,function(){e.b&128||!e.h.length||(e.C=e.h.shift(),e.b|=128,e.b&64&&xb(e.a,e.N))});this.O=zb(52,4);this.K=wb(this.a,function(){e.c|=128;e.c&64&&xb(e.a,e.O)});tb(b,this,Be);B(this)};
g.nb=function(){if(!this.u){var a=Tb(this.v,"connection");if(a){var b=a.split("->");if(2==b.length){var c=qa(b[0]);if(c!=this.Ia)return;b=qa(b[1]);if(this.u=Qa(b)){var d=this.u.exports;if(d){var e=d.connect;e&&e.call(this.u);if(this.A=d.receiveData){this.status(this.ra+"."+c+" connected to "+b);return}}}}this.status("Unable to establish connection: "+a)}}};g.$=function(a,b){if(!b)if(this.nb(),!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};
g.Z=function(a){return a?this.save():!0};g.reset=function(){Ce(this)};g.save=function(){var a=new K(this);a.set(0,[]);return a.data()};g.restore=function(){return Ce(this)};function Ce(a){a.C=0;a.b=0;a.c=128;a.h=[];return!0}g.fb=function(a){if("number"==typeof a)this.h.push(a);else if("string"==typeof a)for(var b=0;b<a.length;b++)this.h.push(a.charCodeAt(b));else this.h=this.h.concat(a);yb(this.a,this.J,1);return!0};g.ec=function(){return this.b&65535};g.Rc=function(a){this.b=this.b&-112|a&111};
g.dc=function(){this.b&=-129;0<this.h.length&&yb(this.a,this.J,1);return this.C};g.Qc=function(){};g.sc=function(){return this.c};g.ed=function(a){128==(this.c&192)&&a&64&&yb(this.a,this.K,1);this.c=this.c&-70|a&69};g.rc=function(){return 0};
g.dd=function(a){if(a&=255){this.A&&this.A.call(this.u,a);if(this.g)if(13==a)this.o=0;else if(8==a)this.g.value=this.g.value.slice(0,-1),0<this.o&&this.o--;else{var b;b=(b=ra[a])?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.H||8,c=a-this.o%a,this.H&&(b="                                        ".slice(0,c)));this.B&&!this.o&&c&&(b=String.fromCharCode(this.B)+b);this.g.value+=b;this.g.scrollTop=this.g.scrollHeight;this.o+=c}else if(null!=this.j){if(10==a||1024<=this.j.length)this.P(this.j),
this.j="";10!=a&&(this.j+=String.fromCharCode(a))}this.c&=-129;yb(this.a,this.K,1)}};var De={},Be=(De[65392]=[null,null,Z.prototype.ec,Z.prototype.Rc,"RCSR"],De[65394]=[null,null,Z.prototype.dc,Z.prototype.Qc,"RBUF"],De[65396]=[null,null,Z.prototype.sc,Z.prototype.ed,"XCSR"],De[65398]=[null,null,Z.prototype.rc,Z.prototype.dd,"XBUF"],De);q(function(){for(var a=A(document,"pdp11","serial"),b=0;b<a.length;b++){var c=a[b],d=y(c),d=new Z(d);z(d,c)}});
function J(a){u.call(this,"PC11",a,J);this.c=a.autoMount||null;this.B=this.u=this.b=this.g=0;this.A=[];this.j=Ee;this.o=Fe;this.h="";this.C=!Aa("Mobi")&&window&&"FileReader"in window}w(J);var Ee="",Fe=0;g=J.prototype;
g.V=function(a,b,c){var d=this,e=Fe;switch(b){case "listTapes":return this.s[b]=c,c.onchange=function(){var a=d.s.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(n){m("PC11 option error: "+n.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.s[b]=c,!0;case "loadTape":e=2;case "attachTape":return e||(e=1),this.s[b]=c,c.onclick=function(){var a=
d.s.listTapes;a&&Ge(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(this.C)return this.s[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Ge(d,ka(b,!0),b,1,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
g.ea=function(a,b,c,d){this.v=a;this.m=b;this.a=c;this.F=d;var e=this;if((this.c=Tb(this.v,"autoMount")||this.c)&&"string"==typeof this.c)try{this.c=eval("("+this.c+")")}catch(f){m("PC11 auto-mount error: "+f.message+" ("+this.c+")"),this.c=null}this.J=zb(56,4);this.H=wb(this.a,function(){He(e)});tb(b,this,Ie);Je(this,"None",Ee,!0);this.C&&Je(this,"Local Tape","?");Je(this,"Remote Tape","??");Ke(this)||B(this)};
g.$=function(a,b){if(!b)if(!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};g.Z=function(a){return a?this.save():!0};g.reset=function(){this.b&=-2241;this.u=0};function Ke(a){a.g=0;if(a.c){var b=a.c.path,c;if(!(c=a.c.name))a:{if((c=a.s.listTapes)&&c.options)for(var d=0;d<c.options.length;d++){var e=c.options[d];if(e.value==b){c=e.text;break a}}c=ka(b,!0)}b&&c?Le(a,c,b,1,!0):a.I("Incorrect auto-mount settings for PC11 ("+JSON.stringify(a.c)+")")}return!!a.g}
function Ge(a,b,c,d,e){if(c)if("?"==c)a.I('Use "Choose File" and "Mount" to select and load a local tape.');else{if("??"==c){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=ka(c);a.j="??"}else a.j=c;Le(a,b,c,d,!1,e)}else Me(a,!1)}function Le(a,b,c,d,e,f){var h=-1;if(a.h.toLowerCase()!=c.toLowerCase()||a.o!=d)h++,Me(a,!0),a.i.Wa?a.I("PC11 busy"):(e&&a.g++,Ne(a,b,c,d,f)?h++:a.i.Wa=!0)}
function Ne(a,b,c,d,e){var f=c;if(e){var h=new FileReader;h.onload=function(){var b=h.result;b&&(b=new Uint8Array(b,0,b.byteLength),Oe(a,c,d,b),a.j="?");Pe(a)};h.readAsArrayBuffer(e);return!0}0>c.indexOf("/api/v1/dump")&&(e=la(c),f="json"==e||"gz"==e?encodeURI(c):na()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!k(f,null,!0,function(e,f,h){var l=0>h&&a.v&&!a.v.i.M;h?a.I('Unable to load tape "'+b+'" (error '+h+": "+e+")",l):(Pa(a.ra,e,f),(e=ua(e,f))&&Oe(a,c,d,e.L));a.i.Wa=!1;
a.g&&(a.g--,a.g||B(a));Pe(a)})}function Je(a,b,c,d){if((a=a.s.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}function Pe(a){var b=a.s.listTapes;if(b&&b.options){a=a.j||a.h;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}
function Oe(a,b,c,d){a.h=b;a.o=c;if(2==c){b=0;c=!1;for(var e=0;b<d.length-1;){var f=d[b]&255|(d[b+1]&255)<<8;if(f)if(f&255){if(1!=f){e||(c=!0);break}if(b+6>=d.length){c=!0;break}b+=2;for(var h=d[b++]&255|(d[b++]&255)<<8,l=d[b++]&255|(d[b++]&255)<<8,f=f+((h&255)+(h>>8)+(l&255)+(l>>8)),n=b,r=h-=6;0<h&&b<d.length-1;)f+=d[b++]&255,h--;if(h||b>=d.length){c=!0;break}f+=d[b++]&255;if(f&255){c=!0;break}if(r)for(;r--;)a.a.Ga(l++,d[n++]&255);else l&1||M(a.a,l);e++}else b++;else b+=2}c&&(a.h="",a.j=Ee,a.o=Fe)}else a.B=
0,a.A=d}function Me(a,b){if(a.h||!1===b)a.h="",b||(a.j=Ee,a.o=Fe,Pe(a))}g.save=function(){return(new K(this)).data()};g.restore=function(){return!0};function He(a){1==(a.b&32769)&&!(a.b&128)&&a.B<a.A.length&&(a.u=a.A[a.B++]&255,a.b|=128,a.b&=-2049,a.b&64&&xb(a.a,a.J),yb(a.a,a.H,1E3/300,!0))}g.Yb=function(){return this.b&65534};g.Kc=function(a){a&1&&(this.b&32768?a&=-2:(this.b&=-129,this.b|=2048,this.u=0));this.b=this.b&-66|a&65;He(this)};g.Xb=function(){this.b&=-129;this.b|=2048;return this.u};
g.Jc=function(){};var Qe={},Ie=(Qe[65384]=[null,null,J.prototype.Yb,J.prototype.Kc,"PRS"],Qe[65386]=[null,null,J.prototype.Xb,J.prototype.Jc,"PRB"],Qe);
function Re(a,b,c){u.call(this,"Computer",a,Re);this.i.M=!1;Se(this,b);this.B=Tb(this,"autoPower",a);this.g=0;this.N=a.busWidth||a.buswidth;this.b=Te;this.u=null;this.o=this.J=!1;this.O=Tb(this,"url")||"";(Math.random()+.1).toString(36);this.c=Ue(this);if(this.a=Ra("CPU",this.id)){this.F=Ra("Debugger",this.id);this.m=new $a({id:this.ra+".bus",busWidth:this.N},this.a,this.F);var d,e=x(this.id);if((this.h=Ra("Panel",this.id))&&this.h.Xa)for(b=0;b<e.length;b++)d=e[b],d.I=this.h.I,d.P=this.h.P,d.Xa=this.h.Xa;
this.P("PDPjs v1.30.1\nCopyright \u00a9 2012-2016 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.P("Portions adapted from the PDP-11/70 Emulator v1.4 by Paul Nankervis <paulnank@hotmail.com>");for(b=0;b<e.length;b++)d=e[b],d.ea&&d.ea(this,this.m,this.a,this.F);b=null;d=a.resume;void 0!==d&&(1<d.length?b=this.v=d:this.b=parseInt(d,10));var f;if(a=Tb(this,"state")||(f=!0,a.state))b=this.C=a,f||(this.o=!0,this.b=Te),this.b&&(this.A=new K(this,
"1.30.1"),Ve(this.A)?b=null:delete this.A);!b&&this.b&&(b=We(this))&&(this.o=!0);if(b){var h=this;k(b,null,!0,function(a,b,c){c?(h.v=null,h.o=!1,h.I("Unable to load machine state from server (error "+c+(b?": "+qa(b):"")+")")):(h.u=b,h.J=!0);B(h)})}else B(this);this.s.power||(this.B=!0);!c&&this.B&&Xe(this,this.Fa)}else m("Unable to find CPU component")}w(Re);var Te=0;
function Se(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){m(d.message+" ("+c+")")}}a.K=b}function Tb(a,b,c){var d=b.toLowerCase(),d=Ja[b]||Ja[d];void 0===d&&a.K&&(d=a.K[b]);void 0===d&&c&&(d=c[b]);void 0===d&&"object"==typeof resources&&resources[b]&&(d=b);return d}function Xe(a,b,c){for(var d=x(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!Sa(f)){Sa(f,function(){Xe(a,b,c)});return}}b.call(a,c)}
function Ye(a,b){var c=new K(a,"1.30.1","validate");if(Ve(c)&&Ze(c)){var d=c.get("timestamp"),e=b?b.get("timestamp"):"unknown";d!=e&&(a.I("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}g=Re.prototype;
g.Fa=function(a){void 0===a&&(a=this.b||(this.u?1:Te));if(!this.g){this.g++;var b=!1,c=!1;this.H=!1;var d=this.A||new K(this,"1.30.1");if(-1==a)b=!0;else if(a>Te){if(Ve(d,this.u)){this.j=new K(this,"1.30.1","failsafe");Ve(this.j)&&($e(this,d),a=2,af(this.j));this.j.set("timestamp",ta());bf(this.j);var e=this.b&&!this.o;if(1==a||va("Click OK to restore the previous PDPjs machine state, or CANCEL to reset the machine.")){if(c=Ze(d)){var f=d.get("code"),h=d.get("data");f&&("ok"==f?Ve(d,h):("error"==
f&&"no machine state"!=h?(this.I("Error: "+h),"unable to verify user"==h&&(za("user",""),this.c=null)):this.P(f+": "+h),af(d),Ve(d)?(c=Ze(d),e=!0):c=!1))}e&&Ye(this,c?d:null)}else 2==a&&d.clear()}else Ye(this);delete this.u;delete this.A}e=x(this.id);for(f=0;f<e.length;f++)h=e[f],h!==this&&h!=this.a&&(c=cf(this,h,d,b,c));b=[d,a,c];-1!=a?Xe(this,this.lb,b):this.lb(b)}};
function cf(a,b,c,d,e){if(!b.i.M){b.i.M=!0;if(b.$){var f=null;e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,"."))));"string"===typeof f&&(f=null);!b.$(f,d)&&f&&(m("Unable to restore state for "+b.type),a.C&&!a.J?(c.clear(),a.b=Te,window&&window.location.reload()):a.H=!0,b.$(null),e=!1)}if(!d&&b.pb)for(a=b.pb.split("|"),c=0;c<a.length;c++)b.status(a[c])}return e}
g.lb=function(a){var b=a[0],c=0>a[1];a=a[2];this.T=!0;this.i.M=!0;var d=this.s.power;d&&(d.textContent="Shutdown");this.a&&(cf(this,this.a,b,c,a),this.a.Da());this.H&&($e(this,b),b.clear());!c&&this.j&&(this.j.clear(),delete this.j);this.g=0};
function $e(a,b){if(va("There may be a problem with your PDPjs machine.\n\nTo help us diagnose it, click OK to send this PDPjs machine state to http://www.pcjs.org.")){var c=a.c||"";b=b.toString();var d={app:"PDPjs",ver:"1.30.1"};d.url=a.O;d.user=c;d.type="bug";d.data=b;k("http://www.pcjs.org/api/v1/report",d,!0)}}
function df(a,b,c){var d,e="none";if(a.g)return null;a.g--;var f=new K(a,"1.30.1"),h=new K(a,"1.30.1","validate"),l=ta();h.set("timestamp",l);f.set("timestamp",l);f.set("version","1.30.1");f.set("url",window?window.location.href:null);f.set("browser",window?window.navigator.userAgent:"");a.a&&a.a.Z&&(c&&Xa(a.a),d=a.a.Z(b,c),"object"===typeof d&&f.set(a.a.id,d),c&&(a.a.i.M=!1,!1===d&&(e=null)));for(var l=x(a.id),n=0;n<l.length;n++){var r=l[n];r.i.M&&(r.Z&&(d=r.Z(b,c),"object"===typeof d&&f.set(r.id,
d)),c&&(r.i.M=!1,!1===d&&(e=null)))}e&&(c?(l=d=!1,b?(a.c&&ef(a,a.c,f.toString()),bf(h)&&bf(f)||(e=null,d=l=!0)):a.b&&(d=!0,l=3==a.b),d&&f.clear(l)):e=f.toString());c&&(a.i.M=!1,b=a.s.power)&&(b.textContent="Power");a.g=0;return e}g.reset=function(){this.m&&this.m.reset&&this.m.reset();for(var a=x(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.m&&c.reset&&c.reset()}};g.start=function(a,b){for(var c=x(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}this.fa(!0)};
g.stop=function(a,b){for(var c=x(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}this.fa(!0)};
g.V=function(a,b,c){var d=this;switch(b){case "power":return this.s[b]=c,c.onclick=function(){d.g||(d.i.M?df(d,!1,!0):Xe(d,d.Fa))},!0;case "reset":return this.s[b]=c,c.onclick=function(){if(d.i.M&&!d.g)if(d.b&&!d.v){var a=va("Click OK to save changes to this PDPjs machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");df(d,a,!0);!a&&d.C?window&&window.location.reload():d.Fa(Te)}else d.reset(),d.a&&d.a.Da()},!0;case "save":if(ma())c.parentNode.removeChild(c);else return this.s[b]=
c,c.onclick=function(){var a=Ue(d,!0);if(a){var b=!!(d.b&&!d.v||d.C),c=df(d,b);b?ef(d,a,c):d.I("Resume disabled, machine state not saved")}},!0}return!1};
function Ue(a,b){var c=a.c;c||((c=ya("user"),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=ff(a,c))||a.I("The user ID is invalid.")):b&&a.I("Browser local storage is not available"));return c}
function ff(a,b){a.c=null;b=k(na()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(za("user",b.data),a.c=b.data)}catch(d){m(d.message+" ("+c+")")}return a.c}function We(a){var b=null;a.c&&(b=na()+"/api/v1/user?req=load&user="+a.c+"&state="+gf(a,"1.30.1"));return b}
function ef(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=gf(a,"1.30.1");d.data=c;b=k(na()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.I("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.I(c),za("user",""),a.c=null)}}
g.fa=function(a){this.a&&this.a.fa(a);this.h&&this.h.fa(a)};q(function(){for(var a=A(document,"pdp11-machine"),b=0;b<a.length;b++)for(var c=a[b],d=y(c),c=A(c,"pdp11","computer"),e=0;e<c.length;e++){var f=c[e],h=y(f),h=new Re(h,d,!0);z(h,f);h.B&&Xe(h,h.Fa)}});p.show.push(function(){for(var a=A(document,"pdp11","computer"),b=0;b<a.length;b++){var c=y(a[b]);(c=Ra("Computer",c.id))&&c.T&&!c.i.M&&c.Fa(-1)}});
p.exit.push(function(){for(var a=A(document,"pdp11","computer"),b=0;b<a.length;b++){var c=y(a[b]);(c=Ra("Computer",c.id))&&c.i.M&&df(c,!(!c.b||c.v),!0)}});function K(a,b,c){this.id=a.id;this.key=gf(a,b,c);this.F=a.F;af(this,a.Hb)}function gf(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}
K.prototype={constructor:K,set:function(a,b){try{this[this.id][a]=b}catch(c){}},get:function(a){return this[this.id][a]||null},value:function(){return this[this.id]},data:function(){return this[this.id]},toString:function(){var a=this[this.id];return"string"==typeof a?a:JSON.stringify(a)},clear:function(a){af(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,
1);c=0}}};function af(a,b){a[a.id]={};b&&a.set("parms",b);a.a=!1}function bf(a){var b=!0;if(xa()){var c=JSON.stringify(a[a.id]);za(a.key,c)||(m("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}function Ze(a){var b=!0;try{a[a.id]=JSON.parse(a[a.id])}catch(c){m(c.message||c),b=!1}return b}function Ve(a,b){return b?(a[a.id]=b,a.a=!0):a.a?!0:xa()&&(b=ya(a.key))?(a[a.id]=b,a.a=!0):!1}var hf=0;
function jf(a,b,c,d,e,f){e("Loading "+a+"...");k(a,null,!0,function(h,l,n){n?(l||(l="unable to load "+a+" ("+n+")"),f(l,null)):kf(l,a,b,c,d,e,f)})}
function kf(a,b,c,d,e,f,h){function l(a,f){if(f)h(f,null);else{c&&(Pa(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),
a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pdp11$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(t){f=null,a=t.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);h(a,f)}}a?e?lf(a,f,l):l(a,null):h("no data"+(b?" for file: "+b:""),null)}
function lf(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");k(e,null,!0,function(f,h,l){if(l||!h)c(a,"unable to resolve XML reference: "+d[0]+" ("+l+")");else{if(f=d[3])if(l=h.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var n=l[0],r,t=/( [a-z]+=)(['"])(.*?)\2/g;r=t.exec(f);)n=0>n.indexOf(r[1])?n.replace(">",r[0]+">"):n.replace(new RegExp(r[1]+"(['\"])(.*?)\\1"),r[0]);l[0]!=n&&(h=h.replace(l[0],n))}else{c(a,"missing <"+d[1]+"> in "+e);return}h=h.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],h);lf(a,b,c)}})}else c(a,null)}
function mf(a,b,c,d){function e(a){if(void 0===l){var b=h&&A(h,"machine-warning");l=b&&b[0]||h}l&&(l.innerHTML=pa(a))}function f(a){e("Error: "+a);n&&(--hf||Ga(!0));n=!1}var h,l,n=!0;hf++;Oa[a]={};try{if(h=document.getElementById(a)){var r;if("object"==typeof resources&&(r=resources.css)){var t=document.head||document.getElementsByTagName("head")[0],D=document.createElement("style");D.type="text/css";D.styleSheet?D.styleSheet.cssText=r:D.appendChild(document.createTextNode(r));t.appendChild(D)}c||
(c="/versions/pdpjs/1.30.1/components.xsl");r=function(d,l){l?jf(c,null,null,!1,e,function(d,n){n?(Pa(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(n=l.transformNode(n))?(h.outerHTML=n,--hf||Ga(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(n),(n=d.transformToFragment(l,document))?h.parentNode?(h.parentNode.replaceChild(n,h),--hf||Ga(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?jf(b,a,d,!0,e,r):kf(b,null,a,d,!1,e,r)}else f("missing machine element: "+a)}catch(Yd){f(Yd.message)}return n}window.embedPDP11=function(a,b,c,d){Ga(!1);return mf(a,b,c,d)};window.enableEvents=Ga;window.sendEvent=Ha;})();//# sourceMappingURL=/tmp/pdpjs/1.30.1/pdp11.map
