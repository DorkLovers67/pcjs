(function(){/*
 http://pcjs.org/modules/shared/es6/diskapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/dumpapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/reportapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/userapi.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/keys.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/strlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/weblib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/state.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/embed.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/usrlib.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/component.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/serialport.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/shared/es6/debugger.js (C) Jeff Parsons 2012-2016
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2016
*/
var h;function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}
for(var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,ca=["Math","log2"],da=0;da<ca.length-1;da++){var ea=ca[da];ea in ba||(ba[ea]={});ba=ba[ea]}var ga=ca[ca.length-1],ha=ba[ga],ia=ha?ha:function(a){return Math.log(a)/Math.LN2};
ia!=ha&&null!=ia&&aa(ba,ga,{configurable:!0,writable:!0,value:ia});
var ja={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],21368320:[615,4,17],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},ka={ng:0,sd:1,pg:2,qg:3,rg:4,sg:5,tg:6,ug:7,Kc:8,vg:9,td:10,wg:11,xg:12,ud:13,yg:14,zg:15,Ag:16,Bg:17,Cg:18,Dg:19,Eg:20,Fg:21,Gg:22,Hg:23,Ig:24,Jg:25,Kg:26," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,
"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Hc:65,mg:66,og:67,Lg:68,E:69,Mg:70,Ng:71,Og:72,Pg:73,Qg:74,Rg:75,Sg:76,Tg:77,Ug:78,Vg:79,Wg:80,Q:81,Xg:82,Yg:83,Zg:84,$g:85,ah:86,bh:87,dh:88,eh:89,Ed:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,fh:97,gh:98,hh:99,d:100,e:101,jh:102,kh:103,lh:104,mh:105,ph:106,k:107,qh:108,rh:109,n:110,sh:111,p:112,q:113,r:114,th:115,t:116,vh:117,wh:118,xh:119,x:120,y:121,z:122,"{":123,
"|":124,"}":125,"~":126,vd:127};
function la(a,b){var c;if(a){b||(b=10);var d=a.charAt(0),e=0<a.indexOf(",");e&&(a=a.replace(/,/g,""));"#"==d?(b=8,d=null):"$"==d&&(b=16,d=null);null==d?a=a.substr(1):("0"==d&&(d=a.charAt(1),"b"==d&&e&&(b=2,d=null),"o"==d?(b=8,d=null):"x"==d&&(b=16,d=null)),null==d?a=a.substr(2):(d=a.charAt(a.length-1).toLowerCase(),"y"==d?(b=2,d=null):"."==d?(b=10,d=null):"h"==d&&(b=16,d=null),null==d&&(a=a.substr(0,a.length-1))));var f,d=a;((e=b)&&10!=e?16==e?d.match(/^[0-9a-f]+$/i):8==e?d.match(/^[0-7]+$/):2==e&&
d.match(/^[01]+$/):d.match(/^[0-9]+$/))&&!isNaN(f=parseInt(a,b))&&(c=f|0)}return c}function ma(a,b,c){var d="";b?32<b&&(b=32):b=32;for(var e=null==a||isNaN(a),f=c=c||b;0<b--;)f||(d=","+d,f=c),d=(e?"?":a&1?"1":"0")+d,a>>=1,f--;return d}function q(a,b,c){var d="";b?11<b&&(b=11):b=a&-16777216?11:a&-65536?8:6;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;)d=String.fromCharCode((a&7)+48)+d,a>>=3;return(c?"0o":"")+d}
function na(a){var b=2,c="";b?10<b&&(b=10):b=a&-65536?10:5;if(null==a||isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;)c=String.fromCharCode(a%10+48)+c,a/=10;return c}function v(a,b,c){var d="";b?8<b&&(b=8):b=a&-65536?8:4;if(null==a||isNaN(a))for(;0<b--;)d="?"+d;else for(;0<b--;){var e=a&15,e=e+(0<=e&&9>=e?48:55),d=String.fromCharCode(e)+d;a>>=4}return(c?"0x":"")+d}function w(a){return v(a,4,!0)}
function x(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}function oa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function pa(a,b){return-1!==a.indexOf(b,a.length-b.length)}function ra(a){return a.replace(/[&<>"']/g,function(a){return sa[a]})}function ta(a,b){return(a+"                                        ").slice(0,b)}
function ua(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var sa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},wa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"};
function xa(a,b,c){var d=0,e=a.length,f=0;for(c||(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,k;k=c(b,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}function ya(){return Date.now()||+new Date}function za(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function Aa(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(k.onreadystatechange=function(){4===k.readyState&&(f=k.responseText,200==k.status||!k.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var l="",m;for(m in b)b.hasOwnProperty(m)&&(l&&(l+="&"),l+=m+"="+encodeURIComponent(b[m]));l=l.replace(/%20/g,"+");k.open("POST",a,c);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l)}else k.open("GET",a,c),"bytes"==b&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.send();c||(f=k.responseText,200!=k.status&&(e=k.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function Ba(a,b){var c,d={ba:null,da:null,La:null,Ka:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.La=g.load;d.Ka=g.exec;if(e=g.bytes)d.ba=e;else if(e=g.words)for(d.ba=Array(2*e.length),f=c=0;c<e.length;c++)d.ba[f++]=e[c]&255,d.ba[f++]=e[c]>>8&255;else if(e=g.data)for(d.ba=Array(4*e.length),f=c=0;c<e.length;c++)d.ba[f++]=
e[c]&255,d.ba[f++]=e[c]>>8&255,d.ba[f++]=e[c]>>16&255,d.ba[f++]=e[c]>>24&255;else d.ba=g;d.da=g.symbols;d.ba.length?1==d.ba.length&&(y(d.ba[0]),d=null):(y("Empty resource: "+a),d=null)}catch(k){y("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){y("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.ba=e)}return d}
function Ca(){return"http://"+(window?window.location.host:"www.pcjs.org")}function y(a){window&&window.alert(a)}function Da(a){var b=!1;window&&(b=window.confirm(a));return b}function Ea(){if(null==Ja){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Ja=a}return Ja}
function Ka(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}function La(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Ma(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function Na(a,b){var c=null;a="data:application/octet-stream;base64,"+a;b&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),b="Check your Downloads folder for "+b+"."):(window.open(a),b="Check your browser for a new window/tab containing the requested data"+(b?" ("+b+")":"")+".");return b}function Oa(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function Pa(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function Qa(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function Ua(a){Va.init.push(a)}
function Wa(a){if(Xa)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){y(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function Ya(a){!Xa&&a?(Xa=!0,Za&&$a("init"),ab&&$a("show")):Xa=a}function $a(a){Va[a]&&Wa(Va[a])}var Va={init:[],show:[],exit:[]},Za=!1,ab=!1,Xa=!0,Ja=null;Qa("onload",function(){Za=!0;Wa(Va.init)});Qa("onpageshow",function(){ab=!0;Wa(Va.show)});Qa(Ma("Opera")||Ma("iOS")?"onunload":"onbeforeunload",function(){Wa(Va.exit)});
function A(a,b,c,d){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Qc=b.comment;this.Dd=b;this.exports={};a=this.id.indexOf(".");0>a?this.jb=this.id:(this.kb=this.id.substr(0,a),this.jb=this.id.substr(a+1));this.A={ready:!1,bb:!1,yc:!1,ea:!1,error:!1};this.bc=null;this.A.error=!1;this.C={};this.fa=d||0;this.F=this.f=this.D=this.I=this.Oa=null;cb.push(this)}function ib(a,b,c){jb[a]&&b&&(jb[a][b]=c)}
function kb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<cb.length;b++){var d=cb[b];a&&d.id.indexOf(a)||c.push(d)}return c}function lb(a){if(void 0!==a){var b;for(b=0;b<cb.length;b++)if(cb[b].id===a)return cb[b]}return null}function mb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<cb.length;d++)if(c)c==cb[d]&&(c=null);else if(!(a!=cb[d].type||b&&cb[d].id.indexOf(b)))return cb[d]}return null}
function B(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){y(c.message+" ("+a+")")}return b}function nb(a,b){b=D(b.parentNode,"pdp11-control");for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){var g=f.getAttribute("class");if(g)for(var k=g.split(" "),l=0;l<k.length;l++)switch(g=k[l],g){case "pdp11-binding":(g=B(f))&&g.binding&&a.na(g.type,g.binding,f,g.value),l=k.length}}}}
function D(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}h=A.prototype;h.toString=function(){return this.name?this.name:this.id||this.type};
h.na=function(a,b,c){switch(b){case "clear":return this.C[b]||(this.C[b]=c,c.onclick=function(a){return function(){a.C.print&&(a.C.print.value="")}}(this)),!0;case "print":return this.C[b]||(this.Oa=this.C[b]=c,c.value="",this.u=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(c),this.N=function(a){this.u(a,this.jb)}),!0;default:return!1}};h.log=function(){};h.u=function(){};
h.status=function(a){this.u(this.jb+": "+a)};h.N=function(a,b,c){c=c||this.type;b||y((c?c+": ":"")+a)};function ob(a,b){a.A.error=!0;a.N(b)}function pb(a){return a.A.error?(a.u(a.toString()+" error"),!0):!1}function qb(a,b){b&&(a.A.ready?b():a.bc=b);return a.A.ready}function G(a,b){a.A.error||(a.A.ready=!1!==b,a.A.ready&&(b=a.bc,a.bc=null,b&&b()))}function rb(a,b){a.A.bb&&(b?a.A.yc=!0:void 0===b&&a.u(a.toString()+" busy"));return a.A.bb}
function sb(a,b){if(a.A.yc)return a.A.bb=!1,a.A.yc=!1;if(a.A.error)return a.u(a.toString()+" error"),!1;a.A.bb=b;return a.A.bb}h.qa=function(){return this.A.ea=!0};h.za=function(a,b){b&&(this.A.ea=!1);return!0};function H(a,b){if(a.F){a===a.F?b|=0:b=b||a.fa;var c=a.F.fa&b;return!!b&&c===b||!!(c&a.F.ya)}return!1}function I(a,b,c,d){a.F&&(!0===c||H(a,c|0))&&a.F.message(b,d)}var tb=void 0,ub={};
if(window){tb||(tb=window.location.search.substr(1));for(var vb,wb=/\+/g,xb=/([^&=]+)=?([^&]*)/g;vb=xb.exec(tb);)ub[decodeURIComponent(vb[1].replace(wb," "))]=decodeURIComponent(vb[2].replace(wb," "))}window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]));var jb=window?window.PCjs.Machines:{},cb=window?window.PCjs.Components:[];
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var yb="undefined"!==typeof ArrayBuffer,zb="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),Ab={48:"DL11R",52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11"},Hb={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,pc11:4096,paper:4096,disk:8192,read:16384,write:32768,rk11:65536,rl11:131072,dl11:262144,serial:262144,kw11:524288,timer:524288,speaker:16777216,computer:33554432,log:268435456,warn:536870912,
buffer:1073741824,halt:-2147483648};function Ib(a){A.call(this,"Panel",a,0,512);this.ra=this.i=this.Ua=this.rb=this.j=this.v=0;this.B=this.G=this.w=!1;this.H=Jb;this.g={};this.b={START:[1,1,!0,!1,this.Vd],STEP:[1,1,!1,!1,this.Wd],ENABLE:[1,1,!1,!1,this.Rd],CONT:[1,1,!0,!1,this.Pd],DEP:[0,0,!0,!1,this.Qd],EXAM:[1,1,!0,!1,this.Sd],LOAD:[1,1,!0,!1,this.Ud],TEST:[0,0,!0,!1,this.Td]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Xd,a];this.F=this.f=this.D=this.I=null}p(Ib,A);h=Ib.prototype;h.reset=function(){this.stop()};
h.na=function(a,b,c,d){if(this.I&&this.I.na(a,b,c,d)||this.f&&this.f.na(a,b,c,d)||this.F&&this.F.na(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.C[b]=c,this.v++,!0;default:return"led"==a||"rled"==a?(this.C[b]=c,this.g[b]=d?1:0,this.v++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.C[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,
b){return function(){Kb(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){Lb(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){Kb(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){Lb(a,b)}}(this,b),!0):A.prototype.na.call(this,a,b,c,d)}};h.pa=function(a,b,c,d){this.I=a;this.D=b;this.f=c;this.F=d;Mb(b,this,Nb);Ob(b,this.reset.bind(this));Pb(this);Qb(this)};h.qa=function(a,b){b||(Rb(),this.reset());return!0};h.za=function(){return!0};
function Sb(a,b,c){if(a=a.C[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function Pb(a,b){for(var c in a.g)Sb(a,c,null!=b?b:a.g[c])}function Tb(a,b,c){if(a=a.C[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function Qb(a){for(var b in a.b)Tb(a,b,a.b[b][1])}function Ub(a,b,c,d){a.C[b]&&(void 0===c&&(ob(a,"Value for "+b+" is invalid"),J(a.f)),c=8==(a.F&&a.F.ua||8)?q(c,d):v(c,d),a.C[b].textContent!=c&&(a.C[b].textContent=c))}
function Kb(a,b){var c=a.b[b];Tb(a,b,c[1]=1-c[1]);c[3]=!0;c[4]&&c[4].call(a,c[1],c[5]);b!=Vb&&(a.B=b==Wb,a.G=b==Xb)}function Lb(a,b){var c=a.b[b];c[2]&&c[3]&&(Tb(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5]));c[3]=!1}h.Vd=function(a){a||this.f.A.T||(a=this.f,a.D.reset(),Yb(a),this.b[Zb]&&this.b[Zb][1]&&$b(this.f))};h.Wd=function(){};h.Rd=function(a){a||J(this.f)};
h.Pd=function(a){if(!a&&!this.f.A.T)if(this.b[Zb]&&this.b[Zb][1])$b(this.f);else{if((a=this.F)&&!rb(a,!0))sb(a,!0),ac(a,0,null),sb(a,!1);else try{var b=this.f.$b(1);0<b&&(bc(this.f,b),cc(this.f,b,!0),dc(this.f,b))}catch(c){"number"!=typeof c&&ob(this.f,c.stack||c.message)}this.stop();this.I&&L(this.I)}};h.Qd=function(a){if(a&&!this.f.A.T)if(this.B&&ec(this),a=fc(this,this.Ua),this.H==Jb)gc(this.D,this.ra,a);else{var b=this.f,c=this.ra;b.la++;b.D.Ib(hc(b,c,4),a);b.la--}};
h.Sd=function(a){a||this.f.A.T||(this.G&&ec(this),a=this.H==Jb?ic(this.D,this.ra):jc(this.f,this.ra),fc(this,a))};h.Ud=function(a){a||this.f.A.T||kc(this,this.Ua)};h.Td=function(a){a?(this.w=!0,Pb(this,!0)):(this.w=!1,Pb(this),lc(this,0))};h.Xd=function(a,b){this.Ua=a?this.Ua|1<<b:this.Ua&~(1<<b)};function ec(a){var b=1145>a.f.xa?8:16,c=65472<=a.ra&&a.ra<65472+b,b=c?1:2,c=c?15:a.D.H;a.b[Vb]&&a.b[Vb][1]||(b=-b);kc(a,a.ra&~c|a.ra+b&c)}
function kc(a,b){a.ra=b&a.D.H;b=a.ra;for(var c=0;22>c;c++)mc(a,"A"+c,b&1<<c)}function fc(a,b){a.i=b&65535;b=a.i;for(var c=0;16>c;c++)mc(a,"D"+c,b&1<<c);return a.i}function mc(a,b,c){a.g[b]=c;a.w||Sb(a,b,c)}function yc(a){return void 0!==a.C[zc]}function lc(a,b){if(yc(a)){a.Ua=b;for(var c=0;22>c;c++)a.b["S"+c][1]=b&1<<c?1:0;Qb(a)}}h.stop=function(){kc(this,this.f.g[7])};h.Ec=function(a){this.ra=a};h.setData=function(a,b){b?this.rb=a:this.i=a};h.be=function(a,b){return(b?this.rb:this.Ua)&65535};
h.lf=function(a){this.rb=a};function Rb(){for(var a=!1,b=D(document,"pdp11","panel"),c=0;c<b.length;c++){var d=b[c],e=B(d),f=lb(e.id);f||(a=!0,f=new Ib(e));nb(f,d);a&&G(f)}}var Jb=7,zc="S0",Wb="DEP",Zb="ENABLE",Xb="EXAM",Vb="STEP",Ac={},Nb=(Ac[65400]=[null,null,Ib.prototype.be,Ib.prototype.lf,"CNSW"],Ac);Ua(Rb);
function Bc(a,b,c){A.call(this,"Bus",a,0,16);this.f=b;this.F=c;this.U=a.busWidth||16;this.M=1<<this.U;this.H=this.M-1;this.i=Cc;this.g=Math.log2(this.i);this.S=this.i>>2;this.j=this.i-1;this.J=this.M/this.i|0;this.Ja=[];this.ha=0;this.G=!1;this.O=[];this.Fd=[Dc,Ec,Fc,Gc];this.b=this.v=[];this.B=this.L=this.w=this.P=this.R=0;a=new N(this);Hc(a,this.F);this.b=Array(this.J);this.v=Array(this.J);for(b=0;b<this.J;b++)this.b[b]=this.v[b]=a;this.B=this.M-Cc;Ic(this,this.B,Cc,Jc,this);this.R=this.P=(this.B&
this.H)>>>this.g;this.L=0;this.w=this.H;G(this)}p(Bc,A);function Kc(a,b){if(b!=a.L){for(var c=0;c<a.J;c++)a.v[c]=a.b[c];a.L=0;a.w=a.H;b&&(a.L=b,b=1<<b,a.w=b-1,b-=Cc,a.R=(b&a.w)>>>a.g,a.v[a.R]=a.b[a.P])}}h=Bc.prototype;h.reset=function(){for(var a=0;a<this.O.length;a++)this.O[a]();Kc(this,16)};h.qa=function(a,b){b||this.reset();return!0};
function Ic(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.g;0<g&&k<a.b.length;){var l=a.b[k],m=k*a.i,n=a.i-(f-m);n>g&&(n=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.K)return l.Eb+=l.K-f,l.K=f,!0;if(f>=l.K+l.Eb){n=l.size-(f-m);n>g&&(n=g);l.Eb=f-l.K+n;f=m+a.i;g-=n;k++;continue}}return Lc(Mc,f,g)}f=new N(a,f,n,a.i,d,e);Hc(f,a.F,l);a.b[k++]=f;f=m+a.i;g-=n}return 0>=g?(a.status((c>>10)+"Kb "+Nc[d]+" at "+q(b)),!0):Lc(Oc,b,c)}h.Ic=function(a){return this.v[(a&this.w)>>>this.g].Tb(a&this.j,a)};
h.Zb=function(a){return this.v[(a&this.w)>>>this.g].ia(a&this.j,a)};h.Jc=function(a,b){this.v[(a&this.w)>>>this.g].Xb(a&this.j,b,a)};h.Ib=function(a,b){this.v[(a&this.w)>>>this.g].sb(a&this.j,b,a)};function Pc(a,b){return a.b[(b&a.H)>>>a.g]}function ic(a,b){a.G=!1;a.ha++;b=Pc(a,b).B(b&a.j,b);a.ha--;return b}function Qc(a,b,c){a.G=!1;a.ha++;Pc(a,b).I(b&a.j,c&255,b);a.ha--}function gc(a,b,c){a.G=!1;a.ha++;Pc(a,b).G(b&a.j,c&65535,b);a.ha--}
function Rc(a){for(var b=0,c=[],d=0;d<a.J;d++){var e=a.b[d];if(e.Sa||e.Ld){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],n=g+1;n<e.length&&e[n]===m;)n++;l[k++]=n-g;l[k++]=m;g=n}l.length<e.length&&(e=l)}c[f]=e}}return c}function Sc(a){for(var b=Tc,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.K+e.Eb)}return c}
function Uc(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var n=b&Vc;if(void 0!==a.Ja[n])return y("I/O address already registered: "+v(b,8,!0)),!1;var r=l||"unknown";r&&0<=m&&(r+=m++);a.Ja[n]=[d,e,f,g,r,k||16,!1]}return!0}
function Mb(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.xa)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&n&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(n)));for(var r=g[4],t=g[5]||1,u=0;u<t;u++,f+=2)if(r&&1<t&&(r=g[4]+u),!Uc(a,f,f,k,l,m,n,g[7]||b.fa,r||b.jb))return!1}}return!0}
function Ob(a,b){a.O.push(b)}h.Ia=function(a,b,c){this.G=!0;this.ha||(this.F&&H(this.F,4)&&I(this.F,"memory fault ("+c+") on "+O(this.F,a),!0,!0),b&&(this.f.R|=b),this.f.ja(4,0,a))};function Wc(a){var b=a.G;a.G=!1;return b}function Lc(a,b,c){y("Memory block error ("+a+": "+v(b)+","+v(c)+")");return!1}var Cc=8192,Vc=Cc-1,Mc=1,Oc=2;
function Dc(a,b){var c=-1,d=this.controller,e=d.Ja[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Ja[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&H(this.f,16|e[5])&&I(this.f,e[4]+".readByte("+O(this.f,b)+"): "+O(this.f,c),!0,!d.ha),c;d.Ia(b,16,3);c=255;this.f&&H(this.f,16)&&I(this.f,"warning: unconverted read access to byte @"+O(this.f,b)+": "+O(this.f,c),!0,!d.ha);return c}
function Ec(a,b,c){var d=!1,e=this.controller,f=e.Ja[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Ja[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&H(this.f,16|f[5])&&I(this.f,f[4]+".writeByte("+O(this.f,c)+","+O(this.f,b)+")",!0,!e.ha):(e.Ia(c,16,5),this.f&&H(this.f,16)&&I(this.f,"warning: unconverted write access to byte @"+O(this.f,c)+": "+O(this.f,
b),!0,!e.ha))}function Fc(a,b){var c=-1,d=this.controller;a=d.Ja[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&H(this.f,16|a[5])&&I(this.f,a[4]+".readWord("+O(this.f,b)+"): "+O(this.f,c),!0,!d.ha),c;d.Ia(b,16,2);c=65535;this.f&&H(this.f,16)&&I(this.f,"warning: unconverted read access to word @"+O(this.f,b)+": "+O(this.f,c),!0,!d.ha);return c}
function Gc(a,b,c){var d=!1,e=this.controller;a=e.Ja[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&H(this.f,16|a[5])&&I(this.f,a[4]+".writeWord("+O(this.f,c)+","+O(this.f,b)+")",!0,!e.ha):(e.Ia(c,16,4),this.f&&H(this.f,16)&&I(this.f,"warning: unconverted write access to word @"+O(this.f,c)+": "+O(this.f,b),!0,!e.ha))}function P(a){A.call(this,"Device",a,0,256);this.b={ih:0,Fc:-1}}p(P,A);h=P.prototype;
h.pa=function(a,b,c,d){this.D=b;this.I=a;this.f=c;this.F=d;var e=this;this.b.Fc=Xc(c,function(){e.b.Bb|=128;e.b.Bb&64&&Yc(e.f,e.b.cb);e.I&&L(e.I,1);Zc(e.f,e.b.Fc,1E3/60)});this.b.cb=$c(c,64,6,524288);Mb(b,this,ad);Ob(b,this.reset.bind(this));d&&bd(d,64,function(a){var b=e.f;cd(e,"KIPDR",b.B[0],0,a[0]);cd(e,"KDPDR",b.B[0],8,a[0]);cd(e,"KIPAR",b.M[0],0,a[0]);cd(e,"KDPAR",b.M[0],8,a[0],!0);cd(e,"SIPDR",b.B[1],0,a[0]);cd(e,"SDPDR",b.B[1],8,a[0]);cd(e,"SIPAR",b.M[1],0,a[0]);cd(e,"SDPAR",b.M[1],8,a[0],
!0);cd(e,"UIPDR",b.B[3],0,a[0]);cd(e,"UDPDR",b.B[3],8,a[0]);cd(e,"UIPAR",b.M[3],0,a[0]);cd(e,"UDPAR",b.M[3],8,a[0],!0);b.U&32&&cd(e,"UNIMAP",b.Fa,-1,a[0])});G(this)};function cd(a,b,c,d,e,f){a=a.F;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=8;var g="",k=!1,l=0,m=8;0>d&&(e=c.length,d=0,k=!0,l=3,m=4);for(var n=0;n<e;n++)n%m||(g&&(g+="\n"),g+=b+(k?"["+na(n)+"]":"")+":"),g+=" "+O(a,c[d+n],l);a.u(g+(f?"\n":""))}}h.reset=function(){this.b.Bb=128;Zc(this.f,this.b.Fc,1E3/60,!0)};h.ie=function(){return this.b.Bb};
h.tf=function(a){this.b.Bb=a&192;this.b.Bb&64||dd(this.f,this.b.cb)};h.ke=function(){return ed(this.f)};h.vf=function(a){fd(this.f,a&-129|this.f.S&128)};h.le=function(){return gd(this.f)};h.me=function(){return hd(this.f)};h.ne=function(){return this.f.U};h.wf=function(a){id(this.f,a)};h.Ve=function(a){a=a>>1&63;var b=this.f.Fa[a>>1];return a&1?b>>16:b&65535};h.dg=function(a,b){b=b>>1&63;var c=b>>1;this.f.Fa[c]=b&1?this.f.Fa[c]&65535|(a&63)<<16:this.f.Fa[c]&-65536|a&65534};
h.Oe=function(a){return this.f.B[1][a>>1&7]};h.Xf=function(a,b){this.f.B[1][b>>1&7]=a&65295};h.Me=function(a){return this.f.B[1][(a>>1&7)+8]};h.Vf=function(a,b){this.f.B[1][(b>>1&7)+8]=a&65295};h.Ne=function(a){return this.f.M[1][a>>1&7]};h.Wf=function(a,b){b=b>>1&7;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.Le=function(a){return this.f.M[1][(a>>1&7)+8]};h.Uf=function(a,b){b=(b>>1&7)+8;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.he=function(a){return this.f.B[0][a>>1&7]};
h.sf=function(a,b){this.f.B[0][b>>1&7]=a&65295};h.fe=function(a){return this.f.B[0][(a>>1&7)+8]};h.qf=function(a,b){this.f.B[0][(b>>1&7)+8]=a&65295};h.ge=function(a){return this.f.M[0][a>>1&7]};h.rf=function(a,b){b=b>>1&7;this.f.M[0][b]=a;this.f.B[0][b]&=65295};h.ee=function(a){return this.f.M[0][(a>>1&7)+8]};h.pf=function(a,b){b=(b>>1&7)+8;this.f.M[0][b]=a;this.f.B[0][b]&=65295};h.Ue=function(a){return this.f.B[3][a>>1&7]};h.cg=function(a,b){this.f.B[3][b>>1&7]=a&65295};
h.Se=function(a){return this.f.B[3][(a>>1&7)+8]};h.ag=function(a,b){this.f.B[3][(b>>1&7)+8]=a&65295};h.Te=function(a){return this.f.M[3][a>>1&7]};h.bg=function(a,b){b=b>>1&7;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Re=function(a){return this.f.M[3][(a>>1&7)+8]};h.$f=function(a,b){b=(b>>1&7)+8;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Cb=function(a){a&=7;return this.f.w&2048?this.f.oa[a]:this.f.g[a]};h.Gb=function(a,b){b&=7;this.f.w&2048?this.f.oa[b]=a:this.f.g[b]=a};
h.se=function(){return this.f.w&49152?this.f.X[0]:this.f.g[6]};h.Bf=function(a){this.f.w&49152?this.f.X[0]=a:this.f.g[6]=a};h.ve=function(){return this.f.g[7]};h.Ef=function(a){this.f.g[7]=a};h.Db=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.oa[a]};h.Hb=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.oa[b]=a};h.te=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[1]};h.Cf=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[1]=a};
h.ue=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[3]};h.Df=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[3]=a};h.de=function(a){return this.f.Yb[a-65504>>1]};h.nf=function(a,b){this.f.Yb[b-65504>>1]=a};h.ld=function(a){return 65520==a?(Sc(this.D)>>6)-1:0};h.qd=function(){};h.Qe=function(){return 1};h.Zf=function(){};h.ce=function(){return this.f.R};h.mf=function(){this.f.R=0};h.je=function(){return this.f.mc};h.uf=function(a,b){b&1||(a&=255);this.f.mc=a};
h.oe=function(a,b){return b?0:this.f.ab};h.xf=function(a){jd(this.f,a)};h.Pe=function(a,b){return b?0:this.f.ya&65280};h.Yf=function(a){this.f.ya=a|255};h.re=function(){return kd(this.f)};h.Af=function(a){ld(this.f,a)};h.pd=function(a,b){H(this)&&I(this,"writeIgnored("+q(b)+"): "+q(a),!0,!0)};
var Q={},ad=(Q[61568]=[null,null,P.prototype.Ve,P.prototype.dg,"UNIMAP",64,1170],Q[62592]=[null,null,P.prototype.Oe,P.prototype.Xf,"SIPDR",8,1145,64],Q[62608]=[null,null,P.prototype.Me,P.prototype.Vf,"SDPDR",8,1145,64],Q[62624]=[null,null,P.prototype.Ne,P.prototype.Wf,"SIPAR",8,1145,64],Q[62640]=[null,null,P.prototype.Le,P.prototype.Uf,"SDPAR",8,1145,64],Q[62656]=[null,null,P.prototype.he,P.prototype.sf,"KIPDR",8,1145,64],Q[62672]=[null,null,P.prototype.fe,P.prototype.qf,"KDPDR",8,1145,64],Q[62688]=
[null,null,P.prototype.ge,P.prototype.rf,"KIPAR",8,1145,64],Q[62704]=[null,null,P.prototype.ee,P.prototype.pf,"KDPAR",8,1145,64],Q[62798]=[null,null,P.prototype.ne,P.prototype.wf,"MMR3",1,1145,64],Q[65382]=[null,null,P.prototype.ie,P.prototype.tf,"LKS"],Q[65402]=[null,null,P.prototype.ke,P.prototype.vf,"MMR0",1,1145,64],Q[65404]=[null,null,P.prototype.le,P.prototype.pd,"MMR1",1,1145,64],Q[65406]=[null,null,P.prototype.me,P.prototype.pd,"MMR2",1,1145,64],Q[65408]=[null,null,P.prototype.Ue,P.prototype.cg,
"UIPDR",8,1145,64],Q[65424]=[null,null,P.prototype.Se,P.prototype.ag,"UDPDR",8,1145,64],Q[65440]=[null,null,P.prototype.Te,P.prototype.bg,"UIPAR",8,1145,64],Q[65456]=[null,null,P.prototype.Re,P.prototype.$f,"UDPAR",8,1145,64],Q[65472]=[null,null,P.prototype.Cb,P.prototype.Gb,"R0SET0"],Q[65473]=[null,null,P.prototype.Cb,P.prototype.Gb,"R1SET0"],Q[65474]=[null,null,P.prototype.Cb,P.prototype.Gb,"R2SET0"],Q[65475]=[null,null,P.prototype.Cb,P.prototype.Gb,"R3SET0"],Q[65476]=[null,null,P.prototype.Cb,
P.prototype.Gb,"R4SET0"],Q[65477]=[null,null,P.prototype.Cb,P.prototype.Gb,"R5SET0"],Q[65478]=[null,null,P.prototype.se,P.prototype.Bf,"R6KERNEL"],Q[65479]=[null,null,P.prototype.ve,P.prototype.Ef,"R7KERNEL"],Q[65480]=[null,null,P.prototype.Db,P.prototype.Hb,"R0SET1",1,1145],Q[65481]=[null,null,P.prototype.Db,P.prototype.Hb,"R1SET1",1,1145],Q[65482]=[null,null,P.prototype.Db,P.prototype.Hb,"R2SET1",1,1145],Q[65483]=[null,null,P.prototype.Db,P.prototype.Hb,"R3SET1",1,1145],Q[65484]=[null,null,P.prototype.Db,
P.prototype.Hb,"R4SET1",1,1145],Q[65485]=[null,null,P.prototype.Db,P.prototype.Hb,"R5SET1",1,1145],Q[65486]=[null,null,P.prototype.te,P.prototype.Cf,"R6SUPER",1,1145],Q[65487]=[null,null,P.prototype.ue,P.prototype.Df,"R6USER",1,1145],Q[65504]=[null,null,P.prototype.de,P.prototype.nf,"CTRL",8,1170],Q[65520]=[null,null,P.prototype.ld,P.prototype.qd,"LSIZE",1,1170],Q[65522]=[null,null,P.prototype.ld,P.prototype.qd,"HSIZE",1,1170],Q[65524]=[null,null,P.prototype.Qe,P.prototype.Zf,"SYSID",1,1170],Q[65526]=
[null,null,P.prototype.ce,P.prototype.mf,"ERR",1,1170],Q[65528]=[null,null,P.prototype.je,P.prototype.uf,"MBR",1,1170],Q[65530]=[null,null,P.prototype.oe,P.prototype.xf,"PIR"],Q[65532]=[null,null,P.prototype.Pe,P.prototype.Yf,"SLR"],Q[65534]=[null,null,P.prototype.re,P.prototype.Af,"PSW"],Q);
Ua(function(){for(var a=D(document,"pdp11","device"),b=0;b<a.length;b++){var c,d=a[b];c=B(d);switch(c.type){case "default":c=new P(c);nb(c,d);break;case "pc11":c=new md(c);nb(c,d);break;case "rl11":c=new nd(c);nb(c,d);break;case "rk11":c=new R(c),nb(c,d)}}});
function N(a,b,c,d,e,f){this.g=a;this.id=od+=2;this.b=null;this.K=b;this.Eb=c;this.size=d||0;this.type=e||pd;this.i=e==qd;this.f=this.controller=null;this.Tb=this.w=this.Bc;this.ia=this.B=this.Cc;this.Xb=this.I=this.Fb;this.sb=this.G=this.jc;this.D=this.F=0;Hc(this);this.Sa=this.Ld=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],rd(this,f.Fd);else if(yb)this.j=new ArrayBuffer(this.size),this.v=new DataView(this.j,0,this.size),this.C=new Uint8Array(this.j,0,this.size),this.H=new Uint16Array(this.j,
0,this.size>>1),this.b=new Int32Array(this.j,0,this.size>>2),rd(this,Ad?Bd:Cd);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;rd(this,Dd)}else rd(this)}h=N.prototype;h.save=function(){var a,b;if(this.controller)a=null;else if(yb)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.v.getInt32(b<<2,!0);else a=this.b;return a};
h.restore=function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(yb)for(b=0;b<a.length;b++)this.v.setInt32(b<<2,a[b],!0);else this.b=a;return this.Sa=!0}return!1};function rd(a,b){b||(b=Ed);Fd(a,b,void 0);Gd(a,b,void 0)}function Fd(a,b,c){c&&a.D||(a.Tb=b[0]||a.Bc,a.ia=b[2]||a.Cc);if(c||void 0===c)a.w=b[0]||a.Bc,a.B=b[2]||a.Cc}function Gd(a,b,c){c&&a.F||(a.Xb=!a.i&&b[1]||a.Fb,a.sb=!a.i&&b[3]||a.jc);if(c||void 0===c)a.I=b[1]||a.Fb,a.G=b[3]||a.jc}
h.nb=function(a,b){b?this.F++||Gd(this,Hd,!1):this.D++||Fd(this,Hd,!1)};function Id(a,b){b?--a.F||(a.Xb=a.i?a.Fb:a.I,a.sb=a.i?a.jc:a.G):--a.D||(a.Tb=a.w,a.ia=a.B)}function Hc(a,b,c){a.f=b;a.D=a.F=0;c&&((a.D=c.D)&&Fd(a,Hd,!1),(a.F=c.F)&&Gd(a,Hd,!1))}h.Bc=function(a,b){this.f&&H(this.f,32)&&I(this.f,"attempt to read invalid address "+O(this.f,b),!0);this.g.Ia(b,32,2);return 255};
h.Fb=function(a,b,c){this.f&&H(this.f,32)&&I(this.f,"attempt to write "+O(this.f,b)+" to invalid addresses "+O(this.f,c),!0);this.g.Ia(c,32,4)};h.Cc=function(a,b){return this.Tb(a++,b++)|this.Tb(a,b)<<8};h.jc=function(a,b,c){this.Xb(a++,b&255,c++);this.Xb(a,b>>8,c)};h.ae=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};h.af=function(a,b){a&1&&this.g.Ia(b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
h.kf=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.Sa=!0};h.hg=function(a,b,c){a&1&&this.g.Ia(c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.Sa=!0};h.Zd=function(a,b){this.f&&null!=this.K&&Jd(this.f,this.K+a);return this.w(a,b)};h.Xe=function(a,b){this.f&&null!=this.K&&Jd(this.f,this.K+a,2);return this.B(a,b)};
h.hf=function(a,b,c){this.f&&null!=this.K&&Kd(this.f,this.K+a);this.i?this.Fb(0,b,c):this.I(a,b,c)};h.fg=function(a,b,c){this.f&&null!=this.K&&Kd(this.f,this.K+a,2);this.i?this.Fb(0,b,c):this.G(a,b,c)};h.Yd=function(a){return this.C[a]};h.$d=function(a,b){a=this.C[a];this.f&&H(this.f,32)&&I(this.f,"Memory.readByte("+O(this.f,b)+"): "+O(this.f,a),!0);return a};h.We=function(a,b){a&1&&this.g.Ia(b,64,2);return this.v.getUint16(a,!0)};
h.$e=function(a,b){a&1&&this.g.Ia(b,64,2);a=this.H[a>>1];this.f&&H(this.f,32)&&I(this.f,"Memory.readWord("+O(this.f,b)+"): "+O(this.f,a),!0);return a};h.gf=function(a,b){this.C[a]=b;this.Sa=!0};h.jf=function(a,b,c){this.C[a]=b;this.Sa=!0;this.f&&H(this.f,32)&&I(this.f,"Memory.writeByte("+O(this.f,c)+","+O(this.f,b)+")",!0)};h.eg=function(a,b,c){a&1&&this.g.Ia(c,64,4);this.v.setUint16(a,b,!0);this.Sa=!0};
h.gg=function(a,b,c){a&1&&this.g.Ia(c,64,4);this.H[a>>1]=b;this.Sa=!0;this.f&&H(this.f,32)&&I(this.f,"Memory.writeWord("+O(this.f,c)+","+O(this.f,b)+")",!0)};var pd=0,Tc=1,qd=2,Jc=4,Nc=["NONE","RAM","ROM","VID","H/W"],od=0,Ed=[],Dd=[N.prototype.ae,N.prototype.kf,N.prototype.af,N.prototype.hg],Hd=[N.prototype.Zd,N.prototype.hf,N.prototype.Xe,N.prototype.fg];if(yb)var Cd=[N.prototype.Yd,N.prototype.gf,N.prototype.We,N.prototype.eg],Bd=[N.prototype.$d,N.prototype.jf,N.prototype.$e,N.prototype.gg];var Ld;
if(yb){var Md=new ArrayBuffer(2);(new DataView(Md)).setUint16(0,256,!0);Ld=256===(new Uint16Array(Md))[0]}else Ld=!1;var Ad=Ld;
function Nd(a,b){A.call(this,"CPU",a,0,1);b=a.cycles||b;var c=a.multiplier||1;this.nc=0;this.ic=b;this.Ya=c;this.uc=Math.round(this.ic/1E4)/100;this.gb=this.uc*this.Ya;this.vc=this.Pb=this.mb=this.kc=0;this.A.T=!1;this.A.fc=!1;this.A.Ra=a.autoStart;this.A.vb=!1;this.Nb=this.yb=0;this.Ob=a.csStart;this.xb=a.csInterval;this.zb=a.csStop;this.Aa=[];this.Sc=this.ef.bind(this);this.Za=this.Ea=this.Xa=this.b=this.aa=this.Da=this.Mb=this.Wa=this.Ab=this.wc=this.lb=0;this.sa=null;G(this)}p(Nd,A);h=Nd.prototype;
h.pa=function(a,b,c,d){this.I=a;this.D=b;this.F=d;this.sa=a.i;for(a=0;a<Od.length;a++)(b=this.C[Od[a]])&&this.I.na(null,Od[a],b);G(this)};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.qa=function(a,b){var c=Pd(this.I,"autoStart");null!=c?this.A.Ra="true"==c?!0:"false"==c?!1:!!c:null==this.A.Ra&&(this.A.Ra=!this.F&&void 0===this.C.run);if(!b){if(a&&this.restore){Qd(this);if(!this.restore(a))return!1;Rd(this)}else this.reset();this.F?(a=this.F,b=this.A.Ra,a.Ba=!0,a.u("Type ? for help with PDPjs Debugger commands"),Sd(a),b||Td(a),a.ta&&(b=a.ta,a.ta=null,Ud(a,b))):this.u("No debugger detected");this.A.Ra||this.u("CPU will not be auto-started, click Run to start")}return!0};
h.za=function(a){return a?this.save():!0};h.Ra=function(){return this.A.T?!0:this.A.Ra?($b(this),!0):!1};h.ed=function(){return 0};function Rd(a){void 0===a.Ob&&(a.Ob=0);void 0===a.xb&&(a.xb=-1);void 0===a.zb&&(a.zb=-1);a.A.vb=0<=a.Ob&&0<a.xb;a.A.vb&&(a.Nb=0,a.yb=a.Ob-a.Za)}function dc(a,b){if(a.A.vb){var c=!1;a.Nb=a.Nb+a.ed()|0;a.yb-=b;0>=a.yb&&(a.yb+=a.xb,c=!0);0<=a.zb&&a.zb<=Vd(a)&&(a.xb=a.zb=-1,Rd(a),J(a),c=!0);c&&a.u(Vd(a)+" cycles: checksum="+v(a.Nb))}}
h.na=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.C[b]=c,!0;case "run":return this.C[b]=c,c.onclick=function(){var a;if(a=d.I)if(a=d.I,a.A.ea)a=!0;else{var b=null,c,k=kb(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.A.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.A.ea);c++);c==k.length&&(b=a);y("The "+b.type+" component ("+b.id+") is not "+(b.A.ready?"powered yet":"ready yet"+(b.bc?" (waiting for notification)":""))+".");a=!1}a&&(d.A.T?J(d):$b(d))},!0;
case "speed":return this.C[b]=c,!0;case "setSpeed":return this.C[b]=c,c.onclick=function(){Wd(d,d.Ya<<1,!0)},c.textContent=this.gb.toFixed(2)+"Mhz",!0}return!1};function cc(a,b,c){a.Za+=b;c&&(a.Xa=a.b=a.aa=0)}function Xd(a,b){var c=1;b&&1<a.Ya&&a.lb&&(c=a.lb/a.uc);a.vc=Math.round(1E3/Yd);a.Pb=Math.floor(a.ic/Yd*c);b||(a.mb=a.Pb);a.kc=0}function Vd(a){return a.Za+a.Ea+a.Xa-a.b}function Qd(a){a.lb=0;a.wc=0;a.Za=a.Ea=a.Xa=a.b=a.aa=0;Rd(a);Wd(a,1)}
function Wd(a,b,c){var d=!1;if(void 0!==b){.8>a.lb/a.gb?b=1:d=!0;a.Ya=b;b=a.uc*a.Ya;if(a.gb!=b){a.gb=b;b=a.gb.toFixed(2)+"Mhz";var e=a.C.setSpeed;e&&(e.textContent=b);a.u("target speed: "+b)}c&&a.I&&Zd(a.I)}cc(a,a.Ea);a.Ea=0;a.Da=ya();a.Wa=0;Xd(a);return d}function Xc(a,b){var c=a.Aa.length;a.Aa.push([-1,b]);return c}function Zc(a,b,c,d){0<=b&&b<a.Aa.length&&(d||0>a.Aa[b][0])&&(c=a.ic*a.Ya/1E3*c|0,a.A.T&&(c+=$d(a)),a.Aa[b][0]=c)}
function ae(a,b){for(var c=a.Aa.length-1;0<=c;c--){var d=a.Aa[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function bc(a,b){for(var c=a.Aa.length-1;0<=c;c--){var d=a.Aa[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function $d(a,b){var c=a.Xa-=a.b;a.b=a.aa=0;b&&(a.Xa=0);return c}
h.ef=function(){if(this.A.T){this.kc>=this.ic&&Xd(this,!0);this.Ab=0;this.Mb=ya();if(this.Wa){var a=this.Mb-this.Wa;a>this.vc&&(this.Da+=a,this.Da>this.Mb&&(this.Da=this.Mb))}try{do{var b=ae(this,this.A.vb?1:this.Pb);try{this.$b(b)}catch(e){if("number"!=typeof e)throw e;}b=$d(this,!0);this.Ab+=b;this.Ea+=b;dc(this,b);bc(this,b);this.mb-=b;if(0>=this.mb){this.mb+=this.Pb;++this.wc>=be&&(this.I&&L(this.I,void 0),this.wc=0);break}}while(this.A.T)}catch(e){J(this);this.I&&this.I.stop(ya(),Vd(this));ob(this,
e.stack||e.message);return}if(this.A.T){a=setTimeout;b=this.Sc;this.Wa=ya();var c=this.vc;this.Ab&&(c=Math.round(c*this.Ab/this.Pb));var c=c-(this.Wa-this.Mb),d=this.Wa-this.Da;d&&(this.lb=Math.round(this.Ea/(10*d))/100,864E5<=d&&(this.Za=0,Wd(this)));if(0>c||this.lb<this.gb)-1E3>c&&(this.Da-=c),c=0;this.kc+=this.Ab;this.Wa+=c;a(b,c)}}};
function $b(a,b){if(!pb(a))if(a.A.T)a.u(a.toString()+" busy");else{Wd(a);a.A.T=!0;a.A.fc=!0;var c=a.C.run;c&&(c.textContent="Halt");a.I&&(b&&Zd(a.I,!0),a.I.start(a.Da,Vd(a)));a.F||a.status("Started");setTimeout(a.Sc,0)}}h.$b=function(){return 0};function J(a,b){var c=!1;if(a.A.T){$d(a);cc(a,a.Ea);a.Ea=0;a.A.T=!1;if(c=a.C.run)c.textContent="Run";a.I&&a.I.stop(ya(),Vd(a));c=!0;a.F||a.status("Stopped")}a.A.complete=b;return c}var Yd=30,be=15,Od=["power","reset"];
function ce(a){var b=+a.model||1170;Nd.call(this,a,6666667);this.xa=b;this.Pc=a.addrReset||0;this.w=this.G=this.H=this.L=this.J=0;this.g=this.oa=this.X=[];this.O=0;this.tc=[];this.B=this.M=this.Fa=this.Yb=[];this.lc=this.ib=this.P=this.Oc=this.Va=this.ub=this.wb=this.Ca=this.R=this.ab=this.ya=this.S=this.Ub=this.Vb=this.U=this.$a=this.v=this.j=this.hc=this.V=this.Y=this.i=this.mc=0;this.Rc=255;1120>=this.xa?(this.Nc=de.bind(this),this.tb=this.Jd,this.lc=8,this.Rc=-1,this.Wc=255,this.Vc=0):(this.Nc=
ee.bind(this),this.tb=this.Kd,this.Wc=~(1792|(1145>this.xa?2048:0))&65535,this.Vc=1145<=this.xa?2048:0);this.la=0;this.ka=null;this.sc=[];this.A.complete=!1;this.Jb=this.oc=this.dd;this.Kb=this.pc=this.jd;this.gc=this.qc=this.nd;this.Lb=this.rc=this.od;this.Ba=this.hb=this.Rb=this.Sb=0;this.ta=this.hd;this.ia=this.Dc;this.sb=this.Gc;this.Yc=this.Xc=0}p(ce,Nd);h=ce.prototype;
h.pa=function(a,b,c,d){Nd.prototype.pa.call(this,a,b,c,d);this.oc=b.Ic.bind(b);this.pc=b.Zb.bind(b);this.qc=b.Jc.bind(b);this.rc=b.Ib.bind(b)};h.qa=function(a,b){for(var c=192,d=0;d<this.sc.length;d++){var e=this.sc[d];0>e.Wb&&(e.Wb=c,c+=4)}return Nd.prototype.qa.call(this,a,b)};
h.reset=function(){this.status("Model "+this.xa);this.A.T&&J(this);this.G=65536;this.H=32768;this.L=65535;this.J=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Pc,-1,-2,-3,-4,-5,-6,-7,-8];this.oa=[0,0,0,0,0,0];this.X=[0,0,0,0];this.O=0;this.tc=[4,2,0,1];this.B=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.M=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Fa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Yb=[0,0,0,0,0,0,0,0];this.v=this.j=this.hc=this.V=this.Y=this.i=this.mc=0;this.$a=-1;Yb(this);Qd(this);this.A.error=!1;Nd.prototype.reset.call(this)};function Yb(a){a.S=0;a.Ub=0;a.Vb=0;a.U=0;a.R=0;a.ab=0;a.ya=255;a.Va=0;a.ub=0;a.wb=0;a.Ca=262143;a.ib=0;a.P=0;a.ka=null;a.D&&(fe(a),a.Oc=Sc(a.D))}
function fe(a){a.Jb=a.oc;a.Kb=a.pc;a.gc=a.qc;a.Lb=a.rc;a.Rb&&(a.Jb=a.dd,a.Kb=a.jd);a.Sb&&(a.gc=a.nd,a.Lb=a.od);a.Va?(a.Ba=65536,a.hb=a.U&16?4186112:253952,a.ta=a.hd,a.ia=a.Rb?a.Ze:a.Dc,a.sb=a.Sb?a.jg:a.Gc,Kc(a.D,a.U&16?22:18)):(a.Ba=0,a.hb=57344,a.ta=a.Md,a.ia=a.Rb?a.Ye:a.md,a.sb=a.Sb?a.ig:a.rd,Kc(a.D,16))}function ed(a){var b=a.S;b&57344||(b=b&-3199|a.ub<<5|a.wb<<1);return b}
function fd(a,b){b&=-3073;if(a.S!=b){b&57344&&!(a.S&57344)&&(a.Ub=a.P>>16&65535,a.Vb=a.P&65535);a.S=b;a.ub=(b&96)>>5;a.wb=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.Va!=c&&(a.Va=c,fe(a))}}function gd(a){a.S&57344||(a.Ub=a.P>>16&65535);a=a.Ub;a&65280&&(a=(a<<8|a>>8)&65535);return a}function hd(a){a.S&57344||(a.Vb=a.P&65535);return a.Vb}function id(a,b){1170>a.xa&&(b&=-49);a.U!=b&&(a.U=b,a.Ca=b&16?4194303:262143,fe(a))}
function ge(a,b,c){a.Pc=b;a.D.reset();Yb(a);he(a,b);ld(a,0);if(c){for(b=2;5>=b;b++)a.g[b]=0;a.A.T||$b(a)}else a.F?J(a)||Sd(a.F):!1===c&&J(a);!a.A.T&&a.sa&&a.sa.stop()}h.ed=function(){return 0};h.save=function(){var a=new ie(this);a.set(0,[this.g,this.oa,this.X,this.Fa,this.Yb,this.R,this.mc,this.ab,this.ya,kd(this),this.$a,this.O,this.i,this.S,this.Ub,this.Vb,this.U,this.ub,this.wb,this.B,this.M,this.Va,this.Ca,this.ib,this.P]);a.set(1,[this.Za,this.Ya]);a.set(2,Rc(this.D));return a.data()};
h.restore=function(a){var b=a[1];this.Za=b[1];Wd(this,b[3]);a:{b=this.D;a=a[2];var c;for(c=0;c<a.length-1;c+=2){var d=a[c],e=a[c+1];if(e&&e.length<b.S){for(var f=0,g=Array(b.S),k=0;k<e.length-1;)for(var l=e[k++],m=e[k++];l--;)g[f++]=m;e=g}f=b.b[d];if(!f||!f.restore(e)){y("Unable to restore memory block "+d);b=!1;break a}}b=!0}return b};function je(a){return a.G&65536?1:0}function ke(a){return a.H&32768?2:0}function le(a){return a.L&65535?0:4}function me(a){return a.J&32768?8:0}
function ne(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function he(a,b){a.g[7]=b&65535}function $c(a,b,c,d){c={Wb:b,eb:c,message:d||0,next:null};c.name=Ab[b];a.sc.push(c);return c}function oe(a,b){var c=a.ka;if(c==b)a.ka=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.ka&&(a.i|=1)}
function Yc(a,b){if(b){if(b!=a.ka){var c=a.ka;if(!c||c.eb<=b.eb)b.next=c,a.ka=b;else{do{var d=c.next;if(!d||d.eb<=b.eb){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&H(a,b.message|8)&&I(a,"setIRQ(vector="+q(b.Wb)+",priority="+b.eb+")",!0,!0)}}function dd(a,b){b&&(oe(a,b),b.message&&H(a,b.message|8)&&I(a,"clearIRQ(vector="+q(b.Wb)+",priority="+b.eb+")",!0,!0))}function pe(a){return a.i&64?(a.ja(168,64,-6),!0):a.i&32?(a.ja(4,32,-5),!0):a.i&16?(a.ja(12,16,-7),!0):!1}
function kd(a){return a.w=a.w&63728|me(a)|le(a)|ke(a)|je(a)}function ld(a,b){b&=a.Wc;a.J=b<<12;a.L=~b&4;a.H=b<<14;a.G=b<<16;if((b^a.w)&a.Vc)for(var c=a.oa.length;0<=--c;){var d=a.g[c];a.g[c]=a.oa[c];a.oa[c]=d}a.O=b>>14&3;c=a.w>>14&3;a.O!=c&&(a.X[c]=a.g[6],a.g[6]=a.X[a.O]);a.w=b;a.i&=-3;a.i|=a.ka?2:1}function jd(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.ab=b}h.wa=function(a){this.J=this.L=a;this.H=0};h.fb=function(a,b){this.J=this.L=this.G=a;this.H=b||0};
function qe(a,b){a.J=a.L=a.G=b;a.H=a.J^a.G>>1}function re(a,b,c,d){a.J=a.L=a.G=b;a.H=(c^d)&(d^b)}
h.ja=function(a,b,c){if(!this.la){0>this.$a?this.$a=kd(this):this.O||(c=-4);-4==c&&(this.i&256&&(c=-1),this.i|=256,this.R|=4,this.g[6]=a=4);if(-1!=c){this.P=a|4143316992;this.O=0;var d=this.ia(a|this.Ba),e=this.ia(a+2&65535|this.Ba);ld(this,e&-12289|this.$a>>2&12288);se(this,this.$a);se(this,this.g[7]);he(this,d)}this.b-=5;this.i&=~(b|19);this.i|=129;this.$a=-1;this.Yc=a;this.Xc=c;-1==c&&J(this);if(-4<=c)throw a;}};
function te(a){var b=ue(a),c=ue(a);a.w&49152&&(c=c&-225|a.w&63712);he(a,b);ld(a,c);a.i&=-17}function ve(a,b){var c=b>>13&31;31>c&&(b=a.U&32?a.Fa[c]+(b&8191)&4194303:b&-3932161);return b}
function we(a,b,c){var d=[];if(c){c=ve(a,b);var e=b>>13&31;d.push(c);d.push(e);a.U&32&&(d.push(a.Fa[e]),d.push(b&8191))}else if(a.Va){var e=a.O<<1,f=b>>13;7<f&&(e|=1);a.U&a.tc[a.O]||(f&=7);b&=8191;var g=a.M[a.O][f]<<6;c=g+b&a.Ca;3932160<=c&&(c=ve(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.Ca)}else c=b&65535,57344<=c&&(c|=a.hb),d.push(c);return d}
function hc(a,b,c){var d,e,f;if(!(c&a.Va))return f=b&65535,57344<=f&&(f|=a.hb),f;d=b>>13;a.U&a.tc[a.O]||(d&=7);e=a.B[a.O][d];f=(a.M[a.O][d]<<6)+(b&8191)&a.Ca;3932160<=f&&(f=ve(a,f));if(a.la)return f;f>=a.Oc&&f<a.hb?(a.R|=32,a.ja(4,0,f)):f&1&&!(c&1)&&(a.R|=64,a.ja(4,0,f));var g=0;switch(e&7){case 1:g=4096;case 2:e|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:e|=c&4?192:128;break;default:g=32768}32512!=(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(g|=16384):(b&8128)>(e>>2&8128)&&
(g|=16384));a.B[a.O][d]=e;if(f!=(4194170&a.Ca)||a.O)a.ub=a.O,a.wb=d;g&&(g&57344&&(0<=a.$a&&(g|=128),a.S&57344||(g|=a.S&4096|a.ub<<5|a.wb<<1,fd(a,a.S&-61695|g&61694)),a.ja(168,64,-2)),a.S&61440||!(f<(4191360&a.Ca)||f>(4194239&a.Ca))||(a.S|=4096,a.S&512&&(a.i|=64)));return f}function ue(a){var b=a.ia(a.g[6]|a.Ba);a.g[6]=a.g[6]+2&65535;return b}function se(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.P=a.P&65535|(a.P&-65536)<<8|16121856;a.i&256||a.tb(4,-2,c);a.sb(c,b)}
function xe(a,b,c,d){var e,f,g=d&8?0:a.Ba;switch(b){case 0:return a.ja(4,0,-3),0;case 1:return 6==c&&a.tb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|g;case 2:f=2;e=a.g[c];6==c&&a.tb(d,f,e);7!=c&&(e|=g,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;e=a.g[c];7!=c&&(e|=g);e=a.ia(e);e|=g;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.g[c]+f&65535;6==c&&a.tb(d,f,e);7!=c&&(e|=g);a.b-=4;break;case 5:f=-2;e=a.g[c]-2&65535;7!=c&&(e|=g);e=a.ia(e)|g;a.b-=8;break;case 6:return e=a.ia(ne(a,2)),e=e+a.g[c]&65535,6==c&&a.tb(d,
0,e),a.b-=6,e|g;case 7:return e=a.ia(ne(a,2)),e=e+a.g[c]&65535,e=a.ia(e|a.Ba),a.b-=10,e|g}a.g[c]=a.g[c]+f&65535;a.P=a.P&65535|(a.P&-65536)<<8|(f<<3&248|c)<<16;return e}h.Jd=function(a,b,c){!this.O&&0>=b&&c<=this.ya&&(this.i|=32)};h.Kd=function(a,b,c){this.O||(65534<=c&&(c|=-65536),a&4&&c<=this.ya&&(c<=this.ya-32?this.ja(4,0,-4):(this.R|=8,this.i|=32)))};h.dd=function(a){this.F&&Jd(this.F,a,1);return this.oc(a)};h.jd=function(a){this.F&&Jd(this.F,a,2);return this.pc(a)};
h.nd=function(a,b){this.F&&Kd(this.F,a,1);this.qc(a,b)};h.od=function(a,b){this.F&&Kd(this.F,a,2);this.rc(a,b)};function jc(a,b){a.la++;b=a.D.Zb(hc(a,b,2));a.la--;return b}function ye(a,b){(b?--a.Sb:--a.Rb)||fe(a)}h.Md=function(a,b,c){return xe(this,a,b,c)};h.hd=function(a,b,c){return hc(this,xe(this,a,b,c),c)};h.md=function(a){return this.D.Zb(this.ib=a)};h.Ye=function(a){this.F&&Jd(this.F,a,2);return this.md(a)};h.Dc=function(a){return this.D.Zb(this.ib=hc(this,a,2))};
h.Ze=function(a){this.F&&Jd(this.F,a,2);return this.Dc(a)};h.rd=function(a,b){this.D.Ib(this.ib=a,b)};h.ig=function(a,b){this.F&&Kd(this.F,a,2);this.rd(a,b)};h.Gc=function(a,b){this.D.Ib(this.ib=hc(this,a,4),b)};h.jg=function(a,b){this.F&&Kd(this.F,a,2);this.Gc(a,b)};function ze(a,b,c){var d=a.j=b&7;(b=a.v=(b&56)>>3)?(d=xe(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.O=a.w>>12&3,c=a.ia(d|c&a.Ba),a.O=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.X[a.w>>12&3];return c}
function Ae(a,b,c,d){a.P=a.P&65535|1441792;var e=a.j=b&7;(b=a.v=(b&56)>>3)?(e=xe(a,b,e,4),c&65536||(e&=65535),a.O=a.w>>12&3,e=hc(a,e|c&65536,4),a.O=a.w>>14&3,a.Lb(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.X[a.w>>12&3]=d}function Be(a,b){b>>=6;var c=a.Y=b&7;return(b=a.V=(b&56)>>3)?a.Jb(a.ta(b,c,3)):a.g[c+a.lc]&a.Rc}function Ce(a,b){var c;b>>=6;var d=a.Y=b&7;(b=a.V=(b&56)>>3)?c=a.Kb(a.ta(b,d,2)):c=a.g[d+a.lc];return c}function De(a,b){var c=a.j=b&7;b=a.v=(b&56)>>3;return xe(a,b,c,8)}
function Ee(a,b){var c=a.j=b&7;return(b=a.v=(b&56)>>3)?a.Jb(a.ta(b,c,3)):a.g[c]&255}function Fe(a,b){var c,d=a.j=b&7;(b=a.v=(b&56)>>3)?c=a.Kb(a.ta(b,d,2)):c=a.g[d];return c}function Ge(a,b,c,d){var e=a.j=b&7;(b=a.v=(b&56)>>3)?(e=a.hc=a.ta(b,e,7),c=0>c?a.g[-c-1]&255:c,a.gc(e,d.call(a,c,a.Jb(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function S(a,b,c,d){var e=a.j=b&7;(b=a.v=(b&56)>>3)?(e=a.ta(b,e,6),a.Lb(e,d.call(a,0>c?a.g[-c-1]:c,a.Kb(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function He(a,b,c,d,e){var f=a.j=b&7;(b=a.v=(b&56)>>3)?(d=a.ta(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.gc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function Ie(a,b,c,d){var e=a.j=b&7;(b=a.v=(b&56)>>3)?(e=a.ta(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.Lb(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}function T(a,b,c){c&&(he(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}
h.$b=function(a){this.A.complete=!0;var b=this.F?Je(this.F)?1:this.A.fc?-1:0:0,c=a?this.A.fc?0:1:-1;this.A.fc=!1;this.Xa=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(ef(this.F,this.g[7],c)){J(this);break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.ab&224)>>5,f=this.ka&&this.ka.eb>e?this.ka:null;f&&(d=f.Wb,e=f.eb);e>(this.w&224)>>5?(this.i&8&&(ne(this,2),this.i&=-9),this.ja(d,0,-10),e=!0):e=!1;e&&(f&&oe(this,f),a=!0);this.ka||this.ab||(this.i&=-3)}else this.i&
1&&this.i++;if(a){if(this.i&4&&ef(this.F,this.g[7],c)){J(this);break}if(0>c)break}if(this.i&112&&pe(this)){if(this.i&4&&ef(this.F,this.g[7],c)){J(this);break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.P=this.g[7];f=this.ia(a);this.g[7]=a+2&65535;this.Nc(f)}while(0<this.b);return this.A.complete?this.Xa-this.b:void 0===this.A.complete?0:-1};Ua(function(){for(var a=D(document,"pdp11","cpu"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new ce(d);nb(d,c)}});
function ff(a,b){var c=b+a;this.J=this.L=this.G=c;this.H=(a^c)&(b^c);return c&65535}function gf(a,b){var c=b+a,d=c<<8;this.J=this.L=this.G=d;this.H=(a<<8^d)&(b<<8^d);return c&255}function hf(a,b){a=b<<1;qe(this,a);return a&65535}function jf(a,b){a=b<<1;qe(this,a<<8);return a&255}function kf(a,b){a=b&32768|b>>1|b<<16;qe(this,a);return a&65535}function lf(a,b){a=b&128|b>>1|b<<8;qe(this,a<<8);return a&255}function mf(a,b){a=b&~a;this.wa(a);return a}function nf(a,b){a=b&~a;this.wa(a<<8);return a}
function of(a,b){a|=b;this.wa(a);return a}function pf(a,b){a|=b;this.wa(a<<8);return a}function qf(a,b){a=~b|65536;this.fb(a);return a&65535}function rf(a,b){a=~b|256;this.fb(a<<8);return a&255}function sf(a,b){this.J=this.L=a=b-a;this.H=b&(b^a);return a&65535}function tf(a,b){a=b-a;var c=a<<8;b<<=8;this.J=this.L=c;this.H=b&(b^c);return a&255}function uf(a,b){this.J=this.L=a=b+a;this.H=a&(b^a);return a&65535}function vf(a,b){a=b+a;var c=a<<8;this.J=this.L=c;this.H=c&(b<<8^c);return a&255}
function wf(a,b){a=-b;this.fb(a,a&b&32768);return a&65535}function xf(a,b){a=-b;this.fb(a<<8,(a&b&128)<<8);return a&255}function yf(a,b){a=b<<1|this.G>>16&1;qe(this,a);return a&65535}function zf(a,b){a=b<<1|this.G>>16&1;qe(this,a<<8);return a&255}function Af(a,b){a=(this.G&65536|b)>>1|b<<16;qe(this,a);return a&65535}function Bf(a,b){a=((this.G&65536)>>8|b)>>1|b<<8;qe(this,a<<8);return a&255}function Cf(a,b){var c=b-a;re(this,c,a,b);return c&65535}
function Df(a,b){var c=b-a;re(this,c<<8,a<<8,b<<8);return c&255}function Ef(a,b){this.J=this.L=b&65280;this.H=this.G=0;return(b<<8|b>>8)&65535}function Ff(a,b){a^=b;this.wa(a);return a&65535}function Gf(a){S(this,a,Ce(this,a),ff);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}
function Hf(a){var b=Fe(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.G=this.H=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.G=c<<17-b,c>>=b;else if(b)if(16<b)this.H=c,c=0;else{this.G=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.H=32768)}this.g[a]=c&65535;this.J=this.L=c;this.b-=(this.v?6:7)+b}
function If(a){var b=Fe(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.G=this.H=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.G=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.G=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.H=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.J=d>>16;this.L=d>>16|d;this.b-=(this.v?6:7)+b}function Jf(a){T(this,a,!je(this))}function Kf(a){T(this,a,je(this))}
function Lf(a){S(this,a,Ce(this,a),mf);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}function Mf(a){Ge(this,a,Be(this,a),nf);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}function Nf(a){S(this,a,Ce(this,a),of);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}function Of(a){Ge(this,a,Be(this,a),pf);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}
function Pf(a){var b=Ce(this,a);a=Fe(this,a);this.wa((0>b?this.g[-b-1]:b)&a);this.b-=this.v?4+(this.Y&&6<=this.j?1:0):(this.V?4:3)+(7==this.j?2:0)}function Qf(a){var b=Be(this,a);a=Ee(this,a);this.wa(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.v?4+(this.Y&&6<=this.j?1:0):(this.V?4:3)+(7==this.j?2:0)}function Rf(a){T(this,a,le(this))}function Sf(a){T(this,a,!me(this)==!ke(this))}function Tf(a){T(this,a,!le(this)&&!me(this)==!ke(this))}function Uf(a){T(this,a,!je(this)&&!le(this))}
function Vf(a){T(this,a,le(this)||!me(this)!=!ke(this))}function Wf(a){T(this,a,je(this)||le(this))}function Xf(a){T(this,a,!me(this)!=!ke(this))}function Yf(a){T(this,a,me(this))}function Zf(a){T(this,a,!le(this))}function $f(a){T(this,a,!me(this))}function ag(){this.ja(12,0,-9)}function bg(a){T(this,a,!0)}function cg(a){T(this,a,!ke(this))}function dg(a){T(this,a,ke(this))}function eg(a){a&1&&(this.G=0);a&2&&(this.H=0);a&4&&(this.L=1);a&8&&(this.J=0);this.b-=5}
function fg(a){var b=Ce(this,a);a=Fe(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;re(this,c,a,b);this.b-=this.v?4+(this.Y&&6<=this.j?1:0):(this.V?4:3)+(7==this.j?2:0)}function gg(a){var b=Be(this,a);a=Ee(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);re(this,c,a,b);this.b-=this.v?4+(this.Y&&6<=this.j?1:0):(this.V?4:3)+(7==this.j?2:0)}
function hg(a){var b=Fe(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.G=this.H=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.L=d>>16|d,this.J=d>>16):(this.H=32768,this.L=d>>15|d,this.J=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.L=this.J=0,this.H=32768,this.G=65536,this.b-=7}function ig(){this.ja(24,0,-9);this.b-=20}
function jg(){this.w&49152?(this.R|=128,this.ja(4,0,-8)):(this.sa&&1120==this.xa&&this.sa.setData(this.g[0],!0),this.F?kg(this.F):J(this));this.b-=7}function lg(){this.ja(16,0,-9);this.b-=20}var mg=[0,7,7,10,7,11,9,13];function ng(a){this.aa=this.b;he(this,De(this,a));this.b=this.aa-mg[this.v]}var og=[0,14,14,17,14,18,16,20];function pg(a){this.aa=this.b;var b=De(this,a);a=a>>6&7;se(this,this.g[a]);this.g[a]=this.g[7];he(this,b);this.b=this.aa-og[this.v]}
var qg=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function rg(a){var b=Ce(this,a);this.aa=this.b;Ie(this,a,b,this.wa);this.b=this.aa-qg[(this.V?8:0)+this.v]+(7!=this.j||this.v?0:2)}function sg(a){var b=Be(this,a);He(this,a,b,65535,this.wa);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}var tg=[7,13,13,17,14,18,17,21];
function ug(a){var b=Fe(this,a);a=a>>6&7;b&32768&&(b|=-65536);var c=this.g[a];c&32768&&(c|=-65536);b=~~(b*c);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;this.J=b>>16;this.L=this.J|b;this.H=0;this.G=-32768>b||32767<b?65536:0;this.b-=23}function vg(){this.b-=5}function wg(){this.w&49152||(this.D.reset(),Yb(this),this.sa&&this.sa.setData(this.g[0],!0));this.b-=667}function xg(a){if(a&8)U.call(this,a);else{var b=ue(this);a&=7;7==a?he(this,b):(he(this,this.g[a]),this.g[a]=b);this.b-=9}}
function yg(){te(this);this.b-=13}function zg(a){a&1&&(this.G=65536);a&2&&(this.H=32768);a&4&&(this.L=0);a&8&&(this.J=32768);this.b-=5}function Ag(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)he(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function Bg(a){S(this,a,Ce(this,a),Cf);this.b-=this.v?9+(this.Y&&6<=this.j?1:0):(this.V?5:3)+(7==this.j?2:0)}function Cg(a){S(this,a,0,Ef);this.b-=this.v?9:3+(7==this.j?2:0)}function Dg(){this.ja(28,0,-9)}
function Eg(){this.sa&&(this.sa.Ec(this.g[7],!0),this.sa.setData(this.g[0],!0));this.i|=8;ne(this,-2);this.b-=3}function Fg(a){S(this,a,this.g[(a>>6&7)+this.lc],Ff);this.b-=this.v?9:3+(7==this.j?2:0)}function U(a){var b;if(b=this.F)b=this.F,H(b,1)?(I(b,"undefined opcode "+O(b,a),!0,!0),b=kg(b)):b=!1;b||this.ja(8,0,-9)}function de(a){Gg[a>>12].call(this,a)}function Hg(a){Ig[a>>6&3].call(this,a)}function Jg(a){Kg[a>>6&3].call(this,a)}function Lg(a){Mg[a>>6&3].call(this,a)}
function Ng(a){Og[a&15].call(this,a)}function Pg(a){Qg[a&15].call(this,a)}function Rg(a){Sg[a>>6&3].call(this,a)}function Tg(a){Ug[a>>6&3].call(this,a)}function Vg(a){Wg[a>>6&3].call(this,a)}
var Gg=[function(a){Xg[a>>8&15].call(this,a)},rg,fg,Pf,Lf,Nf,Gf,U,function(a){Yg[a>>8&15].call(this,a)},sg,gg,Qf,Mf,Of,Bg,U],Xg=[function(a){Zg[a>>4&15].call(this,a)},bg,Zf,Rf,Sf,Xf,Tf,Vf,pg,pg,Hg,Jg,Lg,U,U,U],Ig=[function(a){Ie(this,a,0,this.fb);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,0,qf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,1,uf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,1,sf);this.b-=this.v?9:3+(7==this.j?2:0)}],Kg=[function(a){S(this,a,0,wf);
this.b-=this.v?11:6},function(a){S(this,a,je(this)?1:0,ff);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,je(this)?1:0,Cf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){a=Fe(this,a);this.fb(a);this.b-=this.v?4:3+(7==this.j?2:0)}],Mg=[function(a){S(this,a,0,Af);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,0,yf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,0,kf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){S(this,a,0,hf);this.b-=this.v?9:3+(7==this.j?2:0)}],Zg=
[function(a){$g[a&15].call(this,a)},U,U,U,ng,ng,ng,ng,xg,U,Ng,Pg,Cg,Cg,Cg,Cg],$g=[jg,Eg,yg,ag,lg,wg,U,U,U,U,U,U,U,U,U,U],Og=[vg,function(){this.G=0;this.b-=5},function(){this.H=0;this.b-=5},eg,function(){this.L=1;this.b-=5},eg,eg,eg,function(){this.J=0;this.b-=5},eg,eg,eg,eg,eg,eg,eg],Qg=[vg,function(){this.G=65536;this.b-=5},function(){this.H=32768;this.b-=5},zg,function(){this.L=0;this.b-=5},zg,zg,zg,function(){this.J=32768;this.b-=5},zg,zg,zg,zg,zg,zg,zg],Yg=[$f,Yf,Uf,Wf,cg,dg,Jf,Kf,ig,Dg,Rg,Tg,
Vg,U,U,U],Sg=[function(a){He(this,a,0,255,this.fb);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){Ge(this,a,0,rf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){Ge(this,a,1,vf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){Ge(this,a,1,tf);this.b-=this.v?9:3+(7==this.j?2:0)}],Ug=[function(a){Ge(this,a,0,xf);this.b-=this.v?11:6},function(a){Ge(this,a,je(this)?1:0,gf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){Ge(this,a,je(this)?1:0,Df);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){a=Ee(this,
a);this.fb(a<<8);this.b-=this.v?4:3+(7==this.j?2:0)}],Wg=[function(a){Ge(this,a,0,Bf);this.b-=this.v?9+(this.hc&1):3+(7==this.j?2:0)},function(a){Ge(this,a,0,zf);this.b-=this.v?9:3+(7==this.j?2:0)},function(a){Ge(this,a,0,lf);this.b-=this.v?9+(this.hc&1):3+(7==this.j?2:0)},function(a){Ge(this,a,0,jf);this.b-=this.v?9:3+(7==this.j?2:0)}];function ee(a){ah[a>>12].call(this,a)}
var ah=[function(a){bh[a>>8&15].call(this,a)},rg,fg,Pf,Lf,Nf,Gf,function(a){ch[a>>8&15].call(this,a)},function(a){dh[a>>8&15].call(this,a)},sg,gg,Qf,Mf,Of,Bg,U],bh=[function(a){eh[a>>4&15].call(this,a)},bg,Zf,Rf,Sf,Xf,Tf,Vf,pg,pg,Hg,Jg,Lg,function(a){fh[a>>6&3].call(this,a)},U,U],fh=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.ia(a|this.Ba);he(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=ze(this,a,0);this.wa(a);se(this,a);this.b-=11},function(a){var b=ue(this);
this.aa=this.b;this.wa(b);Ae(this,a,0,b);this.b=this.aa-tg[this.v]},function(a){Ie(this,a,me(this)?65535:0,this.wa);this.b-=this.v?9:3+(7==this.j?2:0)}],eh=[function(a){gh[a&15].call(this,a)},U,U,U,ng,ng,ng,ng,xg,function(a){a&8?(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5):U.call(this,a)},Ng,Pg,Cg,Cg,Cg,Cg],gh=[jg,Eg,function(){te(this);this.i|=this.w&16;this.b-=13},ag,lg,wg,yg,function(){this.ja(8,0,-9)},U,U,U,U,U,U,U,U],ch=[ug,ug,hg,hg,Hf,Hf,If,If,Fg,Fg,U,U,U,U,Ag,
Ag],dh=[$f,Yf,Uf,Wf,cg,dg,Jf,Kf,ig,Dg,Rg,Tg,Vg,function(a){hh[a>>6&3].call(this,a)},U,U],hh=[U,function(a){a=ze(this,a,65536);this.wa(a);se(this,a);this.b-=11},function(a){var b=ue(this);this.aa=this.b;this.wa(b);Ae(this,a,65536,b);this.b=this.aa-tg[this.v]},U];
function ih(a){A.call(this,"ROM",a,0,128);this.da=this.g=null;this.v=a.addr;this.b=a.size;this.w=!1;this.j=a.alias;this.i=a.file;this.B=x(this.i);if(this.i){a=this.i;var b=oa(this.B);"json"!=b&&"hex"!=b&&(a=Ca()+"/api/v1/dump?file="+this.i+"&format=bytes&decimal=true");var c=this;Aa(a,null,!0,function(a,b,f){f?(c.N("Unable to load ROM resource (error "+f+": "+a+")"),c.i=null):(ib(c.kb,a,b),(a=Ba(a,b))?(c.g=a.ba,c.da=a.da):c.i=null);jh(c)})}}p(ih,A);h=ih.prototype;
h.pa=function(a,b,c,d){this.D=b;this.f=c;this.F=d;jh(this)};h.qa=function(){this.da&&(this.F&&kh(this.F,this.id,this.v,this.b,this.da),delete this.da);return!0};h.za=function(){return!0};
function jh(a){if(!qb(a)){if(a.i){if(!a.g||!a.D)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)ob(a,"ROM size ("+v(a.g.length,8,!0)+") does not match specified size ("+v(a.b,8,!0)+")");else{var b;a:{b=a.v;a.status(a.b+"-byte ROM at "+q(b));if(57344<=b&&b<57344+Cc){var c={};b=(c[b]=[ih.prototype.Ke,ih.prototype.Tf,null,null,null,a.b>>1],c);if(Mb(a.D,a,b)){b=a.w=!0;break a}}else if(Ic(a.D,b,a.b,qd)){for(c=0;c<a.g.length;c++)Qc(a.D,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.j?b.push(a.j):
null!=a.j&&a.j.length&&(b=a.j);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.D,g=d.b,k=[],l=d.v>>>f.g;0<g&&l<f.b.length;)k.push(f.b[l++]),g-=f.i;f=d.D;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){l=k[g++];if(!l)break;f.b[e++]=l;d-=f.i}}a.w||delete a.g}}}G(a)}}h.Ke=function(a){return this.g[a-this.v]};h.Tf=function(){};Ua(function(){for(var a=D(document,"pdp11","rom"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new ih(d);nb(d,c)}});
function lh(a){A.call(this,"RAM",a);this.da=this.g=null;this.i=a.addr;this.j=a.size;this.La=a.load;this.Ka=a.exec;this.v=!1;this.b=a.file;this.w=x(this.b);if(this.b){a=this.b;var b=oa(this.w);"json"!=b&&"hex"!=b&&(a=Ca()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;Aa(a,null,!0,function(a,b,f){f?(c.N("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(ib(c.kb,a,b),(a=Ba(a,b))?(c.g=a.ba,c.da=a.da,null==c.La&&(c.La=a.La),null==c.Ka&&(c.Ka=a.Ka)):c.b=null);mh(c)})}}
p(lh,A);lh.prototype.pa=function(a,b,c,d){this.D=b;this.f=c;this.F=d;mh(this)};lh.prototype.qa=function(){this.da&&(this.F&&kh(this.F,this.id,this.i,this.j,this.da),delete this.da);return!0};lh.prototype.za=function(){return!0};function mh(a){if(a.D&&(!a.v&&a.j&&(Ic(a.D,a.i,a.j,Tc)?a.v=!0:a.j=0),!qb(a))){if(!a.v)y("No RAM allocated");else if(a.b){if(!a.g||!a.D)return;nh(a,a.g,a.La,a.Ka,a.i)}G(a)}}
lh.prototype.reset=function(){if(this.v){for(var a=this.D,b=this.i,c=this.j,d=b&a.j,b=b>>>a.g;0<c&&b<a.b.length;){var e=a.b[b],f=c,g=0,k,d=d||0,g=(g||0)&255;void 0===f&&(f=e.size);if(yb&&e.C)for(k=d;f--&&k<e.C.length;k++)e.C[k]=g;else for(k=d;f--&&k<e.size;k++)e.I(d,g,e.K+d);c-=a.i;b++;d=0}this.g&&nh(this,this.g,this.La,this.Ka,this.i,!0)}};
function nh(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){var n=l;if(1!=m){I(a,"invalid signature ("+w(m)+") at offset "+w(n),4096);break}if(l+6>=b.length){I(a,"invalid block at offset "+w(n),4096);break}for(var l=l+2,r=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8,m=m+((r&255)+(r>>8)+(t&255)+(t>>8)),u=l,E=r-=6;0<r&&l<b.length;)m+=b[l++]&255,r--;if(r||l>=b.length){I(a,"insufficient data for block at offset "+w(n),4096);break}m+=
b[l++]&255;if(m&255){I(a,"invalid checksum ("+v(m,2,!0)+") for block at offset "+w(n),4096);break}if(E)for(I(a,"loading "+w(E)+" bytes at "+w(t)+"-"+w(t+E),4096);E--;)Qc(a.D,t++,b[u++]&255);else t&1?g=!0:null==d&&(d=t),null!=d&&I(a,"starting address: "+w(d),4096);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)Qc(a.D,c+e,b[e]);k=!0}if(k){if(null==d||g)J(a.f),f=!1;null!=d&&ge(a.f,d,f)}return k}
Ua(function(){for(var a=D(document,"pdp11","ram"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new lh(d);nb(d,c)}});function oh(a){A.call(this,"Keyboard",a,0,1024);G(this)}p(oh,A);oh.prototype.na=function(){return!1};oh.prototype.pa=function(a,b,c,d){this.I=a;this.f=c;this.F=d};Ua(function(){for(var a=D(document,"pdp11","keyboard"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new oh(d);nb(d,c)}});
function ph(a){A.call(this,"SerialPort",a,0,262144);this.J=a.adapter;this.S=a.baudReceive||9600;this.aa=a.baudTransmit||9600;this.Y=a.upperCase;this.i=this.w=null;this.V=a.tabSize;this.U=a.charBOL;this.B=0;this.H=!0;this.P=this.L=null;this.R=this.X=-1;this.G=this.b=this.g=0;this.j=[];var b=a.binding;if("console"==b)this.w="";else{var c;a=qh;b&&(void 0===c&&(c="Panel"),(c=mb(c,this.id))&&(b=c.C[b])&&this.na(null,a,b))}this.v=this.M=this.O=null;this.exports={connect:this.kd,receiveData:this.cc,receiveStatus:this.df}}
p(ph,A);h=ph.prototype;
h.na=function(a,b,c){var d=this;switch(b){case qh:return this.C[b]=this.i=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?ka.Kc:ka.vd:46==c?b=ka.Kc:a.ctrlKey&&c>=ka.Hc&&c<=ka.Ed&&(b=c-(ka.Hc-ka.sd));b&&(a.preventDefault&&a.preventDefault(),d.cc(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==ka.ud&&(b=ka.td);d.cc(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.cc(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};
h.pa=function(a,b,c,d){this.I=a;this.D=b;this.f=c;this.F=d;var e=this;this.P=$c(this.f,this.J?-1:48,4,262144);this.R=Xc(this.f,function(){var a;a=-1;e.j.length&&(a=e.j.shift()&255,I(e,"receiveByte("+v(a,2,!0)+")"),e.Y&&97<=a&&122>a&&(a-=32),Zc(e.f,e.R,1E3/Math.round(e.S/10)));0<=a&&(e.G=a,e.b&128?e.G|=49152:e.b|=128,e.b&64&&Yc(c,e.P))});this.L=$c(this.f,this.J?-1:52,4,262144);this.X=Xc(this.f,function(){e.g|=128;e.g&64&&Yc(c,e.L)});Mb(b,this,rh,this.J?64832+8*(this.J-1)-65392:0);Ob(b,this.reset.bind(this));
G(this)};h.kd=function(a){if(!this.v){var b=Pd(this.I,"connection");if(b){var c=b.split("->");if(2==c.length){var d=ua(c[0]);if(d!=this.jb)return;c=ua(c[1]);if(this.v=lb(c)){var e=this.v.exports;if(e){var f=e.connect;f&&f.call(this.v,this.H);if(this.M=e.receiveData){this.H=a;this.O=e.receiveStatus;this.status(this.kb+"."+d+" connected to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.qa=function(a,b){if(!b)if(this.kd(this.H),!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.za=function(a){return a?this.save():!0};h.reset=function(){sh(this)};h.save=function(){var a=new ie(this);a.set(0,[]);return a.data()};h.restore=function(){return sh(this)};function sh(a){a.G=0;a.b=8192;a.g=128;a.j=[];return!0}
h.cc=function(a){if("number"==typeof a)this.j.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.j.push(b)}else this.j=this.j.concat(a);Zc(this.f,this.R,1E3/Math.round(this.S/10));return!0};h.df=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&Yc(this.f,this.P))};h.xe=function(){var a=this.b&65534;this.b&=-32769;return a};
h.Gf=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.O&&b&6&&(b=0,b=this.H?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.O.call(this.v,b))};h.we=function(){this.b&=-129;return this.G};h.Ff=function(){};h.cf=function(){return this.g};h.lg=function(a){this.g&128&&(a&64?Yc(this.f,this.L):dd(this.f,this.L));this.g=this.g&-70|a&69};h.bf=function(){return 0};
h.kg=function(a){var b=a&255;I(this,"transmitByte("+v(b,2,!0)+")");this.M&&this.M.call(this.v,b);b&=127;if(this.i)if(13==b)this.B=0;else if(8==b)this.i.value=this.i.value.slice(0,-1),0<this.B&&this.B--;else{if(b){a=13!=b&&10!=b?"<"+wa[b]+">":String.fromCharCode(b);var c=a.length;32>b&&1==c&&(c=0);9==b&&(b=this.V||8,c=b-this.B%b,this.V&&(a=ta("",c)));this.U&&!this.B&&c&&(a=String.fromCharCode(this.U)+a);this.i.value+=a;this.i.scrollTop=this.i.scrollHeight;this.B+=c}}else if(null!=this.w){if(10==b||
1024<=this.w.length)this.u(this.w),this.w="";10!=b&&(this.w+=String.fromCharCode(b))}Zc(this.f,this.X,1E3/Math.round(this.aa/10));this.g&=-129};var qh="buffer",th={},rh=(th[65392]=[null,null,ph.prototype.xe,ph.prototype.Gf,"RCSR"],th[65394]=[null,null,ph.prototype.we,ph.prototype.Ff,"RBUF"],th[65396]=[null,null,ph.prototype.cf,ph.prototype.lg,"XCSR"],th[65398]=[null,null,ph.prototype.bf,ph.prototype.kg,"XBUF"],th);
Ua(function(){for(var a=D(document,"pdp11","serial"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new ph(d);nb(d,c)}});function md(a){A.call(this,"PC11",a);this.M=uh(this,a.autoMount);this.g=0;this.S=a.baudReceive||3600;this.B=this.G=this.b=0;this.w=[];this.v=vh;this.i=wh;this.L=this.j="";this.ba=this.La=this.Ka=null;this.P=-1;this.O=!Ma("Mobi")&&window&&"FileReader"in window;this.H=null;this.R=-1;this.J=null}p(md,A);
function uh(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=md.prototype;
h.na=function(a,b,c){var d=this,e=wh;switch(b){case "listTapes":return this.C[b]=c,c.onchange=function(){var a=d.C.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){y("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.C[b]=c,!0;case "readTape":e=xh;case "loadTape":return e||(e=yh),this.C[b]=c,c.onclick=
function(){var a=d.C.listTapes;a&&zh(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.O){c.parentNode.removeChild(c);break}this.C[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;zh(d,x(b,!0),b,yh,a)}return!1};return!0;case Ah:return this.C[b]=c,!0}return!1};
h.pa=function(a,b,c,d){this.I=a;this.D=b;this.f=c;this.F=d;this.J=Bh(a);var e=this;if(a=uh(this,Pd(this.I,"autoMount")))for(var f in a)"PTR"==f&&(this.M[f]=a[f]);this.H=$c(this.f,56,4,4096);this.R=Xc(this.f,function(){1==(e.b&32769)&&!(e.b&128)&&e.B<e.w.length&&(e.G=e.w[e.B++]&255,Ch(e,e.B/e.w.length*100),e.b|=128,e.b&=-2049,e.b&64&&Yc(e.f,e.H))});Mb(b,this,Dh);Ob(b,this.reset.bind(this));Eh(this,"None",vh,!0);this.O&&Eh(this,"Local Tape",Fh);Eh(this,"Remote Tape",Gh);Hh(this)||G(this)};
h.qa=function(a,b){if(!b)if(!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};h.za=function(a){return a?this.save():!0};h.reset=function(){this.b&=-2241;this.G=0};function Hh(a){a.g=0;var b=a.M.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.C.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=x(c,!0)}c&&b?Ih(a,b,c,yh,!0):Jh(a)}return!!a.g}
function zh(a,b,c,d,e){if(c)if(c==Fh)a.N('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==Gh){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=x(c);a.status("Attempting to load "+c+' as "'+b+'"');a.v=Gh}else a.v=c;Ih(a,b,c,d,!1,e)}else Kh(a,!1)}
function Ih(a,b,c,d,e,f){var g=-1;if(a.j.toLowerCase()!=c.toLowerCase()||a.i!=d)g++,Kh(a,!0),a.A.bb?a.N("PC11 busy"):(e&&(a.g++,H(a)&&I(a,"auto-loading tape: "+b)),Lh(a,b,c,d,f)?g++:a.A.bb=!0);g&&Mh(a,a.L,a.j,a.i,a.ba,a.La,a.Ka)}
function Lh(a,b,c,d,e){var f=c;if(e){var g=new FileReader;g.onload=function(){var e=g.result;e&&(e=new Uint8Array(e,0,e.byteLength),Mh(a,b,c,d,e),a.v=Fh);Jh(a)};g.readAsArrayBuffer(e);return!0}0>c.indexOf("/api/v1/dump")&&(e=oa(c),f="json"==e||"gz"==e?encodeURI(c):Ca()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!Aa(f,null,!0,function(e,f,g){var k=0>g&&!!a.I&&!a.I.A.ea;g?a.N('Unable to load tape "'+b+'" (error '+g+": "+e+")",k):(ib(a.kb,e,f),(e=Ba(e,f))&&Mh(a,b,c,d,e.ba,e.La,
e.Ka));a.A.bb=!1;a.g&&(a.g--,a.g||G(a));Jh(a)})}function Eh(a,b,c,d){if((a=a.C.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Jh(a){var b=a.C.listTapes;if(b&&b.options){a=a.v||a.j;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function Ch(a,b){b|=0;if(b!==a.P){var c=a.C[Ah];c&&(c=(c=D(c,Nh))&&c[0])&&c.style&&(c.style.width=b+"%");a.P=b}}
function Mh(a,b,c,d,e,f,g){a.L=b;a.j=c;a.i=d;a.ba=e;a.La=f;a.Ka=g;d==xh?a.J&&nh(a.J,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.N('No valid memory address for tape "'+b+'"'):(a.B=0,a.w=e,a.status('Loaded tape "'+b+'"'),Ch(a,0))}function Kh(a,b){if(a.j||!1===b)a.L="",a.j="",b||(a.i&&a.status(a.i==yh?"tape detached":"tape unloaded"),a.v=vh,a.i=wh,Jh(a))}h.save=function(){return(new ie(this)).data()};h.restore=function(){return!0};h.qe=function(){return this.b&65534};
h.zf=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&Yc(this.f,this.H)):(this.b&=-129,this.b|=2048,this.G=0,Zc(this.f,this.R,1E3/Math.round(this.S/10))));this.b=this.b&-66|a&65};h.pe=function(){this.b&=-129;this.b|=2048;return this.G};h.yf=function(){};var vh="",Fh="?",Gh="??",wh=0,yh=1,xh=2,Ah="readProgress",Nh="pcjs-progress-bar",Oh={},Dh=(Oh[65384]=[null,null,md.prototype.qe,md.prototype.zf,"PRS"],Oh[65386]=[null,null,md.prototype.pe,md.prototype.yf,"PRB"],Oh);
function Ph(a,b,c){A.call(this,"Disk",{id:a.kb+".disk"+v(++Qh,4)},0,8192);this.controller=a;this.I=a.I;this.F=a.F;this.v=b;this.Ma=b.name;this.va=this.ec="";this.ac=b.ac;this.W=this.ca=this.Z=this.ma=this.mode=0;this.b=[];this.i=null;this.j=!1;Rh(this,c,b.W,b.ca,b.Z,b.ma);this.g=this.w=null;G(this)}p(Ph,A);h=Ph.prototype;h.pa=function(a,b,c,d){this.F=d};
function Rh(a,b,c,d,e,f){a.mode=b;a.W=c;a.ca=d;a.Z=e;a.ma=f;a.b=[];if("preload"!=a.mode){b=Array(a.W);for(c=0;c<b.length;c++){d=Array(a.ca);for(e=0;e<d.length;e++){f=Array(a.Z);for(var g=1;g<=f.length;g++)f[g-1]=Sh(null,c,e,g,a.ma,0);d[e]=f}b[c]=d}a.b=b}a.i=null}
function Th(a,b,c,d,e){var f=c;if(a.g)return!0;a.Ma=b;a.va=c;a.ec=x(c);a.g=e;a.w=a.controller;if(d){var g=new FileReader;g.onload=function(){var b=g.result,c,d=b?b.byteLength:0,e=ja[d];if(e){a.W=e[0];a.ca=e[1];a.Z=e[2];a.ma=e[3]||512;c=a.ma>>2;var f=e=0,b=new DataView(b,0,d);a.b=Array(a.W);for(d=0;d<a.b.length;d++)for(var t=a.b[d]=Array(a.ca),u=0;u<t.length;u++)for(var E=t[u]=Array(a.Z),z=0;z<E.length;z++){for(var C=Sh(null,d,u,z+1,a.ma,0),F=C.data,bb=0;bb<c;bb++,f+=4)var V=F[bb]=b.getInt32(f,!0),
e=e+V&-1;C.Ga=c;E[z]=C}a.i=e;c=a}else a.N("Unrecognized disk format ("+d+" bytes)");a.g&&(a.g.call(a.controller,a.v,c,a.Ma,a.va),a.g=null)};g.readAsArrayBuffer(d);return!0}0>c.indexOf("/api/v1/dump")&&(b=oa(c),"json"==b||"gz"==b?f=encodeURI(c):(d="path",e="&mbhd=10",!c.indexOf("http:")||!c.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(b)?(d="disk",e="&mbhd=0"):pa(c,"/")&&(d="dir"),f=Ca()+"/api/v1/dump?"+d+"="+encodeURIComponent(c)+(a.ac?"":e)+"&format=json"));return!!Aa(f,null,
!0,function(b,c,d){Uh(a,b,c,d)})}
function Uh(a,b,c,d){var e=null,f=0>d&&!!a.I&&!a.I.A.ea;a.j=!1;if(d)a.controller.N('Unable to load disk "'+a.Ma+'" (error '+d+": "+b+")",f);else{ib(a.controller.kb,b,c);try{if(0<x(a.ec,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var k;"<"==c.substr(0,1)?k=["Missing disk image: "+a.Ma]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+
c+")");if(k.length)if(1==k.length)y(k[0]);else{a.W=k.length;a.ca=k[0].length;a.Z=k[0][0].length;var l=k[0][0][0];a.ma=l&&l.length||512;for(d=c=0;d<a.W;d++)for(f=0;f<a.ca;f++)for(g=0;g<a.Z;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);var m=m>>2,n=l.pattern;void 0===n&&(n=l.pattern=0);var r=l.data;if(void 0===r){var t=l.bytes;if(void 0!==t&&t.length){for(var u=m<<2,E=t.length;E<u;E++)t[E]=n;Vh(l,t)}else r=[],n=l.pattern=n|n<<8|n<<16|n<<24,l.data=r;delete l.bytes}Sh(l,d,f);for(u=
0;u<r.length;u++)c=c+r[u]&-1}a.b=k;a.i=c;e=a}else y("Empty disk image: "+a.Ma)}catch(z){y("Disk image error ("+b+"): "+z.message)}}a.g&&(a.g.call(a.w,a.v,e,a.Ma,a.va),a.g=null)}function Sh(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.nh=b;a.oh=c;a.Qa=a.Ga=0;a.Sa=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.v,g=this.b[a];if(g){var k=g[b];if(!k&&f.Hd&&b<f.ca)for(k=g[b]=Array(f.ad),g=0;g<k.length;g++)k[g]=Sh(null,a,b,g+1,f.Ac,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.Hd&&9==f.xc&&(d=k[g]=Sh(null,a,b,f.xc,f.Ac,0))}}e&&e(d,!1);return d};function Vh(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length)var c=a.data,d=b>>2,c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255;return c};h.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.Ga?f<a.Qa?(a.Ga+=a.Qa-f,a.Qa=f):f>=a.Qa+a.Ga&&(a.Ga+=f-(a.Qa+a.Ga)+1):(a.Qa=f,a.Ga=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function Wh(a,b){var c=a.ca*a.Z,d=b/c|0;return d<a.W?(b%=c,a.seek(d,b/a.Z|0,b%a.Z+1)):null}function Xh(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}function Yh(a){for(var b="",c=0,d;d=Wh(a,c++);)for(var e=0,f=d.length;e<f;e++)b+=String.fromCharCode(Xh(a,d,e));return btoa(b)}
h.save=function(){var a=0,b=[];b[a++]=[this.va,this.i,this.W,this.ca,this.Z,this.ma];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.Ga){for(var k=[],l=0,m=g.Qa,n=g.Qa+g.Ga;m<n;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.Qa,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?Rh(this,"local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.b.length||l>=this.b[k].length||m>=this.b[k][l].length){c="sector (CHS="+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.b[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.Qa=e;for(k.Ga=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.N("Unable to restore disk '"+this.Ma+": "+c);return b};
h.toJSON=function(){var a;a=0;for(var b;b=Wh(this,a++);)Zh(b);a=JSON.stringify(this.b,function(a,b){if("file"!=a)return b});a=a.replace(/,"length":512/gm,"").replace(/,"pattern":0/gm,"");a=a.replace(/"(sector|length|data|pattern)":/gm,"$1:");a=a.replace(/,"[^"]*":([0-9]+|true|false)/gm,"");a=a.replace(/(sector|length|data|pattern):/gm,'"$1":');return a=a.replace(/([\]}]),/gm,"$1,\n")};
function Zh(a){var b=a.data,c=b.length;if(c<<2==a.length){for(var d=c-1,e=b[d],f=0;d--&&b[d]===e;)f++;f++&&(b.length=c-f,a.pattern=e)}}var Qh=0;function R(a){A.call(this,"RK11",a,0,65536);this.G=$h(this,a.autoMount);this.B=0;this.g=Array(8);this.H=!Ma("Mobi")&&window&&"FileReader"in window;this.cb=null;this.L=this.i=this.b=this.w=this.v=this.j=this.J=0}p(R,A);
function $h(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=R.prototype;
h.na=function(a,b,c){var d=this;switch(b){case "listDisks":return this.C[b]=c,c.onchange=function(){var a=d.C.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){y("RK11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.C[b]=c,c.onchange=function(){var a=la(c.value,10);null!=a&&ai(d,
a)},!0;case "loadDisk":return this.C[b]=c,c.onclick=function(){var a=d.C.listDisks;a&&a.options&&ui(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.C[b]=c,c.onclick=function(){var a,b=d.C.listDrives,b=b&&la(b.value,10);null==b||0>b||b>=d.g.length||!(a=d.g[b])?d.N("Unable to boot the selected drive"):a.ga?(ge(d.f,0,!0),(a=d.Tc(a,0,0,0,512,0,2))&&d.N("Unable to read the boot sector ("+a+")")):d.N("Load a disk into the drive first")},!0;case "saveDisk":if(!this.H){c.parentNode.removeChild(c);
break}this.C[b]=c;c.onclick=function(){var a=d.C.listDrives;a&&a.options&&d.g&&((a=d.g[la(a.value,10)||0])?(a=a.ga)?(a=Na(Yh(a),a.ec.replace(".json",".img")),y(a)):d.N("No disk loaded in drive."):d.N("No disk drive selected."))};return!0;case "mountDisk":if(this.H)return this.C[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;ui(d,x(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.pa=function(a,b,c,d){this.I=a;this.D=b;this.f=c;this.F=d;if(a=$h(this,Pd(this.I,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.G[e]=a[e]);wi(this);this.cb=$c(this.f,144,5,65536);Mb(b,this,xi);Ob(b,this.reset.bind(this));yi(this,"None",zi,!0);this.H&&yi(this,"Local Disk",Ai);yi(this,"Remote Disk",Bi);Ci(this)||G(this)};
h.qa=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.I.w){for(a=0;a<this.g.length;a++)Di(this,a,!0);Ci(this,!0)}}else if(!this.restore(a))return!1;if(a=this.C.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;8>b;b++){var c=document.createElement("option");c.value=b;c.text="RK"+b;a.appendChild(c)}a.value="0";ai(this,0)}}return!0};h.za=function(a){return a?this.save():!0};h.reset=function(){wi(this)};h.save=function(){return(new ie(this)).data()};
h.restore=function(a){return wi(this,a[0])};function Ci(a,b){b||(a.B=0);for(var c in a.G){var d=a.G[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.C.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=x(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!Ei(a,g,f,e,!0)&&b&&G(a,!1);continue}a.N("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.B}
function ui(a,b,c,d){var e=a.C.listDrives,e=e&&la(e.value,10);if(void 0===e||0>e||e>=a.g.length)a.N("Unable to load the selected drive");else if(c)if(c==Ai)a.N('Use "Choose File" and "Mount" to select and load a local disk.');else{if(c==Bi){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=x(c);a.status("Attempting to load "+c+' as "'+b+'"')}Ei(a,e,b,c,!1,d)}else Di(a,e)}
function Ei(a,b,c,d,e,f){var g=-1,k=a.g[b];k.va.toLowerCase()!=d.toLowerCase()&&(g++,Di(a,b,!0),k.pb?a.N("RK11 busy"):(k.pb=!0,e&&(k.ob=!0,a.B++,H(a)&&I(a,"auto-loading disk: "+c)),k.Ta=!!f,Th(new Ph(a,k,"preload"),c,d,f,a.yd)&&g++));return g}
h.yd=function(a,b,c,d,e){a.pb=!1;b&&(b.W>a.W||b.ca>a.ca)&&(this.N('Disk "'+c+'" too large for drive '+("RK"+a.qb)),b=null);b?(a.ga=b,a.Ma=c,a.va=d,this.N('Loaded disk "'+c+'" in drive '+("RK"+a.qb),a.ob||e),this.I&&Zd(this.I)):a.Ta=!1;a.ob&&(a.ob=!1,--this.B||G(this));ai(this,a.qb)};
function yi(a,b,c,d){if((a=a.C.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function ai(a,b){if(0<=b&&b<a.g.length){var c=a.g[b],d=a.C.listDisks;a=a.C.listDrives;if(d&&a&&d.options&&a.options&&(a=la(a.value,10),c=c.Ta?Ai:c.va,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function Di(a,b,c){var d=a.g[b];if(d.ga||!1===c)d.Ma="",d.va="",d.ga=null,d.Ta=!1,c||(a.N("Drive RK"+b+" unloaded",c),ai(a,b))}
function wi(a,b){var c=0;b||(b=[]);a.L=b[c++]||2368;a.i=b[c++]||0;a.b=b[c++]||128;a.w=b[c++]||0;a.v=b[c++]||0;a.j=b[c++]||0;a.J=b[c]||0;for(b=0;b<a.g.length;b++){var d=a.g[b];void 0===d&&(d=a.g[b]={});c=a;d.qb=b;d.name=c.jb;d.pb=d.Ta=!1;d.W=203;d.ca=2;d.Z=12;d.ma=512;d.ac=!0;d.Id=0;d.Gd=0;d.xc=1;d.ad=d.Z;d.Ac=d.ma;d.Nd=0;d.ff=null;d.ga||(d.va="");d.status=2368}return!0}
h.Tc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ga;var n=null,r;a||(m=128,e=0);for(;e;){if(!n){if(b>=a.W){m=64;break}n=a.seek(b,c,d+1);if(!n){m=4096;break}r=0;++d>=a.Z&&(d=0,++c>=a.ca&&(c=0,++b))}var t,u;if(0>(t=a.read(n,r++))||0>(u=a.read(n,r++))){m=32;break}if(!k&&(gc(this.D,ve(this.f,f),t|u<<8),Wc(this.D))){m=1024;break}r>=a.ma&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.zd=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ga;var n=null,r;a||(m=128,e=0);for(;e;){var t=ic(this.D,ve(this.f,f));if(Wc(this.D)){m=1024;break}f+=g;e--;if(!n){if(b>=a.W){m=64;break}n=a.seek(b,c,d+1,!0);if(!n){m=4096;break}r=0;++d>=a.Z&&(d=0,++c>=a.ca&&(c=0,++b))}if(k){if(0>a.read(n,r++)||0>a.read(n,r++)){m=32;break}}else if(!a.write(n,r++,t&255)||!a.write(n,r++,t>>8)){m=32;break}r>=a.ma&&(n=null)}return l?l(m,b,c,d,e,f):m};
h.xd=function(a,b,c,d,e,f){this.v=f&65535;this.b=this.b&-49|f>>12&48;this.w=65536-e&65535;this.j=this.j&-16|d&15;a&&(this.i=this.i|a|32768,this.b|=49152);return!0};h.Ce=function(){return this.L};h.Lf=function(){};h.De=function(){return this.i};h.Mf=function(){};h.ze=function(){return this.b&61438};
h.If=function(a){this.b=this.b&-3968|a&3967;if(this.b&1){a=!0;var b,c="",d=(this.j&57344)>>13,e=this.g[d],f,g,k,l,m,n;this.b&=-129;var r=this.b&14;switch(r){case 0:H(this)&&I(this,this.type+": CRESET("+d+")",!0);this.i=0;this.b=128;this.j=0;break;case 8:f=(this.j&8160)>>5;H(this)&&I(this,this.type+": SEEK("+f+")",!0);f>=e.W&&(this.i|=32832,this.b|=49152);break;case 10:c="RCHK";case 4:c||(c="READ"),b=this.Tc;case 6:c||(c="WCHK");case 2:c||(c="WRITE");b||(b=this.zd);f=(this.j&8160)>>5;g=(this.j&16)>>
4;k=this.j&15;l=65536-this.w&65535;m=(this.b&48)<<12|this.v;n=this.b&2048?0:2;H(this)&&I(this,this.type+": "+c+"("+f+":"+g+":"+k+") "+q(m)+"--"+q(m+(l<<1)),!0,!0);if(f>=e.W){this.i|=32832;this.b|=49152;break}if(k>=e.Z){this.i|=32800;this.b|=49152;break}a=b.call(this,e,f,g,k,l,m,n,6<=r,this.xd.bind(this));break;case 12:H(this)&&I(this,this.type+": DRESET("+d+")");break;default:H(this)&&I(this,this.type+": UNSUPPORTED("+r+")")}this.L=e.status|(e.ga?128:0)|d<<13|this.j&15;this.i&32768&&H(this)&&I(this,
this.type+": ERROR: "+q(this.i));a&&(this.b&=-2,this.b|=128,this.b&64&&Yc(this.f,this.cb))}};h.Ee=function(){return this.w};h.Nf=function(a){this.w=a};h.ye=function(){return this.v};h.Hf=function(a){this.v=a};h.Ae=function(){return this.j};h.Jf=function(a){this.j=a};h.Be=function(){return this.J};h.Kf=function(a){this.J=a};
var zi="",Ai="?",Bi="??",Fi={},xi=(Fi[65280]=[null,null,R.prototype.Ce,R.prototype.Lf,"RKDS"],Fi[65282]=[null,null,R.prototype.De,R.prototype.Mf,"RKER"],Fi[65284]=[null,null,R.prototype.ze,R.prototype.If,"RKCS"],Fi[65286]=[null,null,R.prototype.Ee,R.prototype.Nf,"RKWC"],Fi[65288]=[null,null,R.prototype.ye,R.prototype.Hf,"RKBA"],Fi[65290]=[null,null,R.prototype.Ae,R.prototype.Jf,"RKDA"],Fi[65294]=[null,null,R.prototype.Be,R.prototype.Kf,"RKDB"],Fi);
function nd(a){A.call(this,"RL11",a,0,131072);this.H=Gi(this,a.autoMount);this.G=0;this.g=Array(4);this.J=!Ma("Mobi")&&window&&"FileReader"in window;this.cb=null;this.b=this.B=this.i=this.j=this.w=this.v=0}p(nd,A);function Gi(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){y(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=nd.prototype;
h.na=function(a,b,c){var d=this;switch(b){case "listDisks":return this.C[b]=c,c.onchange=function(){var a=d.C.descDisk,b=c.options&&c.options[c.selectedIndex];if(a&&b){var g={};if(b=b.getAttribute("data-value"))try{g=eval("("+b+")")}catch(k){y("RL11 option error: "+k.message)}b=g.desc;void 0===b&&(b="");g=g.href;void 0!==g&&(b='<a href="'+g+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descDisk":case "listDrives":return this.C[b]=c,c.onchange=function(){var a=la(c.value,10);null!=a&&Hi(d,
a)},!0;case "loadDisk":return this.C[b]=c,c.onclick=function(){var a=d.C.listDisks;a&&a.options&&Ii(d,a.options[a.selectedIndex].text,a.value)},!0;case "bootDisk":return this.C[b]=c,c.onclick=function(){var a,b=d.C.listDrives,b=b&&la(b.value,10);null==b||0>b||b>=d.g.length||!(a=d.g[b])?d.N("Unable to boot the selected drive"):a.ga?(ge(d.f,0,!0),(a=d.Uc(a,0,0,0,512,0))&&d.N("Unable to read the boot sector ("+a+")")):d.N("Load a disk into the drive first")},!0;case "saveDisk":if(!this.J){c.parentNode.removeChild(c);
break}this.C[b]=c;c.onclick=function(){var a=d.C.listDrives;a&&a.options&&d.g&&((a=d.g[la(a.value,10)||0])?(a=a.ga)?(a=Na(Yh(a),a.ec.replace(".json",".img")),y(a)):d.N("No disk loaded in drive."):d.N("No disk drive selected."))};return!0;case "mountDisk":if(this.J)return this.C[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Ii(d,x(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.pa=function(a,b,c,d){this.I=a;this.D=b;this.f=c;this.F=d;if(a=Gi(this,Pd(this.I,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.H[e]=a[e]);Ji(this);this.cb=$c(this.f,112,5,131072);Mb(b,this,Ki);Ob(b,this.reset.bind(this));Li(this,"None",Mi,!0);this.J&&Li(this,"Local Disk",Ni);Li(this,"Remote Disk",Oi);Pi(this)||G(this)};
h.qa=function(a,b){if(!b){if(!a||!this.restore){if(this.reset(),this.I.w){for(a=0;a<this.g.length;a++)Qi(this,a,!0);Pi(this,!0)}}else if(!this.restore(a))return!1;if(a=this.C.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;4>b;b++){var c=document.createElement("option");c.value=b;c.text="RL"+b;a.appendChild(c)}a.value="0";Hi(this,0)}}return!0};h.za=function(a){return a?this.save():!0};h.reset=function(){Ji(this)};h.save=function(){return(new ie(this)).data()};
h.restore=function(a){return Ji(this,a[0])};function Pi(a,b){b||(a.G=0);for(var c in a.H){var d=a.H[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.C.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=x(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!Ri(a,g,f,e,!0)&&b&&G(a,!1);continue}a.N("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.G}
function Ii(a,b,c,d){var e=a.C.listDrives,e=e&&la(e.value,10);if(void 0===e||0>e||e>=a.g.length)a.N("Unable to load the selected drive");else if(c)if(c==Ni)a.N('Use "Choose File" and "Mount" to select and load a local disk.');else{if(c==Oi){c=window.prompt("Enter the URL of a remote disk image.","")||"";if(!c)return;b=x(c);a.status("Attempting to load "+c+' as "'+b+'"')}Ri(a,e,b,c,!1,d)}else Qi(a,e)}
function Ri(a,b,c,d,e,f){var g=-1,k=a.g[b];k.va.toLowerCase()!=d.toLowerCase()&&(g++,Qi(a,b,!0),k.pb?a.N("RL11 busy"):(k.pb=!0,e&&(k.ob=!0,a.G++,H(a)&&I(a,"auto-loading disk: "+c)),k.Ta=!!f,Th(new Ph(a,k,"preload"),c,d,f,a.Bd)&&g++));return g}
h.Bd=function(a,b,c,d,e){a.pb=!1;b&&(b.W>a.W||b.ca>a.ca)&&(this.N('Disk "'+c+'" too large for drive '+("RL"+a.qb)),b=null);b?(a.ga=b,a.Ma=c,a.va=d,this.N('Loaded disk "'+c+'" in drive '+("RL"+a.qb),a.ob||e),this.I&&Zd(this.I)):a.Ta=!1;a.ob&&(a.ob=!1,--this.G||G(this));Hi(this,a.qb)};
function Li(a,b,c,d){if((a=a.C.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Hi(a,b){if(0<=b&&b<a.g.length){var c=a.g[b],d=a.C.listDisks;a=a.C.listDrives;if(d&&a&&d.options&&a.options&&(a=la(a.value,10),c=c.Ta?Ni:c.va,!isNaN(a)&&a==b)){for(b=0;b<d.options.length;b++)if(d.options[b].value==c){d.selectedIndex!=b&&(d.selectedIndex=b);break}b==d.options.length&&(d.selectedIndex=0)}}}function Qi(a,b,c){var d=a.g[b];if(d.ga||!1===c)d.Ma="",d.va="",d.ga=null,d.Ta=!1,c||(a.N("Drive RL"+b+" unloaded",c),Hi(a,b))}
function Ji(a,b){var c=0;b||(b=[]);a.b=b[c++]||129;a.B=b[c++]||0;a.i=b[c++]||0;a.j=b[c++]||0;a.w=b[c++]||0;a.v=b[c]||0;for(b=0;b<a.g.length;b++){var d=a.g[b];void 0===d&&(d=a.g[b]={});c=a;d.qb=b;d.name=c.jb;d.pb=d.Ta=!1;d.W=512;d.ca=2;d.Z=40;d.ma=256;d.ac=!0;d.Id=0;d.Gd=0;d.xc=1;d.ad=d.Z;d.Ac=d.ma;d.Nd=0;d.ff=null;d.ga||(d.va="");d.status=29}return!0}
h.Uc=function(a,b,c,d,e,f,g){var k=0;a=a.ga;var l=null,m;a||(k=5120,e=0);for(;e;){if(!l){l=a.seek(b,c,d+1);if(!l){k=5120;break}m=0}var n,r;if(0>(n=a.read(l,m++))||0>(r=a.read(l,m++))){k=5120;break}gc(this.D,ve(this.f,f),n|r<<8);if(Wc(this.D)){k=8192;break}f+=2;e--;if(m>=a.ma&&(l=null,++d>=a.Z&&(d=0,++c>=a.ca&&(c=0,++b>=a.W)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Cd=function(a,b,c,d,e,f,g){var k=0;a=a.ga;var l=null,m;a||(k=5120,e=0);for(;e;){var n=ic(this.D,ve(this.f,f));if(Wc(this.D)){k=8192;break}f+=2;e--;if(!l){l=a.seek(b,c,d+1,!0);if(!l){k=5120;break}m=0}if(!a.write(l,m++,n&255)||!a.write(l,m++,n>>8)){k=5120;break}if(m>=a.ma&&(l=null,++d>=a.Z&&(d=0,++c>=a.ca&&(c=0,++b>=a.W)))){k=5120;break}}return g?g(k,b,c,d,e,f):k};
h.Ad=function(a,b,c,d,e,f){this.B=f&65535;this.b=this.b&-49|f>>12&48;this.v=f>>16&63;this.j=this.i=b<<7|(c?64:0)|d&63;this.w=65536-e&65535;a&&(this.b=this.b|a|32768);return!0};h.He=function(){return this.b&65535};
h.Qf=function(a){this.b=this.b&-1023|a&1022;this.v=this.v&60|(a&48)>>4;if(!(this.b&128)){a=!0;var b,c="",d=this.g[(this.b&768)>>8],e=d.ga,f,g,k;this.b&=-2;switch(this.b&14){case 4:this.w&8&&(this.b&=63);this.w=d.status|this.j&64|(e&&512==e.W?128:0);break;case 6:1==(this.i&3)&&(b=this.i&65408,c=(this.i&16)<<2,this.j=this.i&4?this.j+b:this.j-b,this.i=this.j=this.j&65408|c);break;case 8:this.w=this.j;break;case 12:c="READ",b=this.Uc;case 10:c||(c="WRITE"),b||(b=this.Cd),f=this.i>>7,g=this.i&64?1:0,k=
this.i&63,!e||f>=e.W||k>=e.Z?this.b|=37888:(a=65536-this.w&65535,e=(this.v&63)<<16|this.B,H(this)&&I(this,this.type+": "+c+"("+f+":"+g+":"+k+") "+q(e)+"--"+q(e+(a<<1)),!0,!0),a=b.call(this,d,f,g,k,a,e,this.Ad.bind(this)))}a&&(this.b|=129,this.b&64&&Yc(this.f,this.cb))}};h.Fe=function(){return this.B};h.Of=function(a){this.B=a&65534};h.Ie=function(){return this.i};h.Rf=function(a){this.i=a};h.Je=function(){return this.w};h.Sf=function(a){this.w=a};h.Ge=function(){return this.v};
h.Pf=function(a){this.v=a&63;this.b=this.b&-49|(this.v&3)<<4};var Mi="",Ni="?",Oi="??",Si={},Ki=(Si[63744]=[null,null,nd.prototype.He,nd.prototype.Qf,"RLCS"],Si[63746]=[null,null,nd.prototype.Fe,nd.prototype.Of,"RLBA"],Si[63748]=[null,null,nd.prototype.Ie,nd.prototype.Rf,"RLDA"],Si[63750]=[null,null,nd.prototype.Je,nd.prototype.Sf,"RLMP"],Si[63752]=[null,null,nd.prototype.Ge,nd.prototype.Pf,"RLBE"],Si);
function Ti(a){A.call(this,"Debugger",a);this.ua=a.base||16;this.aa=!1;this.w=0;this.P=!1;this.v=-1;this.j=[];this.U={}}p(Ti,A);Ti.prototype.fd=function(){return-1};Ti.prototype.gd=function(){};
function Ui(a,b,c,d){if(c)if(b){0>a.v&&a.j.length&&(a.v=0);if(0>a.v||b!=a.j[a.v])a.j.splice(0,0,b),a.v=0;a.v--}else a.P?b="end":b=a.j[a.v+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(ua(b.substring(c,f))),c=f+1}}return a}
function Vi(a,b,c){for(c=c||-1;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop(),f=a.pop();switch(d){case "*":d=f*e;break;case "/":if(!e)return!1;d=f/e;break;case "%":if(!e)return!1;d=f%e;break;case "+":d=f+e;break;case "-":d=f-e;break;case "<<":d=f<<e;break;case ">>":d=f>>e;break;case ">>>":d=f>>>e;break;case "<":d=f<e?1:0;break;case "<=":d=f<=e?1:0;break;case ">":d=f>e?1:0;break;case ">=":d=f>=e?1:0;break;case "==":d=f==e?1:0;break;case "!=":d=f!=e?1:0;break;case "&":d=f&e;break;
case "^":d=f^e;break;case "|":d=f|e;break;case "&&":d=f&&e?1:0;break;case "||":d=f||e?1:0;break;default:return!1}a.push(d|0)}return!0}
function Wi(a,b,c){var d;if(b){b=Xi(a,b);for(var e=0,f=!1,g=b,k=[],l=[],m=b.split(/(\|\||&&|\||^|&|!=|==|>=|>>>|>>|>|<=|<<|<|-|\+|%|\/|\*)/);e<m.length;){var n=m[e++],r=n.length,n=ua(n);if(!n){f=!0;break}n=Yi(a,n,null,!1===c);if(void 0===n){f=!0;c=!1;break}k.push(n);if(e==m.length)break;var n=m[e++],t=n.length;l.length&&Zi[n]<Zi[l[l.length-1]]&&Vi(k,l,1);l.push(n);b=b.substr(r+t)}Vi(k,l)&&1==k.length||(f=!0);f?c&&a.u("error parsing '"+g+"' at character "+(g.length-b.length)):(d=k.pop(),c&&$i(a,null,
d))}return d}function Xi(a,b){for(var c,d=a.aa?"(":"{",e=a.aa?")":"}",f=new RegExp(a.aa?"\\((.*?)\\)":"\\{(.*?)\\}");(c=b.match(f))&&!(0<=c[1].indexOf(d));){var g=Wi(a,c[1]);b=b.replace(d+c[1]+e,null!=g?O(a,g):"undefined")}for(;(c=b.match(/\[(.*?)]/))&&!(0<=c[1].indexOf("["));)b=b.replace("["+c[1]+"]","unimplemented");for(a=b;b=a.match(/\$([a-z]+)/i);){c=null;switch(b[1].toLowerCase()){case "ops":c=0}if(null==c)break;a=a.replace(b[0],c.toString())}return a}
function Yi(a,b,c,d){var e;null!=b?(e=a.fd(b),0<=e?e=a.gd(e):(e=a.U[b],null==e&&(e=la(b,a.ua))),null!=e||d||a.u("invalid "+(c?c:"value")+": "+b)):d||a.u("missing "+(c||"value"));return e}function $i(a,b,c){var d,e=!1;if(void 0!==c){e=!0;d=c;var f=4,g="";if(!f||4<f)f=4;for(var k=0;k<f;k++)g&&(g=","+g),g=ma(d&255,8)+g,d>>=8;d=v(c,0,!0)+" "+c+". "+q(c,0,!0)+" "+("0b"+g);32<=c&&127>c&&(d+=" '"+String.fromCharCode(c)+"'")}a.u((null!=b?b+": ":"")+d);return e}
function aj(a,b){if(b)return $i(a,b,a.U[b]);var c=0;for(b in a.U)$i(a,b,a.U[b]),c++;return 0<c}function O(a,b,c,d){switch(a.ua){case 8:a=q(b,3*c-(2<c?1:0));break;case 10:a=b.toString();break;default:a=v(b,2*c)}d?d=a.replace(/^0+([0-9A-F]+)$/i,"$1"):d=a;return d}var Zi={"||":0,"&&":1,"|":2,"^":3,"&":4,"!=":5,"==":5,">=":6,">":6,"<=":6,"<":6,">>>":7,">>":7,"<<":7,"-":8,"+":8,"%":9,"/":9,"*":9};
function bj(a){Ti.call(this,a);this.Ba=!1;this.aa=!0;this.H=W();this.Aa=W();this.O=W();this.B=[];this.g=this.L=this.G=[];cj(this);this.R=this.Y=0;this.i=[];this.oa=void 0;dj(this);this.F=this;this.ka={};this.fa=this.ya=0;this.S=null;this.M=[];ej(this,a.messages);this.ta=a.commands;this.Ea=fj;this.xa=[];this.J=0;this.Fa=this.sa=null;this.w=this.Da=this.Ca=this.X=this.la=0;this.b=this.V=null;var b=this;window?void 0===window.pdp11&&(window.pdp11=function(a){return Ud(b,a)}):void 0===global.pdp11&&(global.pdp11=
function(a){return Ud(b,a)})}p(bj,Ti);function gj(a){a=a&&a.K;null==a&&(a=-1);return a}function W(a,b,c){return{K:a||0,Ha:b||!1,Pa:!1,ua:c}}h=bj.prototype;h.Ec=function(a,b){a.K=b;a.Pa=!1;a.ua=void 0;return a};function hj(a){return[a.K,a.Ha,a.ua,a.Pa,a.dc]}function ij(a,b){var c=W(b[0],b[1],b[2]);c.Pa=b[3];b[4]&&(c.Zc=Ui(a,c.dc=b[4]));return c}
h.pa=function(a,b,c,d){this.D=b;this.I=a;this.f=c;this.b=a.i;(a=Pd(a,"messages"))&&ej(this,a);1145>this.f.xa&&(this.xa=jj);bd(this,16,function(a){a:{var b=d.D.b,c=a[0],e=a=0,l=b.length;if(c){a=gj(kj(d,c));if(-1===a){d.u("invalid address: "+c);break a}e=a>>>d.D.g;l=1}d.u("blockid   physical   blockaddr  used    size    type");d.u("--------  ---------  ---------  ------  ------  ----");for(var c=-1,m=0;l--;){var n=b[e];n.type==c?m++||d.u("..."):(c=n.type,m=Nc[c],n&&d.u(v(n.id,8)+"  %"+v(e<<d.D.g,8)+
"  %"+v(n.K,8)+"  "+w(n.Eb)+"  "+w(n.size)+"  "+m),c!=pd&&(c=-1),m=0);a+=d.D.i;e++}}});G(this)};
h.na=function(a,b,c){var d=this;switch(b){case "debugInput":return this.V=this.C[b]=c,c.onkeydown=function(a){var b;if(13==a.keyCode)b=c.value,c.value="",Ud(d,b,!0);else if(27==a.keyCode)c.value=b="";else if(38==a.keyCode?(b=null,d.v<d.j.length-1&&(b=d.j[++d.v])):40==a.keyCode&&(0<d.v?b=d.j[--d.v]:(b="",d.v=-1)),null!=b){var e=b.length;c.value=b;c.setSelectionRange(e,e)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.C[b]=c,Pa(c,function(){if(d.V){var a=d.V.value;d.V.value=
"";Ud(d,a,!0);return!0}return!1}),!0;case "step":return this.C[b]=c,Pa(c,function(a){var b=!1;rb(d,!0)||(sb(d,!0),b=ac(d,a?1:0,null),sb(d,!1));return b}),!0}return!1};function Td(a){if(a.V){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.V.focus();window&&window.scrollTo(b,c)}}h.Lc=function(a,b){var c=255,d=gj(a);-1!==d&&(a.Ha||65535<d?(c=this.D,d=ve(this.f,d),c.G=!1,c.ha++,d=Pc(c,d).w(d&c.j,d),c.ha--):(c=this.f,c.la++,d=c.D.Ic(hc(c,d,3)),c.la--),c=d,b&&lj(a,b));return c};
h.Na=function(a,b){var c=65535,d=gj(a);-1!==d&&(c=a.Ha||65535<d?ic(this.D,ve(this.f,d)):jc(this.f,d),b&&lj(a,b));return c};h.Mc=function(a,b,c){var d=gj(a);if(-1!==d){if(a.Ha||65535<d)Qc(this.D,ve(this.f,d),b);else{var e=this.f;e.la++;e.D.Jc(hc(e,d,5),b);e.la--}c&&lj(a,c);L(this.I,-1)}};h.wd=function(a,b,c){var d=gj(a);if(-1!==d){if(a.Ha||65535<d)gc(this.D,ve(this.f,d),b);else{var e=this.f;e.la++;e.D.Ib(hc(e,d,4),b);e.la--}c&&lj(a,c);L(this.I,-1)}};
function kj(a,b,c){var d;c=(c?a.H:a.Aa).K;var e,f;if(void 0!==b){b=Xi(a,b);"%"==b.charAt(0)&&(e=!0,b=b.substr(1));d=b;var g,k;a:{c=a.D;var l;l=d.toUpperCase();for(k in c.Ja){var m=+k;if(c.Ja[m][4]==l){k=c.B+m;break a}}k=null}if(null==k&&d.match(/^[a-z_][a-z0-9_]*$/i))for(d=d.toUpperCase(),c=0;c<a.B.length;c++)if(l=a.B[c].da[d],null!=l){k=l.o;break}null!=k&&(g=W(k));if(d=g)return d;0<=b.indexOf("0x")?f=16:0<=b.indexOf("0o")?f=8:0<=b.indexOf(".")&&(f=10);c=Wi(a,b,void 0)}null!=c&&(d=W(c,e,f));return d}
function mj(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.Zc=Ui(a,b.dc=c[2]))}function lj(a,b){null!=a.K&&(a.K+=b||1)}function nj(a,b){return(b.Ha?"%":"")+O(a,b.K)}
function ej(a,b){a.F=a;a.fa=a.ya=536870912;a.S=null;a.M=[];b=Ui(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in Hb){var d;a:if(d=void 0,Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}0<=d&&(a.fa|=Hb[c],a.u(c+" messages enabled"))}}function bd(a,b,c){for(var d in Hb)if(b==Hb[d]){a.ka[d]=c;break}}
h.fd=function(a){a=a.toUpperCase();var b=oj[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function pj(a){return 6>a?"R"+a:6==a?"SP":"PC"}
h.gd=function(a){var b;if(0<=a)if(8>a)b=this.f.g[a];else if(16>a)b=this.f.oa[a-8];else if(20>a)b=this.f.X[a-16];else{var c=this.f,d=this.b;switch(a){case qj:b=kd(this.f);break;case rj:b=c.ab;break;case sj:b=c.R;break;case tj:b=c.ya&65280;break;case uj:b=ed(c);break;case vj:b=gd(c);break;case wj:b=hd(c);break;case xj:b=c.U;break;case yj:d&&(b=d.ra);break;case zj:d&&(b=d.rb);break;case Aj:d&&yc(d)&&(b=d.Ua)}}return b};
h.message=function(a,b){b&&(a+=" @"+nj(this,W(this.f.P&65535)));if(!this.S||a!=this.S)if(this.S=a,this.fa&1073741824)this.M.push(a);else{var c;if(this.fa&-2147483648&&this.f&&(c=this.f.A.T)||rb(this,!0))Bj(this),c&&(a+=" (cpu halted)");this.u(a);this.f&&(a=this.f,$d(a),a.mb=0,a.I&&L(a.I,void 0))}};
function dj(a){var b;if(!Je(a))a.i&&a.i.length&&a.u("instruction history buffer freed"),a.R=0,a.i=[];else if(!a.i||!a.i.length){a.i=Array(Cj);for(b=0;b<a.i.length;b++)a.i[b]=W();a.R=0;a.u("instruction history buffer allocated")}}function Dj(a,b,c){if(!Ej(a,c))return!1;$b(a.f,b);return!0}
function ac(a,b,c,d){if(!Ej(a))return!1;null===c&&(c=!a.sa||"tr"==a.sa);a.w=0;b||Je(a)&&ef(a,a.f.g[7],0);try{b=ae(a.f,b);var e=a.f.$b(b);0<e&&(bc(a.f,e),a.w+=e,cc(a.f,e,!0),dc(a.f,e),a.X++)}catch(f){"number"!=typeof f&&(a.w=0,ob(a.f,f.stack||f.message))}!1!==d&&(a.b&&a.b.stop(),L(a.I,-1));Sd(a,c||!1);return 0<a.w}function Bj(a,b){a.f&&J(a.f,b)}
function Sd(a,b){if(a.Ba){void 0===b&&(b=!0);var c;c=a.f;if(c=c.i&128?c.Yc|c.Xc<<8:0){var d=c>>8;a.u("trapped to "+O(a,c&255,1)+" ("+(0>d?zb[-d]:O(a,d))+")")}a.H=W(a.f.g[7]);b&&1!=a.J?Fj(a):Gj(a)}}function Ej(a,b){var c;(c=!a.f||!qb(a.f))||(c=a.f,c.A.ea?c=!0:(c.u(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.A.T?(b||a.u("cpu busy or unavailable, command ignored"),!1):!pb(a.f)}h.qa=function(a,b){return!b&&(this.reset(!0),a&&this.restore&&!this.restore(a))?!1:!0};
h.za=function(a,b){b&&this.u(a?"suspending":"shutting down");return a?this.save():!0};h.reset=function(a){dj(this);this.X=0;this.S=null;this.w=0;this.H=W(this.f.g[7]);this.A.T=!1;Hj(this);a||Sd(this)};h.save=function(){var a=new ie(this);a.set(0,hj(this.H));a.set(1,hj(this.O));a.set(2,[this.j,this.P,this.fa]);a.set(3,this.B);return a.data()};
h.restore=function(a){var b=0;void 0!==a[2]&&(this.H=ij(this,a[b++]),this.O=ij(this,a[b++]),this.j=a[b][0],"string"==typeof this.j&&(this.j=[this.j]),this.P=a[b][1],this.fa|=a[b][2]);a[3]&&(this.B=a[3]);return!0};h.start=function(a,b){this.J||this.u("running");this.A.T=!0;this.Ca=a;this.Da=b};
h.stop=function(a,b){if(this.A.T){this.A.T=!1;this.w=b-this.Da;if(!this.J){b="stopped";if(this.w){a-=this.Ca;var c=0<a?Math.round(1E3*this.w/a):0;b+=" (";Je(this)&&(b+=this.X+" instructions, ",this.X=0);b+=this.w+" cycles, "+a+" ms, "+c+" hz)"}else H(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.u(b)}Sd(this,!0);Td(this);Hj(this,this.f.g[7]);this.S=null}};function Je(a){return 1<a.g.length||!!a.Y}
function ef(a,b,c){var d=-1;c||(d=jc(a.f,b))||(a.f.P&65535)!=b||(b=ne(a.f,2));if(0<c&&(a.Y&&!--a.Y||Ij(a,b,1,a.g)))return!0;0<=c&&a.i.length&&(a.X++,0>d&&(d=jc(a.f,b)),65535!=(d&65535)&&(a.Ec(a.i[a.R],b),++a.R==a.i.length&&(a.R=0)));return!1}function kg(a){var b=a.f;if(b.A.T)throw he(b,a.f.P&65535),Bj(a),-1;return!1}function Jd(a,b,c){Ij(a,b,c||1,a.L)&&Bj(a,!0)}function Kd(a,b,c){Ij(a,b,c||1,a.G)&&Bj(a,!0)}
function cj(a){var b,c,d;a.g=["bp"];if(a.L)for(b=1;b<a.L.length;b++)c=a.L[b],d=gj(c),c.Ha?(c=a.D,Id(c.b[d>>>c.g],!1)):ye(a.f,!1);a.L=["br"];if(a.G)for(b=1;b<a.G.length;b++)c=a.G[b],d=gj(c),c.Ha?(c=a.D,Id(c.b[d>>>c.g],!0)):ye(a.f,!0);a.G=["bw"];a.la=0}
h.nb=function(a,b,c){var d=!0;c||Jj(this,a,b,!1,!0);if(a!=this.g){var e=gj(b);if(-1===e)this.u("invalid address: "+nj(this,b)),d=!1;else{var f=a==this.G;65535<e&&(b.Ha=!0);if(b.Ha){var g=this.D;g.b[e>>>g.g].nb(e&g.j,f)}else e=this.f,(f?e.Sb++:e.Rb++)||fe(e)}}d&&(a.push(b),c?b.Pa=!0:(Kj(this,a,a.length-1,"set"),dj(this)));return d};
function Jj(a,b,c,d,e){var f=!1;c=gj(c);for(var g=1;g<b.length;g++){var k=b[g];if(c==gj(k)&&(!d||k.Pa)){f=!0;k.Pa||e||Kj(a,b,g,"cleared");b.splice(g,1);b!=a.g&&(b=b==a.G,k.Ha?(d=a.D,Id(d.b[c>>>d.g],b)):ye(a.f,b));k.Pa||dj(a);break}}return f}function Lj(a,b){for(var c=1;c<b.length;c++)Kj(a,b,c);return b.length-1}function Kj(a,b,c,d){c=b[c];a.u(b[0]+" "+nj(a,c)+(d?" "+d:c.dc?' "'+c.dc+'"':""))}
function Hj(a,b){if(void 0!==b)Ij(a,b,1,a.g,!0),a.J=0;else for(b=1;b<a.g.length;b++){var c=a.g[b];if(c.Pa){if(!Jj(a,a.g,c,!0))break;b=0}}}
function Ij(a,b,c,d,e){var f=!1;if(!a.la++)for(var g=1;!f&&g<d.length;g++){var k=d[g];if(!e||k.Pa)for(var l=gj(k)&(d==a.g?65535:-1),m=0;m<c;m++)if(b+m==l){var n,f=!0;k.Pa&&(Jj(a,d,k,!0),e=!0);if(n=k.Zc){for(var f=!1,r=0;r<n.length;r++)if(!Mj(a,n[r],!0)){if(n[r].indexOf("if")){f=!0;break}for(var t=r+1;t<n.length&&n[t].indexOf("else");t++)r++;if(t==n.length){f=!0;break}}a.f.A.T||(f=!0)}if(f){e||Kj(a,d,g,"hit");break}}}a.la--;return f}
function Nj(a,b,c,d){var e=W(b.K),f=a.Na(b,2),g,k;for(k in a.Ea)if(g=a.Ea[k][f&k])break;g||(g=Oj);var l=g[0];0<=a.xa.indexOf(l)&&(g=Oj,l=g[0]);var m=k="",n=Pj[l],r=g.length-1;l||r||(k=O(a,f));for(l=1;l<=r;l++){var t=g[l];if(void 0!==t){var u;u=a;var E=t,t=b,z="",C=E&Qj;if(C==X)t=t.K+((f&255)<<24>>23)&65535,z=O(u,t);else if(C==Rj)t=t.K-((f&63)<<1)&65535,z=O(u,t);else if(C==Sj)z=O(u,f&7,1);else if(C==Tj)z=O(u,f&63,1);else if(C==Uj)z=O(u,f&255,1);else if(C=f&E,E&Vj&&(C>>=6,E>>=6),E&Y){var E=null,F=C&
Wj;switch(C&Xj){case 0:z=pj(F);break;case 8:z="@"+pj(F);E=Yj(u,u.f.g[F]);break;case 16:7>F?z="("+pj(F)+")+":(C=u.Na(t,2),z="#"+O(u,C,0,!0));break;case 24:7>F?z="@("+pj(F)+")+":(C=u.Na(t,2),z="@#"+O(u,C,0,!0),E=Yj(u,C));break;case 32:z="-("+pj(F)+")";break;case 40:z="@-("+pj(F)+")";break;case 48:C=u.Na(t,2);z=O(u,C,0,!0)+"("+pj(F)+")";7==F&&(z=O(u,C=C+t.K&65535),E=Yj(u,C));break;case 56:C=u.Na(t,2),z="@"+O(u,C)+"("+pj(F)+")",7==F&&(z="@"+O(u,C=C+t.K&65535),E=Yj(u,jc(u.f,C)))}E&&(z=[z,E])}u=z;if(!u||
!u.length){k="INVALID";break}"string"!=typeof u&&(m=u[1],u=u[0]);0<k.length&&(k+=",");k+=u||"???"}}f="";g=nj(a,e)+":";if(-1!==e.K&&-1!==b.K){do if(f+=" "+O(a,a.Na(e,2)),null==e.K)break;while(e.K!=b.K)}g+=ta(f,24);g+=ta(n,5);k&&(g+=" "+k);if(c||m)g=ta(g,60)+";"+(c||""),g=a.f.A.vb?g+("cycles="+Vd(a.f).toString()+" cs="+v(a.f.Nb)):g+(null!=d?"="+d.toString():""),m&&(";"!=g.slice(-1)&&(g+=" "),g+=m);return g}
function Yj(a,b){b=we(a.f,b)[0];b>=a.f.hb&&b<a.D.B&&(b=b-a.f.hb+a.D.B);var c=a.D;a=null;b>=c.B&&(b=c.Ja[b&Vc])&&(a=b[4]);return a}function Zj(a,b){switch(b){case "N":a=me(a.f);break;case "Z":a=le(a.f);break;case "V":a=ke(a.f);break;case "C":a=je(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}
function Z(a,b){var c="",d=a.f;if(8>b)c=pj(b),c+="="+O(a,d.g[b]);else if(13>b)c="A"+(b-8)+"="+O(a,d.oa[b-8]);else if(16<=b&&20>b)c="S"+(b-16)+"="+O(a,d.X[b-16]);else switch(b){case qj:c="PS="+O(a,kd(d));break;case rj:c="PI="+O(a,d.ab);break;case sj:c="ER="+O(a,d.R);break;case tj:c="SL="+O(a,d.ya&65280);break;case uj:c="M0="+O(a,ed(d));break;case vj:c="M1="+O(a,gd(d));break;case wj:c="M2="+O(a,hd(d));break;case xj:c="M3="+O(a,d.U);break;case yj:a.b&&(c="AR="+O(a,a.b.ra,3));break;case zj:a.b&&(c="DR="+
O(a,a.b.rb));break;case Aj:a.b&&yc(a.b)&&(c="SR="+O(a,a.b.Ua,3))}c&&(c+=" ");return c}function ak(a,b){var c,d="";for(c=0;6>c;c++)d+=Z(a,c);d=d+"\n"+(Z(a,6)+Z(a,7));d+=Z(a,qj)+Z(a,rj)+Z(a,tj);d+=Zj(a,"T")+Zj(a,"N")+Zj(a,"Z")+Zj(a,"V")+Zj(a,"C");b&&(b=d,c=""+(Z(a,uj)+Z(a,vj)),c+=Z(a,wj)+Z(a,xj)+Z(a,sj),c=c+"\n"+(Z(a,Aj)+Z(a,yj)+Z(a,zj)),d=b+("\n"+c));return d}h.bd=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function kh(a,b,c,d,e){var f=[],g;for(g in e){var k=e[g];"number"==typeof k&&(e[g]=k={o:k});var l=k.o,m=k.a;if(void 0!==l){var n=f,l=[l>>>0,g],r=xa(n,l,a.bd);0>r&&n.splice(-(r+1),0,l)}m&&(k.a=m.replace(/''/g,'"'))}a.B.push({uh:b,K:c,Od:d,da:e,$c:f})}function bk(a,b,c){var d=[],e=gj(b)>>>0;for(b=0;b<a.B.length;b++){var f=a.B[b],g=f.K>>>0,k=f.Od;if(e>=g&&e<g+k){e=xa(f.$c,[e-g],a.bd);0<=e?ck(a,b,e,d):c&&(e=~e,ck(a,b,e-1,d),ck(a,b,e,d));break}}return d}
function ck(a,b,c,d){var e={},f=a.B[b].$c,g=0,k=null;0<=c&&c<f.length&&(g=f[c][0],k=f[c][1]);k&&(e=a.B[b].da[k],k="."==k.charAt(0)?null:e.l||k);d.push(k);d.push(g);d.push(e.a);d.push(e.c)}function dk(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return aj(a)||a.u("no variables"),!0;if(!c[2])return aj(a,c[1]);if(!c[3])return delete a.U[c[1]],!0;b=Wi(a,c[3]);return void 0!==b?(a.U[c[1]]=b,!0):!1}a.u("invalid assignment:"+b);return!1}
function ek(a,b,c){var d=null;if(b=kj(a,b,!0)){var e=bk(a,b,!0);if(e.length){var f,g;e[0]&&(g="",(f=b.K-e[1])&&(g=" + "+w(f)),f=e[0]+" ("+O(a,e[1])+")"+g,c&&a.u(f),d=f);4<e.length&&e[4]&&(g="",(f=e[5]-b.K)&&(g=" - "+w(f)),f=e[4]+" ("+O(a,e[5])+")"+g,c&&a.u(f),d||(d=f))}else c&&a.u("no symbols")}return d}
function Fj(a,b){var c;if(b&&"?"==b[1])a.u("register commands:"),a.u("\tr\tdump registers"),a.u("\trm\tdump misc registers"),a.u("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.u("missing value for "+b[1]);return}g=Wi(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":he(e,
g);a.H=W(e.g[7]);break;case "N":e.J=g?32768:0;break;case "Z":e.L=g?0:1;break;case "V":e.H=g?32768:0;break;case "C":e.G=g?65536:0;break;case "PS":ld(e,g);break;case "PI":jd(e,g);break;case "ER":e.R=g;d=!0;break;case "SL":e.ya=g|255;break;case "M0":fd(e,g);d=!0;break;case "M3":id(e,g);d=!0;break;case "AR":a.b&&(d=a.b,kc(d,d.ra=g));d=!0;break;case "DR":a.b&&(d=a.b,fc(d,d.rb=g));d=!0;break;case "SR":if(a.b&&yc(a.b)){lc(a.b,g);d=!0;break}default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=
g&65535;break}a.u("unknown register: "+f);return}L(a.I);a.u("updated registers:")}}a.u(ak(a,d));c&&(a.H=W(e.g[7]),Gj(a,nj(a,a.H)))}}function fk(a,b){b=ua(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.u(c[2]):$i(a,null,c[2].charCodeAt(0)):Wi(a,b,!0)}
function gk(a,b,c){if("?"==c)a.u("trace commands:"),a.u("\tt  [#]\ttrace # instructions"),a.u("\ttr [#]\ttrace # instructions with register updates"),a.u("\ttc [#]\ttrace # cycles"),a.u("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Yi(a,c,null,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.sa=b;Oa(c,function(){return sb(a,!0)&&ac(a,e,d,!1)},function(){a.b&&a.b.stop();L(a.I,-1);sb(a,!1)})}}
function Gj(a,b,c,d){if(b=kj(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Yi(a,c.substr(1)),null!=c&&(d=c);else{d=kj(a,c,!0);if(!d||d.K<b.K)return;e=d.K-b.K;if(256<e){a.u("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=rb(a,!1)||a.J?a.w:null;var g=null!=f?"cycles":null,k=bk(a,b),l=b.K;if(k[0]&&d&&(!c&&d||0>k[0].indexOf("+"))){var m=k[0]+":";k[2]&&(m+=" "+k[2]);a.u(m)}k[3]&&(g=k[3],f=null);f=Nj(a,b,g,f);a.u(f);a.H=b;e-=b.K-l;c++}}}
function Mj(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.u(">> "+b):(a.P&&(a.u("ended assemble at "+nj(a,a.O)),a.H=a.O,a.P=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.S=null;if(qb(a)&&0<b.length){a.P&&(b="a "+nj(a,a.O)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var k=g[0],l=k.charAt(0),m=1;m<k.length;m++){var n=k.charAt(m);if("?"==l||"r"==l||"a">n||"z"<n){g[0]=k.substr(m);g.unshift(k.substr(0,m));break}}switch(g[0].charAt(0)){case "a":var r=
kj(a,g[1],!0);if(r)if(a.O=r,void 0===g[2])a.u("begin assemble at "+nj(a,r)),a.P=!0,L(a.I);else{var t;a.u("not supported yet");t=[];if(t.length){for(var u=0;u<t.length;u++)a.Mc(r,t[u],1);a.u(Nj(a,a.O))}}break;case "b":a:{var E=g[0],z=g[1],C=b;if("?"==z)a.u("breakpoint commands:"),a.u("\tbp [#]\tset exec breakpoint at addr #"),a.u("\tbr [#]\tset read breakpoint at addr #"),a.u("\tbw [#]\tset write breakpoint at addr #"),a.u("\tbc [#]\tclear breakpoint at addr #"),a.u("\tbl\tlist all breakpoints"),a.u("\tbn [#]\tbreak after # instruction(s)");
else{var F=E.charAt(1);if("l"==F){var bb;bb=0+Lj(a,a.g);bb+=Lj(a,a.L);(bb+=Lj(a,a.G))||a.u("no breakpoints")}else if("n"==F)a.Y=Yi(a,z),a.u("break after "+a.Y+" instruction(s)");else if(void 0===z)a.u("missing breakpoint address");else{var V=W();if("*"!=z&&(V=kj(a,z,!0),!V))break a;"c"==F?null==V.K?(cj(a),a.u("all breakpoints cleared")):Jj(a,a.g,V)||Jj(a,a.L,V)||Jj(a,a.G,V)||a.u("breakpoint missing: "+nj(a,V)):null!=V.K&&(mj(a,V,C),"p"==F?a.nb(a.g,V):"r"==F?a.nb(a.L,V):"w"==F?a.nb(a.G,V):a.u("unknown breakpoint command: "+
F))}}}break;case "c":a.Oa&&(a.Oa.value="");break;case "d":a:{var Bb,Ra=g[0],Fa=g[1],Sa=g[2],Gk=g[3];if("?"==Fa){var Cb="";for(Bb in Hb)a.ka[Bb]&&(Cb&&(Cb+=","),Cb+=Bb);Cb+=",state,symbols";a.u("dump memory commands:");a.u("\tda [a]        dump info for address a");a.u("\tdb [a] [n]    dump n bytes at address a");a.u("\tdw [a] [n]    dump n words at address a");a.u("\tdd [a] [n]    dump n dwords at address a");a.u("\tds [a] [n]    dump n words at address a as JSON");a.u("\tdh [p] [n]    dump n instructions from history position p");
Cb.length&&a.u("dump extension commands:\n\t"+Cb)}else if("state"==Fa){var Ke=hk(a.I,!0);"console"==Sa?console.log(Ke):(a.Oa&&(a.Oa.value=""),Ke&&a.u(Ke))}else if("symbols"==Fa)for(var Le=0;Le<a.B.length;Le++){var Me=a.B[Le],Db;for(Db in Me.da)if("."!=Db.charAt(0)){var bi=Me.da[Db].o;if(void 0!==bi){var ci=Me.da[Db].l;ci&&(Db=ci);a.u(O(a,bi)+" "+Db)}}}else{if("d"==Ra){for(Bb in Hb)if(g[1]==Bb){var di=a.ka[Bb];di?(g.shift(),g.shift(),di(g)):a.u("no dump registered for "+Fa);break a}Fa||(Ra=a.Fa||"dw")}else a.Fa=
Ra;if("dh"==Ra){var ei=Fa,fi=Sa,gi="",hi=0,va=a.R,Ga=a.i;if(Ga.length){var qa=+ei||a.oa,nc=+fi||10;isNaN(qa)?qa=nc:gi="more ";qa>Ga.length&&(a.u("note: only "+Ga.length+" available"),qa=Ga.length);va-=qa;0>va&&(null==Ga[Ga.length-1].K?(qa=va+qa,va=0):va+=Ga.length);var Ne=[];"call"==fi&&(nc=1E5,Ne=["CALL"]);for(void 0!==ei&&a.u(qa+" instructions earlier:");0<nc&&va!=a.R;){var ii=Ga[va++];if(null==ii.K)break;var oc=W(ii.K),Hk=qa--,ji=Nj(a,oc,"history",Hk);(!Ne.length||0<=ji.indexOf(Ne[0]))&&a.u(ji);
oc.zc&&(va+=oc.zc,nc-=oc.zc,qa-=oc.zc);va>=Ga.length&&(va=0);a.oa=qa;hi++;nc--}}hi||(a.u("no "+gi+"history available"),a.oa=void 0)}else{var fa=kj(a,Fa);if(fa)if("da"==Ra){var Oe=fa.Ha||65535<fa.K,K=we(a.f,fa.K||0,Oe);a.u(ta("",Oe?12:19)+ma(fa.K,Oe?22:17,3)+"  "+q(fa.K,8));6>K.length?(2<K.length&&(a.u("    OFFSET:             "+ma(K[3],13,3)+"  "+q(K[3],8)),a.u("UNIMAP["+na(K[1])+"]: "+ma(K[2],22,3)+"  "+q(K[2],8))),a.u("  PHYSICAL: "+ma(K[0],22,3)+"  "+q(K[0],8))):(a.u("    OFFSET:             "+
ma(K[1],13,3)+"  "+q(K[1],8)),a.u("+   "+ik[K[2]]+"PAR"+K[3]+": "+ma(K[4],22,3)+"  "+q(K[4],8)),a.u("&  MMUMASK: "+ma(K[5],22,3)+"  "+q(K[5],8)),a.u("= PHYSICAL: "+ma(K[0],22,3)+"  "+q(K[0],8)))}else{var db=0,Pe="ds"==Ra;if(Sa){if("l"==Sa.charAt(0))Sa=Sa.substr(1)||Gk,db=Yi(a,Sa);else{var ki=kj(a,Sa);ki&&(db=ki.K-fa.K)}0>db&&(db=0);65536<db&&(db=65536)}var Jk=a.ua;fa.ua&&(a.ua=fa.ua);for(var eb="dd"==Ra?4:"db"==Ra?1:2,sd=eb*db||128,Qe=Pe?16:a.ua,Kk=(sd+Qe-1)/Qe|0||1,fb="";Kk--&&0<sd;){for(var gb=
"",Re="",Fa=nj(a,fa),td=Qe,pc=0,qc=0;0<td&&0<sd;){var Eb=1,ud=1==eb?a.Lc(fa,Eb):a.Na(fa,Eb=2),pc=pc|ud<<(qc<<3),qc=qc+Eb;qc==eb&&(Pe?(gb&&(gb+=","),gb+="0x"+v(pc,2*eb)):(gb+=O(a,pc,eb),gb+=1==eb?9==td?"-":" ":"  "),pc=qc=0);td-=Eb;for(sd-=Eb;1==eb&&Eb--;)var Se=ud&255,Re=Re+(32<=Se&&128>Se?String.fromCharCode(Se):"."),ud=ud>>8}fb&&(fb+="\n");fb=Pe?fb+(gb+","):fb+(Fa+":  "+gb+(0==td?" "+Re:""))}fb&&a.u(fb);a.Aa=fa;a.ua=Jk}}}}break;case "e":if("else"==g[0])break;var Fb,Te,Ue,Ve,We=g[0],Xe=g[1];"eb"==
We?(Fb=1,Te=255,Ue=a.Lc,Ve=a.Mc):"e"==We||"ew"==We?(Fb=2,Te=65535,Ue=a.Na,Ve=a.wd):Xe=null;if(null==Xe)a.u("edit memory commands:"),a.u("\teb [a] [...]  edit bytes at address a"),a.u("\tew [a] [...]  edit words at address a");else{var vd=kj(a,Xe);if(vd)for(var wd=2;wd<g.length;wd++){var rc=Wi(a,g[wd]);if(void 0===rc){a.u("unrecognized value: "+g[wd]);break}rc&~Te&&a.u("warning: "+v(rc)+" exceeds "+Fb+"-byte value");a.u("changing "+nj(a,vd)+(H(a,16)?"":" from "+O(a,Ue.call(a,vd),Fb))+" to "+O(a,rc,
Fb));Ve.call(a,vd,rc,Fb)}}break;case "g":a:{var li=g[1],Lk=b;if(void 0!==li){var Ye=kj(a,li,!0);if(!Ye)break a;mj(a,Ye,Lk);a.nb(a.g,Ye,!0)}Dj(a,!0,c)}break;case "h":a.A.T?(c||a.u("halting"),Bj(a)):rb(a,!0)||c||a.u("already halted");break;case "i":if("if"==g[0]){var Ze;var sc=b.substr(2),sc=ua(sc);Wi(a,sc)?(c||a.u("true: "+sc),Ze=!0):(c||a.u("false: "+sc),Ze=!1);Ze||(d=!1);break}f=!0;break;case "k":var Mk=g[0];if("?"==g[1])a.u("stack trace commands:"),a.u("\tk\tshow frame addresses"),a.u("\tks\tshow symbol information");
else{var $e=0,af=W(),tc=W(a.f.g[6]);for(a.u("stack trace for "+nj(a,tc));10>$e;){for(var hb=null,Nk=256;65536>tc.K>>>0;){af.K=a.Na(tc,2);if(null==tc.K||!Nk--)break;if(!(af.K&1)){for(var Ok=a,xd=af,mi=null,uc=xd.K,ni=uc,bf=1;6>=bf&&uc;bf++){if(2<bf){xd.K=uc;var yd=Nj(Ok,xd);if(0<=yd.indexOf("JSR")){var oi=yd.indexOf(" ");if(uc+(yd.indexOf(" ",oi+1)-oi-1)/2==ni){mi=yd;break}}}uc-=2}xd.K=ni;if(hb=mi)break}}if(!hb||null==hb)break;var pi=null;if("ks"==Mk){var qi=hb.match(/[0-9A-F]+$/);qi&&(pi=ek(a,qi[0]))}hb=
ta(hb,50)+"  ;"+(pi||"stack="+nj(a,tc));a.u(hb);$e++}$e||a.u("no return addresses found")}break;case "l":if("ln"==g[0]){ek(a,g[1],!0);break}f=!0;break;case "m":a:{var Ha,Ia=null,M=g[1];"?"==M&&(M=void 0);if(void 0!==M){var Ta=0;if("all"==M)Ta=1879046143,M=null;else if("on"==M)Ia=!0,M=null;else if("off"==M)Ia=!1,M=null;else{"keys"==M&&(M="key");"kbd"==M&&(M="keyboard");for(Ha in Hb)if(M==Ha){Ta=Hb[Ha];Ia=!!(a.fa&Ta);break}if(!Ta){a.u("unknown message category: "+M);break a}}if(Ta)if("on"==g[2])a.fa|=
Ta,Ia=!0;else if("off"==g[2]&&(a.fa&=~Ta,Ia=!1,1073741824==Ta)){for(var ri=1E3<=a.M.length?a.M.length-1E3:0;ri<a.M.length;)a.u(a.M[ri++]);a.M=[]}}var Pk=0,vc="";for(Ha in Hb)if(!M||M==Ha){var Qk=!!(a.fa&Hb[Ha]);if(null===Ia||Ia==Qk)vc&&(vc+=","),++Pk%10||(vc+="\n\t"),"key"==Ha&&(Ha="keys"),vc+=Ha}void 0===M&&a.u("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.u((null!==Ia?Ia?"messages on:  ":"messages off: ":"message categories:\n\t")+(vc||"none"));dj(a)}break;case "p":if("print"==
g[0]){fk(a,b.substr(5));break}var Rk=g[0];if("?"==g[1])a.u("step commands:"),a.u("\tp\tstep over instruction"),a.u("\tpr\tstep over instruction with register update");else{var si="pr"==Rk?1:0,ti=1+si;if(a.J)a.u("step in progress");else{var zd=W(a.f.g[7]),Gb=a.Na(zd);3==Gb||4==Gb||34816==(Gb&65280)||32256==(Gb&65024)||35072==(Gb&65280)?(a.J=ti,lj(zd,2)):2048==(Gb&65024)&&(Nj(a,zd),a.J=ti);a.J?(a.nb(a.g,zd,!0),Dj(a)||(a.I&&Zd(a.I),a.J=0)):gk(a,si?"tr":"t")}}break;case "r":if("reset"==b){a.I&&a.I.reset();
break}Fj(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var wc=+g[2];if(8==wc||10==wc||16==wc)a.ua=wc;else{a.u("invalid base: "+wc);break}}a.u("default base: "+a.ua);break;case "cs":var xc;void 0!==g[3]&&(xc=+g[3]);switch(g[2]){case "int":a.f.xb=xc;break;case "start":a.f.Ob=xc;break;case "stop":a.f.zb=xc;break;default:a.u("unknown cs option");break a}void 0!==xc&&Rd(a.f);a.u("checksums "+(a.f.A.vb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(Wd(a.f,+g[2])||a.u("warning: using 1x multiplier, previous target not reached"));
a.u("target speed: "+(a.f.gb.toFixed(2)+"Mhz")+" ("+a.f.Ya+"x)");break;default:if(g[1]){a.u("unknown option: "+g[1]);break}case "?":a.u("debugger options:"),a.u("\tbase #\t\tset default base to #"),a.u("\tcs int #\tset checksum cycle interval to #"),a.u("\tcs start #\tset checksum cycle start count to #"),a.u("\tcs stop #\tset checksum cycle stop count to #"),a.u("\tsp #\t\tset speed multiplier to #")}break;case "t":gk(a,g[0],g[1]);break;case "u":Gj(a,g[1],g[2],8);break;case "v":if("var"==g[0]){dk(a,
b.substr(3))||(d=!1);break}if("ver"==g[0]){a.u("PDPjs version 1.31.0 ("+a.f.xa+",RELEASE"+(yb?",TYPEDARRAYS":",LONGARRAYS")+")");a.u(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){fk(a,b.substr(1));break}var cf="commands:",df;for(df in jk)cf+="\n"+ta(df,9)+jk[df];Je(a)||(cf+="\nnote: history disabled if no exec breakpoints");a.u(cf);break;default:f=!0}f&&(a.u("unknown command: "+b),d=!1)}}catch(vi){a.u("debugger error: "+(vi.stack||vi.message)),d=!1}return d}
function Ud(a,b,c){b=Ui(a,b,c);for(var d in b)if(!Mj(a,b[+d]))return!1;return!0}
var jk={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Pj=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
qj=20,rj=21,sj=22,tj=23,uj=24,vj=25,wj=26,xj=27,yj=28,zj=29,Aj=30,oj={SP:6,PC:7,PS:qj,PI:rj,ER:sj,SL:tj,M0:uj,M1:vj,M2:wj,M3:xj,AR:yj,DR:zj,SR:Aj},ik="KI KD SI SD ?? ?? UI UD".split(" "),Wj=7,Xj=56,Y=Xj|Wj,Vj=4032,X=4096,Rj=8192,Sj=12288,Tj=24576,Uj=32768,Qj=61440,fj={61440:{4096:[62,Vj,Y],8192:[47,Vj,Y],12288:[18,Vj,Y],16384:[14,Vj,Y],20480:[16,Vj,Y],24576:[3,Vj,Y],36864:[63,Vj,Y],40960:[48,Vj,Y],45056:[19,Vj,Y],49152:[15,Vj,Y],53248:[17,Vj,Y],57344:[94,Vj,Y]},65024:{2048:[57,448,Y],28672:[100,Y,
448],29184:[101,Y,448],29696:[102,Y,448],30208:[103,Y,448],30720:[104,448,Y],32256:[105,448,Rj]},65280:{256:[27,X],512:[24,X],768:[10,X],1024:[11,X],1280:[22,X],1536:[12,X],1792:[20,X],32768:[25,X],33024:[23,X],33280:[13,X],33536:[21,X],33792:[28,X],34048:[29,X],34304:[8,X],34560:[9,X],34816:[106,Uj],35072:[107,Uj]},65472:{64:[56,Y],192:[95,Y],2560:[39,Y],2624:[49,Y],2688:[53,Y],2752:[51,Y],2816:[67,Y],2880:[1,Y],2944:[77,Y],3008:[97,Y],3072:[73,Y],3136:[71,Y],3200:[6,Y],3264:[4,Y],3328:[58,Tj],3392:[60,
Y],3456:[65,Y],3520:[96,Y],35328:[40,Y],35392:[50,Y],35456:[54,Y],35520:[52,Y],35584:[68,Y],35648:[2,Y],35712:[78,Y],35776:[98,Y],35840:[74,Y],35904:[72,Y],35968:[7,Y],36032:[5,Y],36096:[66,Y],36160:[59,Y],36224:[64,Y],36288:[61,Y]},65528:{128:[76,Wj],152:[108,Sj]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],
179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Oj=[0],jj=[58,60,65,96,108,110,100,101,102,103,104,105,59,64],Cj=1E3;Ua(function(){for(var a=D(document,"pdp11","debugger"),b=0;b<a.length;b++){var c=a[b],d=B(c),d=new bj(d);nb(d,c)}});
function kk(a,b,c){A.call(this,"Computer",a,0,33554432);this.A.ea=!1;this.O=null;lk(this,b);this.L=Pd(this,"autoPower",a);this.j=0;this.U=a.busWidth||a.buswidth;this.b=mk;this.H=null;this.R=this.w=this.M=this.B=this.S=!1;this.v=null;this.V=Pd(this,"url")||"";(Math.random()+.1).toString(36);this.g=nk(this);if(this.f=mb("CPU",this.id)){this.F=mb("Debugger",this.id);this.D=new Bc({id:this.kb+".bus",busWidth:this.U},this.f,this.F);var d,e=kb(this.id);if((this.i=mb("Panel",this.id))&&this.i.Oa)for(b=0;b<
e.length;b++)d=e[b],d.N=this.i.N,d.u=this.i.u,d.Oa=this.i.Oa;this.u("PDPjs v1.31.0\nCopyright \u00a9 2012-2016 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.u("Portions adapted from the PDP-11/70 Emulator v1.4 by Paul Nankervis <paulnank@hotmail.com>");for(b=0;b<e.length;b++)d=e[b],d.pa&&d.pa(this,this.D,this.f,this.F);b=null;d=a.resume;void 0!==d&&(1<d.length?b=this.G=d:this.b=parseInt(d,10));var f;if(a=Pd(this,"state")||(f=!0,a.state))b=
this.P=a,f||(this.B=!0,this.b=mk),this.b&&(this.J=new ie(this,"1.31.0"),ok(this.J)?b=null:delete this.J);!b&&this.b&&(b=pk(this))&&(this.B=!0);if(b){var g=this;Aa(b,null,!0,function(a,b,c){c?(g.G=null,g.B=!1,g.N("Unable to load machine state from server (error "+c+(b?": "+ua(b):"")+")")):(g.H=b,g.S=!0);G(g)})}else G(this);this.C.power||(this.L=!0);!c&&this.L&&qk(this,this.Qb)}else y("Unable to find CPU component")}p(kk,A);
function lk(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){y(d.message+" ("+c+")")}}a.O=b}function Pd(a,b,c){var d=b.toLowerCase(),d=ub[b]||ub[d];void 0===d&&a.O&&(d=a.O[b]);void 0===d&&c&&(d=c[b]);void 0===d&&"object"==typeof resources&&resources[b]&&(d=b);return d}function qk(a,b,c){for(var d=kb(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!qb(f)){qb(f,function(){qk(a,b,c)});return}}b.call(a,c)}
function rk(a,b){var c=new ie(a,"1.31.0",sk);if(ok(c)&&tk(c)){var d=c.get(uk),e=b?b.get(uk):"unknown";d!=e&&(a.N("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}h=kk.prototype;
h.Qb=function(a){void 0===a&&(a=this.b||(this.H?vk:mk));if(!this.j){this.j++;var b=!1,c=!1;this.M=!1;var d=this.J||new ie(this,"1.31.0");if(a==wk)b=!0;else if(a>mk){if(ok(d,this.H)){this.v=new ie(this,"1.31.0",xk);ok(this.v)&&(yk(this,d),a=zk,Ak(this.v));this.v.set(uk,za());Bk(this.v);var e=this.b&&!this.B;if(a==vk||Da("Click OK to restore the previous PDPjs machine state, or CANCEL to reset the machine.")){if(c=tk(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?ok(d,g):("error"==f&&"no machine state"!=
g?(this.N("Error: "+g),"unable to verify user"==g&&(La(Ck,""),this.g=null)):this.u(f+": "+g),Ak(d),ok(d)?(c=tk(d),e=!0):c=!1))}e&&rk(this,c?d:null)}else a==zk&&d.clear()}else rk(this);delete this.H;delete this.J}e=kb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=Dk(this,g,d,b,c));b=[d,a,c];a!=wk?qk(this,this.cd,b):this.cd(b)}};
function Dk(a,b,c,d,e){if(!b.A.ea){b.A.ea=!0;if(b.qa){var f=null;e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,"."))));"string"===typeof f&&(f=null);!b.qa(f,d)&&f&&(y("Unable to restore state for "+b.type),a.P&&!a.S?(c.clear(),a.b=mk,window&&window.location.reload()):a.M=!0,b.qa(null),e=!1)}if(!d&&b.Qc)for(a=b.Qc.split("|"),c=0;c<a.length;c++)b.status(a[c])}return e}
h.cd=function(a){var b=a[0],c=0>a[1];a=a[2];this.R=!0;this.A.ea=!0;var d=this.C.power;d&&(d.textContent="Shutdown");this.f&&(Dk(this,this.f,b,c,a),L(this),this.f.Ra());this.M&&(yk(this,b),b.clear());!c&&this.v&&(this.v.clear(),delete this.v);this.j=0};
function yk(a,b){if(Da("There may be a problem with your PDPjs machine.\n\nTo help us diagnose it, click OK to send this PDPjs machine state to http://www.pcjs.org.")){var c=a.g||"";b=b.toString();var d={app:"PDPjs",ver:"1.31.0"};d.url=a.V;d.user=c;d.type="bug";d.data=b;Aa("http://www.pcjs.org/api/v1/report",d,!0)}}
function hk(a,b,c){var d,e="none";if(a.j)return null;a.j--;var f=new ie(a,"1.31.0"),g=new ie(a,"1.31.0",sk),k=za();g.set(uk,k);f.set(uk,k);f.set(Ek,"1.31.0");f.set(Fk,window?window.location.href:null);f.set(Ik,window?window.navigator.userAgent:"");a.f&&a.f.za&&(c&&J(a.f),d=a.f.za(b,c),"object"===typeof d&&f.set(a.f.id,d),c&&(a.f.A.ea=!1,!1===d&&(e=null)));for(var k=kb(a.id),l=0;l<k.length;l++){var m=k[l];m.A.ea&&(m.za&&(d=m.za(b,c),"object"===typeof d&&f.set(m.id,d)),c&&(m.A.ea=!1,!1===d&&(e=null)))}e&&
(c?(k=d=!1,b?(a.g&&Sk(a,a.g,f.toString()),Bk(g)&&Bk(f)||(e=null,d=k=!0)):a.b&&(d=!0,k=a.b==Tk),d&&f.clear(k)):e=f.toString());c&&(a.A.ea=!1,b=a.C.power)&&(b.textContent="Power");a.j=0;return e}h.reset=function(){this.D&&this.D.reset&&(I(this,"Resetting "+this.D.type),this.D.reset());this.f&&this.f.reset&&(I(this,"Resetting "+this.f.type),this.f.reset());for(var a=kb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.D&&c!==this.f&&c.reset&&(I(this,"Resetting "+c.type),c.reset())}L(this,-1)};
h.start=function(a,b){for(var c=kb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}L(this,-1)};h.stop=function(a,b){for(var c=kb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}L(this,-1)};
function L(a,b){if(a.f){var c=a.f,d=b||0,e=c.C.speed;e&&(0>=d||30<=(c.nc+=d))&&(e.textContent=c.A.T?c.lb.toFixed(2)+"Mhz":"Stopped",c.nc=0)}if(a.i&&(a=a.i,b=b||0,a.v)){c=a.f.A.T;d=!!(a.f.i&8);if(0>=b||60<=(a.j+=b)){for(e=0;e<a.f.g.length;e++)Ub(a,"R"+e,a.f.g[e]);e=kd(a.f);Ub(a,"PS",e);Ub(a,"NF",e&8?1:0,1);Ub(a,"ZF",e&4?1:0,1);Ub(a,"VF",e&2?1:0,1);Ub(a,"CF",e&1?1:0,1);a.j=0}kc(a,0<b&&c&&!d?a.f.ib:a.ra);fc(a,a.rb);b=a.f;b=b.Va?b.U&16?1:2:4;mc(a,"B22",b&1);mc(a,"B18",b&2);mc(a,"B16",b&4)}}
h.na=function(a,b,c){var d=this;switch(b){case "power":return this.C[b]=c,c.onclick=function(){d.j||(d.A.ea?hk(d,!1,!0):qk(d,d.Qb))},!0;case "reset":return this.C[b]=c,c.onclick=function(){if(d.A.ea&&!d.j)if(d.b&&!d.G){var a=Da("Click OK to save changes to this PDPjs machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");hk(d,a,!0);!a&&d.P?window&&window.location.reload():(a||(d.w=!0),d.Qb(mk),d.w=!1)}else d.reset(),d.f&&d.f.Ra()},!0;case "save":if(pa(Ca(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.C[b]=c,c.onclick=function(){var a=nk(d,!0);if(a){var b=!!(d.b&&!d.G||d.P),c=hk(d,b);b?Sk(d,a,c):d.N("Resume disabled, machine state not saved")}},!0}return!1};
function nk(a,b){var c=a.g;c||((c=Ka(Ck),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Uk(a,c))||a.N("The user ID is invalid.")):b&&a.N("Browser local storage is not available"));return c}
function Uk(a,b){a.g=null;b=Aa(Ca()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(La(Ck,b.data),a.g=b.data)}catch(d){y(d.message+" ("+c+")")}return a.g}function pk(a){var b=null;a.g&&(b=Ca()+"/api/v1/user?req=load&user="+a.g+"&state="+Vk(a,"1.31.0"));return b}
function Sk(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Vk(a,"1.31.0");d.data=c;b=Aa(Ca()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.N("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.N(c),La(Ck,""),a.g=null)}}
function Bh(a){var b;a=kb(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Zd(a,b){if(a.Oa){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.Oa.focus();!b&&window&&window.scrollTo(c,d)}}var xk="failsafe",sk="validate",uk="timestamp",Ek="version",Fk="url",Ik="browser",Ck="user",wk=-1,mk=0,vk=1,zk=2,Tk=3;
Ua(function(){for(var a=D(document,"pdp11-machine"),b=0;b<a.length;b++)for(var c=a[b],d=B(c),c=D(c,"pdp11","computer"),e=0;e<c.length;e++){var f=c[e],g=B(f),g=new kk(g,d,!0);nb(g,f);g.L&&qk(g,g.Qb)}});Va.show.push(function(){for(var a=D(document,"pdp11","computer"),b=0;b<a.length;b++){var c=B(a[b]);(c=mb("Computer",c.id))&&c.R&&!c.A.ea&&c.Qb(wk)}});
Va.exit.push(function(){for(var a=D(document,"pdp11","computer"),b=0;b<a.length;b++){var c=B(a[b]);(c=mb("Computer",c.id))&&c.A.ea&&hk(c,!(!c.b||c.G),!0)}});function ie(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.C=!1;this.key=Vk(a,b,c);Ak(this,a.Dd)}h=ie.prototype;h.set=function(a,b){try{this.f[a]=b}catch(c){}};h.get=function(a){return this.f[a]||null};h.data=function(){return this.f};function ok(a,b){return b?(a.b=b,a.g=!0,a.C=!1,!0):a.g?!0:Ea()&&(b=Ka(a.key))?(a.b=b,a.g=!0):!1}
function tk(a){var b=!0;if(!a.C)try{a.f=JSON.parse(a.b),a.C=!0}catch(c){y(c.message||c),b=!1}return b}function Bk(a){var b=!0;if(Ea()){var c=JSON.stringify(a.f);La(a.key,c)||(y("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}h.toString=function(){return this.f?JSON.stringify(this.f):this.b};function Ak(a,b){a.b="";a.f={};a.g=a.C=!1;b&&a.set("parms",b)}
h.clear=function(a){Ak(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Vk(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Wk=0;
function Xk(a,b,c,d,e,f){e("Loading "+a+"...");Aa(a,null,!0,function(g,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),f(k,null)):Yk(k,a,b,c,d,e,f)})}
function Yk(a,b,c,d,e,f,g){function k(a,f){if(f)g(f,null);else{c&&(ib(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),
a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pdp11$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(n){f=null,a=n.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);g(a,f)}}a?e?Zk(a,f,k):k(a,null):g("no data"+(b?" for file: "+b:""),null)}
function Zk(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Aa(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,n=/( [a-z]+=)(['"])(.*?)\2/g;m=n.exec(f);)l=0>l.indexOf(m[1])?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],g);Zk(a,b,c)}})}else c(a,null)}
function $k(a,b,c,d){function e(a){if(void 0===k){var b=g&&D(g,"machine-warning");k=b&&b[0]||g}k&&(k.innerHTML=ra(a))}function f(a){e("Error: "+a);l&&(--Wk||Ya(!0));l=!1}var g,k,l=!0;Wk++;jb[a]={};try{if(g=document.getElementById(a)){var m;if("object"==typeof resources&&(m=resources.css)){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";r.styleSheet?r.styleSheet.cssText=m:r.appendChild(document.createTextNode(m));n.appendChild(r)}c||
(c="/versions/pdpjs/1.31.0/components.xsl");m=function(d,k){k?Xk(c,null,null,!1,e,function(d,l){l?(ib(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(l=k.transformNode(l))?(g.outerHTML=l,--Wk||Ya(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(l),(l=d.transformToFragment(k,document))?g.parentNode?(g.parentNode.replaceChild(l,g),--Wk||Ya(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?Xk(b,a,d,!0,e,m):Yk(b,null,a,d,!1,e,m)}else f("missing machine element: "+a)}catch(t){f(t.message)}return l}window.embedPDP11=function(a,b,c,d){Ya(!1);return $k(a,b,c,d)};window.enableEvents=Ya;window.sendEvent=$a;})();//# sourceMappingURL=/tmp/pdpjs/1.31.0/pdp11-dbg.map
